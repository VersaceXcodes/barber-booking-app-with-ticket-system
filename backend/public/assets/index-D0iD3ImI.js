var Pf=e=>{throw TypeError(e)};var Su=(e,t,s)=>t.has(e)||Pf("Cannot "+s);var $=(e,t,s)=>(Su(e,t,"read from private field"),s?s.call(e):t.get(e)),fe=(e,t,s)=>t.has(e)?Pf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),oe=(e,t,s,n)=>(Su(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Ae=(e,t,s)=>(Su(e,t,"access private method"),s);var Il=(e,t,s,n)=>({set _(a){oe(e,t,a,s)},get _(){return $(e,t,n)}});function Hk(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function Xy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jy={exports:{}},Id={},ev={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=Symbol.for("react.element"),Kk=Symbol.for("react.portal"),Gk=Symbol.for("react.fragment"),Qk=Symbol.for("react.strict_mode"),Yk=Symbol.for("react.profiler"),Zk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Jk=Symbol.for("react.forward_ref"),eN=Symbol.for("react.suspense"),tN=Symbol.for("react.memo"),rN=Symbol.for("react.lazy"),Df=Symbol.iterator;function sN(e){return e===null||typeof e!="object"?null:(e=Df&&e[Df]||e["@@iterator"],typeof e=="function"?e:null)}var tv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rv=Object.assign,sv={};function $i(e,t,s){this.props=e,this.context=t,this.refs=sv,this.updater=s||tv}$i.prototype.isReactComponent={};$i.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nv(){}nv.prototype=$i.prototype;function Dp(e,t,s){this.props=e,this.context=t,this.refs=sv,this.updater=s||tv}var Fp=Dp.prototype=new nv;Fp.constructor=Dp;rv(Fp,$i.prototype);Fp.isPureReactComponent=!0;var Ff=Array.isArray,av=Object.prototype.hasOwnProperty,Mp={current:null},iv={key:!0,ref:!0,__self:!0,__source:!0};function ov(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)av.call(t,n)&&!iv.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Nl,type:e,key:i,ref:o,props:a,_owner:Mp.current}}function nN(e,t){return{$$typeof:Nl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nl}function aN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Mf=/\/+/g;function Au(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aN(""+e.key):t.toString(36)}function yc(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nl:case Kk:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Au(o,0):n,Ff(a)?(s="",e!=null&&(s=e.replace(Mf,"$&/")+"/"),yc(a,t,s,"",function(d){return d})):a!=null&&(Rp(a)&&(a=nN(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Mf,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Ff(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Au(i,l);o+=yc(i,t,s,c,a)}else if(c=sN(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Au(i,l++),o+=yc(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zl(e,t,s){if(e==null)return e;var n=[],a=0;return yc(e,n,"","",function(i){return t.call(s,i,a++)}),n}function iN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Yt={current:null},vc={transition:null},oN={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:vc,ReactCurrentOwner:Mp};function lv(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:zl,forEach:function(e,t,s){zl(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return zl(e,function(){t++}),t},toArray:function(e){return zl(e,function(t){return t})||[]},only:function(e){if(!Rp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=$i;Te.Fragment=Gk;Te.Profiler=Yk;Te.PureComponent=Dp;Te.StrictMode=Qk;Te.Suspense=eN;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oN;Te.act=lv;Te.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=rv({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Mp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)av.call(t,c)&&!iv.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Nl,type:e.type,key:a,ref:i,props:n,_owner:o}};Te.createContext=function(e){return e={$$typeof:Xk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zk,_context:e},e.Consumer=e};Te.createElement=ov;Te.createFactory=function(e){var t=ov.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:Jk,render:e}};Te.isValidElement=Rp;Te.lazy=function(e){return{$$typeof:rN,_payload:{_status:-1,_result:e},_init:iN}};Te.memo=function(e,t){return{$$typeof:tN,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=vc.transition;vc.transition={};try{e()}finally{vc.transition=t}};Te.unstable_act=lv;Te.useCallback=function(e,t){return Yt.current.useCallback(e,t)};Te.useContext=function(e){return Yt.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return Yt.current.useDeferredValue(e)};Te.useEffect=function(e,t){return Yt.current.useEffect(e,t)};Te.useId=function(){return Yt.current.useId()};Te.useImperativeHandle=function(e,t,s){return Yt.current.useImperativeHandle(e,t,s)};Te.useInsertionEffect=function(e,t){return Yt.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return Yt.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return Yt.current.useMemo(e,t)};Te.useReducer=function(e,t,s){return Yt.current.useReducer(e,t,s)};Te.useRef=function(e){return Yt.current.useRef(e)};Te.useState=function(e){return Yt.current.useState(e)};Te.useSyncExternalStore=function(e,t,s){return Yt.current.useSyncExternalStore(e,t,s)};Te.useTransition=function(){return Yt.current.useTransition()};Te.version="18.3.1";ev.exports=Te;var h=ev.exports;const se=Xy(h),zd=Hk({__proto__:null,default:se},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN=h,cN=Symbol.for("react.element"),dN=Symbol.for("react.fragment"),uN=Object.prototype.hasOwnProperty,mN=lN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hN={key:!0,ref:!0,__self:!0,__source:!0};function cv(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)uN.call(t,n)&&!hN.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:cN,type:e,key:i,ref:o,props:a,_owner:mN.current}}Id.Fragment=dN;Id.jsx=cv;Id.jsxs=cv;Jy.exports=Id;var r=Jy.exports,dv={exports:{}},wr={},uv={exports:{}},mv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,k){var D=C.length;C.push(k);e:for(;0<D;){var T=D-1>>>1,P=C[T];if(0<a(P,k))C[T]=k,C[D]=P,D=T;else break e}}function s(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var k=C[0],D=C.pop();if(D!==k){C[0]=D;e:for(var T=0,P=C.length,V=P>>>1;T<V;){var J=2*(T+1)-1,K=C[J],M=J+1,U=C[M];if(0>a(K,D))M<P&&0>a(U,K)?(C[T]=U,C[M]=D,T=M):(C[T]=K,C[J]=D,T=J);else if(M<P&&0>a(U,D))C[T]=U,C[M]=D,T=M;else break e}}return k}function a(C,k){var D=C.sortIndex-k.sortIndex;return D!==0?D:C.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,x=3,p=!1,j=!1,f=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var k=s(d);k!==null;){if(k.callback===null)n(d);else if(k.startTime<=C)n(d),k.sortIndex=k.expirationTime,t(c,k);else break;k=s(d)}}function N(C){if(f=!1,w(C),!j)if(s(c)!==null)j=!0,z(_);else{var k=s(d);k!==null&&ee(N,k.startTime-C)}}function _(C,k){j=!1,f&&(f=!1,b(A),A=-1),p=!0;var D=x;try{for(w(k),m=s(c);m!==null&&(!(m.expirationTime>k)||C&&!H());){var T=m.callback;if(typeof T=="function"){m.callback=null,x=m.priorityLevel;var P=T(m.expirationTime<=k);k=e.unstable_now(),typeof P=="function"?m.callback=P:m===s(c)&&n(c),w(k)}else n(c);m=s(c)}if(m!==null)var V=!0;else{var J=s(d);J!==null&&ee(N,J.startTime-k),V=!1}return V}finally{m=null,x=D,p=!1}}var y=!1,S=null,A=-1,I=5,F=-1;function H(){return!(e.unstable_now()-F<I)}function E(){if(S!==null){var C=e.unstable_now();F=C;var k=!0;try{k=S(!0,C)}finally{k?L():(y=!1,S=null)}}else y=!1}var L;if(typeof g=="function")L=function(){g(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,R=O.port2;O.port1.onmessage=E,L=function(){R.postMessage(null)}}else L=function(){v(E,0)};function z(C){S=C,y||(y=!0,L())}function ee(C,k){A=v(function(){C(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){j||p||(j=!0,z(_))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(C){switch(x){case 1:case 2:case 3:var k=3;break;default:k=x}var D=x;x=k;try{return C()}finally{x=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,k){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var D=x;x=C;try{return k()}finally{x=D}},e.unstable_scheduleCallback=function(C,k,D){var T=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?T+D:T):D=T,C){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=D+P,C={id:u++,callback:k,priorityLevel:C,startTime:D,expirationTime:P,sortIndex:-1},D>T?(C.sortIndex=D,t(d,C),s(c)===null&&C===s(d)&&(f?(b(A),A=-1):f=!0,ee(N,D-T))):(C.sortIndex=P,t(c,C),j||p||(j=!0,z(_))),C},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(C){var k=x;return function(){var D=x;x=k;try{return C.apply(this,arguments)}finally{x=D}}}})(mv);uv.exports=mv;var pN=uv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN=h,br=pN;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hv=new Set,Lo={};function Sa(e,t){wi(e,t),wi(e+"Capture",t)}function wi(e,t){for(Lo[e]=t,e=0;e<t.length;e++)hv.add(t[e])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bm=Object.prototype.hasOwnProperty,fN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rf={},Bf={};function gN(e){return Bm.call(Bf,e)?!0:Bm.call(Rf,e)?!1:fN.test(e)?Bf[e]=!0:(Rf[e]=!0,!1)}function bN(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yN(e,t,s,n){if(t===null||typeof t>"u"||bN(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zt(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tt[e]=new Zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tt[t]=new Zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tt[e]=new Zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tt[e]=new Zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tt[e]=new Zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tt[e]=new Zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tt[e]=new Zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tt[e]=new Zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tt[e]=new Zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bp=/[\-:]([a-z])/g;function Lp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bp,Lp);Tt[t]=new Zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bp,Lp);Tt[t]=new Zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bp,Lp);Tt[t]=new Zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tt[e]=new Zt(e,1,!1,e.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tt[e]=new Zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Op(e,t,s,n){var a=Tt.hasOwnProperty(t)?Tt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yN(t,s,a,n)&&(s=null),n||a===null?gN(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var $s=xN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vl=Symbol.for("react.element"),La=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),Lm=Symbol.for("react.profiler"),pv=Symbol.for("react.provider"),xv=Symbol.for("react.context"),Ip=Symbol.for("react.forward_ref"),Om=Symbol.for("react.suspense"),$m=Symbol.for("react.suspense_list"),zp=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),fv=Symbol.for("react.offscreen"),Lf=Symbol.iterator;function Ji(e){return e===null||typeof e!="object"?null:(e=Lf&&e[Lf]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Object.assign,Eu;function ho(e){if(Eu===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Eu=t&&t[1]||""}return`
`+Eu+e}var Tu=!1;function Pu(e,t){if(!e||Tu)return"";Tu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Tu=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?ho(e):""}function vN(e){switch(e.tag){case 5:return ho(e.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return e=Pu(e.type,!1),e;case 11:return e=Pu(e.type.render,!1),e;case 1:return e=Pu(e.type,!0),e;default:return""}}function Im(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oa:return"Fragment";case La:return"Portal";case Lm:return"Profiler";case $p:return"StrictMode";case Om:return"Suspense";case $m:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xv:return(e.displayName||"Context")+".Consumer";case pv:return(e._context.displayName||"Context")+".Provider";case Ip:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zp:return t=e.displayName||null,t!==null?t:Im(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return Im(e(t))}catch{}}return null}function wN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(t);case 8:return t===$p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jN(e){var t=gv(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ul(e){e._valueTracker||(e._valueTracker=jN(e))}function bv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=gv(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function qc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zm(e,t){var s=t.checked;return nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Of(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Tn(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yv(e,t){t=t.checked,t!=null&&Op(e,"checked",t,!1)}function Vm(e,t){yv(e,t);var s=Tn(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Um(e,t.type,s):t.hasOwnProperty("defaultValue")&&Um(e,t.type,Tn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $f(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Um(e,t,s){(t!=="number"||qc(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var po=Array.isArray;function ti(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Tn(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function If(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ae(92));if(po(s)){if(1<s.length)throw Error(ae(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Tn(s)}}function vv(e,t){var s=Tn(t.value),n=Tn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function zf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wl,jv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oo(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kN=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(e){kN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jo[t]=jo[e]})});function kv(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||jo.hasOwnProperty(e)&&jo[e]?(""+t).trim():t+"px"}function Nv(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=kv(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var NN=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hm(e,t){if(t){if(NN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Km(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gm=null;function Vp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qm=null,ri=null,si=null;function Vf(e){if(e=Sl(e)){if(typeof Qm!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Hd(t),Qm(e.stateNode,e.type,t))}}function _v(e){ri?si?si.push(e):si=[e]:ri=e}function Cv(){if(ri){var e=ri,t=si;if(si=ri=null,Vf(e),t)for(e=0;e<t.length;e++)Vf(t[e])}}function Sv(e,t){return e(t)}function Av(){}var Du=!1;function Ev(e,t,s){if(Du)return e(t,s);Du=!0;try{return Sv(e,t,s)}finally{Du=!1,(ri!==null||si!==null)&&(Av(),Cv())}}function $o(e,t){var s=e.stateNode;if(s===null)return null;var n=Hd(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ae(231,t,typeof s));return s}var Ym=!1;if(Ms)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){Ym=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{Ym=!1}function _N(e,t,s,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var ko=!1,Hc=null,Kc=!1,Zm=null,CN={onError:function(e){ko=!0,Hc=e}};function SN(e,t,s,n,a,i,o,l,c){ko=!1,Hc=null,_N.apply(CN,arguments)}function AN(e,t,s,n,a,i,o,l,c){if(SN.apply(this,arguments),ko){if(ko){var d=Hc;ko=!1,Hc=null}else throw Error(ae(198));Kc||(Kc=!0,Zm=d)}}function Aa(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Tv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uf(e){if(Aa(e)!==e)throw Error(ae(188))}function EN(e){var t=e.alternate;if(!t){if(t=Aa(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Uf(a),e;if(i===n)return Uf(a),t;i=i.sibling}throw Error(ae(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(s.alternate!==n)throw Error(ae(190))}if(s.tag!==3)throw Error(ae(188));return s.stateNode.current===s?e:t}function Pv(e){return e=EN(e),e!==null?Dv(e):null}function Dv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dv(e);if(t!==null)return t;e=e.sibling}return null}var Fv=br.unstable_scheduleCallback,Wf=br.unstable_cancelCallback,TN=br.unstable_shouldYield,PN=br.unstable_requestPaint,ct=br.unstable_now,DN=br.unstable_getCurrentPriorityLevel,Up=br.unstable_ImmediatePriority,Mv=br.unstable_UserBlockingPriority,Gc=br.unstable_NormalPriority,FN=br.unstable_LowPriority,Rv=br.unstable_IdlePriority,Vd=null,us=null;function MN(e){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(Vd,e,void 0,(e.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:LN,RN=Math.log,BN=Math.LN2;function LN(e){return e>>>=0,e===0?32:31-(RN(e)/BN|0)|0}var ql=64,Hl=4194304;function xo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qc(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=xo(l):(i&=o,i!==0&&(n=xo(i)))}else o=s&~a,o!==0?n=xo(o):i!==0&&(n=xo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Kr(t),a=1<<s,n|=e[s],t&=~a;return n}function ON(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $N(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Kr(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&n)&&(a[o]=ON(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Xm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bv(){var e=ql;return ql<<=1,!(ql&4194240)&&(ql=64),e}function Fu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function _l(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kr(t),e[t]=s}function IN(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Kr(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Wp(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Kr(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var We=0;function Lv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ov,qp,$v,Iv,zv,Jm=!1,Kl=[],yn=null,vn=null,wn=null,Io=new Map,zo=new Map,sn=[],zN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qf(e,t){switch(e){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Io.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(t.pointerId)}}function to(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Sl(t),t!==null&&qp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function VN(e,t,s,n,a){switch(t){case"focusin":return yn=to(yn,e,t,s,n,a),!0;case"dragenter":return vn=to(vn,e,t,s,n,a),!0;case"mouseover":return wn=to(wn,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return Io.set(i,to(Io.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,zo.set(i,to(zo.get(i)||null,e,t,s,n,a)),!0}return!1}function Vv(e){var t=Zn(e.target);if(t!==null){var s=Aa(t);if(s!==null){if(t=s.tag,t===13){if(t=Tv(s),t!==null){e.blockedOn=t,zv(e.priority,function(){$v(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=eh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Gm=n,s.target.dispatchEvent(n),Gm=null}else return t=Sl(s),t!==null&&qp(t),e.blockedOn=s,!1;t.shift()}return!0}function Hf(e,t,s){wc(e)&&s.delete(t)}function UN(){Jm=!1,yn!==null&&wc(yn)&&(yn=null),vn!==null&&wc(vn)&&(vn=null),wn!==null&&wc(wn)&&(wn=null),Io.forEach(Hf),zo.forEach(Hf)}function ro(e,t){e.blockedOn===t&&(e.blockedOn=null,Jm||(Jm=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,UN)))}function Vo(e){function t(a){return ro(a,e)}if(0<Kl.length){ro(Kl[0],e);for(var s=1;s<Kl.length;s++){var n=Kl[s];n.blockedOn===e&&(n.blockedOn=null)}}for(yn!==null&&ro(yn,e),vn!==null&&ro(vn,e),wn!==null&&ro(wn,e),Io.forEach(t),zo.forEach(t),s=0;s<sn.length;s++)n=sn[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<sn.length&&(s=sn[0],s.blockedOn===null);)Vv(s),s.blockedOn===null&&sn.shift()}var ni=$s.ReactCurrentBatchConfig,Yc=!0;function WN(e,t,s,n){var a=We,i=ni.transition;ni.transition=null;try{We=1,Hp(e,t,s,n)}finally{We=a,ni.transition=i}}function qN(e,t,s,n){var a=We,i=ni.transition;ni.transition=null;try{We=4,Hp(e,t,s,n)}finally{We=a,ni.transition=i}}function Hp(e,t,s,n){if(Yc){var a=eh(e,t,s,n);if(a===null)Uu(e,t,n,Zc,s),qf(e,n);else if(VN(a,e,t,s,n))n.stopPropagation();else if(qf(e,n),t&4&&-1<zN.indexOf(e)){for(;a!==null;){var i=Sl(a);if(i!==null&&Ov(i),i=eh(e,t,s,n),i===null&&Uu(e,t,n,Zc,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else Uu(e,t,n,null,s)}}var Zc=null;function eh(e,t,s,n){if(Zc=null,e=Vp(n),e=Zn(e),e!==null)if(t=Aa(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Tv(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zc=e,null}function Uv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DN()){case Up:return 1;case Mv:return 4;case Gc:case FN:return 16;case Rv:return 536870912;default:return 16}default:return 16}}var xn=null,Kp=null,jc=null;function Wv(){if(jc)return jc;var e,t=Kp,s=t.length,n,a="value"in xn?xn.value:xn.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return jc=a.slice(e,1<n?1-n:void 0)}function kc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gl(){return!0}function Kf(){return!1}function jr(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gl:Kf,this.isPropagationStopped=Kf,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),t}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gp=jr(Ii),Cl=nt({},Ii,{view:0,detail:0}),HN=jr(Cl),Mu,Ru,so,Ud=nt({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==so&&(so&&e.type==="mousemove"?(Mu=e.screenX-so.screenX,Ru=e.screenY-so.screenY):Ru=Mu=0,so=e),Mu)},movementY:function(e){return"movementY"in e?e.movementY:Ru}}),Gf=jr(Ud),KN=nt({},Ud,{dataTransfer:0}),GN=jr(KN),QN=nt({},Cl,{relatedTarget:0}),Bu=jr(QN),YN=nt({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),ZN=jr(YN),XN=nt({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JN=jr(XN),e_=nt({},Ii,{data:0}),Qf=jr(e_),t_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=s_[e])?!!t[e]:!1}function Qp(){return n_}var a_=nt({},Cl,{key:function(e){if(e.key){var t=t_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?r_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qp,charCode:function(e){return e.type==="keypress"?kc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),i_=jr(a_),o_=nt({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=jr(o_),l_=nt({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qp}),c_=jr(l_),d_=nt({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),u_=jr(d_),m_=nt({},Ud,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),h_=jr(m_),p_=[9,13,27,32],Yp=Ms&&"CompositionEvent"in window,No=null;Ms&&"documentMode"in document&&(No=document.documentMode);var x_=Ms&&"TextEvent"in window&&!No,qv=Ms&&(!Yp||No&&8<No&&11>=No),Zf=" ",Xf=!1;function Hv(e,t){switch(e){case"keyup":return p_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $a=!1;function f_(e,t){switch(e){case"compositionend":return Kv(t);case"keypress":return t.which!==32?null:(Xf=!0,Zf);case"textInput":return e=t.data,e===Zf&&Xf?null:e;default:return null}}function g_(e,t){if($a)return e==="compositionend"||!Yp&&Hv(e,t)?(e=Wv(),jc=Kp=xn=null,$a=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qv&&t.locale!=="ko"?null:t.data;default:return null}}var b_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b_[e.type]:t==="textarea"}function Gv(e,t,s,n){_v(n),t=Xc(t,"onChange"),0<t.length&&(s=new Gp("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var _o=null,Uo=null;function y_(e){a1(e,0)}function Wd(e){var t=Va(e);if(bv(t))return e}function v_(e,t){if(e==="change")return t}var Qv=!1;if(Ms){var Lu;if(Ms){var Ou="oninput"in document;if(!Ou){var e0=document.createElement("div");e0.setAttribute("oninput","return;"),Ou=typeof e0.oninput=="function"}Lu=Ou}else Lu=!1;Qv=Lu&&(!document.documentMode||9<document.documentMode)}function t0(){_o&&(_o.detachEvent("onpropertychange",Yv),Uo=_o=null)}function Yv(e){if(e.propertyName==="value"&&Wd(Uo)){var t=[];Gv(t,Uo,e,Vp(e)),Ev(y_,t)}}function w_(e,t,s){e==="focusin"?(t0(),_o=t,Uo=s,_o.attachEvent("onpropertychange",Yv)):e==="focusout"&&t0()}function j_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wd(Uo)}function k_(e,t){if(e==="click")return Wd(t)}function N_(e,t){if(e==="input"||e==="change")return Wd(t)}function __(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qr=typeof Object.is=="function"?Object.is:__;function Wo(e,t){if(Qr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Bm.call(t,a)||!Qr(e[a],t[a]))return!1}return!0}function r0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function s0(e,t){var s=r0(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=r0(s)}}function Zv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xv(){for(var e=window,t=qc();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=qc(e.document)}return t}function Zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function C_(e){var t=Xv(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Zv(s.ownerDocument.documentElement,s)){if(n!==null&&Zp(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=s0(s,i);var o=s0(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var S_=Ms&&"documentMode"in document&&11>=document.documentMode,Ia=null,th=null,Co=null,rh=!1;function n0(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;rh||Ia==null||Ia!==qc(n)||(n=Ia,"selectionStart"in n&&Zp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Co&&Wo(Co,n)||(Co=n,n=Xc(th,"onSelect"),0<n.length&&(t=new Gp("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Ia)))}function Ql(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var za={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},$u={},Jv={};Ms&&(Jv=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function qd(e){if($u[e])return $u[e];if(!za[e])return e;var t=za[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Jv)return $u[e]=t[s];return e}var e1=qd("animationend"),t1=qd("animationiteration"),r1=qd("animationstart"),s1=qd("transitionend"),n1=new Map,a0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ln(e,t){n1.set(e,t),Sa(t,[e])}for(var Iu=0;Iu<a0.length;Iu++){var zu=a0[Iu],A_=zu.toLowerCase(),E_=zu[0].toUpperCase()+zu.slice(1);Ln(A_,"on"+E_)}Ln(e1,"onAnimationEnd");Ln(t1,"onAnimationIteration");Ln(r1,"onAnimationStart");Ln("dblclick","onDoubleClick");Ln("focusin","onFocus");Ln("focusout","onBlur");Ln(s1,"onTransitionEnd");wi("onMouseEnter",["mouseout","mouseover"]);wi("onMouseLeave",["mouseout","mouseover"]);wi("onPointerEnter",["pointerout","pointerover"]);wi("onPointerLeave",["pointerout","pointerover"]);Sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("cancel close invalid load scroll toggle".split(" ").concat(fo));function i0(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,AN(n,t,void 0,e),e.currentTarget=null}function a1(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;i0(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;i0(a,l,d),i=c}}}if(Kc)throw e=Zm,Kc=!1,Zm=null,e}function Ge(e,t){var s=t[oh];s===void 0&&(s=t[oh]=new Set);var n=e+"__bubble";s.has(n)||(i1(t,e,2,!1),s.add(n))}function Vu(e,t,s){var n=0;t&&(n|=4),i1(s,e,n,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function qo(e){if(!e[Yl]){e[Yl]=!0,hv.forEach(function(s){s!=="selectionchange"&&(T_.has(s)||Vu(s,!1,e),Vu(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,Vu("selectionchange",!1,t))}}function i1(e,t,s,n){switch(Uv(t)){case 1:var a=WN;break;case 4:a=qN;break;default:a=Hp}s=a.bind(null,t,s,e),a=void 0,!Ym||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Uu(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Zn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Ev(function(){var d=i,u=Vp(s),m=[];e:{var x=n1.get(e);if(x!==void 0){var p=Gp,j=e;switch(e){case"keypress":if(kc(s)===0)break e;case"keydown":case"keyup":p=i_;break;case"focusin":j="focus",p=Bu;break;case"focusout":j="blur",p=Bu;break;case"beforeblur":case"afterblur":p=Bu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=c_;break;case e1:case t1:case r1:p=ZN;break;case s1:p=u_;break;case"scroll":p=HN;break;case"wheel":p=h_;break;case"copy":case"cut":case"paste":p=JN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Yf}var f=(t&4)!==0,v=!f&&e==="scroll",b=f?x!==null?x+"Capture":null:x;f=[];for(var g=d,w;g!==null;){w=g;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,b!==null&&(N=$o(g,b),N!=null&&f.push(Ho(g,N,w)))),v)break;g=g.return}0<f.length&&(x=new p(x,j,null,s,u),m.push({event:x,listeners:f}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",x&&s!==Gm&&(j=s.relatedTarget||s.fromElement)&&(Zn(j)||j[Rs]))break e;if((p||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,p?(j=s.relatedTarget||s.toElement,p=d,j=j?Zn(j):null,j!==null&&(v=Aa(j),j!==v||j.tag!==5&&j.tag!==6)&&(j=null)):(p=null,j=d),p!==j)){if(f=Gf,N="onMouseLeave",b="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(f=Yf,N="onPointerLeave",b="onPointerEnter",g="pointer"),v=p==null?x:Va(p),w=j==null?x:Va(j),x=new f(N,g+"leave",p,s,u),x.target=v,x.relatedTarget=w,N=null,Zn(u)===d&&(f=new f(b,g+"enter",j,s,u),f.target=w,f.relatedTarget=v,N=f),v=N,p&&j)t:{for(f=p,b=j,g=0,w=f;w;w=Da(w))g++;for(w=0,N=b;N;N=Da(N))w++;for(;0<g-w;)f=Da(f),g--;for(;0<w-g;)b=Da(b),w--;for(;g--;){if(f===b||b!==null&&f===b.alternate)break t;f=Da(f),b=Da(b)}f=null}else f=null;p!==null&&o0(m,x,p,f,!1),j!==null&&v!==null&&o0(m,v,j,f,!0)}}e:{if(x=d?Va(d):window,p=x.nodeName&&x.nodeName.toLowerCase(),p==="select"||p==="input"&&x.type==="file")var _=v_;else if(Jf(x))if(Qv)_=N_;else{_=j_;var y=w_}else(p=x.nodeName)&&p.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(_=k_);if(_&&(_=_(e,d))){Gv(m,_,s,u);break e}y&&y(e,x,d),e==="focusout"&&(y=x._wrapperState)&&y.controlled&&x.type==="number"&&Um(x,"number",x.value)}switch(y=d?Va(d):window,e){case"focusin":(Jf(y)||y.contentEditable==="true")&&(Ia=y,th=d,Co=null);break;case"focusout":Co=th=Ia=null;break;case"mousedown":rh=!0;break;case"contextmenu":case"mouseup":case"dragend":rh=!1,n0(m,s,u);break;case"selectionchange":if(S_)break;case"keydown":case"keyup":n0(m,s,u)}var S;if(Yp)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else $a?Hv(e,s)&&(A="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(qv&&s.locale!=="ko"&&($a||A!=="onCompositionStart"?A==="onCompositionEnd"&&$a&&(S=Wv()):(xn=u,Kp="value"in xn?xn.value:xn.textContent,$a=!0)),y=Xc(d,A),0<y.length&&(A=new Qf(A,e,null,s,u),m.push({event:A,listeners:y}),S?A.data=S:(S=Kv(s),S!==null&&(A.data=S)))),(S=x_?f_(e,s):g_(e,s))&&(d=Xc(d,"onBeforeInput"),0<d.length&&(u=new Qf("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=S))}a1(m,t)})}function Ho(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Xc(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=$o(e,s),i!=null&&n.unshift(Ho(e,i,a)),i=$o(e,t),i!=null&&n.push(Ho(e,i,a))),e=e.return}return n}function Da(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function o0(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=$o(s,i),c!=null&&o.unshift(Ho(s,c,l))):a||(c=$o(s,i),c!=null&&o.push(Ho(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var P_=/\r\n?/g,D_=/\u0000|\uFFFD/g;function l0(e){return(typeof e=="string"?e:""+e).replace(P_,`
`).replace(D_,"")}function Zl(e,t,s){if(t=l0(t),l0(e)!==t&&s)throw Error(ae(425))}function Jc(){}var sh=null,nh=null;function ah(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,F_=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,M_=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(e){return c0.resolve(null).then(e).catch(R_)}:ih;function R_(e){setTimeout(function(){throw e})}function Wu(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),Vo(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);Vo(t)}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function d0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),ls="__reactFiber$"+zi,Ko="__reactProps$"+zi,Rs="__reactContainer$"+zi,oh="__reactEvents$"+zi,B_="__reactListeners$"+zi,L_="__reactHandles$"+zi;function Zn(e){var t=e[ls];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Rs]||s[ls]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=d0(e);e!==null;){if(s=e[ls])return s;e=d0(e)}return t}e=s,s=e.parentNode}return null}function Sl(e){return e=e[ls]||e[Rs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Va(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Hd(e){return e[Ko]||null}var lh=[],Ua=-1;function On(e){return{current:e}}function Qe(e){0>Ua||(e.current=lh[Ua],lh[Ua]=null,Ua--)}function He(e,t){Ua++,lh[Ua]=e.current,e.current=t}var Pn={},It=On(Pn),nr=On(!1),ga=Pn;function ji(e,t){var s=e.type.contextTypes;if(!s)return Pn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ar(e){return e=e.childContextTypes,e!=null}function ed(){Qe(nr),Qe(It)}function u0(e,t,s){if(It.current!==Pn)throw Error(ae(168));He(It,t),He(nr,s)}function o1(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ae(108,wN(e)||"Unknown",a));return nt({},s,n)}function td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pn,ga=It.current,He(It,e),He(nr,nr.current),!0}function m0(e,t,s){var n=e.stateNode;if(!n)throw Error(ae(169));s?(e=o1(e,t,ga),n.__reactInternalMemoizedMergedChildContext=e,Qe(nr),Qe(It),He(It,e)):Qe(nr),He(nr,s)}var ws=null,Kd=!1,qu=!1;function l1(e){ws===null?ws=[e]:ws.push(e)}function O_(e){Kd=!0,l1(e)}function $n(){if(!qu&&ws!==null){qu=!0;var e=0,t=We;try{var s=ws;for(We=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}ws=null,Kd=!1}catch(a){throw ws!==null&&(ws=ws.slice(e+1)),Fv(Up,$n),a}finally{We=t,qu=!1}}return null}var Wa=[],qa=0,rd=null,sd=0,Er=[],Tr=0,ba=null,Cs=1,Ss="";function Hn(e,t){Wa[qa++]=sd,Wa[qa++]=rd,rd=e,sd=t}function c1(e,t,s){Er[Tr++]=Cs,Er[Tr++]=Ss,Er[Tr++]=ba,ba=e;var n=Cs;e=Ss;var a=32-Kr(n)-1;n&=~(1<<a),s+=1;var i=32-Kr(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Cs=1<<32-Kr(t)+a|s<<a|n,Ss=i+e}else Cs=1<<i|s<<a|n,Ss=e}function Xp(e){e.return!==null&&(Hn(e,1),c1(e,1,0))}function Jp(e){for(;e===rd;)rd=Wa[--qa],Wa[qa]=null,sd=Wa[--qa],Wa[qa]=null;for(;e===ba;)ba=Er[--Tr],Er[Tr]=null,Ss=Er[--Tr],Er[Tr]=null,Cs=Er[--Tr],Er[Tr]=null}var fr=null,xr=null,Xe=!1,Hr=null;function d1(e,t){var s=Pr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function h0(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fr=e,xr=jn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fr=e,xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=ba!==null?{id:Cs,overflow:Ss}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Pr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,fr=e,xr=null,!0):!1;default:return!1}}function ch(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dh(e){if(Xe){var t=xr;if(t){var s=t;if(!h0(e,t)){if(ch(e))throw Error(ae(418));t=jn(s.nextSibling);var n=fr;t&&h0(e,t)?d1(n,s):(e.flags=e.flags&-4097|2,Xe=!1,fr=e)}}else{if(ch(e))throw Error(ae(418));e.flags=e.flags&-4097|2,Xe=!1,fr=e}}}function p0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fr=e}function Xl(e){if(e!==fr)return!1;if(!Xe)return p0(e),Xe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ah(e.type,e.memoizedProps)),t&&(t=xr)){if(ch(e))throw u1(),Error(ae(418));for(;t;)d1(e,t),t=jn(t.nextSibling)}if(p0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){xr=jn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}xr=null}}else xr=fr?jn(e.stateNode.nextSibling):null;return!0}function u1(){for(var e=xr;e;)e=jn(e.nextSibling)}function ki(){xr=fr=null,Xe=!1}function ex(e){Hr===null?Hr=[e]:Hr.push(e)}var $_=$s.ReactCurrentBatchConfig;function no(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ae(309));var n=s.stateNode}if(!n)throw Error(ae(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ae(284));if(!s._owner)throw Error(ae(290,e))}return e}function Jl(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x0(e){var t=e._init;return t(e._payload)}function m1(e){function t(b,g){if(e){var w=b.deletions;w===null?(b.deletions=[g],b.flags|=16):w.push(g)}}function s(b,g){if(!e)return null;for(;g!==null;)t(b,g),g=g.sibling;return null}function n(b,g){for(b=new Map;g!==null;)g.key!==null?b.set(g.key,g):b.set(g.index,g),g=g.sibling;return b}function a(b,g){return b=Cn(b,g),b.index=0,b.sibling=null,b}function i(b,g,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<g?(b.flags|=2,g):w):(b.flags|=2,g)):(b.flags|=1048576,g)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,g,w,N){return g===null||g.tag!==6?(g=Xu(w,b.mode,N),g.return=b,g):(g=a(g,w),g.return=b,g)}function c(b,g,w,N){var _=w.type;return _===Oa?u(b,g,w.props.children,N,w.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===en&&x0(_)===g.type)?(N=a(g,w.props),N.ref=no(b,g,w),N.return=b,N):(N=Tc(w.type,w.key,w.props,null,b.mode,N),N.ref=no(b,g,w),N.return=b,N)}function d(b,g,w,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ju(w,b.mode,N),g.return=b,g):(g=a(g,w.children||[]),g.return=b,g)}function u(b,g,w,N,_){return g===null||g.tag!==7?(g=ha(w,b.mode,N,_),g.return=b,g):(g=a(g,w),g.return=b,g)}function m(b,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Xu(""+g,b.mode,w),g.return=b,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Vl:return w=Tc(g.type,g.key,g.props,null,b.mode,w),w.ref=no(b,null,g),w.return=b,w;case La:return g=Ju(g,b.mode,w),g.return=b,g;case en:var N=g._init;return m(b,N(g._payload),w)}if(po(g)||Ji(g))return g=ha(g,b.mode,w,null),g.return=b,g;Jl(b,g)}return null}function x(b,g,w,N){var _=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(b,g,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vl:return w.key===_?c(b,g,w,N):null;case La:return w.key===_?d(b,g,w,N):null;case en:return _=w._init,x(b,g,_(w._payload),N)}if(po(w)||Ji(w))return _!==null?null:u(b,g,w,N,null);Jl(b,w)}return null}function p(b,g,w,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(w)||null,l(g,b,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Vl:return b=b.get(N.key===null?w:N.key)||null,c(g,b,N,_);case La:return b=b.get(N.key===null?w:N.key)||null,d(g,b,N,_);case en:var y=N._init;return p(b,g,w,y(N._payload),_)}if(po(N)||Ji(N))return b=b.get(w)||null,u(g,b,N,_,null);Jl(g,N)}return null}function j(b,g,w,N){for(var _=null,y=null,S=g,A=g=0,I=null;S!==null&&A<w.length;A++){S.index>A?(I=S,S=null):I=S.sibling;var F=x(b,S,w[A],N);if(F===null){S===null&&(S=I);break}e&&S&&F.alternate===null&&t(b,S),g=i(F,g,A),y===null?_=F:y.sibling=F,y=F,S=I}if(A===w.length)return s(b,S),Xe&&Hn(b,A),_;if(S===null){for(;A<w.length;A++)S=m(b,w[A],N),S!==null&&(g=i(S,g,A),y===null?_=S:y.sibling=S,y=S);return Xe&&Hn(b,A),_}for(S=n(b,S);A<w.length;A++)I=p(S,b,A,w[A],N),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?A:I.key),g=i(I,g,A),y===null?_=I:y.sibling=I,y=I);return e&&S.forEach(function(H){return t(b,H)}),Xe&&Hn(b,A),_}function f(b,g,w,N){var _=Ji(w);if(typeof _!="function")throw Error(ae(150));if(w=_.call(w),w==null)throw Error(ae(151));for(var y=_=null,S=g,A=g=0,I=null,F=w.next();S!==null&&!F.done;A++,F=w.next()){S.index>A?(I=S,S=null):I=S.sibling;var H=x(b,S,F.value,N);if(H===null){S===null&&(S=I);break}e&&S&&H.alternate===null&&t(b,S),g=i(H,g,A),y===null?_=H:y.sibling=H,y=H,S=I}if(F.done)return s(b,S),Xe&&Hn(b,A),_;if(S===null){for(;!F.done;A++,F=w.next())F=m(b,F.value,N),F!==null&&(g=i(F,g,A),y===null?_=F:y.sibling=F,y=F);return Xe&&Hn(b,A),_}for(S=n(b,S);!F.done;A++,F=w.next())F=p(S,b,A,F.value,N),F!==null&&(e&&F.alternate!==null&&S.delete(F.key===null?A:F.key),g=i(F,g,A),y===null?_=F:y.sibling=F,y=F);return e&&S.forEach(function(E){return t(b,E)}),Xe&&Hn(b,A),_}function v(b,g,w,N){if(typeof w=="object"&&w!==null&&w.type===Oa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vl:e:{for(var _=w.key,y=g;y!==null;){if(y.key===_){if(_=w.type,_===Oa){if(y.tag===7){s(b,y.sibling),g=a(y,w.props.children),g.return=b,b=g;break e}}else if(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===en&&x0(_)===y.type){s(b,y.sibling),g=a(y,w.props),g.ref=no(b,y,w),g.return=b,b=g;break e}s(b,y);break}else t(b,y);y=y.sibling}w.type===Oa?(g=ha(w.props.children,b.mode,N,w.key),g.return=b,b=g):(N=Tc(w.type,w.key,w.props,null,b.mode,N),N.ref=no(b,g,w),N.return=b,b=N)}return o(b);case La:e:{for(y=w.key;g!==null;){if(g.key===y)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){s(b,g.sibling),g=a(g,w.children||[]),g.return=b,b=g;break e}else{s(b,g);break}else t(b,g);g=g.sibling}g=Ju(w,b.mode,N),g.return=b,b=g}return o(b);case en:return y=w._init,v(b,g,y(w._payload),N)}if(po(w))return j(b,g,w,N);if(Ji(w))return f(b,g,w,N);Jl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(s(b,g.sibling),g=a(g,w),g.return=b,b=g):(s(b,g),g=Xu(w,b.mode,N),g.return=b,b=g),o(b)):s(b,g)}return v}var Ni=m1(!0),h1=m1(!1),nd=On(null),ad=null,Ha=null,tx=null;function rx(){tx=Ha=ad=null}function sx(e){var t=nd.current;Qe(nd),e._currentValue=t}function uh(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function ai(e,t){ad=e,tx=Ha=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(sr=!0),e.firstContext=null)}function Fr(e){var t=e._currentValue;if(tx!==e)if(e={context:e,memoizedValue:t,next:null},Ha===null){if(ad===null)throw Error(ae(308));Ha=e,ad.dependencies={lanes:0,firstContext:e}}else Ha=Ha.next=e;return t}var Xn=null;function nx(e){Xn===null?Xn=[e]:Xn.push(e)}function p1(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,nx(t)):(s.next=a.next,a.next=s),t.interleaved=s,Bs(e,n)}function Bs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var tn=!1;function ax(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Be&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Bs(e,s)}return a=n.interleaved,a===null?(t.next=t,nx(n)):(t.next=a.next,a.next=t),n.interleaved=t,Bs(e,s)}function Nc(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Wp(e,s)}}function f0(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function id(e,t,s,n){var a=e.updateQueue;tn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var x=l.lane,p=l.eventTime;if((n&x)===x){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,f=l;switch(x=t,p=s,f.tag){case 1:if(j=f.payload,typeof j=="function"){m=j.call(p,m,x);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=f.payload,x=typeof j=="function"?j.call(p,m,x):j,x==null)break e;m=nt({},m,x);break e;case 2:tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[l]:x.push(l))}else p={eventTime:p,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,o|=x;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;x=l,l=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);va|=o,e.lanes=o,e.memoizedState=m}}function g0(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(ae(191,a));a.call(n)}}}var Al={},ms=On(Al),Go=On(Al),Qo=On(Al);function Jn(e){if(e===Al)throw Error(ae(174));return e}function ix(e,t){switch(He(Qo,t),He(Go,e),He(ms,Al),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qm(t,e)}Qe(ms),He(ms,t)}function _i(){Qe(ms),Qe(Go),Qe(Qo)}function f1(e){Jn(Qo.current);var t=Jn(ms.current),s=qm(t,e.type);t!==s&&(He(Go,e),He(ms,s))}function ox(e){Go.current===e&&(Qe(ms),Qe(Go))}var et=On(0);function od(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hu=[];function lx(){for(var e=0;e<Hu.length;e++)Hu[e]._workInProgressVersionPrimary=null;Hu.length=0}var _c=$s.ReactCurrentDispatcher,Ku=$s.ReactCurrentBatchConfig,ya=0,st=null,ft=null,kt=null,ld=!1,So=!1,Yo=0,I_=0;function Dt(){throw Error(ae(321))}function cx(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Qr(e[s],t[s]))return!1;return!0}function dx(e,t,s,n,a,i){if(ya=i,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_c.current=e===null||e.memoizedState===null?W_:q_,e=s(n,a),So){i=0;do{if(So=!1,Yo=0,25<=i)throw Error(ae(301));i+=1,kt=ft=null,t.updateQueue=null,_c.current=H_,e=s(n,a)}while(So)}if(_c.current=cd,t=ft!==null&&ft.next!==null,ya=0,kt=ft=st=null,ld=!1,t)throw Error(ae(300));return e}function ux(){var e=Yo!==0;return Yo=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?st.memoizedState=kt=e:kt=kt.next=e,kt}function Mr(){if(ft===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=kt===null?st.memoizedState:kt.next;if(t!==null)kt=t,ft=e;else{if(e===null)throw Error(ae(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},kt===null?st.memoizedState=kt=e:kt=kt.next=e}return kt}function Zo(e,t){return typeof t=="function"?t(e):t}function Gu(e){var t=Mr(),s=t.queue;if(s===null)throw Error(ae(311));s.lastRenderedReducer=e;var n=ft,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ya&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,st.lanes|=u,va|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Qr(n,t.memoizedState)||(sr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,st.lanes|=i,va|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Qu(e){var t=Mr(),s=t.queue;if(s===null)throw Error(ae(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Qr(i,t.memoizedState)||(sr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function g1(){}function b1(e,t){var s=st,n=Mr(),a=t(),i=!Qr(n.memoizedState,a);if(i&&(n.memoizedState=a,sr=!0),n=n.queue,mx(w1.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||kt!==null&&kt.memoizedState.tag&1){if(s.flags|=2048,Xo(9,v1.bind(null,s,n,a,t),void 0,null),_t===null)throw Error(ae(349));ya&30||y1(s,t,a)}return a}function y1(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function v1(e,t,s,n){t.value=s,t.getSnapshot=n,j1(t)&&k1(e)}function w1(e,t,s){return s(function(){j1(t)&&k1(e)})}function j1(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Qr(e,s)}catch{return!0}}function k1(e){var t=Bs(e,1);t!==null&&Gr(t,e,1,-1)}function b0(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},t.queue=e,e=e.dispatch=U_.bind(null,st,e),[t.memoizedState,e]}function Xo(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function N1(){return Mr().memoizedState}function Cc(e,t,s,n){var a=ss();st.flags|=e,a.memoizedState=Xo(1|t,s,void 0,n===void 0?null:n)}function Gd(e,t,s,n){var a=Mr();n=n===void 0?null:n;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,n!==null&&cx(n,o.deps)){a.memoizedState=Xo(t,s,i,n);return}}st.flags|=e,a.memoizedState=Xo(1|t,s,i,n)}function y0(e,t){return Cc(8390656,8,e,t)}function mx(e,t){return Gd(2048,8,e,t)}function _1(e,t){return Gd(4,2,e,t)}function C1(e,t){return Gd(4,4,e,t)}function S1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function A1(e,t,s){return s=s!=null?s.concat([e]):null,Gd(4,4,S1.bind(null,t,e),s)}function hx(){}function E1(e,t){var s=Mr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&cx(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function T1(e,t){var s=Mr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&cx(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function P1(e,t,s){return ya&21?(Qr(s,t)||(s=Bv(),st.lanes|=s,va|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,sr=!0),e.memoizedState=s)}function z_(e,t){var s=We;We=s!==0&&4>s?s:4,e(!0);var n=Ku.transition;Ku.transition={};try{e(!1),t()}finally{We=s,Ku.transition=n}}function D1(){return Mr().memoizedState}function V_(e,t,s){var n=_n(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},F1(e))M1(t,s);else if(s=p1(e,t,s,n),s!==null){var a=Gt();Gr(s,e,n,a),R1(s,t,n)}}function U_(e,t,s){var n=_n(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(F1(e))M1(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,Qr(l,o)){var c=t.interleaved;c===null?(a.next=a,nx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=p1(e,t,a,n),s!==null&&(a=Gt(),Gr(s,e,n,a),R1(s,t,n))}}function F1(e){var t=e.alternate;return e===st||t!==null&&t===st}function M1(e,t){So=ld=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function R1(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Wp(e,s)}}var cd={readContext:Fr,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},W_={readContext:Fr,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:Fr,useEffect:y0,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Cc(4194308,4,S1.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Cc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cc(4,2,e,t)},useMemo:function(e,t){var s=ss();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=ss();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=V_.bind(null,st,e),[n.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:b0,useDebugValue:hx,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=b0(!1),t=e[0];return e=z_.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=st,a=ss();if(Xe){if(s===void 0)throw Error(ae(407));s=s()}else{if(s=t(),_t===null)throw Error(ae(349));ya&30||y1(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,y0(w1.bind(null,n,i,e),[e]),n.flags|=2048,Xo(9,v1.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=ss(),t=_t.identifierPrefix;if(Xe){var s=Ss,n=Cs;s=(n&~(1<<32-Kr(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=Yo++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=I_++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},q_={readContext:Fr,useCallback:E1,useContext:Fr,useEffect:mx,useImperativeHandle:A1,useInsertionEffect:_1,useLayoutEffect:C1,useMemo:T1,useReducer:Gu,useRef:N1,useState:function(){return Gu(Zo)},useDebugValue:hx,useDeferredValue:function(e){var t=Mr();return P1(t,ft.memoizedState,e)},useTransition:function(){var e=Gu(Zo)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:g1,useSyncExternalStore:b1,useId:D1,unstable_isNewReconciler:!1},H_={readContext:Fr,useCallback:E1,useContext:Fr,useEffect:mx,useImperativeHandle:A1,useInsertionEffect:_1,useLayoutEffect:C1,useMemo:T1,useReducer:Qu,useRef:N1,useState:function(){return Qu(Zo)},useDebugValue:hx,useDeferredValue:function(e){var t=Mr();return ft===null?t.memoizedState=e:P1(t,ft.memoizedState,e)},useTransition:function(){var e=Qu(Zo)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:g1,useSyncExternalStore:b1,useId:D1,unstable_isNewReconciler:!1};function Vr(e,t){if(e&&e.defaultProps){t=nt({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function mh(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:nt({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Qd={isMounted:function(e){return(e=e._reactInternals)?Aa(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Gt(),a=_n(e),i=Es(n,a);i.payload=t,s!=null&&(i.callback=s),t=kn(e,i,a),t!==null&&(Gr(t,e,a,n),Nc(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Gt(),a=_n(e),i=Es(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=kn(e,i,a),t!==null&&(Gr(t,e,a,n),Nc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Gt(),n=_n(e),a=Es(s,n);a.tag=2,t!=null&&(a.callback=t),t=kn(e,a,n),t!==null&&(Gr(t,e,n,s),Nc(t,e,n))}};function v0(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Wo(s,n)||!Wo(a,i):!0}function B1(e,t,s){var n=!1,a=Pn,i=t.contextType;return typeof i=="object"&&i!==null?i=Fr(i):(a=ar(t)?ga:It.current,n=t.contextTypes,i=(n=n!=null)?ji(e,a):Pn),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function w0(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Qd.enqueueReplaceState(t,t.state,null)}function hh(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},ax(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Fr(i):(i=ar(t)?ga:It.current,a.context=ji(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(mh(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Qd.enqueueReplaceState(a,a.state,null),id(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ci(e,t){try{var s="",n=t;do s+=vN(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Yu(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function ph(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var K_=typeof WeakMap=="function"?WeakMap:Map;function L1(e,t,s){s=Es(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){ud||(ud=!0,Nh=n),ph(e,t)},s}function O1(e,t,s){s=Es(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){ph(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){ph(e,t),typeof n!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function j0(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new K_;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=o4.bind(null,e,t,s),t.then(e,e))}function k0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function N0(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Es(-1,1),t.tag=2,kn(s,t,1))),s.lanes|=1),e)}var G_=$s.ReactCurrentOwner,sr=!1;function qt(e,t,s,n){t.child=e===null?h1(t,null,s,n):Ni(t,e.child,s,n)}function _0(e,t,s,n,a){s=s.render;var i=t.ref;return ai(t,a),n=dx(e,t,s,n,i,a),s=ux(),e!==null&&!sr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ls(e,t,a)):(Xe&&s&&Xp(t),t.flags|=1,qt(e,t,n,a),t.child)}function C0(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!wx(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,$1(e,t,i,n,a)):(e=Tc(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Wo,s(o,n)&&e.ref===t.ref)return Ls(e,t,a)}return t.flags|=1,e=Cn(i,n),e.ref=t.ref,e.return=t,t.child=e}function $1(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(Wo(i,n)&&e.ref===t.ref)if(sr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(sr=!0);else return t.lanes=e.lanes,Ls(e,t,a)}return xh(e,t,s,n,a)}function I1(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ga,hr),hr|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Ga,hr),hr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,He(Ga,hr),hr|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,He(Ga,hr),hr|=n;return qt(e,t,a,s),t.child}function z1(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function xh(e,t,s,n,a){var i=ar(s)?ga:It.current;return i=ji(t,i),ai(t,a),s=dx(e,t,s,n,i,a),n=ux(),e!==null&&!sr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ls(e,t,a)):(Xe&&n&&Xp(t),t.flags|=1,qt(e,t,s,a),t.child)}function S0(e,t,s,n,a){if(ar(s)){var i=!0;td(t)}else i=!1;if(ai(t,a),t.stateNode===null)Sc(e,t),B1(t,s,n),hh(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Fr(d):(d=ar(s)?ga:It.current,d=ji(t,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&w0(t,o,n,d),tn=!1;var x=t.memoizedState;o.state=x,id(t,n,o,a),c=t.memoizedState,l!==n||x!==c||nr.current||tn?(typeof u=="function"&&(mh(t,s,u,n),c=t.memoizedState),(l=tn||v0(t,s,l,n,x,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,x1(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Vr(t.type,l),o.props=d,m=t.pendingProps,x=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Fr(c):(c=ar(s)?ga:It.current,c=ji(t,c));var p=s.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||x!==c)&&w0(t,o,n,c),tn=!1,x=t.memoizedState,o.state=x,id(t,n,o,a);var j=t.memoizedState;l!==m||x!==j||nr.current||tn?(typeof p=="function"&&(mh(t,s,p,n),j=t.memoizedState),(d=tn||v0(t,s,d,n,x,j,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),n=!1)}return fh(e,t,s,n,i,a)}function fh(e,t,s,n,a,i){z1(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&m0(t,s,!1),Ls(e,t,i);n=t.stateNode,G_.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ni(t,e.child,null,i),t.child=Ni(t,null,l,i)):qt(e,t,l,i),t.memoizedState=n.state,a&&m0(t,s,!0),t.child}function V1(e){var t=e.stateNode;t.pendingContext?u0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u0(e,t.context,!1),ix(e,t.containerInfo)}function A0(e,t,s,n,a){return ki(),ex(a),t.flags|=256,qt(e,t,s,n),t.child}var gh={dehydrated:null,treeContext:null,retryLane:0};function bh(e){return{baseLanes:e,cachePool:null,transitions:null}}function U1(e,t,s){var n=t.pendingProps,a=et.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(et,a&1),e===null)return dh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Xd(o,n,0,null),e=ha(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bh(s),t.memoizedState=gh,e):px(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Q_(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Cn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Cn(l,i):(i=ha(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?bh(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=gh,n}return i=e.child,e=i.sibling,n=Cn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function px(e,t){return t=Xd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ec(e,t,s,n){return n!==null&&ex(n),Ni(t,e.child,null,s),e=px(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q_(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=Yu(Error(ae(422))),ec(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Xd({mode:"visible",children:n.children},a,0,null),i=ha(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ni(t,e.child,null,o),t.child.memoizedState=bh(o),t.memoizedState=gh,i);if(!(t.mode&1))return ec(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ae(419)),n=Yu(i,n,void 0),ec(e,t,o,n)}if(l=(o&e.childLanes)!==0,sr||l){if(n=_t,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bs(e,a),Gr(n,e,a,-1))}return vx(),n=Yu(Error(ae(421))),ec(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=l4.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,xr=jn(a.nextSibling),fr=t,Xe=!0,Hr=null,e!==null&&(Er[Tr++]=Cs,Er[Tr++]=Ss,Er[Tr++]=ba,Cs=e.id,Ss=e.overflow,ba=t),t=px(t,n.children),t.flags|=4096,t)}function E0(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),uh(e.return,t,s)}function Zu(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function W1(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(qt(e,t,n.children,s),n=et.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&E0(e,s,t);else if(e.tag===19)E0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(He(et,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&od(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Zu(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&od(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Zu(t,!0,s,null,i);break;case"together":Zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ls(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),va|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,s=Cn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Cn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Y_(e,t,s){switch(t.tag){case 3:V1(t),ki();break;case 5:f1(t);break;case 1:ar(t.type)&&td(t);break;case 4:ix(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;He(nd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(He(et,et.current&1),t.flags|=128,null):s&t.child.childLanes?U1(e,t,s):(He(et,et.current&1),e=Ls(e,t,s),e!==null?e.sibling:null);He(et,et.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return W1(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(et,et.current),n)break;return null;case 22:case 23:return t.lanes=0,I1(e,t,s)}return Ls(e,t,s)}var q1,yh,H1,K1;q1=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};yh=function(){};H1=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Jn(ms.current);var i=null;switch(s){case"input":a=zm(e,a),n=zm(e,n),i=[];break;case"select":a=nt({},a,{value:void 0}),n=nt({},n,{value:void 0}),i=[];break;case"textarea":a=Wm(e,a),n=Wm(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Jc)}Hm(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Lo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};K1=function(e,t,s,n){s!==n&&(t.flags|=4)};function ao(e,t){if(!Xe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function Z_(e,t,s){var n=t.pendingProps;switch(Jp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return ar(t.type)&&ed(),Ft(t),null;case 3:return n=t.stateNode,_i(),Qe(nr),Qe(It),lx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hr!==null&&(Sh(Hr),Hr=null))),yh(e,t),Ft(t),null;case 5:ox(t);var a=Jn(Qo.current);if(s=t.type,e!==null&&t.stateNode!=null)H1(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return Ft(t),null}if(e=Jn(ms.current),Xl(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[ls]=t,n[Ko]=i,e=(t.mode&1)!==0,s){case"dialog":Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":case"embed":Ge("load",n);break;case"video":case"audio":for(a=0;a<fo.length;a++)Ge(fo[a],n);break;case"source":Ge("error",n);break;case"img":case"image":case"link":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"input":Of(n,i),Ge("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",n);break;case"textarea":If(n,i),Ge("invalid",n)}Hm(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zl(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zl(n.textContent,l,e),a=["children",""+l]):Lo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ge("scroll",n)}switch(s){case"input":Ul(n),$f(n,i,!0);break;case"textarea":Ul(n),zf(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Jc)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wv(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[ls]=t,e[Ko]=n,q1(e,t,!1,!1),t.stateNode=e;e:{switch(o=Km(s,n),s){case"dialog":Ge("cancel",e),Ge("close",e),a=n;break;case"iframe":case"object":case"embed":Ge("load",e),a=n;break;case"video":case"audio":for(a=0;a<fo.length;a++)Ge(fo[a],e);a=n;break;case"source":Ge("error",e),a=n;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),a=n;break;case"details":Ge("toggle",e),a=n;break;case"input":Of(e,n),a=zm(e,n),Ge("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=nt({},n,{value:void 0}),Ge("invalid",e);break;case"textarea":If(e,n),a=Wm(e,n),Ge("invalid",e);break;default:a=n}Hm(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Nv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jv(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Oo(e,c):typeof c=="number"&&Oo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",e):c!=null&&Op(e,i,c,o))}switch(s){case"input":Ul(e),$f(e,n,!1);break;case"textarea":Ul(e),zf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Tn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ti(e,!!n.multiple,i,!1):n.defaultValue!=null&&ti(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Jc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)K1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(s=Jn(Qo.current),Jn(ms.current),Xl(t)){if(n=t.stateNode,s=t.memoizedProps,n[ls]=t,(i=n.nodeValue!==s)&&(e=fr,e!==null))switch(e.tag){case 3:Zl(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zl(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ls]=t,t.stateNode=n}return Ft(t),null;case 13:if(Qe(et),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xe&&xr!==null&&t.mode&1&&!(t.flags&128))u1(),ki(),t.flags|=98560,i=!1;else if(i=Xl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ae(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ae(317));i[ls]=t}else ki(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),i=!1}else Hr!==null&&(Sh(Hr),Hr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?yt===0&&(yt=3):vx())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return _i(),yh(e,t),e===null&&qo(t.stateNode.containerInfo),Ft(t),null;case 10:return sx(t.type._context),Ft(t),null;case 17:return ar(t.type)&&ed(),Ft(t),null;case 19:if(Qe(et),i=t.memoizedState,i===null)return Ft(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ao(i,!1);else{if(yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=od(e),o!==null){for(t.flags|=128,ao(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return He(et,et.current&1|2),t.child}e=e.sibling}i.tail!==null&&ct()>Si&&(t.flags|=128,n=!0,ao(i,!1),t.lanes=4194304)}else{if(!n)if(e=od(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Xe)return Ft(t),null}else 2*ct()-i.renderingStartTime>Si&&s!==1073741824&&(t.flags|=128,n=!0,ao(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ct(),t.sibling=null,s=et.current,He(et,n?s&1|2:s&1),t):(Ft(t),null);case 22:case 23:return yx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?hr&1073741824&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function X_(e,t){switch(Jp(t),t.tag){case 1:return ar(t.type)&&ed(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _i(),Qe(nr),Qe(It),lx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ox(t),null;case 13:if(Qe(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));ki()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(et),null;case 4:return _i(),null;case 10:return sx(t.type._context),null;case 22:case 23:return yx(),null;case 24:return null;default:return null}}var tc=!1,Bt=!1,J_=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ka(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ot(e,t,n)}else s.current=null}function vh(e,t,s){try{s()}catch(n){ot(e,t,n)}}var T0=!1;function e4(e,t){if(sh=Yc,e=Xv(),Zp(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,x=null;t:for(;;){for(var p;m!==s||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)x=m,m=p;for(;;){if(m===e)break t;if(x===s&&++d===a&&(l=o),x===i&&++u===n&&(c=o),(p=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=p}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(nh={focusedElem:e,selectionRange:s},Yc=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var f=j.memoizedProps,v=j.memoizedState,b=t.stateNode,g=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:Vr(t.type,f),v);b.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(N){ot(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return j=T0,T0=!1,j}function Ao(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&vh(t,s,i)}a=a.next}while(a!==n)}}function Yd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function wh(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function G1(e){var t=e.alternate;t!==null&&(e.alternate=null,G1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ls],delete t[Ko],delete t[oh],delete t[B_],delete t[L_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Q1(e){return e.tag===5||e.tag===3||e.tag===4}function P0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Q1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jh(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Jc));else if(n!==4&&(e=e.child,e!==null))for(jh(e,t,s),e=e.sibling;e!==null;)jh(e,t,s),e=e.sibling}function kh(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(kh(e,t,s),e=e.sibling;e!==null;)kh(e,t,s),e=e.sibling}var St=null,qr=!1;function Gs(e,t,s){for(s=s.child;s!==null;)Y1(e,t,s),s=s.sibling}function Y1(e,t,s){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(Vd,s)}catch{}switch(s.tag){case 5:Bt||Ka(s,t);case 6:var n=St,a=qr;St=null,Gs(e,t,s),St=n,qr=a,St!==null&&(qr?(e=St,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):St.removeChild(s.stateNode));break;case 18:St!==null&&(qr?(e=St,s=s.stateNode,e.nodeType===8?Wu(e.parentNode,s):e.nodeType===1&&Wu(e,s),Vo(e)):Wu(St,s.stateNode));break;case 4:n=St,a=qr,St=s.stateNode.containerInfo,qr=!0,Gs(e,t,s),St=n,qr=a;break;case 0:case 11:case 14:case 15:if(!Bt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vh(s,t,o),a=a.next}while(a!==n)}Gs(e,t,s);break;case 1:if(!Bt&&(Ka(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){ot(s,t,l)}Gs(e,t,s);break;case 21:Gs(e,t,s);break;case 22:s.mode&1?(Bt=(n=Bt)||s.memoizedState!==null,Gs(e,t,s),Bt=n):Gs(e,t,s);break;default:Gs(e,t,s)}}function D0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new J_),t.forEach(function(n){var a=c4.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function $r(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:St=l.stateNode,qr=!1;break e;case 3:St=l.stateNode.containerInfo,qr=!0;break e;case 4:St=l.stateNode.containerInfo,qr=!0;break e}l=l.return}if(St===null)throw Error(ae(160));Y1(i,o,a),St=null,qr=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ot(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Z1(t,e),t=t.sibling}function Z1(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($r(t,e),ts(e),n&4){try{Ao(3,e,e.return),Yd(3,e)}catch(f){ot(e,e.return,f)}try{Ao(5,e,e.return)}catch(f){ot(e,e.return,f)}}break;case 1:$r(t,e),ts(e),n&512&&s!==null&&Ka(s,s.return);break;case 5:if($r(t,e),ts(e),n&512&&s!==null&&Ka(s,s.return),e.flags&32){var a=e.stateNode;try{Oo(a,"")}catch(f){ot(e,e.return,f)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&yv(a,i),Km(l,o);var d=Km(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Nv(a,m):u==="dangerouslySetInnerHTML"?jv(a,m):u==="children"?Oo(a,m):Op(a,u,m,d)}switch(l){case"input":Vm(a,i);break;case"textarea":vv(a,i);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ti(a,!!i.multiple,p,!1):x!==!!i.multiple&&(i.defaultValue!=null?ti(a,!!i.multiple,i.defaultValue,!0):ti(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ko]=i}catch(f){ot(e,e.return,f)}}break;case 6:if($r(t,e),ts(e),n&4){if(e.stateNode===null)throw Error(ae(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(f){ot(e,e.return,f)}}break;case 3:if($r(t,e),ts(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Vo(t.containerInfo)}catch(f){ot(e,e.return,f)}break;case 4:$r(t,e),ts(e);break;case 13:$r(t,e),ts(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(gx=ct())),n&4&&D0(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Bt=(d=Bt)||u,$r(t,e),Bt=d):$r(t,e),ts(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ce=e,u=e.child;u!==null;){for(m=ce=u;ce!==null;){switch(x=ce,p=x.child,x.tag){case 0:case 11:case 14:case 15:Ao(4,x,x.return);break;case 1:Ka(x,x.return);var j=x.stateNode;if(typeof j.componentWillUnmount=="function"){n=x,s=x.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(f){ot(n,s,f)}}break;case 5:Ka(x,x.return);break;case 22:if(x.memoizedState!==null){M0(m);continue}}p!==null?(p.return=x,ce=p):M0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kv("display",o))}catch(f){ot(e,e.return,f)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){ot(e,e.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$r(t,e),ts(e),n&4&&D0(e);break;case 21:break;default:$r(t,e),ts(e)}}function ts(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Q1(s)){var n=s;break e}s=s.return}throw Error(ae(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Oo(a,""),n.flags&=-33);var i=P0(e);kh(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=P0(e);jh(e,l,o);break;default:throw Error(ae(161))}}catch(c){ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function t4(e,t,s){ce=e,X1(e)}function X1(e,t,s){for(var n=(e.mode&1)!==0;ce!==null;){var a=ce,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||tc;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Bt;l=tc;var d=Bt;if(tc=o,(Bt=c)&&!d)for(ce=a;ce!==null;)o=ce,c=o.child,o.tag===22&&o.memoizedState!==null?R0(a):c!==null?(c.return=o,ce=c):R0(a);for(;i!==null;)ce=i,X1(i),i=i.sibling;ce=a,tc=l,Bt=d}F0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ce=i):F0(e)}}function F0(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bt||Yd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Bt)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:Vr(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&g0(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}g0(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Vo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Bt||t.flags&512&&wh(t)}catch(x){ot(t,t.return,x)}}if(t===e){ce=null;break}if(s=t.sibling,s!==null){s.return=t.return,ce=s;break}ce=t.return}}function M0(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ce=s;break}ce=t.return}}function R0(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Yd(4,t)}catch(c){ot(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ot(t,a,c)}}var i=t.return;try{wh(t)}catch(c){ot(t,i,c)}break;case 5:var o=t.return;try{wh(t)}catch(c){ot(t,o,c)}}}catch(c){ot(t,t.return,c)}if(t===e){ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ce=l;break}ce=t.return}}var r4=Math.ceil,dd=$s.ReactCurrentDispatcher,xx=$s.ReactCurrentOwner,Dr=$s.ReactCurrentBatchConfig,Be=0,_t=null,ht=null,Et=0,hr=0,Ga=On(0),yt=0,Jo=null,va=0,Zd=0,fx=0,Eo=null,rr=null,gx=0,Si=1/0,vs=null,ud=!1,Nh=null,Nn=null,rc=!1,fn=null,md=0,To=0,_h=null,Ac=-1,Ec=0;function Gt(){return Be&6?ct():Ac!==-1?Ac:Ac=ct()}function _n(e){return e.mode&1?Be&2&&Et!==0?Et&-Et:$_.transition!==null?(Ec===0&&(Ec=Bv()),Ec):(e=We,e!==0||(e=window.event,e=e===void 0?16:Uv(e.type)),e):1}function Gr(e,t,s,n){if(50<To)throw To=0,_h=null,Error(ae(185));_l(e,s,n),(!(Be&2)||e!==_t)&&(e===_t&&(!(Be&2)&&(Zd|=s),yt===4&&nn(e,Et)),ir(e,n),s===1&&Be===0&&!(t.mode&1)&&(Si=ct()+500,Kd&&$n()))}function ir(e,t){var s=e.callbackNode;$N(e,t);var n=Qc(e,e===_t?Et:0);if(n===0)s!==null&&Wf(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&Wf(s),t===1)e.tag===0?O_(B0.bind(null,e)):l1(B0.bind(null,e)),M_(function(){!(Be&6)&&$n()}),s=null;else{switch(Lv(n)){case 1:s=Up;break;case 4:s=Mv;break;case 16:s=Gc;break;case 536870912:s=Rv;break;default:s=Gc}s=iw(s,J1.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function J1(e,t){if(Ac=-1,Ec=0,Be&6)throw Error(ae(327));var s=e.callbackNode;if(ii()&&e.callbackNode!==s)return null;var n=Qc(e,e===_t?Et:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=hd(e,n);else{t=n;var a=Be;Be|=2;var i=tw();(_t!==e||Et!==t)&&(vs=null,Si=ct()+500,ma(e,t));do try{a4();break}catch(l){ew(e,l)}while(!0);rx(),dd.current=i,Be=a,ht!==null?t=0:(_t=null,Et=0,t=yt)}if(t!==0){if(t===2&&(a=Xm(e),a!==0&&(n=a,t=Ch(e,a))),t===1)throw s=Jo,ma(e,0),nn(e,n),ir(e,ct()),s;if(t===6)nn(e,n);else{if(a=e.current.alternate,!(n&30)&&!s4(a)&&(t=hd(e,n),t===2&&(i=Xm(e),i!==0&&(n=i,t=Ch(e,i))),t===1))throw s=Jo,ma(e,0),nn(e,n),ir(e,ct()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:Kn(e,rr,vs);break;case 3:if(nn(e,n),(n&130023424)===n&&(t=gx+500-ct(),10<t)){if(Qc(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Gt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ih(Kn.bind(null,e,rr,vs),t);break}Kn(e,rr,vs);break;case 4:if(nn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Kr(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*r4(n/1960))-n,10<n){e.timeoutHandle=ih(Kn.bind(null,e,rr,vs),n);break}Kn(e,rr,vs);break;case 5:Kn(e,rr,vs);break;default:throw Error(ae(329))}}}return ir(e,ct()),e.callbackNode===s?J1.bind(null,e):null}function Ch(e,t){var s=Eo;return e.current.memoizedState.isDehydrated&&(ma(e,t).flags|=256),e=hd(e,t),e!==2&&(t=rr,rr=s,t!==null&&Sh(t)),e}function Sh(e){rr===null?rr=e:rr.push.apply(rr,e)}function s4(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Qr(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~fx,t&=~Zd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Kr(t),n=1<<s;e[s]=-1,t&=~n}}function B0(e){if(Be&6)throw Error(ae(327));ii();var t=Qc(e,0);if(!(t&1))return ir(e,ct()),null;var s=hd(e,t);if(e.tag!==0&&s===2){var n=Xm(e);n!==0&&(t=n,s=Ch(e,n))}if(s===1)throw s=Jo,ma(e,0),nn(e,t),ir(e,ct()),s;if(s===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,rr,vs),ir(e,ct()),null}function bx(e,t){var s=Be;Be|=1;try{return e(t)}finally{Be=s,Be===0&&(Si=ct()+500,Kd&&$n())}}function wa(e){fn!==null&&fn.tag===0&&!(Be&6)&&ii();var t=Be;Be|=1;var s=Dr.transition,n=We;try{if(Dr.transition=null,We=1,e)return e()}finally{We=n,Dr.transition=s,Be=t,!(Be&6)&&$n()}}function yx(){hr=Ga.current,Qe(Ga)}function ma(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,F_(s)),ht!==null)for(s=ht.return;s!==null;){var n=s;switch(Jp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ed();break;case 3:_i(),Qe(nr),Qe(It),lx();break;case 5:ox(n);break;case 4:_i();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:sx(n.type._context);break;case 22:case 23:yx()}s=s.return}if(_t=e,ht=e=Cn(e.current,null),Et=hr=t,yt=0,Jo=null,fx=Zd=va=0,rr=Eo=null,Xn!==null){for(t=0;t<Xn.length;t++)if(s=Xn[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}Xn=null}return e}function ew(e,t){do{var s=ht;try{if(rx(),_c.current=cd,ld){for(var n=st.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}ld=!1}if(ya=0,kt=ft=st=null,So=!1,Yo=0,xx.current=null,s===null||s.return===null){yt=1,Jo=t,ht=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=k0(o);if(p!==null){p.flags&=-257,N0(p,o,l,i,t),p.mode&1&&j0(i,d,t),t=p,c=d;var j=t.updateQueue;if(j===null){var f=new Set;f.add(c),t.updateQueue=f}else j.add(c);break e}else{if(!(t&1)){j0(i,d,t),vx();break e}c=Error(ae(426))}}else if(Xe&&l.mode&1){var v=k0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),N0(v,o,l,i,t),ex(Ci(c,l));break e}}i=c=Ci(c,l),yt!==4&&(yt=2),Eo===null?Eo=[i]:Eo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=L1(i,c,t);f0(i,b);break e;case 1:l=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nn===null||!Nn.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=O1(i,l,t);f0(i,N);break e}}i=i.return}while(i!==null)}sw(s)}catch(_){t=_,ht===s&&s!==null&&(ht=s=s.return);continue}break}while(!0)}function tw(){var e=dd.current;return dd.current=cd,e===null?cd:e}function vx(){(yt===0||yt===3||yt===2)&&(yt=4),_t===null||!(va&268435455)&&!(Zd&268435455)||nn(_t,Et)}function hd(e,t){var s=Be;Be|=2;var n=tw();(_t!==e||Et!==t)&&(vs=null,ma(e,t));do try{n4();break}catch(a){ew(e,a)}while(!0);if(rx(),Be=s,dd.current=n,ht!==null)throw Error(ae(261));return _t=null,Et=0,yt}function n4(){for(;ht!==null;)rw(ht)}function a4(){for(;ht!==null&&!TN();)rw(ht)}function rw(e){var t=aw(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?sw(e):ht=t,xx.current=null}function sw(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=X_(s,t),s!==null){s.flags&=32767,ht=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yt=6,ht=null;return}}else if(s=Z_(s,t,hr),s!==null){ht=s;return}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);yt===0&&(yt=5)}function Kn(e,t,s){var n=We,a=Dr.transition;try{Dr.transition=null,We=1,i4(e,t,s,n)}finally{Dr.transition=a,We=n}return null}function i4(e,t,s,n){do ii();while(fn!==null);if(Be&6)throw Error(ae(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(IN(e,i),e===_t&&(ht=_t=null,Et=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||rc||(rc=!0,iw(Gc,function(){return ii(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Dr.transition,Dr.transition=null;var o=We;We=1;var l=Be;Be|=4,xx.current=null,e4(e,s),Z1(s,e),C_(nh),Yc=!!sh,nh=sh=null,e.current=s,t4(s),PN(),Be=l,We=o,Dr.transition=i}else e.current=s;if(rc&&(rc=!1,fn=e,md=a),i=e.pendingLanes,i===0&&(Nn=null),MN(s.stateNode),ir(e,ct()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(ud)throw ud=!1,e=Nh,Nh=null,e;return md&1&&e.tag!==0&&ii(),i=e.pendingLanes,i&1?e===_h?To++:(To=0,_h=e):To=0,$n(),null}function ii(){if(fn!==null){var e=Lv(md),t=Dr.transition,s=We;try{if(Dr.transition=null,We=16>e?16:e,fn===null)var n=!1;else{if(e=fn,fn=null,md=0,Be&6)throw Error(ae(331));var a=Be;for(Be|=4,ce=e.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ce=d;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:Ao(8,u,i)}var m=u.child;if(m!==null)m.return=u,ce=m;else for(;ce!==null;){u=ce;var x=u.sibling,p=u.return;if(G1(u),u===d){ce=null;break}if(x!==null){x.return=p,ce=x;break}ce=p}}}var j=i.alternate;if(j!==null){var f=j.child;if(f!==null){j.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(f!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ao(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ce=b;break e}ce=i.return}}var g=e.current;for(ce=g;ce!==null;){o=ce;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ce=w;else e:for(o=g;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yd(9,l)}}catch(_){ot(l,l.return,_)}if(l===o){ce=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ce=N;break e}ce=l.return}}if(Be=a,$n(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(Vd,e)}catch{}n=!0}return n}finally{We=s,Dr.transition=t}}return!1}function L0(e,t,s){t=Ci(s,t),t=L1(e,t,1),e=kn(e,t,1),t=Gt(),e!==null&&(_l(e,1,t),ir(e,t))}function ot(e,t,s){if(e.tag===3)L0(e,e,s);else for(;t!==null;){if(t.tag===3){L0(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Nn===null||!Nn.has(n))){e=Ci(s,e),e=O1(t,e,1),t=kn(t,e,1),e=Gt(),t!==null&&(_l(t,1,e),ir(t,e));break}}t=t.return}}function o4(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Gt(),e.pingedLanes|=e.suspendedLanes&s,_t===e&&(Et&s)===s&&(yt===4||yt===3&&(Et&130023424)===Et&&500>ct()-gx?ma(e,0):fx|=s),ir(e,t)}function nw(e,t){t===0&&(e.mode&1?(t=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):t=1);var s=Gt();e=Bs(e,t),e!==null&&(_l(e,t,s),ir(e,s))}function l4(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),nw(e,s)}function c4(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),nw(e,s)}var aw;aw=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||nr.current)sr=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return sr=!1,Y_(e,t,s);sr=!!(e.flags&131072)}else sr=!1,Xe&&t.flags&1048576&&c1(t,sd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Sc(e,t),e=t.pendingProps;var a=ji(t,It.current);ai(t,s),a=dx(null,t,n,e,a,s);var i=ux();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ar(n)?(i=!0,td(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ax(t),a.updater=Qd,t.stateNode=a,a._reactInternals=t,hh(t,n,e,s),t=fh(null,t,n,!0,i,s)):(t.tag=0,Xe&&i&&Xp(t),qt(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Sc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=u4(n),e=Vr(n,e),a){case 0:t=xh(null,t,n,e,s);break e;case 1:t=S0(null,t,n,e,s);break e;case 11:t=_0(null,t,n,e,s);break e;case 14:t=C0(null,t,n,Vr(n.type,e),s);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vr(n,a),xh(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vr(n,a),S0(e,t,n,a,s);case 3:e:{if(V1(t),e===null)throw Error(ae(387));n=t.pendingProps,i=t.memoizedState,a=i.element,x1(e,t),id(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ci(Error(ae(423)),t),t=A0(e,t,n,s,a);break e}else if(n!==a){a=Ci(Error(ae(424)),t),t=A0(e,t,n,s,a);break e}else for(xr=jn(t.stateNode.containerInfo.firstChild),fr=t,Xe=!0,Hr=null,s=h1(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ki(),n===a){t=Ls(e,t,s);break e}qt(e,t,n,s)}t=t.child}return t;case 5:return f1(t),e===null&&dh(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,ah(n,a)?o=null:i!==null&&ah(n,i)&&(t.flags|=32),z1(e,t),qt(e,t,o,s),t.child;case 6:return e===null&&dh(t),null;case 13:return U1(e,t,s);case 4:return ix(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ni(t,null,n,s):qt(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vr(n,a),_0(e,t,n,a,s);case 7:return qt(e,t,t.pendingProps,s),t.child;case 8:return qt(e,t,t.pendingProps.children,s),t.child;case 12:return qt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,He(nd,n._currentValue),n._currentValue=o,i!==null)if(Qr(i.value,o)){if(i.children===a.children&&!nr.current){t=Ls(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Es(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),uh(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ae(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),uh(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qt(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ai(t,s),a=Fr(a),n=n(a),t.flags|=1,qt(e,t,n,s),t.child;case 14:return n=t.type,a=Vr(n,t.pendingProps),a=Vr(n.type,a),C0(e,t,n,a,s);case 15:return $1(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Vr(n,a),Sc(e,t),t.tag=1,ar(n)?(e=!0,td(t)):e=!1,ai(t,s),B1(t,n,a),hh(t,n,a,s),fh(null,t,n,!0,e,s);case 19:return W1(e,t,s);case 22:return I1(e,t,s)}throw Error(ae(156,t.tag))};function iw(e,t){return Fv(e,t)}function d4(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,s,n){return new d4(e,t,s,n)}function wx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function u4(e){if(typeof e=="function")return wx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ip)return 11;if(e===zp)return 14}return 2}function Cn(e,t){var s=e.alternate;return s===null?(s=Pr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Tc(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")wx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Oa:return ha(s.children,a,i,t);case $p:o=8,a|=8;break;case Lm:return e=Pr(12,s,t,a|2),e.elementType=Lm,e.lanes=i,e;case Om:return e=Pr(13,s,t,a),e.elementType=Om,e.lanes=i,e;case $m:return e=Pr(19,s,t,a),e.elementType=$m,e.lanes=i,e;case fv:return Xd(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pv:o=10;break e;case xv:o=9;break e;case Ip:o=11;break e;case zp:o=14;break e;case en:o=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=Pr(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ha(e,t,s,n){return e=Pr(7,e,n,t),e.lanes=s,e}function Xd(e,t,s,n){return e=Pr(22,e,n,t),e.elementType=fv,e.lanes=s,e.stateNode={isHidden:!1},e}function Xu(e,t,s){return e=Pr(6,e,null,t),e.lanes=s,e}function Ju(e,t,s){return t=Pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m4(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jx(e,t,s,n,a,i,o,l,c){return e=new m4(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Pr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ax(i),e}function h4(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:La,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function ow(e){if(!e)return Pn;e=e._reactInternals;e:{if(Aa(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var s=e.type;if(ar(s))return o1(e,s,t)}return t}function lw(e,t,s,n,a,i,o,l,c){return e=jx(s,n,!0,e,a,i,o,l,c),e.context=ow(null),s=e.current,n=Gt(),a=_n(s),i=Es(n,a),i.callback=t??null,kn(s,i,a),e.current.lanes=a,_l(e,a,n),ir(e,n),e}function Jd(e,t,s,n){var a=t.current,i=Gt(),o=_n(a);return s=ow(s),t.context===null?t.context=s:t.pendingContext=s,t=Es(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=kn(a,t,o),e!==null&&(Gr(e,a,o,i),Nc(e,a,o)),o}function pd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function O0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function kx(e,t){O0(e,t),(e=e.alternate)&&O0(e,t)}function p4(){return null}var cw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nx(e){this._internalRoot=e}eu.prototype.render=Nx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));Jd(e,t,null,null)};eu.prototype.unmount=Nx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wa(function(){Jd(null,e,null,null)}),t[Rs]=null}};function eu(e){this._internalRoot=e}eu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Iv();e={blockedOn:null,target:e,priority:t};for(var s=0;s<sn.length&&t!==0&&t<sn[s].priority;s++);sn.splice(s,0,e),s===0&&Vv(e)}};function _x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $0(){}function x4(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=pd(o);i.call(d)}}var o=lw(t,n,e,0,null,!1,!1,"",$0);return e._reactRootContainer=o,e[Rs]=o.current,qo(e.nodeType===8?e.parentNode:e),wa(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=pd(c);l.call(d)}}var c=jx(e,0,!1,null,null,!1,!1,"",$0);return e._reactRootContainer=c,e[Rs]=c.current,qo(e.nodeType===8?e.parentNode:e),wa(function(){Jd(t,c,s,n)}),c}function ru(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=pd(o);l.call(c)}}Jd(t,o,e,a)}else o=x4(s,t,e,a,n);return pd(o)}Ov=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=xo(t.pendingLanes);s!==0&&(Wp(t,s|1),ir(t,ct()),!(Be&6)&&(Si=ct()+500,$n()))}break;case 13:wa(function(){var n=Bs(e,1);if(n!==null){var a=Gt();Gr(n,e,1,a)}}),kx(e,1)}};qp=function(e){if(e.tag===13){var t=Bs(e,134217728);if(t!==null){var s=Gt();Gr(t,e,134217728,s)}kx(e,134217728)}};$v=function(e){if(e.tag===13){var t=_n(e),s=Bs(e,t);if(s!==null){var n=Gt();Gr(s,e,t,n)}kx(e,t)}};Iv=function(){return We};zv=function(e,t){var s=We;try{return We=e,t()}finally{We=s}};Qm=function(e,t,s){switch(t){case"input":if(Vm(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Hd(n);if(!a)throw Error(ae(90));bv(n),Vm(n,a)}}}break;case"textarea":vv(e,s);break;case"select":t=s.value,t!=null&&ti(e,!!s.multiple,t,!1)}};Sv=bx;Av=wa;var f4={usingClientEntryPoint:!1,Events:[Sl,Va,Hd,_v,Cv,bx]},io={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g4={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pv(e),e===null?null:e.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||p4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{Vd=sc.inject(g4),us=sc}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f4;wr.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(t))throw Error(ae(200));return h4(e,t,null,s)};wr.createRoot=function(e,t){if(!_x(e))throw Error(ae(299));var s=!1,n="",a=cw;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=jx(e,1,!1,null,null,s,!1,n,a),e[Rs]=t.current,qo(e.nodeType===8?e.parentNode:e),new Nx(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=Pv(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return wa(e)};wr.hydrate=function(e,t,s){if(!tu(t))throw Error(ae(200));return ru(null,e,t,!0,s)};wr.hydrateRoot=function(e,t,s){if(!_x(e))throw Error(ae(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=cw;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=lw(t,null,e,1,s??null,a,!1,i,o),e[Rs]=t.current,qo(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new eu(t)};wr.render=function(e,t,s){if(!tu(t))throw Error(ae(200));return ru(null,e,t,!1,s)};wr.unmountComponentAtNode=function(e){if(!tu(e))throw Error(ae(40));return e._reactRootContainer?(wa(function(){ru(null,null,e,!1,function(){e._reactRootContainer=null,e[Rs]=null})}),!0):!1};wr.unstable_batchedUpdates=bx;wr.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!tu(s))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return ru(e,t,s,!1,n)};wr.version="18.3.1-next-f1338f8080-20240426";function dw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dw)}catch(e){console.error(e)}}dw(),dv.exports=wr;var Cx=dv.exports;const uw=Xy(Cx);var mw,I0=Cx;mw=I0.createRoot,I0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},el.apply(this,arguments)}var gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gn||(gn={}));const z0="popstate";function b4(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Ah("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:xd(a)}return v4(t,s,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y4(){return Math.random().toString(36).substr(2,8)}function V0(e,t){return{usr:e.state,key:e.key,idx:t}}function Ah(e,t,s,n){return s===void 0&&(s=null),el({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vi(t):t,{state:s,key:t&&t.key||n||y4()})}function xd(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vi(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function v4(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=gn.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(el({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=gn.Pop;let v=u(),b=v==null?null:v-d;d=v,c&&c({action:l,location:f.location,delta:b})}function x(v,b){l=gn.Push;let g=Ah(f.location,v,b);d=u()+1;let w=V0(g,d),N=f.createHref(g);try{o.pushState(w,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(N)}i&&c&&c({action:l,location:f.location,delta:1})}function p(v,b){l=gn.Replace;let g=Ah(f.location,v,b);d=u();let w=V0(g,d),N=f.createHref(g);o.replaceState(w,"",N),i&&c&&c({action:l,location:f.location,delta:0})}function j(v){let b=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof v=="string"?v:xd(v);return g=g.replace(/ $/,"%20"),dt(b,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,b)}let f={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(z0,m),c=v,()=>{a.removeEventListener(z0,m),c=null}},createHref(v){return t(a,v)},createURL:j,encodeLocation(v){let b=j(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:p,go(v){return o.go(v)}};return f}var U0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U0||(U0={}));function w4(e,t,s){return s===void 0&&(s="/"),j4(e,t,s)}function j4(e,t,s,n){let a=typeof t=="string"?Vi(t):t,i=Sx(a.pathname||"/",s);if(i==null)return null;let o=pw(e);k4(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=R4(i);l=D4(o[c],d)}return l}function pw(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Sn([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),pw(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:T4(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of xw(i.path))a(i,o,c)}),t}function xw(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=xw(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function k4(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:P4(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const N4=/^:[\w-]+$/,_4=3,C4=2,S4=1,A4=10,E4=-2,W0=e=>e==="*";function T4(e,t){let s=e.split("/"),n=s.length;return s.some(W0)&&(n+=E4),t&&(n+=C4),s.filter(a=>!W0(a)).reduce((a,i)=>a+(N4.test(i)?_4:i===""?S4:A4),n)}function P4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function D4(e,t,s){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=F4({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),x=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Sn([i,m.pathname]),pathnameBase:$4(Sn([i,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(i=Sn([i,m.pathnameBase]))}return o}function F4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=M4(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:x,isOptional:p}=u;if(x==="*"){let f=l[m]||"";o=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}const j=l[m];return p&&!j?d[x]=void 0:d[x]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function M4(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),hw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function R4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Sx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function B4(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Vi(e):e;return{pathname:s?s.startsWith("/")?s:L4(s,t):t,search:I4(n),hash:z4(a)}}function L4(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function em(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function O4(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Ax(e,t){let s=O4(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Ex(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Vi(e):(a=el({},e),dt(!a.pathname||!a.pathname.includes("?"),em("?","pathname","search",a)),dt(!a.pathname||!a.pathname.includes("#"),em("#","pathname","hash",a)),dt(!a.search||!a.search.includes("#"),em("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let m=t.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),m-=1;a.pathname=x.join("/")}l=m>=0?t[m]:"/"}let c=B4(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Sn=e=>e.join("/").replace(/\/\/+/g,"/"),$4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,z4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function V4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fw=["post","put","patch","delete"];new Set(fw);const U4=["get",...fw];new Set(U4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},tl.apply(this,arguments)}const Tx=h.createContext(null),W4=h.createContext(null),In=h.createContext(null),su=h.createContext(null),Is=h.createContext({outlet:null,matches:[],isDataRoute:!1}),gw=h.createContext(null);function q4(e,t){let{relative:s}=t===void 0?{}:t;Ui()||dt(!1);let{basename:n,navigator:a}=h.useContext(In),{hash:i,pathname:o,search:l}=yw(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Sn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Ui(){return h.useContext(su)!=null}function zs(){return Ui()||dt(!1),h.useContext(su).location}function bw(e){h.useContext(In).static||h.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=h.useContext(Is);return e?n3():H4()}function H4(){Ui()||dt(!1);let e=h.useContext(Tx),{basename:t,future:s,navigator:n}=h.useContext(In),{matches:a}=h.useContext(Is),{pathname:i}=zs(),o=JSON.stringify(Ax(a,s.v7_relativeSplatPath)),l=h.useRef(!1);return bw(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Ex(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Sn([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}function Px(){let{matches:e}=h.useContext(Is),t=e[e.length-1];return t?t.params:{}}function yw(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=h.useContext(In),{matches:a}=h.useContext(Is),{pathname:i}=zs(),o=JSON.stringify(Ax(a,n.v7_relativeSplatPath));return h.useMemo(()=>Ex(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function K4(e,t){return G4(e,t)}function G4(e,t,s,n){Ui()||dt(!1);let{navigator:a}=h.useContext(In),{matches:i}=h.useContext(Is),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=zs(),u;if(t){var m;let v=typeof t=="string"?Vi(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||dt(!1),u=v}else u=d;let x=u.pathname||"/",p=x;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+x.replace(/^\//,"").split("/").slice(v.length).join("/")}let j=w4(e,{pathname:p}),f=J4(j&&j.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Sn([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Sn([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,s,n);return t&&f?h.createElement(su.Provider,{value:{location:tl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:gn.Pop}},f):f}function Q4(){let e=s3(),t=V4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),s?h.createElement("pre",{style:a},s):null,null)}const Y4=h.createElement(Q4,null);class Z4 extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?h.createElement(Is.Provider,{value:this.props.routeContext},h.createElement(gw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X4(e){let{routeContext:t,match:s,children:n}=e,a=h.useContext(Tx);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),h.createElement(Is.Provider,{value:t},n)}function J4(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||dt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:p}=s,j=m.route.loader&&x[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,x)=>{let p,j=!1,f=null,v=null;s&&(p=l&&m.route.id?l[m.route.id]:void 0,f=m.route.errorElement||Y4,c&&(d<0&&x===0?(a3("route-fallback"),j=!0,v=null):d===x&&(j=!0,v=m.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,x+1)),g=()=>{let w;return p?w=f:j?w=v:m.route.Component?w=h.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=u,h.createElement(X4,{match:m,routeContext:{outlet:u,matches:b,isDataRoute:s!=null},children:w})};return s&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?h.createElement(Z4,{location:s.location,revalidation:s.revalidation,component:f,error:p,children:g(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):g()},null)}var vw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(vw||{}),ww=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ww||{});function e3(e){let t=h.useContext(Tx);return t||dt(!1),t}function t3(e){let t=h.useContext(W4);return t||dt(!1),t}function r3(e){let t=h.useContext(Is);return t||dt(!1),t}function jw(e){let t=r3(),s=t.matches[t.matches.length-1];return s.route.id||dt(!1),s.route.id}function s3(){var e;let t=h.useContext(gw),s=t3(),n=jw();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function n3(){let{router:e}=e3(vw.UseNavigateStable),t=jw(ww.UseNavigateStable),s=h.useRef(!1);return bw(()=>{s.current=!0}),h.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,tl({fromRouteId:t},i)))},[e,t])}const q0={};function a3(e,t,s){q0[e]||(q0[e]=!0)}function i3(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Dx(e){let{to:t,replace:s,state:n,relative:a}=e;Ui()||dt(!1);let{future:i,static:o}=h.useContext(In),{matches:l}=h.useContext(Is),{pathname:c}=zs(),d=Ie(),u=Ex(t,Ax(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return h.useEffect(()=>d(JSON.parse(m),{replace:s,state:n,relative:a}),[d,m,a,s,n]),null}function Se(e){dt(!1)}function o3(e){let{basename:t="/",children:s=null,location:n,navigationType:a=gn.Pop,navigator:i,static:o=!1,future:l}=e;Ui()&&dt(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:i,static:o,future:tl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Vi(n));let{pathname:u="/",search:m="",hash:x="",state:p=null,key:j="default"}=n,f=h.useMemo(()=>{let v=Sx(u,c);return v==null?null:{location:{pathname:v,search:m,hash:x,state:p,key:j},navigationType:a}},[c,u,m,x,p,j,a]);return f==null?null:h.createElement(In.Provider,{value:d},h.createElement(su.Provider,{children:s,value:f}))}function l3(e){let{children:t,location:s}=e;return K4(Eh(t),s)}new Promise(()=>{});function Eh(e,t){t===void 0&&(t=[]);let s=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let i=[...t,a];if(n.type===h.Fragment){s.push.apply(s,Eh(n.props.children,i));return}n.type!==Se&&dt(!1),!n.props.index||!n.props.children||dt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Eh(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Th.apply(this,arguments)}function c3(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function d3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function u3(e,t){return e.button===0&&(!t||t==="_self")&&!d3(e)}function Ph(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function m3(e,t){let s=Ph(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const h3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p3="6";try{window.__reactRouterVersion=p3}catch{}const x3="startTransition",H0=zd[x3];function f3(e){let{basename:t,children:s,future:n,window:a}=e,i=h.useRef();i.current==null&&(i.current=b4({window:a,v5Compat:!0}));let o=i.current,[l,c]=h.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=h.useCallback(m=>{d&&H0?H0(()=>c(m)):c(m)},[c,d]);return h.useLayoutEffect(()=>o.listen(u),[o,u]),h.useEffect(()=>i3(n),[n]),h.createElement(o3,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const g3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z=h.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,x=c3(t,h3),{basename:p}=h.useContext(In),j,f=!1;if(typeof d=="string"&&b3.test(d)&&(j=d,g3))try{let w=new URL(window.location.href),N=d.startsWith("//")?new URL(w.protocol+d):new URL(d),_=Sx(N.pathname,p);N.origin===w.origin&&_!=null?d=_+N.search+N.hash:f=!0}catch{}let v=q4(d,{relative:a}),b=y3(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function g(w){n&&n(w),w.defaultPrevented||b(w)}return h.createElement("a",Th({},x,{href:j||v,onClick:f||i?n:g,ref:s,target:c}))});var K0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(K0||(K0={}));var G0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(G0||(G0={}));function y3(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ie(),d=zs(),u=yw(e,{relative:o});return h.useCallback(m=>{if(u3(m,s)){m.preventDefault();let x=n!==void 0?n:xd(d)===xd(u);c(e,{replace:x,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,s,e,i,o,l])}function xt(e){let t=h.useRef(Ph(e)),s=h.useRef(!1),n=zs(),a=h.useMemo(()=>m3(n.search,s.current?null:t.current),[n.search]),i=Ie(),o=h.useCallback((l,c)=>{const d=Ph(typeof l=="function"?l(a):l);s.current=!0,i("?"+d,c)},[i,a]);return[a,o]}var Wi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},v3={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},an,Pp,zy,w3=(zy=class{constructor(){fe(this,an,v3);fe(this,Pp,!1)}setTimeoutProvider(e){oe(this,an,e)}setTimeout(e,t){return $(this,an).setTimeout(e,t)}clearTimeout(e){$(this,an).clearTimeout(e)}setInterval(e,t){return $(this,an).setInterval(e,t)}clearInterval(e){$(this,an).clearInterval(e)}},an=new WeakMap,Pp=new WeakMap,zy),ea=new w3;function j3(e){setTimeout(e,0)}var ja=typeof window>"u"||"Deno"in globalThis;function Ht(){}function k3(e,t){return typeof e=="function"?e(t):e}function Dh(e){return typeof e=="number"&&e>=0&&e!==1/0}function kw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function An(e,t){return typeof e=="function"?e(t):e}function Ar(e,t){return typeof e=="function"?e(t):e}function Q0(e,t){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Fx(o,t.options))return!1}else if(!rl(t.queryKey,o))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Y0(e,t){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(ka(t.options.mutationKey)!==ka(i))return!1}else if(!rl(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Fx(e,t){return((t==null?void 0:t.queryKeyHashFn)||ka)(e)}function ka(e){return JSON.stringify(e,(t,s)=>Fh(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function rl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>rl(e[s],t[s])):!1}var N3=Object.prototype.hasOwnProperty;function Nw(e,t){if(e===t)return e;const s=Z0(e)&&Z0(t);if(!s&&!(Fh(e)&&Fh(t)))return t;const a=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),o=i.length,l=s?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=s?d:i[d],m=e[u],x=t[u];if(m===x){l[u]=m,(s?d<a:N3.call(e,u))&&c++;continue}if(m===null||x===null||typeof m!="object"||typeof x!="object"){l[u]=x;continue}const p=Nw(m,x);l[u]=p,p===m&&c++}return a===o&&c===a?e:l}function fd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Z0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Fh(e){if(!X0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!X0(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function X0(e){return Object.prototype.toString.call(e)==="[object Object]"}function _3(e){return new Promise(t=>{ea.setTimeout(t,e)})}function Mh(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Nw(e,t):t}function C3(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function S3(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var Mx=Symbol();function _w(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Mx?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Cw(e,t){return typeof e=="function"?e(...t):!!e}var sa,on,ci,Vy,A3=(Vy=class extends Wi{constructor(){super();fe(this,sa);fe(this,on);fe(this,ci);oe(this,ci,t=>{if(!ja&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){$(this,on)||this.setEventListener($(this,ci))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,on))==null||t.call(this),oe(this,on,void 0))}setEventListener(t){var s;oe(this,ci,t),(s=$(this,on))==null||s.call(this),oe(this,on,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){$(this,sa)!==t&&(oe(this,sa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof $(this,sa)=="boolean"?$(this,sa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},sa=new WeakMap,on=new WeakMap,ci=new WeakMap,Vy),Rx=new A3;function Rh(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},s.reject=a=>{n({status:"rejected",reason:a}),t(a)},s}var E3=j3;function T3(){let e=[],t=0,s=l=>{l()},n=l=>{l()},a=E3;const i=l=>{t?e.push(l):a(()=>{s(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var gt=T3(),di,ln,ui,Uy,P3=(Uy=class extends Wi{constructor(){super();fe(this,di,!0);fe(this,ln);fe(this,ui);oe(this,ui,t=>{if(!ja&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){$(this,ln)||this.setEventListener($(this,ui))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,ln))==null||t.call(this),oe(this,ln,void 0))}setEventListener(t){var s;oe(this,ui,t),(s=$(this,ln))==null||s.call(this),oe(this,ln,t(this.setOnline.bind(this)))}setOnline(t){$(this,di)!==t&&(oe(this,di,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return $(this,di)}},di=new WeakMap,ln=new WeakMap,ui=new WeakMap,Uy),gd=new P3;function D3(e){return Math.min(1e3*2**e,3e4)}function Sw(e){return(e??"online")==="online"?gd.isOnline():!0}var Bh=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Aw(e){let t=!1,s=0,n;const a=Rh(),i=()=>a.status!=="pending",o=f=>{var v;if(!i()){const b=new Bh(f);x(b),(v=e.onCancel)==null||v.call(e,b)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Rx.isFocused()&&(e.networkMode==="always"||gd.isOnline())&&e.canRun(),u=()=>Sw(e.networkMode)&&e.canRun(),m=f=>{i()||(n==null||n(),a.resolve(f))},x=f=>{i()||(n==null||n(),a.reject(f))},p=()=>new Promise(f=>{var v;n=b=>{(i()||d())&&f(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var f;n=void 0,i()||(f=e.onContinue)==null||f.call(e)}),j=()=>{if(i())return;let f;const v=s===0?e.initialPromise:void 0;try{f=v??e.fn()}catch(b){f=Promise.reject(b)}Promise.resolve(f).then(m).catch(b=>{var y;if(i())return;const g=e.retry??(ja?0:3),w=e.retryDelay??D3,N=typeof w=="function"?w(s,b):w,_=g===!0||typeof g=="number"&&s<g||typeof g=="function"&&g(s,b);if(t||!_){x(b);return}s++,(y=e.onFail)==null||y.call(e,s,b),_3(N).then(()=>d()?void 0:p()).then(()=>{t?x(b):j()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?j():p().then(j),a)}}var na,Wy,Ew=(Wy=class{constructor(){fe(this,na)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dh(this.gcTime)&&oe(this,na,ea.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ja?1/0:5*60*1e3))}clearGcTimeout(){$(this,na)&&(ea.clearTimeout($(this,na)),oe(this,na,void 0))}},na=new WeakMap,Wy),aa,mi,Sr,ia,wt,yl,oa,Ur,ys,qy,F3=(qy=class extends Ew{constructor(t){super();fe(this,Ur);fe(this,aa);fe(this,mi);fe(this,Sr);fe(this,ia);fe(this,wt);fe(this,yl);fe(this,oa);oe(this,oa,!1),oe(this,yl,t.defaultOptions),this.setOptions(t.options),this.observers=[],oe(this,ia,t.client),oe(this,Sr,$(this,ia).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,oe(this,aa,eg(this.options)),this.state=t.state??$(this,aa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,wt))==null?void 0:t.promise}setOptions(t){if(this.options={...$(this,yl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=eg(this.options);s.data!==void 0&&(this.setState(J0(s.data,s.dataUpdatedAt)),oe(this,aa,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Sr).remove(this)}setData(t,s){const n=Mh(this.state.data,t,this.options);return Ae(this,Ur,ys).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(t,s){Ae(this,Ur,ys).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var n,a;const s=(n=$(this,wt))==null?void 0:n.promise;return(a=$(this,wt))==null||a.cancel(t),s?s.then(Ht).catch(Ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,aa))}isActive(){return this.observers.some(t=>Ar(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>An(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!kw(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=$(this,wt))==null||s.continue()}onOnline(){var s;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=$(this,wt))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,Sr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||($(this,wt)&&($(this,oa)?$(this,wt).cancel({revert:!0}):$(this,wt).cancelRetry()),this.scheduleGc()),$(this,Sr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,Ur,ys).call(this,{type:"invalidate"})}async fetch(t,s){var c,d,u,m,x,p,j,f,v,b,g,w;if(this.state.fetchStatus!=="idle"&&((c=$(this,wt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if($(this,wt))return $(this,wt).continueRetry(),$(this,wt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(_=>_.options.queryFn);N&&this.setOptions(N.options)}const n=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(oe(this,oa,!0),n.signal)})},i=()=>{const N=_w(this.options,s),y=(()=>{const S={client:$(this,ia),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return oe(this,oa,!1),this.options.persister?this.options.persister(N,y,this):N(y)},l=(()=>{const N={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:$(this,ia),state:this.state,fetchFn:i};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(l,this),oe(this,mi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Ae(this,Ur,ys).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),oe(this,wt,Aw({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof Bh&&N.revert&&this.setState({...$(this,mi),fetchStatus:"idle"}),n.abort()},onFail:(N,_)=>{Ae(this,Ur,ys).call(this,{type:"failed",failureCount:N,error:_})},onPause:()=>{Ae(this,Ur,ys).call(this,{type:"pause"})},onContinue:()=>{Ae(this,Ur,ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await $(this,wt).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(p=(x=$(this,Sr).config).onSuccess)==null||p.call(x,N,this),(f=(j=$(this,Sr).config).onSettled)==null||f.call(j,N,this.state.error,this),N}catch(N){if(N instanceof Bh){if(N.silent)return $(this,wt).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Ae(this,Ur,ys).call(this,{type:"error",error:N}),(b=(v=$(this,Sr).config).onError)==null||b.call(v,N,this),(w=(g=$(this,Sr).config).onSettled)==null||w.call(g,this.state.data,N,this),N}finally{this.scheduleGc()}}},aa=new WeakMap,mi=new WeakMap,Sr=new WeakMap,ia=new WeakMap,wt=new WeakMap,yl=new WeakMap,oa=new WeakMap,Ur=new WeakSet,ys=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Tw(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...J0(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return oe(this,mi,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),gt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),$(this,Sr).notify({query:this,type:"updated",action:t})})},qy);function Tw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Sw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function J0(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function eg(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Jt,Fe,vl,Ut,la,hi,js,cn,wl,pi,xi,ca,da,dn,fi,Ve,go,Lh,Oh,$h,Ih,zh,Vh,Uh,Pw,Hy,M3=(Hy=class extends Wi{constructor(t,s){super();fe(this,Ve);fe(this,Jt);fe(this,Fe);fe(this,vl);fe(this,Ut);fe(this,la);fe(this,hi);fe(this,js);fe(this,cn);fe(this,wl);fe(this,pi);fe(this,xi);fe(this,ca);fe(this,da);fe(this,dn);fe(this,fi,new Set);this.options=s,oe(this,Jt,t),oe(this,cn,null),oe(this,js,Rh()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&($(this,Fe).addObserver(this),tg($(this,Fe),this.options)?Ae(this,Ve,go).call(this):this.updateResult(),Ae(this,Ve,Ih).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Wh($(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Wh($(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,Ve,zh).call(this),Ae(this,Ve,Vh).call(this),$(this,Fe).removeObserver(this)}setOptions(t){const s=this.options,n=$(this,Fe);if(this.options=$(this,Jt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ar(this.options.enabled,$(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,Ve,Uh).call(this),$(this,Fe).setOptions(this.options),s._defaulted&&!fd(this.options,s)&&$(this,Jt).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,Fe),observer:this});const a=this.hasListeners();a&&rg($(this,Fe),n,this.options,s)&&Ae(this,Ve,go).call(this),this.updateResult(),a&&($(this,Fe)!==n||Ar(this.options.enabled,$(this,Fe))!==Ar(s.enabled,$(this,Fe))||An(this.options.staleTime,$(this,Fe))!==An(s.staleTime,$(this,Fe)))&&Ae(this,Ve,Lh).call(this);const i=Ae(this,Ve,Oh).call(this);a&&($(this,Fe)!==n||Ar(this.options.enabled,$(this,Fe))!==Ar(s.enabled,$(this,Fe))||i!==$(this,dn))&&Ae(this,Ve,$h).call(this,i)}getOptimisticResult(t){const s=$(this,Jt).getQueryCache().build($(this,Jt),t),n=this.createResult(s,t);return B3(this,n)&&(oe(this,Ut,n),oe(this,hi,this.options),oe(this,la,$(this,Fe).state)),n}getCurrentResult(){return $(this,Ut)}trackResult(t,s){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),s==null||s(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&$(this,js).status==="pending"&&$(this,js).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){$(this,fi).add(t)}getCurrentQuery(){return $(this,Fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=$(this,Jt).defaultQueryOptions(t),n=$(this,Jt).getQueryCache().build($(this,Jt),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return Ae(this,Ve,go).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),$(this,Ut)))}createResult(t,s){var I;const n=$(this,Fe),a=this.options,i=$(this,Ut),o=$(this,la),l=$(this,hi),d=t!==n?t.state:$(this,vl),{state:u}=t;let m={...u},x=!1,p;if(s._optimisticResults){const F=this.hasListeners(),H=!F&&tg(t,s),E=F&&rg(t,n,s,a);(H||E)&&(m={...m,...Tw(u.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:j,errorUpdatedAt:f,status:v}=m;p=m.data;let b=!1;if(s.placeholderData!==void 0&&p===void 0&&v==="pending"){let F;i!=null&&i.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?(F=i.data,b=!0):F=typeof s.placeholderData=="function"?s.placeholderData((I=$(this,xi))==null?void 0:I.state.data,$(this,xi)):s.placeholderData,F!==void 0&&(v="success",p=Mh(i==null?void 0:i.data,F,s),x=!0)}if(s.select&&p!==void 0&&!b)if(i&&p===(o==null?void 0:o.data)&&s.select===$(this,wl))p=$(this,pi);else try{oe(this,wl,s.select),p=s.select(p),p=Mh(i==null?void 0:i.data,p,s),oe(this,pi,p),oe(this,cn,null)}catch(F){oe(this,cn,F)}$(this,cn)&&(j=$(this,cn),p=$(this,pi),f=Date.now(),v="error");const g=m.fetchStatus==="fetching",w=v==="pending",N=v==="error",_=w&&g,y=p!==void 0,A={status:v,fetchStatus:m.fetchStatus,isPending:w,isSuccess:v==="success",isError:N,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:m.dataUpdatedAt,error:j,errorUpdatedAt:f,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!w,isLoadingError:N&&!y,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:N&&y,isStale:Bx(t,s),refetch:this.refetch,promise:$(this,js),isEnabled:Ar(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const F=L=>{A.status==="error"?L.reject(A.error):A.data!==void 0&&L.resolve(A.data)},H=()=>{const L=oe(this,js,A.promise=Rh());F(L)},E=$(this,js);switch(E.status){case"pending":t.queryHash===n.queryHash&&F(E);break;case"fulfilled":(A.status==="error"||A.data!==E.value)&&H();break;case"rejected":(A.status!=="error"||A.error!==E.reason)&&H();break}}return A}updateResult(){const t=$(this,Ut),s=this.createResult($(this,Fe),this.options);if(oe(this,la,$(this,Fe).state),oe(this,hi,this.options),$(this,la).data!==void 0&&oe(this,xi,$(this,Fe)),fd(s,t))return;oe(this,Ut,s);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!$(this,fi).size)return!0;const o=new Set(i??$(this,fi));return this.options.throwOnError&&o.add("error"),Object.keys($(this,Ut)).some(l=>{const c=l;return $(this,Ut)[c]!==t[c]&&o.has(c)})};Ae(this,Ve,Pw).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,Ve,Ih).call(this)}},Jt=new WeakMap,Fe=new WeakMap,vl=new WeakMap,Ut=new WeakMap,la=new WeakMap,hi=new WeakMap,js=new WeakMap,cn=new WeakMap,wl=new WeakMap,pi=new WeakMap,xi=new WeakMap,ca=new WeakMap,da=new WeakMap,dn=new WeakMap,fi=new WeakMap,Ve=new WeakSet,go=function(t){Ae(this,Ve,Uh).call(this);let s=$(this,Fe).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Ht)),s},Lh=function(){Ae(this,Ve,zh).call(this);const t=An(this.options.staleTime,$(this,Fe));if(ja||$(this,Ut).isStale||!Dh(t))return;const n=kw($(this,Ut).dataUpdatedAt,t)+1;oe(this,ca,ea.setTimeout(()=>{$(this,Ut).isStale||this.updateResult()},n))},Oh=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval($(this,Fe)):this.options.refetchInterval)??!1},$h=function(t){Ae(this,Ve,Vh).call(this),oe(this,dn,t),!(ja||Ar(this.options.enabled,$(this,Fe))===!1||!Dh($(this,dn))||$(this,dn)===0)&&oe(this,da,ea.setInterval(()=>{(this.options.refetchIntervalInBackground||Rx.isFocused())&&Ae(this,Ve,go).call(this)},$(this,dn)))},Ih=function(){Ae(this,Ve,Lh).call(this),Ae(this,Ve,$h).call(this,Ae(this,Ve,Oh).call(this))},zh=function(){$(this,ca)&&(ea.clearTimeout($(this,ca)),oe(this,ca,void 0))},Vh=function(){$(this,da)&&(ea.clearInterval($(this,da)),oe(this,da,void 0))},Uh=function(){const t=$(this,Jt).getQueryCache().build($(this,Jt),this.options);if(t===$(this,Fe))return;const s=$(this,Fe);oe(this,Fe,t),oe(this,vl,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Pw=function(t){gt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s($(this,Ut))}),$(this,Jt).getQueryCache().notify({query:$(this,Fe),type:"observerResultsUpdated"})})},Hy);function R3(e,t){return Ar(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function tg(e,t){return R3(e,t)||e.state.data!==void 0&&Wh(e,t,t.refetchOnMount)}function Wh(e,t,s){if(Ar(t.enabled,e)!==!1&&An(t.staleTime,e)!=="static"){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&Bx(e,t)}return!1}function rg(e,t,s,n){return(e!==t||Ar(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Bx(e,s)}function Bx(e,t){return Ar(t.enabled,e)!==!1&&e.isStaleByTime(An(t.staleTime,e))}function B3(e,t){return!fd(e.getCurrentResult(),t)}function sg(e){return{onFetch:(t,s)=>{var u,m,x,p,j;const n=t.options,a=(x=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((j=t.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let f=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},b=_w(t.options,t.fetchOptions),g=async(w,N,_)=>{if(f)return Promise.reject();if(N==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const H={client:t.client,queryKey:t.queryKey,pageParam:N,direction:_?"backward":"forward",meta:t.options.meta};return v(H),H})(),A=await b(S),{maxPages:I}=t.options,F=_?S3:C3;return{pages:F(w.pages,A,I),pageParams:F(w.pageParams,N,I)}};if(a&&i.length){const w=a==="backward",N=w?L3:ng,_={pages:i,pageParams:o},y=N(n,_);l=await g(_,y,w)}else{const w=e??i.length;do{const N=c===0?o[0]??n.initialPageParam:ng(n,l);if(c>0&&N==null)break;l=await g(l,N),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var f,v;return(v=(f=t.options).persister)==null?void 0:v.call(f,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=d}}}function ng(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function L3(e,{pages:t,pageParams:s}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,s[0],s):void 0}var jl,as,Wt,ua,is,Zs,Ky,O3=(Ky=class extends Ew{constructor(t){super();fe(this,is);fe(this,jl);fe(this,as);fe(this,Wt);fe(this,ua);oe(this,jl,t.client),this.mutationId=t.mutationId,oe(this,Wt,t.mutationCache),oe(this,as,[]),this.state=t.state||Dw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,as).includes(t)||($(this,as).push(t),this.clearGcTimeout(),$(this,Wt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){oe(this,as,$(this,as).filter(s=>s!==t)),this.scheduleGc(),$(this,Wt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,as).length||(this.state.status==="pending"?this.scheduleGc():$(this,Wt).remove(this))}continue(){var t;return((t=$(this,ua))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,m,x,p,j,f,v,b,g,w,N,_,y,S,A,I;const s=()=>{Ae(this,is,Zs).call(this,{type:"continue"})},n={client:$(this,jl),meta:this.options.meta,mutationKey:this.options.mutationKey};oe(this,ua,Aw({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(F,H)=>{Ae(this,is,Zs).call(this,{type:"failed",failureCount:F,error:H})},onPause:()=>{Ae(this,is,Zs).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Wt).canRun(this)}));const a=this.state.status==="pending",i=!$(this,ua).canStart();try{if(a)s();else{Ae(this,is,Zs).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=$(this,Wt).config).onMutate)==null?void 0:l.call(o,t,this,n));const H=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));H!==this.state.context&&Ae(this,is,Zs).call(this,{type:"pending",context:H,variables:t,isPaused:i})}const F=await $(this,ua).start();return await((m=(u=$(this,Wt).config).onSuccess)==null?void 0:m.call(u,F,t,this.state.context,this,n)),await((p=(x=this.options).onSuccess)==null?void 0:p.call(x,F,t,this.state.context,n)),await((f=(j=$(this,Wt).config).onSettled)==null?void 0:f.call(j,F,null,this.state.variables,this.state.context,this,n)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,F,null,t,this.state.context,n)),Ae(this,is,Zs).call(this,{type:"success",data:F}),F}catch(F){try{throw await((w=(g=$(this,Wt).config).onError)==null?void 0:w.call(g,F,t,this.state.context,this,n)),await((_=(N=this.options).onError)==null?void 0:_.call(N,F,t,this.state.context,n)),await((S=(y=$(this,Wt).config).onSettled)==null?void 0:S.call(y,void 0,F,this.state.variables,this.state.context,this,n)),await((I=(A=this.options).onSettled)==null?void 0:I.call(A,void 0,F,t,this.state.context,n)),F}finally{Ae(this,is,Zs).call(this,{type:"error",error:F})}}finally{$(this,Wt).runNext(this)}}},jl=new WeakMap,as=new WeakMap,Wt=new WeakMap,ua=new WeakMap,is=new WeakSet,Zs=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),gt.batch(()=>{$(this,as).forEach(n=>{n.onMutationUpdate(t)}),$(this,Wt).notify({mutation:this,type:"updated",action:t})})},Ky);function Dw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ks,Wr,kl,Gy,$3=(Gy=class extends Wi{constructor(t={}){super();fe(this,ks);fe(this,Wr);fe(this,kl);this.config=t,oe(this,ks,new Set),oe(this,Wr,new Map),oe(this,kl,0)}build(t,s,n){const a=new O3({client:t,mutationCache:this,mutationId:++Il(this,kl)._,options:t.defaultMutationOptions(s),state:n});return this.add(a),a}add(t){$(this,ks).add(t);const s=nc(t);if(typeof s=="string"){const n=$(this,Wr).get(s);n?n.push(t):$(this,Wr).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,ks).delete(t)){const s=nc(t);if(typeof s=="string"){const n=$(this,Wr).get(s);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&$(this,Wr).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=nc(t);if(typeof s=="string"){const n=$(this,Wr).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const s=nc(t);if(typeof s=="string"){const a=(n=$(this,Wr).get(s))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gt.batch(()=>{$(this,ks).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,ks).clear(),$(this,Wr).clear()})}getAll(){return Array.from($(this,ks))}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Y0(s,n))}findAll(t={}){return this.getAll().filter(s=>Y0(t,s))}notify(t){gt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return gt.batch(()=>Promise.all(t.map(s=>s.continue().catch(Ht))))}},ks=new WeakMap,Wr=new WeakMap,kl=new WeakMap,Gy);function nc(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ns,un,er,_s,Fs,Pc,qh,Qy,I3=(Qy=class extends Wi{constructor(s,n){super();fe(this,Fs);fe(this,Ns);fe(this,un);fe(this,er);fe(this,_s);oe(this,Ns,s),this.setOptions(n),this.bindMethods(),Ae(this,Fs,Pc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var a;const n=this.options;this.options=$(this,Ns).defaultMutationOptions(s),fd(this.options,n)||$(this,Ns).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,er),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ka(n.mutationKey)!==ka(this.options.mutationKey)?this.reset():((a=$(this,er))==null?void 0:a.state.status)==="pending"&&$(this,er).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=$(this,er))==null||s.removeObserver(this)}onMutationUpdate(s){Ae(this,Fs,Pc).call(this),Ae(this,Fs,qh).call(this,s)}getCurrentResult(){return $(this,un)}reset(){var s;(s=$(this,er))==null||s.removeObserver(this),oe(this,er,void 0),Ae(this,Fs,Pc).call(this),Ae(this,Fs,qh).call(this)}mutate(s,n){var a;return oe(this,_s,n),(a=$(this,er))==null||a.removeObserver(this),oe(this,er,$(this,Ns).getMutationCache().build($(this,Ns),this.options)),$(this,er).addObserver(this),$(this,er).execute(s)}},Ns=new WeakMap,un=new WeakMap,er=new WeakMap,_s=new WeakMap,Fs=new WeakSet,Pc=function(){var n;const s=((n=$(this,er))==null?void 0:n.state)??Dw();oe(this,un,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},qh=function(s){gt.batch(()=>{var n,a,i,o,l,c,d,u;if($(this,_s)&&this.hasListeners()){const m=$(this,un).variables,x=$(this,un).context,p={client:$(this,Ns),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((a=(n=$(this,_s)).onSuccess)==null||a.call(n,s.data,m,x,p),(o=(i=$(this,_s)).onSettled)==null||o.call(i,s.data,null,m,x,p)):(s==null?void 0:s.type)==="error"&&((c=(l=$(this,_s)).onError)==null||c.call(l,s.error,m,x,p),(u=(d=$(this,_s)).onSettled)==null||u.call(d,void 0,s.error,m,x,p))}this.listeners.forEach(m=>{m($(this,un))})})},Qy),os,Yy,z3=(Yy=class extends Wi{constructor(t={}){super();fe(this,os);this.config=t,oe(this,os,new Map)}build(t,s,n){const a=s.queryKey,i=s.queryHash??Fx(a,s);let o=this.get(i);return o||(o=new F3({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){$(this,os).has(t.queryHash)||($(this,os).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=$(this,os).get(t.queryHash);s&&(t.destroy(),s===t&&$(this,os).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,os).get(t)}getAll(){return[...$(this,os).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Q0(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>Q0(t,n)):s}notify(t){gt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},os=new WeakMap,Yy),at,mn,hn,gi,bi,pn,yi,vi,Zy,V3=(Zy=class{constructor(e={}){fe(this,at);fe(this,mn);fe(this,hn);fe(this,gi);fe(this,bi);fe(this,pn);fe(this,yi);fe(this,vi);oe(this,at,e.queryCache||new z3),oe(this,mn,e.mutationCache||new $3),oe(this,hn,e.defaultOptions||{}),oe(this,gi,new Map),oe(this,bi,new Map),oe(this,pn,0)}mount(){Il(this,pn)._++,$(this,pn)===1&&(oe(this,yi,Rx.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,at).onFocus())})),oe(this,vi,gd.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,at).onOnline())})))}unmount(){var e,t;Il(this,pn)._--,$(this,pn)===0&&((e=$(this,yi))==null||e.call(this),oe(this,yi,void 0),(t=$(this,vi))==null||t.call(this),oe(this,vi,void 0))}isFetching(e){return $(this,at).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,mn).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=$(this,at).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=$(this,at).build(this,t),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(An(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return $(this,at).findAll(e).map(({queryKey:t,state:s})=>{const n=s.data;return[t,n]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),a=$(this,at).get(n.queryHash),i=a==null?void 0:a.state.data,o=k3(t,i);if(o!==void 0)return $(this,at).build(this,n).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return gt.batch(()=>$(this,at).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=$(this,at).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=$(this,at);gt.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=$(this,at);return gt.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},n=gt.batch(()=>$(this,at).findAll(e).map(a=>a.cancel(s)));return Promise.all(n).then(Ht).catch(Ht)}invalidateQueries(e,t={}){return gt.batch(()=>($(this,at).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=gt.batch(()=>$(this,at).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Ht)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ht)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=$(this,at).build(this,t);return s.isStaleByTime(An(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ht).catch(Ht)}fetchInfiniteQuery(e){return e.behavior=sg(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ht).catch(Ht)}ensureInfiniteQueryData(e){return e.behavior=sg(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gd.isOnline()?$(this,mn).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,at)}getMutationCache(){return $(this,mn)}getDefaultOptions(){return $(this,hn)}setDefaultOptions(e){oe(this,hn,e)}setQueryDefaults(e,t){$(this,gi).set(ka(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,gi).values()],s={};return t.forEach(n=>{rl(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,t){$(this,bi).set(ka(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,bi).values()],s={};return t.forEach(n=>{rl(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,hn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Mx&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,hn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,at).clear(),$(this,mn).clear()}},at=new WeakMap,mn=new WeakMap,hn=new WeakMap,gi=new WeakMap,bi=new WeakMap,pn=new WeakMap,yi=new WeakMap,vi=new WeakMap,Zy),Fw=h.createContext(void 0),dr=e=>{const t=h.useContext(Fw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},U3=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Fw.Provider,{value:e,children:t})),Mw=h.createContext(!1),W3=()=>h.useContext(Mw);Mw.Provider;function q3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var H3=h.createContext(q3()),K3=()=>h.useContext(H3),G3=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Q3=e=>{h.useEffect(()=>{e.clearReset()},[e])},Y3=({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Cw(s,[e.error,n])),Z3=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>s(n(...a)):s(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},X3=(e,t)=>e.isLoading&&e.isFetching&&!t,J3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ag=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function e5(e,t,s){var m,x,p,j,f;const n=W3(),a=K3(),i=dr(),o=i.defaultQueryOptions(e);(x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||x.call(m,o),o._optimisticResults=n?"isRestoring":"optimistic",Z3(o),G3(o,a),Q3(a);const l=!i.getQueryCache().get(o.queryHash),[c]=h.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(v=>{const b=u?c.subscribe(gt.batchCalls(v)):Ht;return c.updateResult(),b},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(o)},[o,c]),J3(o,d))throw ag(o,c,a);if(Y3({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((j=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||j.call(p,o,d),o.experimental_prefetchInRender&&!ja&&X3(d,n)){const v=l?ag(o,c,a):(f=i.getQueryCache().get(o.queryHash))==null?void 0:f.promise;v==null||v.catch(Ht).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ve(e,t){return e5(e,M3)}function ye(e,t){const s=dr(),[n]=h.useState(()=>new I3(s,e));h.useEffect(()=>{n.setOptions(e)},[n,e]);const a=h.useSyncExternalStore(h.useCallback(o=>n.subscribe(gt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=h.useCallback((o,l)=>{n.mutate(o,l).catch(Ht)},[n]);if(a.error&&Cw(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const ig=e=>{let t;const s=new Set,n=(d,u)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const x=t;t=u??(typeof m!="object"||m===null)?m:Object.assign({},t,m),s.forEach(p=>p(t,x))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>c,subscribe:d=>(s.add(d),()=>s.delete(d))},c=t=e(n,a,l);return l},t5=e=>e?ig(e):ig,r5=e=>e;function s5(e,t=r5){const s=se.useSyncExternalStore(e.subscribe,se.useCallback(()=>t(e.getState()),[e,t]),se.useCallback(()=>t(e.getInitialState()),[e,t]));return se.useDebugValue(s),s}const n5=e=>{const t=t5(e),s=n=>s5(t,n);return Object.assign(s,t),s},a5=e=>n5;function i5(e,t){let s;try{s=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=s.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>s.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>s.removeItem(a)}}const Hh=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then(n){return Hh(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return Hh(n)(s)}}}},o5=(e,t)=>(s,n,a)=>{let i={storage:i5(()=>localStorage),partialize:f=>f,version:0,merge:(f,v)=>({...v,...f}),...t},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...f)},n,a);const u=()=>{const f=i.partialize({...n()});return d.setItem(i.name,{state:f,version:i.version})},m=a.setState;a.setState=(f,v)=>(m(f,v),u());const x=e((...f)=>(s(...f),u()),n,a);a.getInitialState=()=>x;let p;const j=()=>{var f,v;if(!d)return;o=!1,l.forEach(g=>{var w;return g((w=n())!=null?w:x)});const b=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(f=n())!=null?f:x))||void 0;return Hh(d.getItem.bind(d))(i.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate){const w=i.migrate(g.state,g.version);return w instanceof Promise?w.then(N=>[!0,N]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var w;const[N,_]=g;if(p=i.merge(_,(w=n())!=null?w:x),s(p,!0),N)return u()}).then(()=>{b==null||b(p,void 0),p=n(),o=!0,c.forEach(g=>g(p))}).catch(g=>{b==null||b(void 0,g)})};return a.persist={setOptions:f=>{i={...i,...f},f.storage&&(d=f.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},i.skipHydration||j(),p||x},l5=o5;function Rw(e,t){return function(){return e.apply(t,arguments)}}const{toString:c5}=Object.prototype,{getPrototypeOf:Lx}=Object,{iterator:nu,toStringTag:Bw}=Symbol,au=(e=>t=>{const s=c5.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Yr=e=>(e=e.toLowerCase(),t=>au(t)===e),iu=e=>t=>typeof t===e,{isArray:qi}=Array,Ai=iu("undefined");function El(e){return e!==null&&!Ai(e)&&e.constructor!==null&&!Ai(e.constructor)&&or(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Lw=Yr("ArrayBuffer");function d5(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Lw(e.buffer),t}const u5=iu("string"),or=iu("function"),Ow=iu("number"),Tl=e=>e!==null&&typeof e=="object",m5=e=>e===!0||e===!1,Dc=e=>{if(au(e)!=="object")return!1;const t=Lx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Bw in e)&&!(nu in e)},h5=e=>{if(!Tl(e)||El(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},p5=Yr("Date"),x5=Yr("File"),f5=Yr("Blob"),g5=Yr("FileList"),b5=e=>Tl(e)&&or(e.pipe),y5=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||or(e.append)&&((t=au(e))==="formdata"||t==="object"&&or(e.toString)&&e.toString()==="[object FormData]"))},v5=Yr("URLSearchParams"),[w5,j5,k5,N5]=["ReadableStream","Request","Response","Headers"].map(Yr),_5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pl(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),qi(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(El(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function $w(e,t){if(El(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const ta=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Iw=e=>!Ai(e)&&e!==ta;function Kh(){const{caseless:e,skipUndefined:t}=Iw(this)&&this||{},s={},n=(a,i)=>{const o=e&&$w(s,i)||i;Dc(s[o])&&Dc(a)?s[o]=Kh(s[o],a):Dc(a)?s[o]=Kh({},a):qi(a)?s[o]=a.slice():(!t||!Ai(a))&&(s[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Pl(arguments[a],n);return s}const C5=(e,t,s,{allOwnKeys:n}={})=>(Pl(t,(a,i)=>{s&&or(a)?e[i]=Rw(a,s):e[i]=a},{allOwnKeys:n}),e),S5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),A5=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},E5=(e,t,s,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=s!==!1&&Lx(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},T5=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},P5=e=>{if(!e)return null;if(qi(e))return e;let t=e.length;if(!Ow(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},D5=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Lx(Uint8Array)),F5=(e,t)=>{const n=(e&&e[nu]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},M5=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},R5=Yr("HTMLFormElement"),B5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),og=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),L5=Yr("RegExp"),zw=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Pl(s,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},O5=e=>{zw(e,(t,s)=>{if(or(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(or(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},$5=(e,t)=>{const s={},n=a=>{a.forEach(i=>{s[i]=!0})};return qi(e)?n(e):n(String(e).split(t)),s},I5=()=>{},z5=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function V5(e){return!!(e&&or(e.append)&&e[Bw]==="FormData"&&e[nu])}const U5=e=>{const t=new Array(10),s=(n,a)=>{if(Tl(n)){if(t.indexOf(n)>=0)return;if(El(n))return n;if(!("toJSON"in n)){t[a]=n;const i=qi(n)?[]:{};return Pl(n,(o,l)=>{const c=s(o,a+1);!Ai(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return s(e,0)},W5=Yr("AsyncFunction"),q5=e=>e&&(Tl(e)||or(e))&&or(e.then)&&or(e.catch),Vw=((e,t)=>e?setImmediate:t?((s,n)=>(ta.addEventListener("message",({source:a,data:i})=>{a===ta&&i===s&&n.length&&n.shift()()},!1),a=>{n.push(a),ta.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",or(ta.postMessage)),H5=typeof queueMicrotask<"u"?queueMicrotask.bind(ta):typeof process<"u"&&process.nextTick||Vw,K5=e=>e!=null&&or(e[nu]),G={isArray:qi,isArrayBuffer:Lw,isBuffer:El,isFormData:y5,isArrayBufferView:d5,isString:u5,isNumber:Ow,isBoolean:m5,isObject:Tl,isPlainObject:Dc,isEmptyObject:h5,isReadableStream:w5,isRequest:j5,isResponse:k5,isHeaders:N5,isUndefined:Ai,isDate:p5,isFile:x5,isBlob:f5,isRegExp:L5,isFunction:or,isStream:b5,isURLSearchParams:v5,isTypedArray:D5,isFileList:g5,forEach:Pl,merge:Kh,extend:C5,trim:_5,stripBOM:S5,inherits:A5,toFlatObject:E5,kindOf:au,kindOfTest:Yr,endsWith:T5,toArray:P5,forEachEntry:F5,matchAll:M5,isHTMLForm:R5,hasOwnProperty:og,hasOwnProp:og,reduceDescriptors:zw,freezeMethods:O5,toObjectSet:$5,toCamelCase:B5,noop:I5,toFiniteNumber:z5,findKey:$w,global:ta,isContextDefined:Iw,isSpecCompliantForm:V5,toJSONObject:U5,isAsyncFn:W5,isThenable:q5,setImmediate:Vw,asap:H5,isIterable:K5};function _e(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}G.inherits(_e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const Uw=_e.prototype,Ww={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ww[e]={value:e}});Object.defineProperties(_e,Ww);Object.defineProperty(Uw,"isAxiosError",{value:!0});_e.from=(e,t,s,n,a,i)=>{const o=Object.create(Uw);G.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return _e.call(o,l,c,s,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const G5=null;function Gh(e){return G.isPlainObject(e)||G.isArray(e)}function qw(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function lg(e,t,s){return e?e.concat(t).map(function(a,i){return a=qw(a),!s&&i?"["+a+"]":a}).join(s?".":""):t}function Q5(e){return G.isArray(e)&&!e.some(Gh)}const Y5=G.toFlatObject(G,{},null,function(t){return/^is[A-Z]/.test(t)});function ou(e,t,s){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=G.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,v){return!G.isUndefined(v[f])});const n=s.metaTokens,a=s.visitor||u,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(a))throw new TypeError("visitor must be a function");function d(j){if(j===null)return"";if(G.isDate(j))return j.toISOString();if(G.isBoolean(j))return j.toString();if(!c&&G.isBlob(j))throw new _e("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(j)||G.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function u(j,f,v){let b=j;if(j&&!v&&typeof j=="object"){if(G.endsWith(f,"{}"))f=n?f:f.slice(0,-2),j=JSON.stringify(j);else if(G.isArray(j)&&Q5(j)||(G.isFileList(j)||G.endsWith(f,"[]"))&&(b=G.toArray(j)))return f=qw(f),b.forEach(function(w,N){!(G.isUndefined(w)||w===null)&&t.append(o===!0?lg([f],N,i):o===null?f:f+"[]",d(w))}),!1}return Gh(j)?!0:(t.append(lg(v,f,i),d(j)),!1)}const m=[],x=Object.assign(Y5,{defaultVisitor:u,convertValue:d,isVisitable:Gh});function p(j,f){if(!G.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+f.join("."));m.push(j),G.forEach(j,function(b,g){(!(G.isUndefined(b)||b===null)&&a.call(t,b,G.isString(g)?g.trim():g,f,x))===!0&&p(b,f?f.concat(g):[g])}),m.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return p(e),t}function cg(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Ox(e,t){this._pairs=[],e&&ou(e,this,t)}const Hw=Ox.prototype;Hw.append=function(t,s){this._pairs.push([t,s])};Hw.toString=function(t){const s=t?function(n){return t.call(this,n,cg)}:cg;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function Z5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Kw(e,t,s){if(!t)return e;const n=s&&s.encode||Z5;G.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(t,s):i=G.isURLSearchParams(t)?t.toString():new Ox(t,s).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class dg{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Gw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},X5=typeof URLSearchParams<"u"?URLSearchParams:Ox,J5=typeof FormData<"u"?FormData:null,eC=typeof Blob<"u"?Blob:null,tC={isBrowser:!0,classes:{URLSearchParams:X5,FormData:J5,Blob:eC},protocols:["http","https","file","blob","url","data"]},$x=typeof window<"u"&&typeof document<"u",Qh=typeof navigator=="object"&&navigator||void 0,rC=$x&&(!Qh||["ReactNative","NativeScript","NS"].indexOf(Qh.product)<0),sC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nC=$x&&window.location.href||"http://localhost",aC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$x,hasStandardBrowserEnv:rC,hasStandardBrowserWebWorkerEnv:sC,navigator:Qh,origin:nC},Symbol.toStringTag,{value:"Module"})),Lt={...aC,...tC};function iC(e,t){return ou(e,new Lt.classes.URLSearchParams,{visitor:function(s,n,a,i){return Lt.isNode&&G.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function oC(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function lC(e){const t={},s=Object.keys(e);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],t[i]=e[i];return t}function Qw(e){function t(s,n,a,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&G.isArray(a)?a.length:o,c?(G.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!G.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],i)&&G.isArray(a[o])&&(a[o]=lC(a[o])),!l)}if(G.isFormData(e)&&G.isFunction(e.entries)){const s={};return G.forEachEntry(e,(n,a)=>{t(oC(n),a,s,0)}),s}return null}function cC(e,t,s){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Dl={transitional:Gw,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,i=G.isObject(t);if(i&&G.isHTMLForm(t)&&(t=new FormData(t)),G.isFormData(t))return a?JSON.stringify(Qw(t)):t;if(G.isArrayBuffer(t)||G.isBuffer(t)||G.isStream(t)||G.isFile(t)||G.isBlob(t)||G.isReadableStream(t))return t;if(G.isArrayBufferView(t))return t.buffer;if(G.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return iC(t,this.formSerializer).toString();if((l=G.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ou(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),cC(t)):t}],transformResponse:[function(t){const s=this.transitional||Dl.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(G.isResponse(t)||G.isReadableStream(t))return t;if(t&&G.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?_e.from(l,_e.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{Dl.headers[e]={}});const dC=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uC=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&dC[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},ug=Symbol("internals");function oo(e){return e&&String(e).trim().toLowerCase()}function Fc(e){return e===!1||e==null?e:G.isArray(e)?e.map(Fc):String(e)}function mC(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const hC=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tm(e,t,s,n,a){if(G.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!G.isString(t)){if(G.isString(n))return t.indexOf(n)!==-1;if(G.isRegExp(n))return n.test(t)}}function pC(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function xC(e,t){const s=G.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let lr=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function i(l,c,d){const u=oo(c);if(!u)throw new Error("header name must be a non-empty string");const m=G.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Fc(l))}const o=(l,c)=>G.forEach(l,(d,u)=>i(d,u,c));if(G.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(G.isString(t)&&(t=t.trim())&&!hC(t))o(uC(t),s);else if(G.isObject(t)&&G.isIterable(t)){let l={},c,d;for(const u of t){if(!G.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?G.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=oo(t),t){const n=G.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return mC(a);if(G.isFunction(s))return s.call(this,a,n);if(G.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=oo(t),t){const n=G.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||tm(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function i(o){if(o=oo(o),o){const l=G.findKey(n,o);l&&(!s||tm(n,n[l],l,s))&&(delete n[l],a=!0)}}return G.isArray(t)?t.forEach(i):i(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const i=s[n];(!t||tm(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const s=this,n={};return G.forEach(this,(a,i)=>{const o=G.findKey(n,i);if(o){s[o]=Fc(a),delete s[i];return}const l=t?pC(i):String(i).trim();l!==i&&delete s[i],s[l]=Fc(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return G.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&G.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[ug]=this[ug]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=oo(o);n[l]||(xC(a,o),n[l]=!0)}return G.isArray(t)?t.forEach(i):i(t),this}};lr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(lr.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});G.freezeMethods(lr);function rm(e,t){const s=this||Dl,n=t||s,a=lr.from(n.headers);let i=n.data;return G.forEach(e,function(l){i=l.call(s,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Yw(e){return!!(e&&e.__CANCEL__)}function Hi(e,t,s){_e.call(this,e??"canceled",_e.ERR_CANCELED,t,s),this.name="CanceledError"}G.inherits(Hi,_e,{__CANCEL__:!0});function Zw(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new _e("Request failed with status code "+s.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function fC(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gC(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),s[a]=c,n[a]=d;let m=i,x=0;for(;m!==a;)x+=s[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(x*1e3/p):void 0}}function bC(e,t){let s=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{s=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-s;m>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const bd=(e,t,s=3)=>{let n=0;const a=gC(50,250);return bC(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},s)},mg=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},hg=e=>(...t)=>G.asap(()=>e(...t)),yC=Lt.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Lt.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Lt.origin),Lt.navigator&&/(msie|trident)/i.test(Lt.navigator.userAgent)):()=>!0,vC=Lt.hasStandardBrowserEnv?{write(e,t,s,n,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];G.isNumber(s)&&l.push(`expires=${new Date(s).toUTCString()}`),G.isString(n)&&l.push(`path=${n}`),G.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),G.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function wC(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function jC(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Xw(e,t,s){let n=!wC(t);return e&&(n||s==!1)?jC(e,t):t}const pg=e=>e instanceof lr?{...e}:e;function Na(e,t){t=t||{};const s={};function n(d,u,m,x){return G.isPlainObject(d)&&G.isPlainObject(u)?G.merge.call({caseless:x},d,u):G.isPlainObject(u)?G.merge({},u):G.isArray(u)?u.slice():u}function a(d,u,m,x){if(G.isUndefined(u)){if(!G.isUndefined(d))return n(void 0,d,m,x)}else return n(d,u,m,x)}function i(d,u){if(!G.isUndefined(u))return n(void 0,u)}function o(d,u){if(G.isUndefined(u)){if(!G.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>a(pg(d),pg(u),m,!0)};return G.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||a,x=m(e[u],t[u],u);G.isUndefined(x)&&m!==l||(s[u]=x)}),s}const Jw=e=>{const t=Na({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=lr.from(o),t.url=Kw(Xw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),G.isFormData(s)){if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(G.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&o.set(u,m)})}}if(Lt.hasStandardBrowserEnv&&(n&&G.isFunction(n)&&(n=n(t)),n||n!==!1&&yC(t.url))){const c=a&&i&&vC.read(i);c&&o.set(a,c)}return t},kC=typeof XMLHttpRequest<"u",NC=kC&&function(e){return new Promise(function(s,n){const a=Jw(e);let i=a.data;const o=lr.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,x,p,j;function f(){p&&p(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function b(){if(!v)return;const w=lr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:e,request:v};Zw(function(S){s(S),f()},function(S){n(S),f()},_),v=null}"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(b)},v.onabort=function(){v&&(n(new _e("Request aborted",_e.ECONNABORTED,e,v)),v=null)},v.onerror=function(N){const _=N&&N.message?N.message:"Network Error",y=new _e(_,_e.ERR_NETWORK,e,v);y.event=N||null,n(y),v=null},v.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const _=a.transitional||Gw;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),n(new _e(N,_.clarifyTimeoutError?_e.ETIMEDOUT:_e.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&G.forEach(o.toJSON(),function(N,_){v.setRequestHeader(_,N)}),G.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),l&&l!=="json"&&(v.responseType=a.responseType),d&&([x,j]=bd(d,!0),v.addEventListener("progress",x)),c&&v.upload&&([m,p]=bd(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",p)),(a.cancelToken||a.signal)&&(u=w=>{v&&(n(!w||w.type?new Hi(null,e,v):w),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const g=fC(a.url);if(g&&Lt.protocols.indexOf(g)===-1){n(new _e("Unsupported protocol "+g+":",_e.ERR_BAD_REQUEST,e));return}v.send(i||null)})},_C=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof _e?u:new Hi(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new _e(`timeout ${t} of ms exceeded`,_e.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>G.asap(l),c}},CC=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},SC=async function*(e,t){for await(const s of AC(e))yield*CC(s,t)},AC=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},xg=(e,t,s,n)=>{const a=SC(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(s){let x=i+=m;s(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},fg=64*1024,{isFunction:ac}=G,EC=(({Request:e,Response:t})=>({Request:e,Response:t}))(G.global),{ReadableStream:gg,TextEncoder:bg}=G.global,yg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},TC=e=>{e=G.merge.call({skipUndefined:!0},EC,e);const{fetch:t,Request:s,Response:n}=e,a=t?ac(t):typeof fetch=="function",i=ac(s),o=ac(n);if(!a)return!1;const l=a&&ac(gg),c=a&&(typeof bg=="function"?(j=>f=>j.encode(f))(new bg):async j=>new Uint8Array(await new s(j).arrayBuffer())),d=i&&l&&yg(()=>{let j=!1;const f=new s(Lt.origin,{body:new gg,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!f}),u=o&&l&&yg(()=>G.isReadableStream(new n("").body)),m={stream:u&&(j=>j.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!m[j]&&(m[j]=(f,v)=>{let b=f&&f[j];if(b)return b.call(f);throw new _e(`Response type '${j}' is not supported`,_e.ERR_NOT_SUPPORT,v)})});const x=async j=>{if(j==null)return 0;if(G.isBlob(j))return j.size;if(G.isSpecCompliantForm(j))return(await new s(Lt.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(G.isArrayBufferView(j)||G.isArrayBuffer(j))return j.byteLength;if(G.isURLSearchParams(j)&&(j=j+""),G.isString(j))return(await c(j)).byteLength},p=async(j,f)=>{const v=G.toFiniteNumber(j.getContentLength());return v??x(f)};return async j=>{let{url:f,method:v,data:b,signal:g,cancelToken:w,timeout:N,onDownloadProgress:_,onUploadProgress:y,responseType:S,headers:A,withCredentials:I="same-origin",fetchOptions:F}=Jw(j),H=t||fetch;S=S?(S+"").toLowerCase():"text";let E=_C([g,w&&w.toAbortSignal()],N),L=null;const O=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let R;try{if(y&&d&&v!=="get"&&v!=="head"&&(R=await p(A,b))!==0){let T=new s(f,{method:"POST",body:b,duplex:"half"}),P;if(G.isFormData(b)&&(P=T.headers.get("content-type"))&&A.setContentType(P),T.body){const[V,J]=mg(R,bd(hg(y)));b=xg(T.body,fg,V,J)}}G.isString(I)||(I=I?"include":"omit");const z=i&&"credentials"in s.prototype,ee={...F,signal:E,method:v.toUpperCase(),headers:A.normalize().toJSON(),body:b,duplex:"half",credentials:z?I:void 0};L=i&&new s(f,ee);let C=await(i?H(L,F):H(f,ee));const k=u&&(S==="stream"||S==="response");if(u&&(_||k&&O)){const T={};["status","statusText","headers"].forEach(K=>{T[K]=C[K]});const P=G.toFiniteNumber(C.headers.get("content-length")),[V,J]=_&&mg(P,bd(hg(_),!0))||[];C=new n(xg(C.body,fg,V,()=>{J&&J(),O&&O()}),T)}S=S||"text";let D=await m[G.findKey(m,S)||"text"](C,j);return!k&&O&&O(),await new Promise((T,P)=>{Zw(T,P,{data:D,headers:lr.from(C.headers),status:C.status,statusText:C.statusText,config:j,request:L})})}catch(z){throw O&&O(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new _e("Network Error",_e.ERR_NETWORK,j,L),{cause:z.cause||z}):_e.from(z,z&&z.code,j,L)}}},PC=new Map,e2=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:a}=t,i=[n,a,s];let o=i.length,l=o,c,d,u=PC;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:TC(t)),u=d;return d};e2();const Ix={http:G5,xhr:NC,fetch:{get:e2}};G.forEach(Ix,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const vg=e=>`- ${e}`,DC=e=>G.isFunction(e)||e===null||e===!1;function FC(e,t){e=G.isArray(e)?e:[e];const{length:s}=e;let n,a;const i={};for(let o=0;o<s;o++){n=e[o];let l;if(a=n,!DC(n)&&(a=Ix[(l=String(n)).toLowerCase()],a===void 0))throw new _e(`Unknown adapter '${l}'`);if(a&&(G.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=s?o.length>1?`since :
`+o.map(vg).join(`
`):" "+vg(o[0]):"as no adapter specified";throw new _e("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const t2={getAdapter:FC,adapters:Ix};function sm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hi(null,e)}function wg(e){return sm(e),e.headers=lr.from(e.headers),e.data=rm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),t2.getAdapter(e.adapter||Dl.adapter,e)(e).then(function(n){return sm(e),n.data=rm.call(e,e.transformResponse,n),n.headers=lr.from(n.headers),n},function(n){return Yw(n)||(sm(e),n&&n.response&&(n.response.data=rm.call(e,e.transformResponse,n.response),n.response.headers=lr.from(n.response.headers))),Promise.reject(n)})}const r2="1.13.1",lu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const jg={};lu.transitional=function(t,s,n){function a(i,o){return"[Axios v"+r2+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new _e(a(o," has been removed"+(s?" in "+s:"")),_e.ERR_DEPRECATED);return s&&!jg[o]&&(jg[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,l):!0}};lu.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function MC(e,t,s){if(typeof e!="object")throw new _e("options must be an object",_e.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new _e("option "+i+" must be "+c,_e.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new _e("Unknown option "+i,_e.ERR_BAD_OPTION)}}const Mc={assertOptions:MC,validators:lu},rs=Mc.validators;let pa=class{constructor(t){this.defaults=t||{},this.interceptors={request:new dg,response:new dg}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Na(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:i}=s;n!==void 0&&Mc.assertOptions(n,{silentJSONParsing:rs.transitional(rs.boolean),forcedJSONParsing:rs.transitional(rs.boolean),clarifyTimeoutError:rs.transitional(rs.boolean)},!1),a!=null&&(G.isFunction(a)?s.paramsSerializer={serialize:a}:Mc.assertOptions(a,{encode:rs.function,serialize:rs.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Mc.assertOptions(s,{baseUrl:rs.spelling("baseURL"),withXsrfToken:rs.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&G.merge(i.common,i[s.method]);i&&G.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),s.headers=lr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(s)===!1||(c=c&&f.synchronous,l.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let u,m=0,x;if(!c){const j=[wg.bind(this),void 0];for(j.unshift(...l),j.push(...d),x=j.length,u=Promise.resolve(s);m<x;)u=u.then(j[m++],j[m++]);return u}x=l.length;let p=s;for(;m<x;){const j=l[m++],f=l[m++];try{p=j(p)}catch(v){f.call(this,v);break}}try{u=wg.call(this,p)}catch(j){return Promise.reject(j)}for(m=0,x=d.length;m<x;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Na(this.defaults,t);const s=Xw(t.baseURL,t.url,t.allowAbsoluteUrls);return Kw(s,t.params,t.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(t){pa.prototype[t]=function(s,n){return this.request(Na(n||{},{method:t,url:s,data:(n||{}).data}))}});G.forEach(["post","put","patch"],function(t){function s(n){return function(i,o,l){return this.request(Na(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}pa.prototype[t]=s(),pa.prototype[t+"Form"]=s(!0)});let RC=class s2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Hi(i,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new s2(function(a){t=a}),cancel:t}}};function BC(e){return function(s){return e.apply(null,s)}}function LC(e){return G.isObject(e)&&e.isAxiosError===!0}const Yh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Yh).forEach(([e,t])=>{Yh[t]=e});function n2(e){const t=new pa(e),s=Rw(pa.prototype.request,t);return G.extend(s,pa.prototype,t,{allOwnKeys:!0}),G.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return n2(Na(e,a))},s}const Y=n2(Dl);Y.Axios=pa;Y.CanceledError=Hi;Y.CancelToken=RC;Y.isCancel=Yw;Y.VERSION=r2;Y.toFormData=ou;Y.AxiosError=_e;Y.Cancel=Y.CanceledError;Y.all=function(t){return Promise.all(t)};Y.spread=BC;Y.isAxiosError=LC;Y.mergeConfig=Na;Y.AxiosHeaders=lr;Y.formToJSON=e=>Qw(G.isHTMLForm(e)?new FormData(e):e);Y.getAdapter=t2.getAdapter;Y.HttpStatusCode=Yh;Y.default=Y;const{Axios:l7,AxiosError:c7,CanceledError:d7,isCancel:u7,CancelToken:m7,VERSION:h7,all:p7,Cancel:x7,isAxiosError:f7,spread:g7,toFormData:b7,AxiosHeaders:y7,HttpStatusCode:v7,formToJSON:w7,getAdapter:j7,mergeConfig:k7}=Y;/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a2=(...e)=>e.filter((t,s,n)=>!!t&&n.indexOf(t)===s).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $C={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...$C,width:t,height:t,stroke:e,strokeWidth:n?Number(s)*24/Number(t):s,className:a2("lucide",a),...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(e,t)=>{const s=h.forwardRef(({className:n,...a},i)=>h.createElement(IC,{ref:i,iconNode:t,className:a2(`lucide-${OC(e)}`,n),...a}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ue("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=ue("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ue("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ue("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=ue("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=ue("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=ue("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ue("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qa="show-toast-notification",Ti={success:(e,t,s)=>{window.dispatchEvent(new CustomEvent(Qa,{detail:{type:"success",message:e,duration:t,action:s}}))},error:(e,t,s)=>{window.dispatchEvent(new CustomEvent(Qa,{detail:{type:"error",message:e,duration:t,action:s}}))},warning:(e,t,s)=>{window.dispatchEvent(new CustomEvent(Qa,{detail:{type:"warning",message:e,duration:t,action:s}}))},info:(e,t,s)=>{window.dispatchEvent(new CustomEvent(Qa,{detail:{type:"info",message:e,duration:t,action:s}}))}},Cg={success:4e3,error:6e3,warning:6e3,info:4e3},Sg={success:{bg:"bg-green-600",text:"text-master-text-primary-dark",icon:pt},error:{bg:"bg-red-600",text:"text-master-text-primary-dark",icon:Nt},warning:{bg:"bg-amber-600",text:"text-master-text-primary-dark",icon:jd},info:{bg:"bg-blue-600",text:"text-master-text-primary-dark",icon:ep}},Ag={success:{live:"polite",role:"status"},error:{live:"assertive",role:"alert"},warning:{live:"assertive",role:"alert"},info:{live:"polite",role:"status"}},rS=()=>{const[e,t]=h.useState([]),s=h.useRef(new Map),n=h.useCallback(l=>{t(d=>d.filter(u=>u.id!==l));const c=s.current.get(l);c&&(clearTimeout(c),s.current.delete(l))},[]),a=h.useCallback(l=>{t(d=>d.map(u=>u.id===l?{...u,isPaused:!0}:u));const c=s.current.get(l);c&&(clearTimeout(c),s.current.delete(l))},[]),i=h.useCallback(l=>{t(d=>d.map(u=>u.id===l?{...u,isPaused:!1}:u));const c=e.find(d=>d.id===l);if(c){const d=c.duration||Cg[c.type],u=setTimeout(()=>{n(l)},d);s.current.set(l,u)}},[e,n]),o=h.useCallback(l=>{const c=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:c,type:l.type,message:l.message,duration:l.duration,action:l.action,isPaused:!1};t(x=>[d,...x]);const u=l.duration||Cg[l.type],m=setTimeout(()=>{n(c)},u);s.current.set(c,m)},[n]);return h.useEffect(()=>{const l=d=>{o(d.detail)};window.addEventListener(Qa,l);const c=s.current;return()=>{window.removeEventListener(Qa,l),c.forEach(d=>clearTimeout(d)),c.clear()}},[o]),e.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block fixed top-4 right-4 z-[10000] space-y-3 pointer-events-none",children:e.map(l=>{const c=Sg[l.type],d=Ag[l.type],u=c.icon;return r.jsx("div",{className:"pointer-events-auto animate-slideInRight",role:d.role,"aria-live":d.live,"aria-atomic":"true",onMouseEnter:()=>a(l.id),onMouseLeave:()=>i(l.id),onFocus:()=>a(l.id),onBlur:()=>i(l.id),tabIndex:0,children:r.jsxs("div",{className:`
                  ${c.bg} ${c.text}
                  w-80 rounded-lg shadow-xl
                  flex items-start gap-3 p-4
                  transition-all duration-200
                  hover:shadow-2xl
                `,children:[r.jsx(u,{className:"w-6 h-6 flex-shrink-0 mt-0.5","aria-hidden":"true"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium leading-relaxed break-words",children:l.message}),l.action&&r.jsx("button",{onClick:l.action.onClick,className:"mt-2 text-xs font-semibold underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded",children:l.action.label})]}),r.jsx("button",{onClick:()=>n(l.id),className:"flex-shrink-0 p-1 rounded hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white transition-colors","aria-label":"Close notification",children:r.jsx(bt,{className:"w-4 h-4","aria-hidden":"true"})})]})},l.id)})}),r.jsx("div",{className:"md:hidden fixed bottom-4 left-4 right-4 z-[10000] flex flex-col items-center space-y-3 pointer-events-none",children:e.map(l=>{const c=Sg[l.type],d=Ag[l.type],u=c.icon;return r.jsx("div",{className:"pointer-events-auto w-full max-w-md animate-slideInUp",role:d.role,"aria-live":d.live,"aria-atomic":"true",onTouchStart:()=>a(l.id),onTouchEnd:()=>i(l.id),onFocus:()=>a(l.id),onBlur:()=>i(l.id),tabIndex:0,children:r.jsxs("div",{className:`
                  ${c.bg} ${c.text}
                  rounded-lg shadow-xl
                  flex items-start gap-3 p-4
                  transition-all duration-200
                `,children:[r.jsx(u,{className:"w-6 h-6 flex-shrink-0 mt-0.5","aria-hidden":"true"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium leading-relaxed break-words",children:l.message}),l.action&&r.jsx("button",{onClick:l.action.onClick,className:"mt-2 text-xs font-semibold underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded",children:l.action.label})]}),r.jsx("button",{onClick:()=>n(l.id),className:"flex-shrink-0 p-2 rounded hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close notification",children:r.jsx(bt,{className:"w-5 h-5","aria-hidden":"true"})})]})},l.id)})}),r.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideInUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .animate-slideInRight {
          animation: slideInRight 300ms ease-out;
        }

        .animate-slideInUp {
          animation: slideInUp 300ms ease-out;
        }
      `})]})},sS={current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0,user_type:null},error_message:null},Eg={service_id:null,service_name:null,is_callout:!1,selected_date:null,selected_time:null,barber_id:null,customer_name:null,customer_email:null,customer_phone:null,customer_address:null,booking_for_name:null,special_request:null,inspiration_photos:null,step_completed:0},ur={shop_name:"Master Fade",shop_address:"13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5",shop_phone:"+353833276229",shop_email:"info@masterfade.ie",operating_hours:"10:00 AM - 3:00 PM",capacity_mon_wed:2,capacity_thu_sun:3,booking_window_days:90,same_day_cutoff_hours:2,reminder_hours_before:2,services_enabled:!0,gallery_enabled:!0},Un=()=>{var e;return typeof window<"u"&&((e=window.__RUNTIME_CONFIG__)!=null&&e.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},im=e=>({id:e.user_id,email:e.email,name:e.name,phone:e.phone,is_verified:e.is_verified,created_at:e.created_at}),re=a5()(l5((e,t)=>({authentication_state:sS,booking_context:Eg,app_settings:ur,login_user:async(s,n)=>{var a,i;e(o=>({authentication_state:{...o.authentication_state,authentication_status:{...o.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const o=await Y.post(`${Un()}/api/auth/login`,{email:s,password:n},{headers:{"Content-Type":"application/json"}}),{user:l,token:c}=o.data,d=im(l);e(()=>({authentication_state:{current_user:d,auth_token:c,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}})),setTimeout(()=>{Ti.success(`Welcome back, ${d.name}!`)},100)}catch(o){const l=((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||o.message||"Login failed";throw e(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:l}})),new Error(l)}},login_admin:async(s,n,a)=>{var i,o;e(l=>({authentication_state:{...l.authentication_state,authentication_status:{...l.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const l={email:s,password:n};a&&(l.two_factor_code=a);const c=await Y.post(`${Un()}/api/admin/login`,l,{headers:{"Content-Type":"application/json"}});if(c.data.requires_2fa)return e(x=>({authentication_state:{...x.authentication_state,authentication_status:{...x.authentication_state.authentication_status,is_loading:!1},error_message:"Two-factor authentication required"}})),{requires_2fa:!0};const{admin:d,token:u}=c.data,m={id:d.admin_id,email:d.email,name:d.name||"Admin",phone:d.phone||"",is_verified:!0,created_at:d.created_at||new Date().toISOString()};return e(()=>({authentication_state:{current_user:m,auth_token:u,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"admin"},error_message:null}})),{requires_2fa:!1}}catch(l){const c=((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||l.message||"Admin login failed";throw e(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:c}})),new Error(c)}},register_user:async(s,n,a,i)=>{var o,l;e(c=>({authentication_state:{...c.authentication_state,authentication_status:{...c.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const c=await Y.post(`${Un()}/api/auth/register`,{email:s,password:n,name:a,phone:i},{headers:{"Content-Type":"application/json"}}),{user:d,token:u}=c.data,m=im(d);e(()=>({authentication_state:{current_user:m,auth_token:u,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}}))}catch(c){const d=((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||c.message||"Registration failed";throw e(u=>({authentication_state:{...u.authentication_state,authentication_status:{...u.authentication_state.authentication_status,is_loading:!1},error_message:d}})),new Error(d)}},logout:()=>{const{authentication_state:s}=t(),n=s.auth_token;n&&Y.post(`${Un()}/api/auth/logout`,{},{headers:{Authorization:`Bearer ${n}`}}).catch(()=>{}),e({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null}})},initialize_auth:async()=>{const{authentication_state:s}=t(),n=s.auth_token,a=s.authentication_status.user_type;if(!n){e(i=>({authentication_state:{...i.authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null}}}));return}try{if(a==="admin"){const i=s.current_user;if(i){e(()=>({authentication_state:{current_user:i,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"admin"},error_message:null}}));return}else throw new Error("Admin user data not found")}else{const i=await Y.get(`${Un()}/api/auth/me`,{headers:{Authorization:`Bearer ${n}`}}),{user:o}=i.data,l=im(o);e(()=>({authentication_state:{current_user:l,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}}));return}}catch{e({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null}})}},clear_auth_error:()=>{e(s=>({authentication_state:{...s.authentication_state,error_message:null}}))},update_current_user:s=>{e(n=>({authentication_state:{...n.authentication_state,current_user:n.authentication_state.current_user?{...n.authentication_state.current_user,...s}:null}}))},update_booking_context:s=>{e(n=>{const a={...n.booking_context,...s};return console.log("[Booking Context Update]",{previous:n.booking_context,updates:s,result:a}),{booking_context:a}})},clear_booking_context:()=>{e({booking_context:Eg})},set_booking_step:s=>{e(n=>({booking_context:{...n.booking_context,step_completed:s}}))},populate_booking_from_user:()=>{const{authentication_state:s}=t(),n=s.current_user;n&&e(a=>({booking_context:{...a.booking_context,customer_name:n.name,customer_email:n.email,customer_phone:n.phone}}))},fetch_app_settings:async()=>{try{const{authentication_state:s}=t(),n=s.authentication_status.user_type==="admin",a=s.auth_token;let i;n&&a?i=await Y.get(`${Un()}/api/admin/settings`,{headers:{Authorization:`Bearer ${a}`}}):i=await Y.get(`${Un()}/api/settings`);const o=i.data;e({app_settings:{shop_name:o.shop_name||ur.shop_name,shop_address:o.shop_address||ur.shop_address,shop_phone:o.shop_phone||ur.shop_phone,shop_email:o.shop_email||ur.shop_email,operating_hours:o.operating_hours||ur.operating_hours,capacity_mon_wed:o.capacity_mon_wed??ur.capacity_mon_wed,capacity_thu_sun:o.capacity_thu_sun??ur.capacity_thu_sun,booking_window_days:o.booking_window_days??ur.booking_window_days,same_day_cutoff_hours:o.same_day_cutoff_hours??ur.same_day_cutoff_hours,reminder_hours_before:o.reminder_hours_before??ur.reminder_hours_before,services_enabled:o.services_enabled??ur.services_enabled,gallery_enabled:o.gallery_enabled??ur.gallery_enabled}})}catch(s){console.error("Failed to fetch app settings:",s)}},update_app_settings:s=>{e(n=>({app_settings:{...n.app_settings,...s}}))}}),{name:"barberslot-storage",partialize:e=>({authentication_state:{current_user:e.authentication_state.current_user,auth_token:e.authentication_state.auth_token,authentication_status:{is_authenticated:e.authentication_state.authentication_status.is_authenticated,is_loading:!1,user_type:e.authentication_state.authentication_status.user_type},error_message:null},booking_context:e.booking_context})})),m2=h.createContext(void 0),nS=({children:e})=>{const[t,s]=h.useState(!1),n=Ie(),[a,i]=h.useState(null),o=h.useCallback((c,d)=>{t||(s(!0),i({path:c,callback:d}),setTimeout(()=>{n(c),d&&d(),setTimeout(()=>{s(!1),i(null)},100)},800))},[t,n]),l={isTransitioning:t,transitionTo:o};return r.jsx(m2.Provider,{value:l,children:e})},du=()=>{const e=h.useContext(m2);if(!e)throw new Error("usePageTransition must be used within a PageTransitionProvider");return e},aS=()=>{const[e,t]=h.useState(!1),[s,n]=h.useState(!1),[a,i]=h.useState(!1),[o,l]=h.useState(!1),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),m=Ie(),x=zs(),{transitionTo:p}=du(),j=re(R=>R.authentication_state.authentication_status.is_authenticated),f=re(R=>R.authentication_state.authentication_status.user_type),v=re(R=>R.authentication_state.current_user),b=re(R=>R.app_settings.shop_name),g=re(R=>R.app_settings.services_enabled),w=re(R=>R.logout),N=()=>{w(),m(f==="admin"?"/admin/login":"/"),n(!1),i(!1)},_=()=>{n(!s),i(!1),l(!1)},y=()=>{i(!a),n(!1),l(!1)},S=()=>{l(!o),n(!1),i(!1)},A=()=>{t(!e)},I=()=>g?"/book/service":"/book/date",F=()=>j&&f==="admin"?"/admin":"/",H=R=>x.pathname===R;h.useEffect(()=>{const R=z=>{c.current&&!c.current.contains(z.target)&&n(!1),d.current&&!d.current.contains(z.target)&&i(!1),u.current&&!u.current.contains(z.target)&&l(!1)};return(s||a||o)&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[s,a,o]),h.useEffect(()=>{const R=z=>{z.key==="Escape"&&(n(!1),i(!1),l(!1),t(!1))};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[]),h.useEffect(()=>{const R=()=>{window.innerWidth>=768&&e&&t(!1)};return window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}},[e]);const E=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[r.jsx(Z,{to:"/",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Home"}),r.jsx(Z,{to:I(),className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H(I())?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Services"}),r.jsx(Z,{to:I(),className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H(I())?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Call-Outs"}),r.jsx(Z,{to:"/gallery",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/gallery")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Gallery"}),r.jsx(Z,{to:"/search",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/search")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Live Queue"})]}),r.jsx("div",{className:"hidden md:flex items-center space-x-4",children:r.jsx(Z,{to:"/login",className:"bg-white/10 backdrop-blur-sm text-master-text-primary-dark hover:bg-white/20 px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 border border-white/30",children:"Login"})})]}),L=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[r.jsx("button",{onClick:()=>p(I()),className:"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark hover:from-red-700 hover:to-red-800 px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl border border-white/20",children:"Book Appointment"}),r.jsx(Z,{to:"/dashboard",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/dashboard")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"My Bookings"}),r.jsx(Z,{to:"/gallery",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/gallery")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Gallery"})]}),r.jsxs("div",{className:"hidden md:block relative",ref:c,children:[r.jsxs("button",{onClick:_,onKeyDown:R=>R.key==="Enter"&&_(),className:"flex items-center space-x-2 text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors","aria-label":"User menu","aria-expanded":s,"aria-haspopup":"true",children:[r.jsx(cr,{size:20}),r.jsx("span",{className:"max-w-32 truncate",children:(v==null?void 0:v.name)||(v==null?void 0:v.email)}),r.jsx(xa,{size:16,className:`transition-transform ${s?"rotate-180":""}`})]}),s&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[r.jsx(Z,{to:"/dashboard",className:"block px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-gray-100 transition-colors",onClick:()=>n(!1),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(nl,{size:16}),r.jsx("span",{children:"Dashboard"})]})}),r.jsx(Z,{to:"/profile",className:"block px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-gray-100 transition-colors",onClick:()=>n(!1),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(QC,{size:16}),r.jsx("span",{children:"Profile Settings"})]})}),r.jsx("hr",{className:"my-1 border-gray-200"}),r.jsx("button",{onClick:N,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kg,{size:16}),r.jsx("span",{children:"Logout"})]})})]})]})]}),O=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[r.jsx(Z,{to:"/admin",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Dashboard"}),r.jsxs(Z,{to:"/admin/queue",className:`relative text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin/queue")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:["Call-Outs",r.jsxs("span",{className:"absolute -top-1 -right-1 flex items-center",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-green-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),r.jsxs("div",{className:"relative",ref:u,children:[r.jsxs("button",{onClick:S,onKeyDown:R=>R.key==="Enter"&&S(),className:`flex items-center space-x-1 text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors ${x.pathname.startsWith("/admin/bookings")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,"aria-label":"Bookings menu","aria-expanded":o,"aria-haspopup":"true",children:[r.jsx("span",{children:"Bookings"}),r.jsx(xa,{size:16,className:`transition-transform ${o?"rotate-180":""}`})]}),o&&r.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[r.jsx(Z,{to:"/admin/bookings/calendar",className:"block px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(qe,{size:16}),r.jsx("span",{children:"Calendar View"})]})}),r.jsx(Z,{to:"/admin/bookings",className:"block px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(qe,{size:16}),r.jsx("span",{children:"List View"})]})})]})]}),r.jsx(Z,{to:"/admin/customers",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin/customers")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Customers"}),r.jsx(Z,{to:"/admin/barbers",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin/barbers")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Barbers"}),r.jsx(Z,{to:"/admin/gallery",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin/gallery")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Gallery"}),r.jsx(Z,{to:"/admin/settings",className:`text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium transition-colors ${H("/admin/settings")?"text-master-text-primary-dark font-semibold bg-red-800/30":""}`,children:"Settings"})]}),r.jsxs("div",{className:"hidden md:block relative",ref:d,children:[r.jsxs("button",{onClick:y,onKeyDown:R=>R.key==="Enter"&&y(),className:"flex items-center space-x-2 text-master-text-primary-dark hover:text-master-text-primary-dark px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-red-400 transition-colors","aria-label":"Admin menu","aria-expanded":a,"aria-haspopup":"true",children:[r.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-full p-1",children:r.jsx(cr,{size:16})}),r.jsx("span",{className:"max-w-32 truncate",children:(v==null?void 0:v.name)||"Admin"}),r.jsx(xa,{size:16,className:`transition-transform ${a?"rotate-180":""}`})]}),a&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[r.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-gray-100 transition-colors",onClick:()=>i(!1),children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(nl,{size:16}),r.jsx("span",{children:"View Public Site"})]})}),r.jsx("hr",{className:"my-1 border-gray-200"}),r.jsx("button",{onClick:N,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kg,{size:16}),r.jsx("span",{children:"Logout"})]})})]})]})]});return r.jsxs(r.Fragment,{children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-master-text-primary-dark px-4 py-2 rounded-md z-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Skip to main content"}),r.jsxs("nav",{className:"bg-gradient-to-r from-red-950 via-red-900 to-red-950 shadow-lg sticky top-0 z-40 border-b-2 border-red-800/30",role:"navigation","aria-label":"Main navigation",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs(Z,{to:F(),className:"flex items-center gap-3 group focus:outline-none focus:ring-2 focus:ring-red-400 rounded-md px-2 py-1 transition-all",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-300 via-gray-200 to-gray-400 rounded-lg flex items-center justify-center shadow-lg transform group-hover:scale-105 transition-transform",children:r.jsx(il,{className:"w-6 h-6 text-red-900 transform rotate-45",strokeWidth:2.5})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/40 via-transparent to-transparent rounded-lg pointer-events-none"})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xl font-black tracking-tight bg-gradient-to-r from-gray-100 via-white to-gray-200 bg-clip-text text-transparent leading-none",style:{textShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:b}),r.jsx("span",{className:"text-[10px] font-medium text-red-300 tracking-widest uppercase leading-none mt-0.5",children:"Premium Barbers"})]})]})}),r.jsxs("div",{className:"flex items-center space-x-8",children:[!j&&E(),j&&f==="user"&&L(),j&&f==="admin"&&O()]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:A,className:"inline-flex items-center justify-center p-2 rounded-md text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-400 transition-colors","aria-label":"Toggle mobile menu","aria-expanded":e,"data-testid":"mobile-menu-button",children:e?r.jsx(bt,{size:24,"data-testid":"close-icon"}):r.jsx(GC,{size:24,"data-testid":"menu-icon"})})})]})}),e&&r.jsx("div",{className:"md:hidden border-t border-red-800/30 bg-gradient-to-br from-red-950 via-red-900 to-red-950","data-testid":"mobile-menu-panel",children:r.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[!j&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{to:"/",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Home"}),r.jsx(Z,{to:I(),className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Services"}),r.jsx(Z,{to:I(),className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Call-Outs"}),r.jsx(Z,{to:"/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Gallery"}),r.jsx(Z,{to:"/search",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Live Queue"}),r.jsx("div",{className:"pt-4 border-t border-red-800/30 space-y-2",children:r.jsx(Z,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium bg-white/10 backdrop-blur-sm text-master-text-primary-dark hover:bg-white/20 transition-colors text-center border border-white/30",onClick:()=>t(!1),children:"Login"})})]}),j&&f==="user"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{t(!1),p(I())},className:"block w-full px-3 py-2 rounded-md text-base font-medium bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark hover:from-red-700 hover:to-red-800 transition-colors text-center border border-white/20",children:"Book Appointment"}),r.jsx(Z,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"My Bookings"}),r.jsx(Z,{to:"/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Gallery"}),r.jsxs("div",{className:"pt-4 border-t border-red-800/30 space-y-2",children:[r.jsx(Z,{to:"/profile",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Profile Settings"}),r.jsx("button",{onClick:()=>{N(),t(!1)},className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-300 hover:text-master-text-primary-dark hover:bg-red-800/50 transition-colors",children:"Logout"})]})]}),j&&f==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{to:"/admin",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Dashboard"}),r.jsx(Z,{to:"/admin/bookings/calendar",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Calendar View"}),r.jsx(Z,{to:"/admin/bookings",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Bookings List"}),r.jsx(Z,{to:"/admin/customers",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Customers"}),r.jsx(Z,{to:"/admin/barbers",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Barbers"}),r.jsx(Z,{to:"/admin/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Gallery"}),r.jsx(Z,{to:"/admin/settings",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"Settings"}),r.jsxs("div",{className:"pt-4 border-t border-red-800/30 space-y-2",children:[r.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-3 py-2 rounded-md text-base font-medium text-master-text-primary-dark hover:text-master-text-primary-dark hover:bg-red-800/30 transition-colors",onClick:()=>t(!1),children:"View Public Site"}),r.jsx("button",{onClick:()=>{N(),t(!1)},className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-300 hover:text-master-text-primary-dark hover:bg-red-800/50 transition-colors",children:"Logout"})]})]})]})})]})]})},iS=()=>{const e=re(y=>y.app_settings.shop_name),t=re(y=>y.app_settings.shop_address),s=re(y=>y.app_settings.shop_phone),n=re(y=>y.app_settings.shop_email),a=re(y=>y.app_settings.operating_hours),i=re(y=>y.app_settings.social_facebook),o=re(y=>y.app_settings.social_instagram),l=re(y=>y.app_settings.social_twitter),c=re(y=>y.authentication_state.authentication_status.user_type),[d,u]=h.useState(!1),[m,x]=h.useState(!1),[p,j]=h.useState(!1),f=c!=="admin",v=new Date().getFullYear(),b=t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",g=()=>{u(!0),x(!1),j(!1)},w=()=>{x(!0),u(!1),j(!1)},N=()=>{j(!0),u(!1),x(!1)},_=()=>{u(!1),x(!1),j(!1)};return r.jsxs(r.Fragment,{children:[r.jsx("footer",{className:"bg-gradient-to-br from-[#1A0505] via-[#2D0808] to-[#1A0505] text-master-text-secondary-dark border-t border-white/10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark text-lg font-semibold mb-4",children:e}),t&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsxs("svg",{className:"w-5 h-5 text-master-text-muted-dark mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"text-master-text-secondary-dark hover:text-master-text-primary-dark transition-colors text-sm leading-relaxed hover:text-amber-400",children:t})]}),s&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-master-text-muted-dark flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.jsx("a",{href:`tel:${s}`,className:"text-master-text-secondary-dark hover:text-master-text-primary-dark transition-colors text-sm hover:text-amber-400",children:s})]}),n&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-master-text-muted-dark flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("a",{href:`mailto:${n}`,className:"text-master-text-secondary-dark hover:text-master-text-primary-dark transition-colors text-sm hover:text-amber-400",children:n})]}),a&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-master-text-muted-dark mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm leading-relaxed",children:a})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark text-lg font-semibold mb-4",children:"Quick Links"}),r.jsxs("nav",{className:"flex flex-col space-y-3",children:[r.jsx(Z,{to:"/book/service",className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 inline-block",children:"Book Appointment"}),r.jsx(Z,{to:"/search",className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 inline-block",children:"Find Booking"}),r.jsx(Z,{to:"/gallery",className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 inline-block",children:"Gallery"}),r.jsx(Z,{to:"/#about",className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 inline-block",children:"About"}),f&&r.jsx(Z,{to:"/admin/login",className:"text-master-text-muted-dark hover:text-amber-400 transition-colors text-xs py-1 inline-block",children:"Admin Login"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark text-lg font-semibold mb-4",children:"Legal"}),r.jsxs("nav",{className:"flex flex-col space-y-3",children:[r.jsx("button",{onClick:g,className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 text-left",children:"Terms of Service"}),r.jsx("button",{onClick:w,className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 text-left",children:"Privacy Policy"}),r.jsx("button",{onClick:N,className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 text-left",children:"Cancellation Policy"}),r.jsx("a",{href:`mailto:${n||"info@barberslot.com"}`,className:"text-master-text-secondary-dark hover:text-amber-400 transition-colors text-sm py-1 inline-block",children:"Contact Us"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark text-lg font-semibold mb-4",children:"Follow Us"}),r.jsxs("div",{className:"flex space-x-4",children:[i&&r.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Facebook",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors backdrop-blur-sm",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),o&&r.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Instagram",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-pink-600 transition-colors backdrop-blur-sm",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),l&&r.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Twitter",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-blue-400 transition-colors backdrop-blur-sm",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})})]})]})]}),r.jsxs("div",{className:"mt-12 pt-8 border-t border-white/10 text-center text-sm text-master-text-muted-dark",children:[r.jsxs("p",{children:[" ",v," ",e||"Master Fade",". All rights reserved."]}),r.jsxs("p",{className:"mt-2 text-xs",children:["13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5 | ",s||"+353833276229"]})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:_,children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),r.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-light",children:"Terms of Service"}),r.jsx("button",{onClick:_,className:"text-master-text-muted-dark hover:text-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"prose prose-sm max-w-none text-master-text-secondary-dark max-h-96 overflow-y-auto",children:[r.jsxs("p",{className:"mb-4",children:["Welcome to ",e,". By accessing and using our services, you agree to be bound by these Terms of Service."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Booking & Appointments"}),r.jsxs("p",{className:"mb-4",children:["- All bookings must be made through our online system or by phone.",r.jsx("br",{}),"- Cancellations must be made at least 2 hours before your scheduled appointment.",r.jsx("br",{}),"- No-shows may result in restrictions on future bookings."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"2. Services"}),r.jsxs("p",{className:"mb-4",children:["- Services are provided by licensed professionals.",r.jsx("br",{}),"- Service duration and pricing are subject to change.",r.jsx("br",{}),"- Special requests are accommodated when possible but not guaranteed."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Customer Conduct"}),r.jsxs("p",{className:"mb-4",children:["- Respectful behavior is required at all times.",r.jsx("br",{}),"- The shop reserves the right to refuse service.",r.jsx("br",{}),"- Damage to property will result in charges."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Liability"}),r.jsxs("p",{className:"mb-4",children:["- ",e," is not liable for personal items lost or stolen.",r.jsx("br",{}),"- We are not responsible for allergic reactions to products.",r.jsx("br",{}),"- Service results may vary based on individual hair type and condition."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Changes to Terms"}),r.jsx("p",{className:"mb-4",children:"We reserve the right to modify these terms at any time. Continued use of our services constitutes acceptance of updated terms."}),r.jsxs("p",{className:"mt-6 text-sm text-master-text-muted-dark",children:["Last updated: ",new Date().toLocaleDateString()]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:_,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-md hover:from-red-700 hover:to-red-800 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg",children:"Close"})})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:_,children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),r.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-light",children:"Privacy Policy"}),r.jsx("button",{onClick:_,className:"text-master-text-muted-dark hover:text-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"prose prose-sm max-w-none text-master-text-secondary-dark max-h-96 overflow-y-auto",children:[r.jsxs("p",{className:"mb-4",children:["At ",e,", we are committed to protecting your privacy. This policy explains how we collect, use, and safeguard your personal information."]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Information We Collect"}),r.jsxs("p",{className:"mb-4",children:["- Name, email address, and phone number for bookings",r.jsx("br",{}),"- Appointment preferences and special requests",r.jsx("br",{}),"- Payment information (processed securely by third-party providers)",r.jsx("br",{}),"- Usage data and cookies for website functionality"]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"2. How We Use Your Information"}),r.jsxs("p",{className:"mb-4",children:["- To process and confirm your bookings",r.jsx("br",{}),"- To send appointment reminders and notifications",r.jsx("br",{}),"- To improve our services and customer experience",r.jsx("br",{}),"- To comply with legal obligations"]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Information Sharing"}),r.jsxs("p",{className:"mb-4",children:["- We do not sell your personal information to third parties",r.jsx("br",{}),"- Information is shared only with service providers necessary for operations",r.jsx("br",{}),"- We may disclose information if required by law"]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Data Security"}),r.jsxs("p",{className:"mb-4",children:["- We use industry-standard encryption to protect your data",r.jsx("br",{}),"- Access to personal information is restricted to authorized personnel",r.jsx("br",{}),"- Regular security audits are conducted"]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Your Rights"}),r.jsxs("p",{className:"mb-4",children:["- You can access, update, or delete your personal information",r.jsx("br",{}),"- You can opt-out of marketing communications",r.jsx("br",{}),"- You can request a copy of your data"]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"6. Cookies"}),r.jsx("p",{className:"mb-4",children:"Our website uses cookies to enhance user experience. You can disable cookies in your browser settings, though this may affect functionality."}),r.jsxs("p",{className:"mt-6 text-sm text-master-text-muted-dark",children:["Last updated: ",new Date().toLocaleDateString()]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:_,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-md hover:from-red-700 hover:to-red-800 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg",children:"Close"})})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:_,children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),r.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-light",children:"Cancellation Policy"}),r.jsx("button",{onClick:_,className:"text-master-text-muted-dark hover:text-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"prose prose-sm max-w-none text-master-text-secondary-dark max-h-96 overflow-y-auto",children:[r.jsx("p",{className:"mb-4",children:"We understand that plans can change. Please review our cancellation policy below."}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Cancellation Window"}),r.jsxs("p",{className:"mb-4",children:["You can cancel your appointment ",r.jsx("strong",{children:"up to 2 hours before"})," your scheduled time without any penalty. Cancellations can be made through:"]}),r.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[r.jsx("li",{children:"Your booking confirmation email"}),r.jsx("li",{children:"Our website using your ticket number"}),r.jsxs("li",{children:["Calling us at ",s||"(555) 123-4567"]})]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Late Cancellations"}),r.jsxs("p",{className:"mb-4",children:["Cancellations made ",r.jsx("strong",{children:"less than 2 hours before"})," your appointment time cannot be processed online. Please contact us directly:"]}),r.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[r.jsxs("li",{children:["Phone: ",s||"(555) 123-4567"]}),r.jsxs("li",{children:["Email: ",n||"info@barberslot.com"]})]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"No-Show Policy"}),r.jsx("p",{className:"mb-4",children:"If you miss your appointment without cancelling:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[r.jsx("li",{children:"Your booking will be marked as a no-show"}),r.jsx("li",{children:"Repeated no-shows may result in booking restrictions"}),r.jsx("li",{children:"We appreciate your understanding as this helps us serve all customers better"})]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Rescheduling"}),r.jsx("p",{className:"mb-4",children:"To reschedule your appointment:"}),r.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[r.jsx("li",{children:"Cancel your existing booking (following the 2-hour rule)"}),r.jsx("li",{children:"Create a new booking for your preferred date and time"}),r.jsx("li",{children:"Your service preferences will be saved for convenience"})]}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Emergency Situations"}),r.jsx("p",{className:"mb-4",children:"We understand emergencies happen. If you need to cancel due to an emergency, please contact us as soon as possible. We'll do our best to accommodate your situation."}),r.jsxs("p",{className:"mt-6 text-sm text-master-text-muted-dark",children:["Last updated: ",new Date().toLocaleDateString()]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:_,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-md hover:from-red-700 hover:to-red-800 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 shadow-lg",children:"Close"})})]})]})})]})},oS=()=>{const[e,t]=h.useState(!1),[s,n]=h.useState(new Set),[a,i]=h.useState(window.innerWidth<1024),o=h.useRef(null),l=h.useRef(null),c=h.useRef(null),d=h.useRef(null),u=zs(),m=Ie(),x=re(_=>_.authentication_state.authentication_status.is_authenticated),p=re(_=>_.authentication_state.authentication_status.user_type),j=re(_=>_.authentication_state.current_user),f=re(_=>_.logout),v=h.useCallback(()=>{t(!1),n(new Set)},[]),b=h.useCallback(()=>{v()},[v]),g=h.useCallback(_=>{n(y=>{const S=new Set(y);return S.has(_)?S.delete(_):S.add(_),S})},[]),w=h.useCallback(()=>{f(),v(),m("/")},[f,m,v]),N=h.useCallback(_=>u.pathname===_,[u.pathname]);return h.useEffect(()=>{t(!1),n(new Set)},[u.pathname]),h.useEffect(()=>{const _=y=>{y.key==="Escape"&&e&&v()};if(e)return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[e,v]),h.useEffect(()=>{if(!e||!o.current)return;d.current=document.activeElement;const y=o.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),S=y[0],A=y[y.length-1],I=F=>{F.key==="Tab"&&(F.shiftKey?document.activeElement===S&&(F.preventDefault(),A==null||A.focus()):document.activeElement===A&&(F.preventDefault(),S==null||S.focus()))};return document.addEventListener("keydown",I),setTimeout(()=>{var F;return(F=c.current)==null?void 0:F.focus()},100),()=>{document.removeEventListener("keydown",I),d.current&&d.current.focus()}},[e]),h.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),h.useEffect(()=>{const _=()=>t(y=>!y);return window.addEventListener("toggleMobileNav",_),()=>window.removeEventListener("toggleMobileNav",_)},[]),h.useEffect(()=>{const _=()=>{const y=window.innerWidth<1024;i(y),!y&&e&&v()};return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[e,v]),!a&&!e?null:r.jsxs(r.Fragment,{children:[e&&r.jsx("div",{ref:l,className:"fixed inset-0 bg-black bg-opacity-50 z-[9998] transition-opacity duration-300",onClick:b,"aria-hidden":"true"}),r.jsxs("div",{ref:o,className:`fixed top-0 left-0 h-full w-4/5 max-w-sm bg-white z-[9999] transform transition-transform duration-300 ease-in-out overflow-y-auto shadow-2xl ${e?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-label":"Mobile Navigation Menu",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[r.jsx("h2",{className:"text-lg font-semibold text-master-text-primary-light",children:"Menu"}),r.jsx("button",{ref:c,onClick:v,className:"p-2 rounded-md hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close menu",children:r.jsx(bt,{className:"h-6 w-6 text-master-text-secondary-dark"})})]}),x&&j&&r.jsxs("div",{className:"p-4 bg-blue-50 border-b border-blue-100",children:[r.jsx("p",{className:"text-sm font-medium text-master-text-primary-light",children:j.name}),r.jsx("p",{className:"text-xs text-master-text-muted-dark mt-1",children:j.email})]}),r.jsxs("nav",{className:"py-4",role:"navigation",children:[!x&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{to:"/",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/")?"page":void 0,children:"Home"}),r.jsx(Z,{to:"/book/service",className:"block px-6 py-3 text-base font-semibold bg-blue-600 text-master-text-primary-dark hover:bg-blue-700 transition-colors mx-4 my-2 rounded-lg text-center shadow-md",children:"Book Appointment"}),r.jsx(Z,{to:"/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/gallery")?"page":void 0,children:"Our Work"}),r.jsx(Z,{to:"/search",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/search")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/search")?"page":void 0,children:"Find My Booking"}),r.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),r.jsx(Z,{to:"/register",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/register")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/register")?"page":void 0,children:"Sign Up"}),r.jsx(Z,{to:"/login",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/login")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/login")?"page":void 0,children:"Log In"})]}),x&&p==="user"&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{to:"/dashboard",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/dashboard")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/dashboard")?"page":void 0,children:"Dashboard"}),r.jsx(Z,{to:"/book/service",className:"block px-6 py-3 text-base font-semibold bg-blue-600 text-master-text-primary-dark hover:bg-blue-700 transition-colors mx-4 my-2 rounded-lg text-center shadow-md",children:"Book Appointment"}),r.jsx(Z,{to:"/dashboard?tab=upcoming",className:`block px-6 py-3 text-base font-medium transition-colors ${u.pathname==="/dashboard"?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,children:"My Bookings"}),r.jsx(Z,{to:"/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/gallery")?"page":void 0,children:"Gallery"}),r.jsx(Z,{to:"/profile",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/profile")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/profile")?"page":void 0,children:"Profile Settings"}),r.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),r.jsx("button",{onClick:w,className:"block w-full text-left px-6 py-3 text-base font-medium text-red-600 hover:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]}),x&&p==="admin"&&r.jsxs(r.Fragment,{children:[r.jsx(Z,{to:"/admin",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/admin")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/admin")?"page":void 0,children:"Dashboard"}),r.jsxs("div",{children:[r.jsxs("button",{onClick:()=>g("bookings"),className:"flex items-center justify-between w-full px-6 py-3 text-base font-medium text-master-text-secondary-dark hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":s.has("bookings"),"aria-controls":"bookings-submenu",children:[r.jsx("span",{children:"Bookings"}),s.has("bookings")?r.jsx(xa,{className:"h-5 w-5 text-master-text-muted-dark","aria-hidden":"true"}):r.jsx(As,{className:"h-5 w-5 text-master-text-muted-dark","aria-hidden":"true"})]}),s.has("bookings")&&r.jsxs("div",{id:"bookings-submenu",className:"bg-gray-50",children:[r.jsx(Z,{to:"/admin/bookings/calendar",className:`block pl-12 pr-6 py-3 text-sm font-medium transition-colors ${N("/admin/bookings/calendar")?"text-blue-600 bg-blue-50":"text-master-text-muted-dark hover:bg-gray-100"}`,"aria-current":N("/admin/bookings/calendar")?"page":void 0,children:"Calendar View"}),r.jsx(Z,{to:"/admin/bookings",className:`block pl-12 pr-6 py-3 text-sm font-medium transition-colors ${N("/admin/bookings")?"text-blue-600 bg-blue-50":"text-master-text-muted-dark hover:bg-gray-100"}`,"aria-current":N("/admin/bookings")?"page":void 0,children:"List View"})]})]}),r.jsx(Z,{to:"/admin/customers",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/admin/customers")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/admin/customers")?"page":void 0,children:"Customers"}),r.jsx(Z,{to:"/admin/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/admin/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/admin/gallery")?"page":void 0,children:"Gallery"}),r.jsx(Z,{to:"/admin/reports",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/admin/reports")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/admin/reports")?"page":void 0,children:"Reports"}),r.jsx(Z,{to:"/admin/settings",className:`block px-6 py-3 text-base font-medium transition-colors ${N("/admin/settings")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-master-text-secondary-dark hover:bg-gray-50"}`,"aria-current":N("/admin/settings")?"page":void 0,children:"Settings"}),r.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),r.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-3 text-base font-medium text-master-text-secondary-dark hover:bg-gray-50 transition-colors",children:"View Public Site"}),r.jsx("button",{onClick:w,className:"block w-full text-left px-6 py-3 text-base font-medium text-red-600 hover:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]})]})]})]})},lS=h.createContext(void 0),cS=()=>{const e=re(l=>l.authentication_state.authentication_status.is_loading),t=h.useContext(lS),s=e,n=(t==null?void 0:t.isLoading)||!1,a=s||n,i=(t==null?void 0:t.message)||"Loading...",o=(t==null?void 0:t.type)||"fullscreen";return h.useEffect(()=>{if(a&&o==="fullscreen"){const l=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=l}}},[a,o]),h.useEffect(()=>{if(!a)return;const l=c=>{c.key==="Escape"&&t&&!s&&t.hideLoading()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[a,t,s]),a?r.jsxs(r.Fragment,{children:[o==="fullscreen"?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[9999]",role:"status","aria-live":"polite","aria-busy":"true","aria-label":i,onClick:l=>l.stopPropagation(),children:r.jsxs("div",{className:"flex flex-col items-center space-y-4 px-6",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600",style:{animation:"spin 1.5s linear infinite"}}),r.jsx("p",{className:"text-master-text-primary-dark text-lg font-medium text-center max-w-md leading-relaxed",children:i}),t&&!s&&r.jsx("p",{className:"text-master-text-secondary-dark text-xs text-center mt-2",children:"Press ESC to cancel"})]})}):r.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg",role:"status","aria-live":"polite","aria-busy":"true","aria-label":i,onClick:l=>l.stopPropagation(),children:r.jsxs("div",{className:"flex flex-col items-center space-y-3 px-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-4 border-b-4 border-blue-600",style:{animation:"spin 1.5s linear infinite"}}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm font-medium text-center max-w-sm",children:i})]})}),r.jsx("style",{children:`
        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
      `})]}):null};let kd=null;const Wn=()=>{kd&&kd()},dS=()=>{const e=Ie(),[t,s]=h.useState(null),[n,a]=h.useState(!1),i=h.useRef(null),o=h.useRef(null),l=h.useRef(null);h.useEffect(()=>(kd=()=>{a(!1),setTimeout(()=>s(null),200)},()=>{kd=null}),[]);const c=()=>{const _="w-16 h-16";switch(j){case"network":return r.jsx(tS,{className:`${_} text-red-500`,"aria-hidden":"true"});case"auth":return r.jsx(cu,{className:`${_} text-red-500`,"aria-hidden":"true"});case"validation":return r.jsx(De,{className:`${_} text-amber-500`,"aria-hidden":"true"});case"server":return r.jsx(jd,{className:`${_} text-red-500`,"aria-hidden":"true"});case"not_found":return r.jsx(WC,{className:`${_} text-red-500`,"aria-hidden":"true"});case"permission":return r.jsx(YC,{className:`${_} text-red-500`,"aria-hidden":"true"});default:return r.jsx(De,{className:`${_} text-red-500`,"aria-hidden":"true"})}},d=se.useCallback(()=>{if(!t)return"Error";const{type:_}=t;switch(_){case"network":return"Connection Error";case"auth":return"Authentication Required";case"validation":return"Validation Error";case"server":return"Server Error";case"not_found":return"Page Not Found";case"permission":return"Access Denied";default:return"Error"}},[t]),u=se.useCallback(()=>{if(!t)return"OK";const{type:_,onRetry:y}=t;switch(_){case"network":return"Try Again";case"auth":return"Log In";case"validation":return"OK";case"server":return y?"Try Again":"Dismiss";case"not_found":return"Go Home";case"permission":return"Go Back";default:return"OK"}},[t]),m=se.useCallback(()=>{if(!t){Wn();return}const{type:_,onRetry:y}=t;_==="auth"?(e("/login"),Wn()):_==="not_found"?(e("/"),Wn()):_==="permission"?(e(-1),Wn()):(y&&y(),Wn())},[t,e]),x=se.useCallback(()=>{t!=null&&t.onDismiss&&t.onDismiss(),Wn()},[t]),p=se.useCallback(_=>{_.target===_.currentTarget&&!(t!=null&&t.criticalError)&&x()},[t,x]);if(h.useEffect(()=>{if(!n||!t)return;const _=y=>{y.key==="Escape"&&!t.criticalError&&x()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[n,t,x]),h.useEffect(()=>{if(!n||!t)return;const _=i.current;if(!_)return;const y=_.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),S=y[0],A=y[y.length-1],I=F=>{F.key==="Tab"&&(F.shiftKey?document.activeElement===S&&(F.preventDefault(),A==null||A.focus()):document.activeElement===A&&(F.preventDefault(),S==null||S.focus()))};return _.addEventListener("keydown",I),o.current&&o.current.focus(),()=>_.removeEventListener("keydown",I)},[n,t]),h.useEffect(()=>{if(!n||!t)return;const _=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=_}},[n,t]),h.useEffect(()=>{if(!n||!t)return;const y=`${t.title||d()}: ${t.message}`,S=document.createElement("div");return S.setAttribute("role","alert"),S.setAttribute("aria-live","assertive"),S.setAttribute("aria-atomic","true"),S.className="sr-only",S.textContent=y,document.body.appendChild(S),()=>{document.body.contains(S)&&document.body.removeChild(S)}},[n,t,d]),!t||!n)return null;const{type:j,title:f,message:v,details:b,showContactSupport:g,criticalError:w}=t,N=f||d();return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-[10000]",onClick:p,"aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000] px-4 py-6",role:"dialog","aria-modal":"true","aria-labelledby":"error-modal-title","aria-describedby":"error-modal-description",children:r.jsxs("div",{ref:i,className:"bg-white rounded-xl shadow-2xl border border-gray-200 w-full max-w-[90vw] sm:max-w-md mx-auto transform transition-all",children:[r.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:c()}),r.jsx("h2",{id:"error-modal-title",className:"text-2xl sm:text-3xl font-bold text-master-text-primary-light mb-3 leading-tight",children:N}),r.jsx("p",{id:"error-modal-description",className:"text-base sm:text-lg text-master-text-secondary-dark leading-relaxed",children:v}),b&&r.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-left",children:r.jsx("p",{className:"text-sm text-master-text-muted-dark leading-relaxed",children:b})})]}),r.jsxs("div",{className:"px-6 sm:px-8 pb-6 sm:pb-8 flex flex-col sm:flex-row gap-3 sm:justify-center",children:[r.jsx("button",{ref:o,onClick:m,className:"px-6 py-3 bg-blue-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl text-base order-1",children:u()}),!w&&r.jsx("button",{ref:l,onClick:x,className:"px-6 py-3 bg-gray-100 text-master-text-primary-light rounded-lg font-medium hover:bg-gray-200 border border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 text-base order-2",children:"Dismiss"})]}),g&&r.jsxs("div",{className:"px-6 sm:px-8 pb-6 sm:pb-8 pt-0 text-center border-t border-gray-200 mt-0",children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-2 mt-4",children:"If this problem persists, please contact support:"}),r.jsx("a",{href:`mailto:support@barberslot.com?subject=Error Report: ${encodeURIComponent(N)}&body=${encodeURIComponent(v+(b?`

Details: `+b:""))}`,className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium focus:outline-none focus:ring-4 focus:ring-blue-100 rounded-lg px-4 py-2 transition-all duration-200 text-sm",children:"Contact Support"})]})]})})]})},Ux=h.createContext({});function Wx(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const uu=h.createContext(null),qx=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class uS extends h.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function mS({children:e,isPresent:t}){const s=h.useId(),n=h.useRef(null),a=h.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=h.useContext(qx);return h.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=a.current;if(t||!n.current||!o||!l)return;n.current.dataset.motionPopId=s;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),r.jsx(uS,{isPresent:t,childRef:n,sizeRef:a,children:h.cloneElement(e,{ref:n})})}const hS=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=Wx(pS),c=h.useId(),d=h.useCallback(m=>{l.set(m,!0);for(const x of l.values())if(!x)return;n&&n()},[l,n]),u=h.useMemo(()=>({id:c,initial:t,isPresent:s,custom:a,onExitComplete:d,register:m=>(l.set(m,!1),()=>l.delete(m))}),i?[Math.random(),d]:[s,d]);return h.useMemo(()=>{l.forEach((m,x)=>l.set(x,!1))},[s]),h.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=r.jsx(mS,{isPresent:s,children:e})),r.jsx(uu.Provider,{value:u,children:e})};function pS(){return new Map}function h2(e=!0){const t=h.useContext(uu);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=t,i=h.useId();h.useEffect(()=>{e&&a(i)},[e]);const o=h.useCallback(()=>e&&n&&n(i),[i,n,e]);return!s&&n?[!1,o]:[!0]}const ic=e=>e.key||"";function Tg(e){const t=[];return h.Children.forEach(e,s=>{h.isValidElement(s)&&t.push(s)}),t}const Hx=typeof window<"u",p2=Hx?h.useLayoutEffect:h.useEffect,xS=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1})=>{const[l,c]=h2(o),d=h.useMemo(()=>Tg(e),[e]),u=o&&!l?[]:d.map(ic),m=h.useRef(!0),x=h.useRef(d),p=Wx(()=>new Map),[j,f]=h.useState(d),[v,b]=h.useState(d);p2(()=>{m.current=!1,x.current=d;for(let N=0;N<v.length;N++){const _=ic(v[N]);u.includes(_)?p.delete(_):p.get(_)!==!0&&p.set(_,!1)}},[v,u.length,u.join("-")]);const g=[];if(d!==j){let N=[...d];for(let _=0;_<v.length;_++){const y=v[_],S=ic(y);u.includes(S)||(N.splice(_,0,y),g.push(y))}i==="wait"&&g.length&&(N=g),b(Tg(N)),f(d);return}const{forceRender:w}=h.useContext(Ux);return r.jsx(r.Fragment,{children:v.map(N=>{const _=ic(N),y=o&&!l?!1:d===v||u.includes(_),S=()=>{if(p.has(_))p.set(_,!0);else return;let A=!0;p.forEach(I=>{I||(A=!1)}),A&&(w==null||w(),b(x.current),o&&(c==null||c()),n&&n())};return r.jsx(hS,{isPresent:y,initial:!m.current||s?void 0:!1,custom:y?void 0:t,presenceAffectsLayout:a,mode:i,onExitComplete:y?void 0:S,children:N},_)})})},gr=e=>e;let x2=gr;function Kx(e){let t;return()=>(t===void 0&&(t=e()),t)}const Pi=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},Ts=e=>e*1e3,Ps=e=>e/1e3,fS={useManualTiming:!1};function gS(e){let t=new Set,s=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,u=!1,m=!1)=>{const p=m&&n?t:s;return u&&i.add(d),p.has(d)||p.add(d),d},cancel:d=>{s.delete(d),i.delete(d)},process:d=>{if(o=d,n){a=!0;return}n=!0,[t,s]=[s,t],t.forEach(l),t.clear(),n=!1,a&&(a=!1,c.process(d))}};return c}const oc=["read","resolveKeyframes","update","preRender","render","postRender"],bS=40;function f2(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,o=oc.reduce((b,g)=>(b[g]=gS(i),b),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:m,postRender:x}=o,p=()=>{const b=performance.now();s=!1,a.delta=n?1e3/60:Math.max(Math.min(b-a.timestamp,bS),1),a.timestamp=b,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),m.process(a),x.process(a),a.isProcessing=!1,s&&t&&(n=!1,e(p))},j=()=>{s=!0,n=!0,a.isProcessing||e(p)};return{schedule:oc.reduce((b,g)=>{const w=o[g];return b[g]=(N,_=!1,y=!1)=>(s||j(),w.schedule(N,_,y)),b},{}),cancel:b=>{for(let g=0;g<oc.length;g++)o[oc[g]].cancel(b)},state:a,steps:o}}const{schedule:Ye,cancel:Fn,state:At,steps:om}=f2(typeof requestAnimationFrame<"u"?requestAnimationFrame:gr,!0),g2=h.createContext({strict:!1}),Pg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Di={};for(const e in Pg)Di[e]={isEnabled:t=>Pg[e].some(s=>!!t[s])};function yS(e){for(const t in e)Di[t]={...Di[t],...e[t]}}const vS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vS.has(e)}let b2=e=>!Nd(e);function wS(e){e&&(b2=t=>t.startsWith("on")?!Nd(t):e(t))}try{wS(require("@emotion/is-prop-valid").default)}catch{}function jS(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(b2(a)||s===!0&&Nd(a)||!t&&!Nd(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function kS(e){if(typeof Proxy>"u")return e;const t=new Map,s=(...n)=>e(...n);return new Proxy(s,{get:(n,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const mu=h.createContext({});function ll(e){return typeof e=="string"||Array.isArray(e)}function hu(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Gx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Qx=["initial",...Gx];function pu(e){return hu(e.animate)||Qx.some(t=>ll(e[t]))}function y2(e){return!!(pu(e)||e.variants)}function NS(e,t){if(pu(e)){const{initial:s,animate:n}=e;return{initial:s===!1||ll(s)?s:void 0,animate:ll(n)?n:void 0}}return e.inherit!==!1?t:{}}function _S(e){const{initial:t,animate:s}=NS(e,h.useContext(mu));return h.useMemo(()=>({initial:t,animate:s}),[Dg(t),Dg(s)])}function Dg(e){return Array.isArray(e)?e.join(" "):e}const CS=Symbol.for("motionComponentSymbol");function Ya(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function SS(e,t,s){return h.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Ya(s)&&(s.current=n))},[t])}const Yx=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),AS="framerAppearId",v2="data-"+Yx(AS),{schedule:Zx}=f2(queueMicrotask,!1),w2=h.createContext({});function ES(e,t,s,n,a){var i,o;const{visualElement:l}=h.useContext(mu),c=h.useContext(g2),d=h.useContext(uu),u=h.useContext(qx).reducedMotion,m=h.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(e,{visualState:t,parent:l,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const x=m.current,p=h.useContext(w2);x&&!x.projection&&a&&(x.type==="html"||x.type==="svg")&&TS(m.current,s,a,p);const j=h.useRef(!1);h.useInsertionEffect(()=>{x&&j.current&&x.update(s,d)});const f=s[v2],v=h.useRef(!!f&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,f))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,f)));return p2(()=>{x&&(j.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),Zx.render(x.render),v.current&&x.animationState&&x.animationState.animateChanges())}),h.useEffect(()=>{x&&(!v.current&&x.animationState&&x.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,f)}),v.current=!1))}),x}function TS(e,t,s,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:j2(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&Ya(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function j2(e){if(e)return e.options.allowProjection!==!1?e.projection:j2(e.parent)}function PS({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:a}){var i,o;e&&yS(e);function l(d,u){let m;const x={...h.useContext(qx),...d,layoutId:DS(d)},{isStatic:p}=x,j=_S(d),f=n(d,p);if(!p&&Hx){FS();const v=MS(x);m=v.MeasureLayout,j.visualElement=ES(a,f,x,t,v.ProjectionNode)}return r.jsxs(mu.Provider,{value:j,children:[m&&j.visualElement?r.jsx(m,{visualElement:j.visualElement,...x}):null,s(a,d,SS(f,j.visualElement,u),f,p,j.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&o!==void 0?o:""})`}`;const c=h.forwardRef(l);return c[CS]=a,c}function DS({layoutId:e}){const t=h.useContext(Ux).id;return t&&e!==void 0?t+"-"+e:e}function FS(e,t){h.useContext(g2).strict}function MS(e){const{drag:t,layout:s}=Di;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const RS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xx(e){return typeof e!="string"||e.includes("-")?!1:!!(RS.indexOf(e)>-1||/[A-Z]/u.test(e))}function Fg(e){const t=[{},{}];return e==null||e.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function Jx(e,t,s,n){if(typeof t=="function"){const[a,i]=Fg(n);t=t(s!==void 0?s:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=Fg(n);t=t(s!==void 0?s:e.custom,a,i)}return t}const rp=e=>Array.isArray(e),BS=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),LS=e=>rp(e)?e[e.length-1]||0:e,Ot=e=>!!(e&&e.getVelocity);function Rc(e){const t=Ot(e)?e.get():e;return BS(t)?t.toValue():t}function OS({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:s},n,a,i){const o={latestValues:$S(n,a,i,e),renderState:t()};return s&&(o.onMount=l=>s({props:n,current:l,...o}),o.onUpdate=l=>s(l)),o}const k2=e=>(t,s)=>{const n=h.useContext(mu),a=h.useContext(uu),i=()=>OS(e,t,n,a);return s?i():Wx(i)};function $S(e,t,s,n){const a={},i=n(e,{});for(const x in i)a[x]=Rc(i[x]);let{initial:o,animate:l}=e;const c=pu(e),d=y2(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const m=u?l:o;if(m&&typeof m!="boolean"&&!hu(m)){const x=Array.isArray(m)?m:[m];for(let p=0;p<x.length;p++){const j=Jx(e,x[p]);if(j){const{transitionEnd:f,transition:v,...b}=j;for(const g in b){let w=b[g];if(Array.isArray(w)){const N=u?w.length-1:0;w=w[N]}w!==null&&(a[g]=w)}for(const g in f)a[g]=f[g]}}}return a}const Ki=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ea=new Set(Ki),N2=e=>t=>typeof t=="string"&&t.startsWith(e),_2=N2("--"),IS=N2("var(--"),ef=e=>IS(e)?zS.test(e.split("/*")[0].trim()):!1,zS=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,C2=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Os=(e,t,s)=>s>t?t:s<e?e:s,Gi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cl={...Gi,transform:e=>Os(0,1,e)},lc={...Gi,default:1},Fl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xs=Fl("deg"),hs=Fl("%"),be=Fl("px"),VS=Fl("vh"),US=Fl("vw"),Mg={...hs,parse:e=>hs.parse(e)/100,transform:e=>hs.transform(e*100)},WS={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,backgroundPositionX:be,backgroundPositionY:be},qS={rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:Xs,skewX:Xs,skewY:Xs,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:cl,originX:Mg,originY:Mg,originZ:be},Rg={...Gi,transform:Math.round},tf={...WS,...qS,zIndex:Rg,size:be,fillOpacity:cl,strokeOpacity:cl,numOctaves:Rg},HS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KS=Ki.length;function GS(e,t,s){let n="",a=!0;for(let i=0;i<KS;i++){const o=Ki[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const d=C2(l,tf[o]);if(!c){a=!1;const u=HS[o]||o;n+=`${u}(${d}) `}s&&(t[o]=d)}}return n=n.trim(),s?n=s(t,a?"":n):a&&(n="none"),n}function rf(e,t,s){const{style:n,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Ea.has(c)){o=!0;continue}else if(_2(c)){a[c]=d;continue}else{const u=C2(d,tf[c]);c.startsWith("origin")?(l=!0,i[c]=u):n[c]=u}}if(t.transform||(o||s?n.transform=GS(t,e.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}const QS={offset:"stroke-dashoffset",array:"stroke-dasharray"},YS={offset:"strokeDashoffset",array:"strokeDasharray"};function ZS(e,t,s=1,n=0,a=!0){e.pathLength=1;const i=a?QS:YS;e[i.offset]=be.transform(-n);const o=be.transform(t),l=be.transform(s);e[i.array]=`${o} ${l}`}function Bg(e,t,s){return typeof e=="string"?e:be.transform(t+s*e)}function XS(e,t,s){const n=Bg(t,e.x,e.width),a=Bg(s,e.y,e.height);return`${n} ${a}`}function sf(e,{attrX:t,attrY:s,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,m){if(rf(e,d,m),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:p,dimensions:j}=e;x.transform&&(j&&(p.transform=x.transform),delete x.transform),j&&(a!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=XS(j,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),n!==void 0&&(x.scale=n),o!==void 0&&ZS(x,o,l,c,!1)}const nf=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),S2=()=>({...nf(),attrs:{}}),af=e=>typeof e=="string"&&e.toLowerCase()==="svg";function A2(e,{style:t,vars:s},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const E2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function T2(e,t,s,n){A2(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(E2.has(a)?a:Yx(a),t.attrs[a])}const _d={};function JS(e){Object.assign(_d,e)}function P2(e,{layout:t,layoutId:s}){return Ea.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!_d[e]||e==="opacity")}function of(e,t,s){var n;const{style:a}=e,i={};for(const o in a)(Ot(a[o])||t.style&&Ot(t.style[o])||P2(o,e)||((n=s==null?void 0:s.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function D2(e,t,s){const n=of(e,t,s);for(const a in e)if(Ot(e[a])||Ot(t[a])){const i=Ki.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=e[a]}return n}function e6(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Lg=["x","y","width","height","cx","cy","r"],t6={useVisualState:k2({scrapeMotionValuesFromProps:D2,createRenderState:S2,onUpdate:({props:e,prevProps:t,current:s,renderState:n,latestValues:a})=>{if(!s)return;let i=!!e.drag;if(!i){for(const l in a)if(Ea.has(l)){i=!0;break}}if(!i)return;let o=!t;if(t)for(let l=0;l<Lg.length;l++){const c=Lg[l];e[c]!==t[c]&&(o=!0)}o&&Ye.read(()=>{e6(s,n),Ye.render(()=>{sf(n,a,af(s.tagName),e.transformTemplate),T2(s,n)})})}})},r6={useVisualState:k2({scrapeMotionValuesFromProps:of,createRenderState:nf})};function F2(e,t,s){for(const n in t)!Ot(t[n])&&!P2(n,s)&&(e[n]=t[n])}function s6({transformTemplate:e},t){return h.useMemo(()=>{const s=nf();return rf(s,t,e),Object.assign({},s.vars,s.style)},[t])}function n6(e,t){const s=e.style||{},n={};return F2(n,s,e),Object.assign(n,s6(e,t)),n}function a6(e,t){const s={},n=n6(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}function i6(e,t,s,n){const a=h.useMemo(()=>{const i=S2();return sf(i,t,af(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};F2(i,e.style,e),a.style={...i,...a.style}}return a}function o6(e=!1){return(s,n,a,{latestValues:i},o)=>{const c=(Xx(s)?i6:a6)(n,i,o,s),d=jS(n,typeof s=="string",e),u=s!==h.Fragment?{...d,...c,ref:a}:{},{children:m}=n,x=h.useMemo(()=>Ot(m)?m.get():m,[m]);return h.createElement(s,{...u,children:x})}}function l6(e,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...Xx(n)?t6:r6,preloadedFeatures:e,useRender:o6(a),createVisualElement:t,Component:n};return PS(o)}}function M2(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function xu(e,t,s){const n=e.getProps();return Jx(n,t,s!==void 0?s:n.custom,e)}const c6=Kx(()=>window.ScrollTimeline!==void 0);class d6{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,s){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=s}attachTimeline(t,s){const n=this.animations.map(a=>{if(c6()&&a.attachTimeline)return a.attachTimeline(t);if(typeof s=="function")return s(a)});return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let s=0;s<this.animations.length;s++)t=Math.max(t,this.animations[s].duration);return t}runAll(t){this.animations.forEach(s=>s[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class u6 extends d6{then(t,s){return Promise.all(this.animations).then(t).catch(s)}}function lf(e,t){return e?e[t]||e.default||e:void 0}const sp=2e4;function R2(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<sp;)t+=s,n=e.next(t);return t>=sp?1/0:t}function cf(e){return typeof e=="function"}function Og(e,t){e.timeline=t,e.onfinish=null}const df=e=>Array.isArray(e)&&typeof e[0]=="number",m6={linearEasing:void 0};function h6(e,t){const s=Kx(e);return()=>{var n;return(n=m6[t])!==null&&n!==void 0?n:s()}}const Cd=h6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),B2=(e,t,s=10)=>{let n="";const a=Math.max(Math.round(t/s),2);for(let i=0;i<a;i++)n+=e(Pi(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function L2(e){return!!(typeof e=="function"&&Cd()||!e||typeof e=="string"&&(e in np||Cd())||df(e)||Array.isArray(e)&&e.every(L2))}const bo=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,np={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bo([0,.65,.55,1]),circOut:bo([.55,0,1,.45]),backIn:bo([.31,.01,.66,-.59]),backOut:bo([.33,1.53,.69,.99])};function O2(e,t){if(e)return typeof e=="function"&&Cd()?B2(e,t):df(e)?bo(e):Array.isArray(e)?e.map(s=>O2(s,t)||np.easeOut):np[e]}const zr={x:!1,y:!1};function $2(){return zr.x||zr.y}function p6(e,t,s){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function I2(e,t){const s=p6(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[s,a,()=>n.abort()]}function $g(e){return t=>{t.pointerType==="touch"||$2()||e(t)}}function x6(e,t,s={}){const[n,a,i]=I2(e,s),o=$g(l=>{const{target:c}=l,d=t(l);if(typeof d!="function"||!c)return;const u=$g(m=>{d(m),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const z2=(e,t)=>t?e===t?!0:z2(e,t.parentElement):!1,uf=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,f6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function g6(e){return f6.has(e.tagName)||e.tabIndex!==-1}const yo=new WeakSet;function Ig(e){return t=>{t.key==="Enter"&&e(t)}}function lm(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const b6=(e,t)=>{const s=e.currentTarget;if(!s)return;const n=Ig(()=>{if(yo.has(s))return;lm(s,"down");const a=Ig(()=>{lm(s,"up")}),i=()=>lm(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",i,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function zg(e){return uf(e)&&!$2()}function y6(e,t,s={}){const[n,a,i]=I2(e,s),o=l=>{const c=l.currentTarget;if(!zg(l)||yo.has(c))return;yo.add(c);const d=t(l),u=(p,j)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),!(!zg(p)||!yo.has(c))&&(yo.delete(c),typeof d=="function"&&d(p,{success:j}))},m=p=>{u(p,s.useGlobalTarget||z2(c,p.target))},x=p=>{u(p,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",x,a)};return n.forEach(l=>{!g6(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",d=>b6(d,a),a)}),i}function v6(e){return e==="x"||e==="y"?zr[e]?null:(zr[e]=!0,()=>{zr[e]=!1}):zr.x||zr.y?null:(zr.x=zr.y=!0,()=>{zr.x=zr.y=!1})}const V2=new Set(["width","height","top","left","right","bottom",...Ki]);let Bc;function w6(){Bc=void 0}const ps={now:()=>(Bc===void 0&&ps.set(At.isProcessing||fS.useManualTiming?At.timestamp:performance.now()),Bc),set:e=>{Bc=e,queueMicrotask(w6)}};function mf(e,t){e.indexOf(t)===-1&&e.push(t)}function hf(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class pf{constructor(){this.subscriptions=[]}add(t){return mf(this.subscriptions,t),()=>hf(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function U2(e,t){return t?e*(1e3/t):0}const Vg=30,j6=e=>!isNaN(parseFloat(e));class k6{constructor(t,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=ps.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=ps.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=j6(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new pf);const n=this.events[t].add(s);return t==="change"?()=>{n(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ps.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Vg)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Vg);return U2(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function dl(e,t){return new k6(e,t)}function N6(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,dl(s))}function _6(e,t){const s=xu(e,t);let{transitionEnd:n={},transition:a={},...i}=s||{};i={...i,...n};for(const o in i){const l=LS(i[o]);N6(e,o,l)}}function C6(e){return!!(Ot(e)&&e.add)}function ap(e,t){const s=e.getValue("willChange");if(C6(s))return s.add(t)}function W2(e){return e.props[v2]}const q2=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,S6=1e-7,A6=12;function E6(e,t,s,n,a){let i,o,l=0;do o=t+(s-t)/2,i=q2(o,n,a)-e,i>0?s=o:t=o;while(Math.abs(i)>S6&&++l<A6);return o}function Ml(e,t,s,n){if(e===t&&s===n)return gr;const a=i=>E6(i,0,1,e,s);return i=>i===0||i===1?i:q2(a(i),t,n)}const H2=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,K2=e=>t=>1-e(1-t),G2=Ml(.33,1.53,.69,.99),xf=K2(G2),Q2=H2(xf),Y2=e=>(e*=2)<1?.5*xf(e):.5*(2-Math.pow(2,-10*(e-1))),ff=e=>1-Math.sin(Math.acos(e)),Z2=K2(ff),X2=H2(ff),J2=e=>/^0[^.\s]+$/u.test(e);function T6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||J2(e):!0}const Fo=e=>Math.round(e*1e5)/1e5,gf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function P6(e){return e==null}const D6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bf=(e,t)=>s=>!!(typeof s=="string"&&D6.test(s)&&s.startsWith(e)||t&&!P6(s)&&Object.prototype.hasOwnProperty.call(s,t)),ej=(e,t,s)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(gf);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},F6=e=>Os(0,255,e),cm={...Gi,transform:e=>Math.round(F6(e))},ra={test:bf("rgb","red"),parse:ej("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+cm.transform(e)+", "+cm.transform(t)+", "+cm.transform(s)+", "+Fo(cl.transform(n))+")"};function M6(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const ip={test:bf("#"),parse:M6,transform:ra.transform},Za={test:bf("hsl","hue"),parse:ej("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+hs.transform(Fo(t))+", "+hs.transform(Fo(s))+", "+Fo(cl.transform(n))+")"},Rt={test:e=>ra.test(e)||ip.test(e)||Za.test(e),parse:e=>ra.test(e)?ra.parse(e):Za.test(e)?Za.parse(e):ip.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ra.transform(e):Za.transform(e)},R6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function B6(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(gf))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(R6))===null||s===void 0?void 0:s.length)||0)>0}const tj="number",rj="color",L6="var",O6="var(",Ug="${}",$6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ul(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace($6,c=>(Rt.test(c)?(n.color.push(i),a.push(rj),s.push(Rt.parse(c))):c.startsWith(O6)?(n.var.push(i),a.push(L6),s.push(c)):(n.number.push(i),a.push(tj),s.push(parseFloat(c))),++i,Ug)).split(Ug);return{values:s,split:l,indexes:n,types:a}}function sj(e){return ul(e).values}function nj(e){const{split:t,types:s}=ul(e),n=t.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],a[o]!==void 0){const l=s[o];l===tj?i+=Fo(a[o]):l===rj?i+=Rt.transform(a[o]):i+=a[o]}return i}}const I6=e=>typeof e=="number"?0:e;function z6(e){const t=sj(e);return nj(e)(t.map(I6))}const Mn={test:B6,parse:sj,createTransformer:nj,getAnimatableNone:z6},V6=new Set(["brightness","contrast","saturate","opacity"]);function U6(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(gf)||[];if(!n)return e;const a=s.replace(n,"");let i=V6.has(t)?1:0;return n!==s&&(i*=100),t+"("+i+a+")"}const W6=/\b([a-z-]*)\(.*?\)/gu,op={...Mn,getAnimatableNone:e=>{const t=e.match(W6);return t?t.map(U6).join(" "):e}},q6={...tf,color:Rt,backgroundColor:Rt,outlineColor:Rt,fill:Rt,stroke:Rt,borderColor:Rt,borderTopColor:Rt,borderRightColor:Rt,borderBottomColor:Rt,borderLeftColor:Rt,filter:op,WebkitFilter:op},yf=e=>q6[e];function aj(e,t){let s=yf(e);return s!==op&&(s=Mn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const H6=new Set(["auto","none","0"]);function K6(e,t,s){let n=0,a;for(;n<e.length&&!a;){const i=e[n];typeof i=="string"&&!H6.has(i)&&ul(i).values.length&&(a=e[n]),n++}if(a&&s)for(const i of t)e[i]=aj(s,a)}const Wg=e=>e===Gi||e===be,qg=(e,t)=>parseFloat(e.split(", ")[t]),Hg=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return qg(a[1],t);{const i=n.match(/^matrix\((.+)\)$/u);return i?qg(i[1],e):0}},G6=new Set(["x","y","z"]),Q6=Ki.filter(e=>!G6.has(e));function Y6(e){const t=[];return Q6.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const Fi={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Hg(4,13),y:Hg(5,14)};Fi.translateX=Fi.x;Fi.translateY=Fi.y;const fa=new Set;let lp=!1,cp=!1;function ij(){if(cp){const e=Array.from(fa).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),s=new Map;t.forEach(n=>{const a=Y6(n);a.length&&(s.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}cp=!1,lp=!1,fa.forEach(e=>e.complete()),fa.clear()}function oj(){fa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(cp=!0)})}function Z6(){oj(),ij()}class vf{constructor(t,s,n,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fa.add(this),lp||(lp=!0,Ye.read(oj),Ye.resolveKeyframes(ij))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&s){const c=n.readValue(s,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const lj=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),X6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function J6(e){const t=X6.exec(e);if(!t)return[,];const[,s,n,a]=t;return[`--${s??n}`,a]}function cj(e,t,s=1){const[n,a]=J6(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return lj(o)?parseFloat(o):o}return ef(a)?cj(a,t,s+1):a}const dj=e=>t=>t.test(e),e8={test:e=>e==="auto",parse:e=>e},uj=[Gi,be,hs,Xs,US,VS,e8],Kg=e=>uj.find(dj(e));class mj extends vf{constructor(t,s,n,a,i){super(t,s,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),ef(d))){const u=cj(d,s.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!V2.has(n)||t.length!==2)return;const[a,i]=t,o=Kg(a),l=Kg(i);if(o!==l)if(Wg(o)&&Wg(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let a=0;a<t.length;a++)T6(t[a])&&n.push(a);n.length&&K6(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fi[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:s,name:n,unresolvedKeyframes:a}=this;if(!s||!s.current)return;const i=s.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=Fi[n](s.measureViewportBox(),window.getComputedStyle(s.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{s.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const Gg=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Mn.test(e)||e==="0")&&!e.startsWith("url("));function t8(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function r8(e,t,s,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=Gg(a,t),l=Gg(i,t);return!o||!l?!1:t8(e)||(s==="spring"||cf(s))&&n}const s8=e=>e!==null;function fu(e,{repeat:t,repeatType:s="loop"},n){const a=e.filter(s8),i=t&&s!=="loop"&&t%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const n8=40;class hj{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ps.now(),this.options={autoplay:t,delay:s,type:n,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>n8?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Z6(),this._resolved}onKeyframesResolved(t,s){this.resolvedAt=ps.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!r8(t,n,a,i))if(o)this.options.duration=0;else{c&&c(fu(t,this.options,s)),l&&l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,s);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:s,...u},this.onPostResolved())}onPostResolved(){}then(t,s){return this.currentFinishedPromise.then(t,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const rt=(e,t,s)=>e+(t-e)*s;function dm(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function a8({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=dm(c,l,e+1/3),i=dm(c,l,e),o=dm(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Sd(e,t){return s=>s>0?t:e}const um=(e,t,s)=>{const n=e*e,a=s*(t*t-n)+n;return a<0?0:Math.sqrt(a)},i8=[ip,ra,Za],o8=e=>i8.find(t=>t.test(e));function Qg(e){const t=o8(e);if(!t)return!1;let s=t.parse(e);return t===Za&&(s=a8(s)),s}const Yg=(e,t)=>{const s=Qg(e),n=Qg(t);if(!s||!n)return Sd(e,t);const a={...s};return i=>(a.red=um(s.red,n.red,i),a.green=um(s.green,n.green,i),a.blue=um(s.blue,n.blue,i),a.alpha=rt(s.alpha,n.alpha,i),ra.transform(a))},l8=(e,t)=>s=>t(e(s)),Rl=(...e)=>e.reduce(l8),dp=new Set(["none","hidden"]);function c8(e,t){return dp.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function d8(e,t){return s=>rt(e,t,s)}function wf(e){return typeof e=="number"?d8:typeof e=="string"?ef(e)?Sd:Rt.test(e)?Yg:h8:Array.isArray(e)?pj:typeof e=="object"?Rt.test(e)?Yg:u8:Sd}function pj(e,t){const s=[...e],n=s.length,a=e.map((i,o)=>wf(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}}function u8(e,t){const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=wf(e[a])(e[a],t[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}}function m8(e,t){var s;const n=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=e.indexes[o][a[o]],c=(s=e.values[l])!==null&&s!==void 0?s:0;n[i]=c,a[o]++}return n}const h8=(e,t)=>{const s=Mn.createTransformer(t),n=ul(e),a=ul(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?dp.has(e)&&!a.values.length||dp.has(t)&&!n.values.length?c8(e,t):Rl(pj(m8(n,a),a.values),s):Sd(e,t)};function xj(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?rt(e,t,s):wf(e)(e,t)}const p8=5;function fj(e,t,s){const n=Math.max(t-p8,0);return U2(s-e(n),t-n)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mm=.001;function x8({duration:e=it.duration,bounce:t=it.bounce,velocity:s=it.velocity,mass:n=it.mass}){let a,i,o=1-t;o=Os(it.minDamping,it.maxDamping,o),e=Os(it.minDuration,it.maxDuration,Ps(e)),o<1?(a=d=>{const u=d*o,m=u*e,x=u-s,p=up(d,o),j=Math.exp(-m);return mm-x/p*j},i=d=>{const m=d*o*e,x=m*s+s,p=Math.pow(o,2)*Math.pow(d,2)*e,j=Math.exp(-m),f=up(Math.pow(d,2),o);return(-a(d)+mm>0?-1:1)*((x-p)*j)/f}):(a=d=>{const u=Math.exp(-d*e),m=(d-s)*e+1;return-mm+u*m},i=d=>{const u=Math.exp(-d*e),m=(s-d)*(e*e);return u*m});const l=5/e,c=g8(a,i,l);if(e=Ts(e),isNaN(c))return{stiffness:it.stiffness,damping:it.damping,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:e}}}const f8=12;function g8(e,t,s){let n=s;for(let a=1;a<f8;a++)n=n-e(n)/t(n);return n}function up(e,t){return e*Math.sqrt(1-t*t)}const b8=["duration","bounce"],y8=["stiffness","damping","mass"];function Zg(e,t){return t.some(s=>e[s]!==void 0)}function v8(e){let t={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...e};if(!Zg(e,y8)&&Zg(e,b8))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,i=2*Os(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:it.mass,stiffness:a,damping:i}}else{const s=x8(e);t={...t,...s,mass:it.mass},t.isResolvedFromDuration=!0}return t}function gj(e=it.visualDuration,t=it.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=s;const i=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:m,velocity:x,isResolvedFromDuration:p}=v8({...s,velocity:-Ps(s.velocity||0)}),j=x||0,f=d/(2*Math.sqrt(c*u)),v=o-i,b=Ps(Math.sqrt(c/u)),g=Math.abs(v)<5;n||(n=g?it.restSpeed.granular:it.restSpeed.default),a||(a=g?it.restDelta.granular:it.restDelta.default);let w;if(f<1){const _=up(b,f);w=y=>{const S=Math.exp(-f*b*y);return o-S*((j+f*b*v)/_*Math.sin(_*y)+v*Math.cos(_*y))}}else if(f===1)w=_=>o-Math.exp(-b*_)*(v+(j+b*v)*_);else{const _=b*Math.sqrt(f*f-1);w=y=>{const S=Math.exp(-f*b*y),A=Math.min(_*y,300);return o-S*((j+f*b*v)*Math.sinh(A)+_*v*Math.cosh(A))/_}}const N={calculatedDuration:p&&m||null,next:_=>{const y=w(_);if(p)l.done=_>=m;else{let S=0;f<1&&(S=_===0?Ts(j):fj(w,_,y));const A=Math.abs(S)<=n,I=Math.abs(o-y)<=a;l.done=A&&I}return l.value=l.done?o:y,l},toString:()=>{const _=Math.min(R2(N),sp),y=B2(S=>N.next(_*S).value,_,30);return _+"ms "+y}};return N}function Xg({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const m=e[0],x={done:!1,value:m},p=A=>l!==void 0&&A<l||c!==void 0&&A>c,j=A=>l===void 0?c:c===void 0||Math.abs(l-A)<Math.abs(c-A)?l:c;let f=s*t;const v=m+f,b=o===void 0?v:o(v);b!==v&&(f=b-m);const g=A=>-f*Math.exp(-A/n),w=A=>b+g(A),N=A=>{const I=g(A),F=w(A);x.done=Math.abs(I)<=d,x.value=x.done?b:F};let _,y;const S=A=>{p(x.value)&&(_=A,y=gj({keyframes:[x.value,j(x.value)],velocity:fj(w,A,x.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return S(0),{calculatedDuration:null,next:A=>{let I=!1;return!y&&_===void 0&&(I=!0,N(A),S(A)),_!==void 0&&A>=_?y.next(A-_):(!I&&N(A),x)}}}const w8=Ml(.42,0,1,1),j8=Ml(0,0,.58,1),bj=Ml(.42,0,.58,1),k8=e=>Array.isArray(e)&&typeof e[0]!="number",N8={linear:gr,easeIn:w8,easeInOut:bj,easeOut:j8,circIn:ff,circInOut:X2,circOut:Z2,backIn:xf,backInOut:Q2,backOut:G2,anticipate:Y2},Jg=e=>{if(df(e)){x2(e.length===4);const[t,s,n,a]=e;return Ml(t,s,n,a)}else if(typeof e=="string")return N8[e];return e};function _8(e,t,s){const n=[],a=s||xj,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||gr:t;l=Rl(c,l)}n.push(l)}return n}function C8(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const i=e.length;if(x2(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=_8(t,n,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(u<e[m+1]);m++);const x=Pi(e[m],e[m+1],u);return l[m](x)};return s?u=>d(Os(e[0],e[i-1],u)):d}function S8(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=Pi(0,t,n);e.push(rt(s,1,a))}}function A8(e){const t=[0];return S8(t,e.length-1),t}function E8(e,t){return e.map(s=>s*t)}function T8(e,t){return e.map(()=>t||bj).splice(0,e.length-1)}function Ad({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=k8(n)?n.map(Jg):Jg(n),i={done:!1,value:t[0]},o=E8(s&&s.length===t.length?s:A8(t),e),l=C8(o,t,{ease:Array.isArray(a)?a:T8(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const P8=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Ye.update(t,!0),stop:()=>Fn(t),now:()=>At.isProcessing?At.timestamp:ps.now()}},D8={decay:Xg,inertia:Xg,tween:Ad,keyframes:Ad,spring:gj},F8=e=>e/100;class jf extends hj{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||vf,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,l,s,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:s="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=cf(s)?s:D8[s]||Ad;let c,d;l!==Ad&&typeof t[0]!="number"&&(c=Rl(F8,xj(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});i==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=R2(u));const{calculatedDuration:m}=u,x=m+a,p=x*(n+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:x,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,s=!1){const{resolved:n}=this;if(!n){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:m}=n;if(this.startTime===null)return i.next(0);const{delay:x,repeat:p,repeatType:j,repeatDelay:f,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),s?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-x*(this.speed>=0?1:-1),g=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let w=this.currentTime,N=i;if(p){const A=Math.min(this.currentTime,u)/m;let I=Math.floor(A),F=A%1;!F&&A>=1&&(F=1),F===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(j==="reverse"?(F=1-F,f&&(F-=f/m)):j==="mirror"&&(N=o)),w=Os(0,1,F)*m}const _=g?{done:!1,value:c[0]}:N.next(w);l&&(_.value=l(_.value));let{done:y}=_;!g&&d!==null&&(y=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&y);return S&&a!==void 0&&(_.value=fu(c,this.options,a)),v&&v(_.value),S&&this.finish(),_}get duration(){const{resolved:t}=this;return t?Ps(t.calculatedDuration):0}get time(){return Ps(this.currentTime)}set time(t){t=Ts(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Ps(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=P8,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),s&&s();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const M8=new Set(["opacity","clipPath","filter","transform"]);function R8(e,t,s,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:s};c&&(d.offset=c);const u=O2(l,a);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const B8=Kx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ed=10,L8=2e4;function O8(e){return cf(e.type)||e.type==="spring"||!L2(e.ease)}function $8(e,t){const s=new jf({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let i=0;for(;!n.done&&i<L8;)n=s.sample(i),a.push(n.value),i+=Ed;return{times:void 0,keyframes:a,duration:i-Ed,ease:"linear"}}const yj={anticipate:Y2,backInOut:Q2,circInOut:X2};function I8(e){return e in yj}class eb extends hj{constructor(t){super(t);const{name:s,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new mj(i,(o,l)=>this.onKeyframesResolved(o,l),s,n,a),this.resolver.scheduleResolve()}initPlayback(t,s){let{duration:n=300,times:a,ease:i,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&Cd()&&I8(i)&&(i=yj[i]),O8(this.options)){const{onComplete:m,onUpdate:x,motionValue:p,element:j,...f}=this.options,v=$8(t,f);t=v.keyframes,t.length===1&&(t[1]=t[0]),n=v.duration,a=v.times,i=v.ease,o="keyframes"}const u=R8(l.owner.current,c,t,{...this.options,duration:n,times:a,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(Og(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;l.set(fu(t,this.options,s)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:a,type:o,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:s}=t;return Ps(s)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:s}=t;return Ps(s.currentTime||0)}set time(t){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=Ts(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:s}=t;return s.playbackRate}set speed(t){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:s}=t;return s.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:s}=t;return s.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:s}=this;if(!s)return gr;const{animation:n}=s;Og(n,t)}return gr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:s,keyframes:n,duration:a,type:i,ease:o,times:l}=t;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:m,element:x,...p}=this.options,j=new jf({...p,keyframes:n,duration:a,type:i,ease:o,times:l,isGenerator:!0}),f=Ts(this.time);d.setWithVelocity(j.sample(f-Ed).value,j.sample(f).value,Ed)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:s,name:n,repeatDelay:a,repeatType:i,damping:o,type:l}=t;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=s.owner.getProps();return B8()&&n&&M8.has(n)&&!c&&!d&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const z8={type:"spring",stiffness:500,damping:25,restSpeed:10},V8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),U8={type:"keyframes",duration:.8},W8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},q8=(e,{keyframes:t})=>t.length>2?U8:Ea.has(e)?e.startsWith("scale")?V8(t[1]):z8:W8;function H8({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const kf=(e,t,s,n={},a,i)=>o=>{const l=lf(n,e)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Ts(c);let u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:x=>{t.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};H8(l)||(u={...u,...q8(e,u)}),u.duration&&(u.duration=Ts(u.duration)),u.repeatDelay&&(u.repeatDelay=Ts(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!i&&t.get()!==void 0){const x=fu(u.keyframes,l);if(x!==void 0)return Ye.update(()=>{u.onUpdate(x),u.onComplete()}),new u6([])}return!i&&eb.supports(u)?new eb(u):new jf(u)};function K8({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function vj(e,t,{delay:s=0,transitionOverride:n,type:a}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const m in c){const x=e.getValue(m,(i=e.latestValues[m])!==null&&i!==void 0?i:null),p=c[m];if(p===void 0||u&&K8(u,m))continue;const j={delay:s,...lf(o||{},m)};let f=!1;if(window.MotionHandoffAnimation){const b=W2(e);if(b){const g=window.MotionHandoffAnimation(b,m,Ye);g!==null&&(j.startTime=g,f=!0)}}ap(e,m),x.start(kf(m,x,p,e.shouldReduceMotion&&V2.has(m)?{type:!1}:j,e,f));const v=x.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{Ye.update(()=>{l&&_6(e,l)})}),d}function mp(e,t,s={}){var n;const a=xu(e,t,s.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(i=s.transitionOverride);const o=a?()=>Promise.all(vj(e,a,s)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:x}=i;return G8(e,t,u+d,m,x,s)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(s.delay)])}function G8(e,t,s=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(Q8).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(mp(d,t,{...i,delay:s+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Q8(e,t){return e.sortNodePosition(t)}function Y8(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>mp(e,i,s));n=Promise.all(a)}else if(typeof t=="string")n=mp(e,t,s);else{const a=typeof t=="function"?xu(e,t,s.custom):t;n=Promise.all(vj(e,a,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}const Z8=Qx.length;function wj(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?wj(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Z8;s++){const n=Qx[s],a=e.props[n];(ll(a)||a===!1)&&(t[n]=a)}return t}const X8=[...Gx].reverse(),J8=Gx.length;function eA(e){return t=>Promise.all(t.map(({animation:s,options:n})=>Y8(e,s,n)))}function tA(e){let t=eA(e),s=tb(),n=!0;const a=c=>(d,u)=>{var m;const x=xu(e,u,c==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(x){const{transition:p,transitionEnd:j,...f}=x;d={...d,...f,...j}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=wj(e.parent)||{},m=[],x=new Set;let p={},j=1/0;for(let v=0;v<J8;v++){const b=X8[v],g=s[b],w=d[b]!==void 0?d[b]:u[b],N=ll(w),_=b===c?g.isActive:null;_===!1&&(j=v);let y=w===u[b]&&w!==d[b]&&N;if(y&&n&&e.manuallyAnimateOnMount&&(y=!1),g.protectedKeys={...p},!g.isActive&&_===null||!w&&!g.prevProp||hu(w)||typeof w=="boolean")continue;const S=rA(g.prevProp,w);let A=S||b===c&&g.isActive&&!y&&N||v>j&&N,I=!1;const F=Array.isArray(w)?w:[w];let H=F.reduce(a(b),{});_===!1&&(H={});const{prevResolvedValues:E={}}=g,L={...E,...H},O=ee=>{A=!0,x.has(ee)&&(I=!0,x.delete(ee)),g.needsAnimating[ee]=!0;const C=e.getValue(ee);C&&(C.liveStyle=!1)};for(const ee in L){const C=H[ee],k=E[ee];if(p.hasOwnProperty(ee))continue;let D=!1;rp(C)&&rp(k)?D=!M2(C,k):D=C!==k,D?C!=null?O(ee):x.add(ee):C!==void 0&&x.has(ee)?O(ee):g.protectedKeys[ee]=!0}g.prevProp=w,g.prevResolvedValues=H,g.isActive&&(p={...p,...H}),n&&e.blockInitialAnimation&&(A=!1),A&&(!(y&&S)||I)&&m.push(...F.map(ee=>({animation:ee,options:{type:b}})))}if(x.size){const v={};x.forEach(b=>{const g=e.getBaseTarget(b),w=e.getValue(b);w&&(w.liveStyle=!0),v[b]=g??null}),m.push({animation:v})}let f=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(m):Promise.resolve()}function l(c,d){var u;if(s[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(x=>{var p;return(p=x.animationState)===null||p===void 0?void 0:p.setActive(c,d)}),s[c].isActive=d;const m=o(c);for(const x in s)s[x].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s,reset:()=>{s=tb(),n=!0}}}function rA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!M2(t,e):!1}function qn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tb(){return{animate:qn(!0),whileInView:qn(),whileHover:qn(),whileTap:qn(),whileDrag:qn(),whileFocus:qn(),exit:qn()}}class zn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class sA extends zn{constructor(t){super(t),t.animationState||(t.animationState=tA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();hu(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let nA=0;class aA extends zn{constructor(){super(...arguments),this.id=nA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const iA={animation:{Feature:sA},exit:{Feature:aA}};function ml(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}function Bl(e){return{point:{x:e.pageX,y:e.pageY}}}const oA=e=>t=>uf(t)&&e(t,Bl(t));function Mo(e,t,s,n){return ml(e,t,oA(s),n)}const rb=(e,t)=>Math.abs(e-t);function lA(e,t){const s=rb(e.x,t.x),n=rb(e.y,t.y);return Math.sqrt(s**2+n**2)}class jj{constructor(t,s,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=pm(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,p=lA(m.offset,{x:0,y:0})>=3;if(!x&&!p)return;const{point:j}=m,{timestamp:f}=At;this.history.push({...j,timestamp:f});const{onStart:v,onMove:b}=this.handlers;x||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,x)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=hm(x,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(m,x)=>{this.end();const{onEnd:p,onSessionEnd:j,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=pm(m.type==="pointercancel"?this.lastMoveEventInfo:hm(x,this.transformPagePoint),this.history);this.startEvent&&p&&p(m,v),j&&j(m,v)},!uf(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.contextWindow=a||window;const o=Bl(t),l=hm(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=At;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=s;u&&u(t,pm(l,this.history)),this.removeListeners=Rl(Mo(this.contextWindow,"pointermove",this.handlePointerMove),Mo(this.contextWindow,"pointerup",this.handlePointerUp),Mo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Fn(this.updatePoint)}}function hm(e,t){return t?{point:t(e.point)}:e}function sb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pm({point:e},t){return{point:e,delta:sb(e,kj(t)),offset:sb(e,cA(t)),velocity:dA(t,.1)}}function cA(e){return e[0]}function kj(e){return e[e.length-1]}function dA(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=kj(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>Ts(t)));)s--;if(!n)return{x:0,y:0};const i=Ps(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Nj=1e-4,uA=1-Nj,mA=1+Nj,_j=.01,hA=0-_j,pA=0+_j;function yr(e){return e.max-e.min}function xA(e,t,s){return Math.abs(e-t)<=s}function nb(e,t,s,n=.5){e.origin=n,e.originPoint=rt(t.min,t.max,e.origin),e.scale=yr(s)/yr(t),e.translate=rt(s.min,s.max,e.origin)-e.originPoint,(e.scale>=uA&&e.scale<=mA||isNaN(e.scale))&&(e.scale=1),(e.translate>=hA&&e.translate<=pA||isNaN(e.translate))&&(e.translate=0)}function Ro(e,t,s,n){nb(e.x,t.x,s.x,n?n.originX:void 0),nb(e.y,t.y,s.y,n?n.originY:void 0)}function ab(e,t,s){e.min=s.min+t.min,e.max=e.min+yr(t)}function fA(e,t,s){ab(e.x,t.x,s.x),ab(e.y,t.y,s.y)}function ib(e,t,s){e.min=t.min-s.min,e.max=e.min+yr(t)}function Bo(e,t,s){ib(e.x,t.x,s.x),ib(e.y,t.y,s.y)}function gA(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?rt(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?rt(s,e,n.max):Math.min(e,s)),e}function ob(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function bA(e,{top:t,left:s,bottom:n,right:a}){return{x:ob(e.x,s,a),y:ob(e.y,t,n)}}function lb(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function yA(e,t){return{x:lb(e.x,t.x),y:lb(e.y,t.y)}}function vA(e,t){let s=.5;const n=yr(e),a=yr(t);return a>n?s=Pi(t.min,t.max-n,e.min):n>a&&(s=Pi(e.min,e.max-a,t.min)),Os(0,1,s)}function wA(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const hp=.35;function jA(e=hp){return e===!1?e=0:e===!0&&(e=hp),{x:cb(e,"left","right"),y:cb(e,"top","bottom")}}function cb(e,t,s){return{min:db(e,t),max:db(e,s)}}function db(e,t){return typeof e=="number"?e:e[t]||0}const ub=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xa=()=>({x:ub(),y:ub()}),mb=()=>({min:0,max:0}),lt=()=>({x:mb(),y:mb()});function Cr(e){return[e("x"),e("y")]}function Cj({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function kA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function NA(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function xm(e){return e===void 0||e===1}function pp({scale:e,scaleX:t,scaleY:s}){return!xm(e)||!xm(t)||!xm(s)}function Gn(e){return pp(e)||Sj(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Sj(e){return hb(e.x)||hb(e.y)}function hb(e){return e&&e!=="0%"}function Td(e,t,s){const n=e-s,a=t*n;return s+a}function pb(e,t,s,n,a){return a!==void 0&&(e=Td(e,a,n)),Td(e,s,n)+t}function xp(e,t=0,s=1,n,a){e.min=pb(e.min,t,s,n,a),e.max=pb(e.max,t,s,n,a)}function Aj(e,{x:t,y:s}){xp(e.x,t.translate,t.scale,t.originPoint),xp(e.y,s.translate,s.scale,s.originPoint)}const xb=.999999999999,fb=1.0000000000001;function _A(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ei(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Aj(e,o)),n&&Gn(i.latestValues)&&ei(e,i.latestValues))}t.x<fb&&t.x>xb&&(t.x=1),t.y<fb&&t.y>xb&&(t.y=1)}function Ja(e,t){e.min=e.min+t,e.max=e.max+t}function gb(e,t,s,n,a=.5){const i=rt(e.min,e.max,a);xp(e,t,s,i,n)}function ei(e,t){gb(e.x,t.x,t.scaleX,t.scale,t.originX),gb(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ej(e,t){return Cj(NA(e.getBoundingClientRect(),t))}function CA(e,t,s){const n=Ej(e,s),{scroll:a}=t;return a&&(Ja(n.x,a.offset.x),Ja(n.y,a.offset.y)),n}const Tj=({current:e})=>e?e.ownerDocument.defaultView:null,SA=new WeakMap;class AA{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lt(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Bl(u).point)},i=(u,m)=>{const{drag:x,dragPropagation:p,onDragStart:j}=this.getProps();if(x&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=v6(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cr(v=>{let b=this.getAxisMotionValue(v).get()||0;if(hs.test(b)){const{projection:g}=this.visualElement;if(g&&g.layout){const w=g.layout.layoutBox[v];w&&(b=yr(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),j&&Ye.postRender(()=>j(u,m)),ap(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},o=(u,m)=>{const{dragPropagation:x,dragDirectionLock:p,onDirectionLock:j,onDrag:f}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:v}=m;if(p&&this.currentDirection===null){this.currentDirection=EA(v),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),f&&f(u,m)},l=(u,m)=>this.stop(u,m),c=()=>Cr(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new jj(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Tj(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ye.postRender(()=>i(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!cc(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=gA(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;s&&Ya(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=bA(a.layoutBox,s):this.constraints=!1,this.elastic=jA(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Cr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=wA(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ya(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=CA(n,a.root,this.visualElement.getTransformPagePoint());let o=yA(a.layout.layoutBox,i);if(s){const l=s(kA(o));this.hasMutatedConstraints=!!l,l&&(o=Cj(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Cr(u=>{if(!cc(u,s,this.currentDirection))return;let m=c&&c[u]||{};o&&(m={min:0,max:0});const x=a?200:1e6,p=a?40:1e7,j={type:"inertia",velocity:n?t[u]:0,bounceStiffness:x,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,j)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return ap(this.visualElement,t),n.start(kf(t,n,0,s,this.visualElement,!1))}stopAnimation(){Cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Cr(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Cr(s=>{const{drag:n}=this.getProps();if(!cc(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(t[s]-rt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ya(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Cr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=vA({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Cr(o=>{if(!cc(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(rt(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;SA.set(this.visualElement,this);const t=this.visualElement.current,s=Mo(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ya(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ye.read(n);const o=ml(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Cr(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=hp,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function cc(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function EA(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class TA extends zn{constructor(t){super(t),this.removeGroupControls=gr,this.removeListeners=gr,this.controls=new AA(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const bb=e=>(t,s)=>{e&&Ye.postRender(()=>e(t,s))};class PA extends zn{constructor(){super(...arguments),this.removePointerDownListener=gr}onPointerDown(t){this.session=new jj(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Tj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:bb(t),onStart:bb(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Ye.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Mo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const lo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(be.test(e))e=parseFloat(e);else return e;const s=yb(e,t.target.x),n=yb(e,t.target.y);return`${s}% ${n}%`}},DA={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=Mn.parse(e);if(a.length>5)return n;const i=Mn.createTransformer(e),o=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=rt(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class FA extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;JS(MA),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Lc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ye.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Zx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Pj(e){const[t,s]=h2(),n=h.useContext(Ux);return r.jsx(FA,{...e,layoutGroup:n,switchLayoutGroup:h.useContext(w2),isPresent:t,safeToRemove:s})}const MA={borderRadius:{...lo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lo,borderTopRightRadius:lo,borderBottomLeftRadius:lo,borderBottomRightRadius:lo,boxShadow:DA};function RA(e,t,s){const n=Ot(e)?e:dl(e);return n.start(kf("",n,t,s)),n.animation}function BA(e){return e instanceof SVGElement&&e.tagName!=="svg"}const LA=(e,t)=>e.depth-t.depth;class OA{constructor(){this.children=[],this.isDirty=!1}add(t){mf(this.children,t),this.isDirty=!0}remove(t){hf(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LA),this.isDirty=!1,this.children.forEach(t)}}function $A(e,t){const s=ps.now(),n=({timestamp:a})=>{const i=a-s;i>=t&&(Fn(n),e(i-t))};return Ye.read(n,!0),()=>Fn(n)}const Dj=["TopLeft","TopRight","BottomLeft","BottomRight"],IA=Dj.length,vb=e=>typeof e=="string"?parseFloat(e):e,wb=e=>typeof e=="number"||be.test(e);function zA(e,t,s,n,a,i){a?(e.opacity=rt(0,s.opacity!==void 0?s.opacity:1,VA(n)),e.opacityExit=rt(t.opacity!==void 0?t.opacity:1,0,UA(n))):i&&(e.opacity=rt(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<IA;o++){const l=`border${Dj[o]}Radius`;let c=jb(t,l),d=jb(s,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||wb(c)===wb(d)?(e[l]=Math.max(rt(vb(c),vb(d),n),0),(hs.test(d)||hs.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=rt(t.rotate||0,s.rotate||0,n))}function jb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const VA=Fj(0,.5,Z2),UA=Fj(.5,.95,gr);function Fj(e,t,s){return n=>n<e?0:n>t?1:s(Pi(e,t,n))}function kb(e,t){e.min=t.min,e.max=t.max}function Nr(e,t){kb(e.x,t.x),kb(e.y,t.y)}function Nb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function _b(e,t,s,n,a){return e-=t,e=Td(e,1/s,n),a!==void 0&&(e=Td(e,1/a,n)),e}function WA(e,t=0,s=1,n=.5,a,i=e,o=e){if(hs.test(t)&&(t=parseFloat(t),t=rt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=rt(i.min,i.max,n);e===i&&(l-=t),e.min=_b(e.min,t,s,l,a),e.max=_b(e.max,t,s,l,a)}function Cb(e,t,[s,n,a],i,o){WA(e,t[s],t[n],t[a],t.scale,i,o)}const qA=["x","scaleX","originX"],HA=["y","scaleY","originY"];function Sb(e,t,s,n){Cb(e.x,t,qA,s?s.x:void 0,n?n.x:void 0),Cb(e.y,t,HA,s?s.y:void 0,n?n.y:void 0)}function Ab(e){return e.translate===0&&e.scale===1}function Mj(e){return Ab(e.x)&&Ab(e.y)}function Eb(e,t){return e.min===t.min&&e.max===t.max}function KA(e,t){return Eb(e.x,t.x)&&Eb(e.y,t.y)}function Tb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Rj(e,t){return Tb(e.x,t.x)&&Tb(e.y,t.y)}function Pb(e){return yr(e.x)/yr(e.y)}function Db(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class GA{constructor(){this.members=[]}add(t){mf(this.members,t),t.scheduleRender()}remove(t){if(hf(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QA(e,t,s){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:x,skewX:p,skewY:j}=s;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),p&&(n+=`skewX(${p}deg) `),j&&(n+=`skewY(${j}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Qn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},vo=typeof window<"u"&&window.MotionDebug!==void 0,fm=["","X","Y","Z"],YA={visibility:"hidden"},Fb=1e3;let ZA=0;function gm(e,t,s,n){const{latestValues:a}=t;a[e]&&(s[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Bj(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=W2(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Ye,!(a||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Bj(n)}function Lj({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=ZA++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vo&&(Qn.totalNodes=Qn.resolvedTargetDeltas=Qn.recalculatedProjection=0),this.nodes.forEach(eE),this.nodes.forEach(aE),this.nodes.forEach(iE),this.nodes.forEach(tE),vo&&window.MotionDebug.record(Qn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new OA)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new pf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BA(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let m;const x=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=$A(x,250),Lc.hasAnimatedSinceResize&&(Lc.hasAnimatedSinceResize=!1,this.nodes.forEach(Rb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:x,hasRelativeTargetChanged:p,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||u.getDefaultTransition()||uE,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),g=!this.targetLayout||!Rj(this.targetLayout,j)||p,w=!x&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||x&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,w);const N={...lf(f,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else x||Rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Fn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oE),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Mb);return}this.isUpdating||this.nodes.forEach(sE),this.isUpdating=!1,this.nodes.forEach(nE),this.nodes.forEach(XA),this.nodes.forEach(JA),this.clearAllSnapshots();const l=ps.now();At.delta=Os(0,1e3/60,l-At.timestamp),At.timestamp=l,At.isProcessing=!0,om.update.process(At),om.preRender.process(At),om.render.process(At),At.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Zx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(rE),this.sharedNodes.forEach(lE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Mj(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||Gn(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),mE(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return lt();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(hE))){const{scroll:u}=this.root;u&&(Ja(c.x,u.offset.x),Ja(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=lt();if(Nr(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:m,options:x}=u;u!==this.root&&m&&x.layoutScroll&&(m.wasRoot&&Nr(c,o),Ja(c.x,m.offset.x),Ja(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=lt();Nr(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ei(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Gn(u.latestValues)&&ei(c,u.latestValues)}return Gn(this.latestValues)&&ei(c,this.latestValues),c}removeTransform(o){const l=lt();Nr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Gn(d.latestValues))continue;pp(d.latestValues)&&d.updateSnapshot();const u=lt(),m=d.measurePageBox();Nr(u,m),Sb(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Gn(this.latestValues)&&Sb(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==At.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:x}=this.options;if(!(!this.layout||!(m||x))){if(this.resolvedRelativeTargetAt=At.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Bo(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lt(),this.targetWithTransforms=lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nr(this.target,this.layout.layoutBox),Aj(this.target,this.targetDelta)):Nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Bo(this.relativeTargetOrigin,this.target,p.target),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vo&&Qn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||pp(this.parent.latestValues)||Sj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===At.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;Nr(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,p=this.treeScale.y;_A(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=lt());const{target:j}=l;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Nb(this.prevProjectionDelta.x,this.projectionDelta.x),Nb(this.prevProjectionDelta.y,this.projectionDelta.y)),Ro(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==p||!Db(this.projectionDelta.x,this.prevProjectionDelta.x)||!Db(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),vo&&Qn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xa(),this.projectionDelta=Xa(),this.projectionDeltaWithTransform=Xa()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=Xa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=lt(),p=c?c.source:void 0,j=this.layout?this.layout.source:void 0,f=p!==j,v=this.getStack(),b=!v||v.members.length<=1,g=!!(f&&!b&&this.options.crossfade===!0&&!this.path.some(dE));this.animationProgress=0;let w;this.mixTargetDelta=N=>{const _=N/1e3;Bb(m.x,o.x,_),Bb(m.y,o.y,_),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bo(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cE(this.relativeTarget,this.relativeTargetOrigin,x,_),w&&KA(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=lt()),Nr(w,this.relativeTarget)),f&&(this.animationValues=u,zA(u,d,this.latestValues,_,g,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Fn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Lc.hasAnimatedSinceResize=!0,this.currentAnimation=RA(0,Fb,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Fb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Oj(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||lt();const m=yr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const x=yr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+x}Nr(l,c),ei(l,u),Ro(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new GA),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&gm("z",o,d,this.animationValues);for(let u=0;u<fm.length;u++)gm(`rotate${fm[u]}`,o,d,this.animationValues),gm(`skew${fm[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return YA;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Rc(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=Rc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Gn(this.latestValues)&&(f.transform=u?u({},""):"none",this.hasProjected=!1),f}const x=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=QA(this.projectionDeltaWithTransform,this.treeScale,x),u&&(d.transform=u(x,d.transform));const{x:p,y:j}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${j.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=x.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:d.opacity=m===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const f in _d){if(x[f]===void 0)continue;const{correct:v,applyTo:b}=_d[f],g=d.transform==="none"?x[f]:v(x[f],m);if(b){const w=b.length;for(let N=0;N<w;N++)d[b[N]]=g}else d[f]=g}return this.options.layoutId&&(d.pointerEvents=m===this?Rc(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Mb),this.root.sharedNodes.clear()}}}function XA(e){e.updateLayout()}function JA(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=s.source!==e.layout.source;i==="size"?Cr(m=>{const x=o?s.measuredBox[m]:s.layoutBox[m],p=yr(x);x.min=n[m].min,x.max=x.min+p}):Oj(i,s.layoutBox,n)&&Cr(m=>{const x=o?s.measuredBox[m]:s.layoutBox[m],p=yr(n[m]);x.max=x.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+p)});const l=Xa();Ro(l,n,s.layoutBox);const c=Xa();o?Ro(c,e.applyTransform(a,!0),s.measuredBox):Ro(c,n,s.layoutBox);const d=!Mj(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:x,layout:p}=m;if(x&&p){const j=lt();Bo(j,s.layoutBox,x.layoutBox);const f=lt();Bo(f,n,p.layoutBox),Rj(j,f)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=f,e.relativeTargetOrigin=j,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function eE(e){vo&&Qn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function rE(e){e.clearSnapshot()}function Mb(e){e.clearMeasurements()}function sE(e){e.isLayoutDirty=!1}function nE(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function aE(e){e.resolveTargetDelta()}function iE(e){e.calcProjection()}function oE(e){e.resetSkewAndRotation()}function lE(e){e.removeLeadSnapshot()}function Bb(e,t,s){e.translate=rt(t.translate,0,s),e.scale=rt(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Lb(e,t,s,n){e.min=rt(t.min,s.min,n),e.max=rt(t.max,s.max,n)}function cE(e,t,s,n){Lb(e.x,t.x,s.x,n),Lb(e.y,t.y,s.y,n)}function dE(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uE={duration:.45,ease:[.4,0,.1,1]},Ob=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),$b=Ob("applewebkit/")&&!Ob("chrome/")?Math.round:gr;function Ib(e){e.min=$b(e.min),e.max=$b(e.max)}function mE(e){Ib(e.x),Ib(e.y)}function Oj(e,t,s){return e==="position"||e==="preserve-aspect"&&!xA(Pb(t),Pb(s),.2)}function hE(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const pE=Lj({attachResizeListener:(e,t)=>ml(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bm={current:void 0},$j=Lj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bm.current){const e=new pE({});e.mount(window),e.setOptions({layoutScroll:!0}),bm.current=e}return bm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),xE={pan:{Feature:PA},drag:{Feature:TA,ProjectionNode:$j,MeasureLayout:Pj}};function zb(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,i=n[a];i&&Ye.postRender(()=>i(t,Bl(t)))}class fE extends zn{mount(){const{current:t}=this.node;t&&(this.unmount=x6(t,s=>(zb(this.node,s,"Start"),n=>zb(this.node,n,"End"))))}unmount(){}}class gE extends zn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rl(ml(this.node.current,"focus",()=>this.onFocus()),ml(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vb(e,t,s){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),i=n[a];i&&Ye.postRender(()=>i(t,Bl(t)))}class bE extends zn{mount(){const{current:t}=this.node;t&&(this.unmount=y6(t,s=>(Vb(this.node,s,"Start"),(n,{success:a})=>Vb(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const fp=new WeakMap,ym=new WeakMap,yE=e=>{const t=fp.get(e.target);t&&t(e)},vE=e=>{e.forEach(yE)};function wE({root:e,...t}){const s=e||document;ym.has(s)||ym.set(s,{});const n=ym.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(vE,{root:e,...t})),n[a]}function jE(e,t,s){const n=wE(t);return fp.set(e,s),n.observe(e),()=>{fp.delete(e),n.unobserve(e)}}const kE={some:0,all:1};class NE extends zn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:kE[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),x=d?u:m;x&&x(c)};return jE(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(_E(t,s))&&this.startObserver()}unmount(){}}function _E({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const CE={inView:{Feature:NE},tap:{Feature:bE},focus:{Feature:gE},hover:{Feature:fE}},SE={layout:{ProjectionNode:$j,MeasureLayout:Pj}},gp={current:null},Ij={current:!1};function AE(){if(Ij.current=!0,!!Hx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>gp.current=e.matches;e.addListener(t),t()}else gp.current=!1}const EE=[...uj,Rt,Mn],TE=e=>EE.find(dj(e)),Ub=new WeakMap;function PE(e,t,s){for(const n in t){const a=t[n],i=s[n];if(Ot(a))e.addValue(n,a);else if(Ot(i))e.addValue(n,dl(a,{owner:e}));else if(i!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,dl(o!==void 0?o:a,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const Wb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DE{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ps.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ye.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=o;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=pu(s),this.isVariantNode=y2(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...x}=this.scrapeMotionValuesFromProps(s,{},this);for(const p in x){const j=x[p];c[p]!==void 0&&Ot(j)&&j.set(c[p],!1)}}mount(t){this.current=t,Ub.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Ij.current||AE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ub.delete(this.current),this.projection&&this.projection.unmount(),Fn(this.notifyUpdate),Fn(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Ea.has(t),a=s.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ye.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Di){const s=Di[t];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Wb.length;n++){const a=Wb[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=PE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=dl(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(lj(a)||J2(a))?a=parseFloat(a):!TE(a)&&Mn.test(s)&&(a=aj(t,s)),this.setBaseTarget(t,Ot(a)?a.get():a)),Ot(a)?a.get():a}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=Jx(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ot(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new pf),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class zj extends DE{constructor(){super(...arguments),this.KeyframeResolver=mj}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ot(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function FE(e){return window.getComputedStyle(e)}class ME extends zj{constructor(){super(...arguments),this.type="html",this.renderInstance=A2}readValueFromInstance(t,s){if(Ea.has(s)){const n=yf(s);return n&&n.default||0}else{const n=FE(t),a=(_2(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Ej(t,s)}build(t,s,n){rf(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return of(t,s,n)}}class RE extends zj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lt}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Ea.has(s)){const n=yf(s);return n&&n.default||0}return s=E2.has(s)?s:Yx(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return D2(t,s,n)}build(t,s,n){sf(t,s,this.isSVGTag,n.transformTemplate)}renderInstance(t,s,n,a){T2(t,s,n,a)}mount(t){this.isSVGTag=af(t.tagName),super.mount(t)}}const BE=(e,t)=>Xx(e)?new RE(t):new ME(t,{allowProjection:e!==h.Fragment}),LE=l6({...iA,...CE,...xE,...SE},BE),he=kS(LE),OE=()=>{const e=Ie(),{transitionTo:t}=du(),[s,n]=h.useState(!1),a=()=>{var x;return typeof window<"u"&&((x=window.__RUNTIME_CONFIG__)!=null&&x.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},{data:i,isLoading:o}=ve({queryKey:["waitTime"],queryFn:async()=>{n(!0);try{return(await Y.get(`${a()}/api/wait-time`)).data}finally{setTimeout(()=>n(!1),500)}},refetchInterval:2e4,refetchOnWindowFocus:!0}),l=(i==null?void 0:i.currentWaitMinutes)??15,c=re(x=>x.app_settings.services_enabled),d=()=>{t(c?"/book/service":"/book/date")},u=()=>{t("/callout/book")},m=()=>{t("/queue/join")};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] relative overflow-hidden",children:[r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black/30 to-transparent pointer-events-none"}),r.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}),r.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 pb-20",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-12 min-h-[80vh] lg:min-h-[75vh]",children:[r.jsxs(he.div,{className:"flex-1 text-center lg:text-left max-w-2xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[r.jsxs(he.h1,{className:"text-5xl sm:text-6xl lg:text-7xl font-bold text-master-text-primary-dark mb-6 leading-tight",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:["Skip the Wait.",r.jsx("br",{}),"Look Sharp."]}),r.jsx(he.p,{className:"text-xl sm:text-2xl text-master-text-secondary-dark mb-10 leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:"Premium cuts, zero hassle. Book in 60 seconds or join our virtual queue."}),r.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:[r.jsx(he.button,{onClick:d,className:"px-8 py-4 bg-white text-master-text-primary-light rounded-lg font-bold text-lg shadow-2xl relative overflow-hidden",whileHover:{scale:1.05},whileTap:{scale:.98},animate:{scale:[1,1.05,1]},transition:{scale:{duration:1.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},children:"Book Appointment"}),r.jsx(he.button,{onClick:m,className:"px-8 py-4 bg-transparent text-master-text-primary-dark border-2 border-white rounded-lg font-bold text-lg",whileHover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.1)"},whileTap:{scale:.98},children:"Join Walk-In Queue"})]}),r.jsx(he.p,{className:"text-master-text-muted-dark text-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.8},children:" Instant confirmation   Free cancellation   500+ happy clients"})]}),r.jsx(he.div,{className:"w-full lg:w-auto",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.5},children:r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl max-w-sm mx-auto lg:mx-0",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs(he.div,{className:"flex items-center gap-4",whileHover:{scale:1.05},transition:{duration:.2},children:[r.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-sm",children:r.jsx(pr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-master-text-primary-dark",children:"500+"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Happy Clients"})]})]}),r.jsxs(he.div,{className:"flex items-center gap-4",whileHover:{scale:1.05},transition:{duration:.2},children:[r.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-sm",children:r.jsx(_g,{className:"w-6 h-6 text-yellow-400 fill-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-3xl font-bold text-master-text-primary-dark",children:"4.9"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Star Rating"})]})]}),r.jsxs(he.div,{className:"flex items-center gap-4 relative",whileHover:{scale:1.05},transition:{duration:.2},children:[r.jsx("div",{className:`w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center backdrop-blur-sm transition-opacity ${s?"opacity-50":"opacity-100"}`,children:r.jsx(tt,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsx("div",{children:o&&!i?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-400"}),r.jsx("p",{className:"text-xl font-bold text-master-text-secondary-dark",children:"Loading..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-3xl font-bold text-green-400",children:l===0?r.jsx("span",{className:"text-2xl",children:"No Wait"}):r.jsxs(r.Fragment,{children:[l," Mins"]})}),r.jsxs("p",{className:"text-master-text-secondary-dark text-sm flex items-center gap-1",children:["Current Wait",i&&i.queueLength>0&&r.jsxs("span",{className:"text-xs text-master-text-muted-dark",children:["(",i.queueLength," in queue)"]})]})]})}),s&&r.jsx(he.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-blue-400 rounded-full",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{duration:.3}})]})]})})})]}),r.jsx(he.section,{className:"mt-16",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:r.jsx("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-amber-500 via-orange-500 to-red-600 p-1 shadow-2xl",children:r.jsx("div",{className:"bg-gradient-to-br from-gray-900/95 via-gray-900/90 to-black/95 backdrop-blur-xl rounded-3xl p-8 sm:p-12",children:r.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[r.jsxs("div",{className:"flex-1 text-center lg:text-left",children:[r.jsxs(he.div,{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full text-master-text-primary-dark font-bold text-sm mb-4 shadow-lg",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[r.jsx(ol,{className:"w-4 h-4"}),"NEW PREMIUM SERVICE"]}),r.jsxs("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-master-text-primary-dark mb-4 leading-tight",children:["Call-Out Service",r.jsx("span",{className:"block text-amber-400",children:"We Come To You"})]}),r.jsx("p",{className:"text-lg sm:text-xl text-master-text-secondary-dark mb-6 leading-relaxed",children:"Premium barbering at your doorstep. Perfect for home appointments, special occasions, or when you simply can't make it to the shop."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center lg:justify-start mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-master-text-primary-dark",children:[r.jsx(Kt,{className:"w-5 h-5 text-amber-400"}),r.jsx("span",{className:"font-medium",children:"Your Location"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-master-text-primary-dark",children:[r.jsx(tt,{className:"w-5 h-5 text-amber-400"}),r.jsx("span",{className:"font-medium",children:"Flexible Timing"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-master-text-primary-dark",children:[r.jsx(_g,{className:"w-5 h-5 text-amber-400 fill-amber-400"}),r.jsx("span",{className:"font-medium",children:"Master Barbers"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 justify-center lg:justify-start mb-6",children:[r.jsx("span",{className:"text-5xl font-bold bg-gradient-to-r from-amber-400 to-orange-400 bg-clip-text text-transparent",children:"150"}),r.jsxs("span",{className:"text-master-text-muted-dark text-sm",children:["All-inclusive",r.jsx("br",{}),"flat rate"]})]}),r.jsx(he.button,{onClick:u,className:"px-8 py-4 bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark rounded-lg font-bold text-lg shadow-2xl hover:shadow-amber-500/50 transition-all duration-300",whileHover:{scale:1.05,y:-2},whileTap:{scale:.98},children:"Book Call-Out Service"})]}),r.jsx("div",{className:"flex-shrink-0 w-full lg:w-80",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/30 to-orange-500/30 rounded-2xl blur-2xl"}),r.jsx("div",{className:"relative backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg backdrop-blur-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(Kt,{className:"w-5 h-5 text-master-text-primary-dark"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-semibold text-sm",children:"Home Service"}),r.jsx("p",{className:"text-master-text-secondary-dark text-xs",children:"We travel to you"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg backdrop-blur-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(qe,{className:"w-5 h-5 text-master-text-primary-dark"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-semibold text-sm",children:"Book Anytime"}),r.jsx("p",{className:"text-master-text-secondary-dark text-xs",children:"Flexible scheduling"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg backdrop-blur-sm",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(ol,{className:"w-5 h-5 text-master-text-primary-dark"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-semibold text-sm",children:"Premium Quality"}),r.jsx("p",{className:"text-master-text-secondary-dark text-xs",children:"Same expert service"})]})]})]})})]})})]})})})}),r.jsxs(he.section,{className:"mt-20 pt-20 border-t border-white/10",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-master-text-primary-dark mb-4",children:"Premium Services"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:"Expert cuts crafted by master barbers"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{title:"Signature Fade",description:"Precision fade with clean lines",icon:""},{title:"Beard Sculpting",description:"Shape and style perfection",icon:""},{title:"Hot Towel Shave",description:"Traditional luxury experience",icon:""}].map((x,p)=>r.jsxs(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-6 hover:bg-white/15 transition-all",whileHover:{scale:1.05,y:-5},whileTap:{scale:.98},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:p*.1},children:[r.jsx("div",{className:"text-5xl mb-4",children:x.icon}),r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:x.title}),r.jsx("p",{className:"text-master-text-secondary-dark",children:x.description})]},p))})]}),r.jsxs(he.section,{className:"mt-20 pt-20 border-t border-white/10",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-master-text-primary-dark mb-4",children:"Our Work Speaks"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:"Real cuts, real confidence"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(x=>r.jsx(he.div,{className:"aspect-square rounded-xl overflow-hidden backdrop-blur-xl bg-white/10 border border-white/20",whileHover:{scale:1.05},whileTap:{scale:.98},initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:x*.05},children:r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/20 to-white/5 flex items-center justify-center",children:r.jsxs("p",{className:"text-master-text-primary-dark/50 text-sm",children:["Gallery Image ",x]})})},x))}),r.jsx(he.div,{className:"text-center mt-8",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5,delay:.3},children:r.jsx(he.button,{onClick:()=>e("/gallery"),className:"px-8 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold backdrop-blur-sm",whileHover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.15)"},whileTap:{scale:.98},children:"View Full Gallery"})})]}),r.jsxs(he.section,{className:"mt-20 pt-20 border-t border-white/10 text-center",initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[r.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-master-text-primary-dark mb-6",children:"Ready to Look Sharp?"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark mb-10 max-w-2xl mx-auto",children:"Join hundreds of satisfied clients. Book your appointment in seconds."}),r.jsxs(he.button,{onClick:d,className:"px-10 py-5 bg-white text-master-text-primary-light rounded-lg font-bold text-xl shadow-2xl inline-flex items-center gap-3",whileHover:{scale:1.05},whileTap:{scale:.98},animate:{scale:[1,1.05,1]},transition:{scale:{duration:1.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},children:[r.jsx(qe,{className:"w-6 h-6"}),"Book Your Appointment Now"]})]})]})]})},$E=()=>{const[e,t]=h.useState(null),s=re(p=>p.booking_context),n=re(p=>p.app_settings.services_enabled),a=re(p=>p.update_booking_context),i=Ie();h.useEffect(()=>{n||i("/book/date")},[n,i]),h.useEffect(()=>{s.service_id&&t(s.service_id)},[s.service_id]);const{data:o=[],isLoading:l,error:c,refetch:d}=ve({queryKey:["services","active"],queryFn:async()=>{const p=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/services",{params:{is_active:!0,sort_by:"display_order",sort_order:"asc"}});return p.data.services||p.data},staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),u=p=>{t(p.service_id),a({service_id:p.service_id,service_name:p.name,is_callout:p.is_callout})},m=()=>{a({service_id:null,service_name:null}),i("/book/date")},x=()=>{e&&i("/book/date")};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-master-text-primary-dark mb-3 leading-tight",children:"What service do you need?"}),r.jsx("p",{className:"text-lg md:text-xl text-master-text-secondary-dark leading-relaxed",children:"Choose the service that best fits your needs"})]}),r.jsx("div",{className:"mb-8 flex items-center justify-center",children:r.jsxs("div",{className:"flex items-center space-x-2 backdrop-blur-xl bg-white/10 border border-white/20 rounded-full px-6 py-3 shadow-lg",children:[r.jsx("span",{className:"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-full w-10 h-10 flex items-center justify-center text-sm font-bold shadow-md",children:"1"}),r.jsx("span",{className:"text-sm font-semibold text-master-text-primary-dark hidden sm:inline",children:"Service"}),r.jsx("span",{className:"text-master-text-muted-dark mx-1",children:""}),r.jsx("span",{className:"bg-white/10 text-master-text-muted-dark border border-white/10 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"2"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark hidden sm:inline",children:"Date"}),r.jsx("span",{className:"text-master-text-muted-dark mx-1",children:""}),r.jsx("span",{className:"bg-white/10 text-master-text-muted-dark border border-white/10 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"3"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark hidden sm:inline",children:"Time"}),r.jsx("span",{className:"text-master-text-muted-dark mx-1",children:""}),r.jsx("span",{className:"bg-white/10 text-master-text-muted-dark border border-white/10 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"4"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark hidden sm:inline",children:"Details"})]})}),r.jsx("div",{className:"mb-8 text-center",children:r.jsx("button",{onClick:m,className:"text-amber-400 hover:text-amber-300 text-sm md:text-base font-medium underline transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"Skip service selection and continue with standard haircut",children:"Skip this step (continue with standard haircut)"})}),l&&r.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mb-4"}),r.jsx("p",{className:"text-master-text-secondary-dark text-lg",children:"Loading services..."})]}),c&&r.jsx("div",{className:"max-w-md mx-auto",children:r.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center shadow-lg",children:[r.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-2",children:"Failed to Load Services"}),r.jsx("p",{className:"text-red-300 mb-4",children:"We couldn't load the available services. Please try again."}),r.jsx("button",{onClick:()=>d(),className:"bg-red-600 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 shadow-md hover:shadow-xl",children:"Try Again"})]})}),!l&&!c&&o.length===0&&r.jsx("div",{className:"max-w-md mx-auto",children:r.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center shadow-lg",children:[r.jsx("svg",{className:"w-12 h-12 text-yellow-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h3",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"No Services Available"}),r.jsx("p",{className:"text-yellow-300 mb-4",children:"No services are currently available. Please check back later."}),r.jsx("button",{onClick:m,className:"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors duration-200 shadow-md hover:shadow-xl",children:"Continue Anyway"})]})}),!l&&!c&&o.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-12",children:o.map(p=>r.jsxs("button",{onClick:()=>u(p),className:`
                    relative overflow-hidden rounded-xl border-2 p-4 md:p-6 text-left 
                    transition-all duration-200 transform focus:outline-none focus:ring-4
                    ${p.is_callout?e===p.service_id?"border-orange-500 bg-gradient-to-br from-orange-50 to-amber-50 shadow-xl scale-105 ring-4 ring-orange-100":"border-orange-300 bg-gradient-to-br from-orange-50 to-amber-50 hover:border-orange-400 hover:shadow-lg hover:scale-102":e===p.service_id?"border-red-600 bg-[#2D0808] shadow-xl scale-105 ring-4 ring-red-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-lg hover:scale-102"}
                    ${p.is_callout?"focus:ring-orange-100":"focus:ring-red-100"}
                  `,"aria-pressed":e===p.service_id,"aria-label":`Select ${p.name} service`,children:[p.is_callout&&r.jsxs("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark px-3 py-1 rounded-full text-xs font-bold shadow-lg flex items-center z-10",children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"PREMIUM"]}),e===p.service_id&&r.jsx("div",{className:"absolute top-3 right-3 bg-gradient-to-r from-red-600 to-red-700 rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center shadow-lg animate-in zoom-in duration-200 z-10",children:r.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-master-text-primary-dark",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(()=>{const f=((v,b)=>{if(b)return b;const g=v.toLowerCase();return g.includes("fade")||g.includes("taper")?"https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=800&h=450&fit=crop":g.includes("beard")||g.includes("shave")?"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=800&h=450&fit=crop":g.includes("buzz")||g.includes("crew")?"https://images.unsplash.com/photo-1605497788044-5a32c7078486?w=800&h=450&fit=crop":g.includes("kid")||g.includes("child")?"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=800&h=450&fit=crop":g.includes("design")||g.includes("pattern")||g.includes("line")?"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=800&h=450&fit=crop":g.includes("wash")||g.includes("treatment")||g.includes("scalp")?"https://images.unsplash.com/photo-1560869713-7d0a29430803?w=800&h=450&fit=crop":g.includes("color")||g.includes("dye")?"https://images.unsplash.com/photo-1562004760-aceed7bb0fe3?w=800&h=450&fit=crop":g.includes("styling")||g.includes("style")?"https://images.unsplash.com/photo-1534620808146-d33bb39128b2?w=800&h=450&fit=crop":g.includes("trim")||g.includes("cut")?"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=800&h=450&fit=crop":g.includes("call")||g.includes("mobile")||g.includes("home")?"https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=800&h=450&fit=crop":"https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=800&h=450&fit=crop"})(p.name,p.image_url);return r.jsx("div",{className:"mb-4 aspect-video overflow-hidden rounded-lg bg-gray-100",children:r.jsx("img",{src:f,alt:`${p.name} service preview`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",loading:"lazy"})})})(),r.jsxs("h3",{className:`text-lg md:text-xl font-semibold mb-2 leading-tight ${p.is_callout?"text-[#3B1612]":e===p.service_id?"text-[#F6E7D8]":"text-[#3B1612]"}`,children:[p.name,p.is_callout&&r.jsxs("span",{className:"ml-2 inline-flex items-center text-xs font-medium text-[#6A3A2E]",children:[r.jsxs("svg",{className:"w-4 h-4 mr-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"We come to you"]})]}),r.jsx("p",{className:`text-xs md:text-sm mb-4 line-clamp-2 leading-relaxed ${p.is_callout?"text-[#6A3A2E]":e===p.service_id?"text-[#E8D4C4]":"text-[#6A3A2E]"}`,children:p.description}),r.jsxs("div",{className:`flex items-center justify-between pt-3 border-t ${p.is_callout?"border-[#E8B895]":e===p.service_id?"border-[#5C1B1B]":"border-gray-200"}`,children:[r.jsxs("div",{className:`flex items-center text-xs md:text-sm ${p.is_callout?"text-[#7A4A3A]":e===p.service_id?"text-[#E8D4C4]":"text-[#7A4A3A]"}`,children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{className:"font-medium",children:[p.duration," min"]})]}),p.price!==null&&p.price!==void 0&&r.jsxs("div",{className:`text-xs md:text-sm font-semibold ${p.is_callout?"text-[#D97706]":e===p.service_id?"text-[#FCD34D]":"text-[#D97706]"}`,children:[p.is_callout?"":"From $",typeof p.price=="number"?p.price.toFixed(2):parseFloat(String(p.price)).toFixed(2)]})]})]},p.service_id))}),r.jsxs("div",{className:"max-w-3xl mx-auto flex justify-between items-center gap-4 mt-8",children:[r.jsx(Z,{to:"/",className:"px-6 py-3 rounded-lg font-medium text-master-text-secondary-dark bg-[#2D0808] border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-gray-200",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),r.jsx("button",{onClick:x,disabled:!e,className:`
                flex-1 max-w-xs px-8 py-3 rounded-lg font-medium text-master-text-primary-dark 
                transition-all duration-200 shadow-lg focus:outline-none focus:ring-4
                ${e?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 hover:shadow-xl focus:ring-red-300 cursor-pointer":"bg-gray-300 cursor-not-allowed opacity-50"}
              `,"aria-label":"Continue to date selection",children:r.jsxs("span",{className:"flex items-center justify-center",children:["Continue",r.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),!e&&!l&&o.length>0&&r.jsx("div",{className:"text-center mt-6",children:r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Select a service to continue or skip this step"})})]})})})},bp=e=>{const[t,s]=e.split("-").map(Number);return new Date(t,s-1,1)},dc=e=>{const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0");return`${t}-${s}`},IE=e=>bp(e).toLocaleDateString("en-US",{month:"long",year:"numeric"}),zE=e=>new Date(e+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),VE=e=>{const[t,s]=e.split("-").map(Number),n=new Date(t,s-1,1),a=new Date(t,s,0),i=o=>{const l=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0");return`${l}-${c}-${d}`};return{start_date:i(n),end_date:i(a)}},UE=(e,t)=>{const s={},n=new Date;n.setHours(0,0,0,0);const a=new Date(n);return a.setDate(n.getDate()+t),a.setHours(23,59,59,999),(e.dates||[]).forEach(i=>{const o=new Date(i.date+"T00:00:00"),l=o<n,c=o>a;s[i.date]={available_slots:i.available_slots,total_capacity:i.total_capacity,status:i.is_blocked?"blocked":l?"past":c?"blocked":i.available_slots===0?"full":i.available_slots<=1?"limited":"available"}}),s},WE=()=>{const e=Ie(),t=re(E=>E.booking_context.selected_date),s=re(E=>E.booking_context.service_id),n=re(E=>E.booking_context.service_name),a=re(E=>E.app_settings.booking_window_days),i=re(E=>E.update_booking_context),[o,l]=h.useState(()=>t?t.slice(0,7):new Date().toISOString().slice(0,7)),[c,d]=h.useState(t),[u,m]=h.useState(!1);h.useEffect(()=>{if(t&&t!==c){console.log("[Date Selection] Syncing date from context:",t),d(t);const E=t.slice(0,7);o!==E&&l(E)}},[t,c,o]);const{start_date:x,end_date:p}=VE(o),{data:j={},isLoading:f,error:v}=ve({queryKey:["availability",o,s,a],queryFn:async()=>{const E=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/availability",{params:{start_date:x,end_date:p,service_id:s||void 0}});return UE(E.data,a)},staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),b=dc(new Date),g=h.useMemo(()=>{const E=new Date,L=new Date(E);return L.setDate(E.getDate()+a),dc(L)},[a]),w=o>b,N=o<g,_=()=>{if(w){const E=bp(o);E.setMonth(E.getMonth()-1),l(dc(E))}},y=()=>{if(N){const E=bp(o);E.setMonth(E.getMonth()+1),l(dc(E))}},S=h.useMemo(()=>{const[E,L]=o.split("-").map(Number),O=new Date(E,L-1,1).getDay(),R=new Date(E,L,0).getDate(),z=O,ee=z+R,C=Math.ceil(ee/7),k=[];let D=1-z;for(let T=0;T<C;T++){const P=[];for(let V=0;V<7;V++){const J=D;if(D++,J<=0||J>R)P.push(null);else{const K=`${E}-${String(L).padStart(2,"0")}-${String(J).padStart(2,"0")}`,M=j[K]||null;P.push({date:J,dateString:K,availability:M})}}k.push(P)}return k},[o,j]),A=E=>{if(!E.availability)return;const L=E.availability.status;if(L==="full"||L==="blocked"||L==="past")return;const O=new Date(E.dateString+"T00:00:00"),R=new Date;R.setHours(0,0,0,0);const z=new Date(R);if(z.setDate(R.getDate()+a),z.setHours(23,59,59,999),O<R||O>z)return;d(E.dateString);const ee=E.dateString!==t;i({selected_date:E.dateString,...ee?{selected_time:null}:{}})},I=()=>{if(!c||f)return;const E=j[c];if(!E)console.warn("No availability data for selected date, proceeding anyway");else if(E.status!=="available"&&E.status!=="limited"){alert("This date is no longer available. Please select another date."),d(null),i({selected_date:null,selected_time:null});return}const L=new Date(c+"T00:00:00"),O=new Date;O.setHours(0,0,0,0);const R=new Date(O);if(R.setDate(O.getDate()+a),R.setHours(23,59,59,999),L<O||L>R){alert("This date is outside the booking window. Please select another date."),d(null),i({selected_date:null,selected_time:null});return}m(!0),i({selected_date:c}),console.log("[Date Selection] Navigating to time selection with date:",c),setTimeout(()=>{e("/book/time")},0)},F=()=>{e(s?"/book/service":"/")},H=new Date().toISOString().slice(0,10);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Step 2 of 4"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Date Selection"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 h-2 rounded-full transition-all duration-300",style:{width:"50%"}})})]}),r.jsxs("button",{onClick:F,className:"mb-6 flex items-center text-master-text-secondary-dark hover:text-master-text-primary-dark transition-colors text-sm font-medium",children:[r.jsx(yd,{className:"w-4 h-4 mr-1"}),"Back"]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-8 border-b border-gray-200",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark mb-2",children:"When would you like to come?"}),n&&r.jsxs("div",{className:"mt-4 inline-flex items-center bg-blue-900/30 text-blue-400 px-4 py-2 rounded-full",children:[r.jsx(i2,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"font-medium",children:n}),r.jsx(Z,{to:"/book/service",className:"ml-3 text-amber-400 hover:text-amber-300 text-sm underline",children:"Change"})]})]}),r.jsxs("div",{className:"px-6 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("button",{onClick:_,disabled:!w||f,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Previous month",children:r.jsx(yd,{className:"w-6 h-6 text-master-text-secondary-dark"})}),r.jsx("h2",{className:"text-2xl font-semibold text-master-text-primary-dark",children:IE(o)}),r.jsx("button",{onClick:y,disabled:!N||f,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Next month",children:r.jsx(As,{className:"w-6 h-6 text-master-text-secondary-dark"})})]}),v&&r.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-300 px-4 py-3 rounded-lg flex items-start",children:[r.jsx(Nt,{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Couldn't load availability"}),r.jsx("p",{className:"text-sm mt-1",children:"Please try again or select a different month."})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(E=>r.jsx("div",{className:"text-center text-xs font-semibold text-master-text-secondary-dark uppercase",children:E},E))}),f?r.jsx("div",{className:"space-y-2",children:[...Array(5)].map((E,L)=>r.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(7)].map((O,R)=>r.jsx("div",{className:"aspect-square rounded-lg bg-gray-200 animate-pulse"},R))},L))}):r.jsx("div",{className:"space-y-2",children:S.map((E,L)=>r.jsx("div",{className:"grid grid-cols-7 gap-2",children:E.map((O,R)=>{if(!O)return r.jsx("div",{className:"aspect-square"},R);const z=O.dateString===H,ee=O.dateString===c,C=O.availability,k=(C==null?void 0:C.status)||"available";let D="aspect-square rounded-lg border-2 flex flex-col items-center justify-center p-1 transition-all duration-200 ",T=!1;return ee?(D+="bg-gradient-to-r from-red-600 to-red-700 border-red-600 text-master-text-primary-dark shadow-lg scale-105 ",T=!0):k==="available"?(D+="bg-[#2D0808] border-gray-200 hover:border-blue-400 hover:shadow-md cursor-pointer ",T=!0):k==="limited"?(D+="bg-amber-50 border-amber-300 hover:border-amber-500 hover:shadow-md cursor-pointer ",T=!0):k==="full"?D+="bg-gray-100 border-gray-200 text-master-text-muted-dark cursor-not-allowed ":k==="blocked"?D+="bg-gray-100 border-gray-200 text-master-text-muted-dark cursor-not-allowed bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(0,0,0,0.05)_10px,rgba(0,0,0,0.05)_20px)] ":k==="past"&&(D+="bg-gray-50 border-gray-100 text-master-text-secondary-dark cursor-not-allowed "),z&&!ee&&(D+="ring-2 ring-red-400 "),r.jsxs("button",{onClick:()=>T&&A(O),disabled:!T,className:D,"aria-label":`${O.dateString} - ${k}`,children:[r.jsx("span",{className:`text-base font-semibold ${ee?"text-master-text-primary-dark":k==="past"||k==="blocked"||k==="full"?"text-master-text-muted-dark":"text-master-text-primary-dark"}`,children:O.date}),z&&!ee&&r.jsx("span",{className:"text-[10px] font-medium text-amber-400 mt-0.5",children:"Today"}),k==="limited"&&!ee&&C&&r.jsxs("span",{className:"text-[9px] font-medium text-amber-700 mt-0.5",children:[C.available_slots," left"]}),k==="full"&&r.jsx("span",{className:"text-[9px] font-medium text-master-text-muted-dark mt-0.5",children:"Full"}),k==="blocked"&&r.jsx("span",{className:"text-[9px] font-medium text-master-text-muted-dark mt-0.5",children:"Closed"})]},R)})},L))})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-secondary-dark mb-3",children:"Legend"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-xs",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-white mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Available"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-amber-300 bg-amber-50 mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Limited"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-gray-100 mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Fully Booked"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-gray-100 bg-[repeating-linear-gradient(45deg,transparent,transparent_5px,rgba(0,0,0,0.05)_5px,rgba(0,0,0,0.05)_10px)] mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Blocked/Closed"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-blue-400 bg-white mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Today"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-6 h-6 rounded border-2 border-red-600 bg-gradient-to-r from-red-600 to-red-700 mr-2"}),r.jsx("span",{className:"text-master-text-secondary-dark",children:"Selected"})]})]})]})]}),r.jsxs("div",{className:"px-6 py-6 bg-gray-50 border-t border-gray-200",children:[r.jsx("button",{onClick:I,disabled:!c||f||u,className:"w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark py-4 px-6 rounded-lg font-semibold text-lg hover:from-red-700 hover:to-red-800 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none flex items-center justify-center",children:u?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):c?"Continue to Time Selection":"Select a date to continue"}),c&&!u&&r.jsxs("p",{className:"text-center text-sm text-master-text-secondary-dark mt-3",children:["Selected: ",r.jsx("span",{className:"font-semibold text-master-text-primary-dark",children:zE(c)})]})]})]})]})})})},qE=()=>{const e=Ie(),t=h.useRef(!1),s=re(y=>y.booking_context.selected_date),n=re(y=>y.booking_context.service_id),a=re(y=>y.booking_context.selected_time),i=re(y=>y.update_booking_context),[o,l]=se.useState(a),[c,d]=se.useState(!1);se.useEffect(()=>{a!==o&&(console.log("[Time Selection] Syncing time from context:",a),l(a))},[a,o]),se.useEffect(()=>{console.log("[Time Selection] Current state:",{selectedDate:s,selectedTime:o,selectedTimeFromContext:a,serviceId:n})},[s,o,a,n]);const m=(y=>y?new Date(y).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"")(s),{data:x,isLoading:p,error:j,refetch:f}=ve({queryKey:["availability-slots",s,n],queryFn:async()=>{if(!s)throw new Error("No date selected");const y="https://123barber-booking-app-with-ticket-system.launchpulse.ai",S={};return n&&(S.service_id=n),((await Y.get(`${y}/api/availability/${s}`,{params:S})).data.slots||[]).map(I=>({time:I.time,available_spots:I.available_spots,total_capacity:I.total_capacity,booked_count:I.booked_count,is_available:I.is_available,status:!I.is_available||I.available_spots===0?I.available_spots===0?"full":"blocked":I.available_spots===1?"limited":"available"}))},enabled:!!s,staleTime:0,refetchInterval:!1,refetchOnWindowFocus:!0,refetchOnMount:!0});h.useEffect(()=>{const y=setTimeout(()=>{!s&&!t.current&&(console.log("[Time Selection] No date selected, redirecting to date selection"),t.current=!0,e("/book/date",{replace:!0}))},100);return()=>clearTimeout(y)},[s,e]);const v=y=>{const[S,A]=y.split(":"),I=parseInt(S,10),F=I>=12?"PM":"AM";return`${I===0?12:I>12?I-12:I}:${A} ${F}`},b=y=>{!y.is_available||y.available_spots===0||(console.log("[Time Selection] Time slot selected:",y.time),l(y.time),i({selected_time:y.time}))},g=()=>{const y=o||a;if(!y){console.log("[Time Selection] No time selected, cannot continue");return}const S=x==null?void 0:x.find(A=>A.time===y);if(!S||!S.is_available||S.available_spots===0){alert("Sorry, this slot was just booked. Please choose another time."),f(),l(null),i({selected_time:null});return}d(!0),console.log("[Time Selection] Continuing with time:",y),i({selected_time:y}),setTimeout(()=>{e("/book/details")},0)},w=(y,S)=>{if(S)return"bg-gradient-to-r from-red-600 to-red-700 border-red-600 text-master-text-primary-dark";switch(y.status){case"available":return"bg-[#2D0808] border-gray-300 text-master-text-primary-dark hover:border-blue-500 hover:shadow-md";case"limited":return"bg-amber-50 border-amber-400 text-master-text-primary-dark hover:border-amber-500 hover:shadow-md";case"full":case"blocked":return"bg-gray-100 border-gray-300 text-master-text-muted-dark cursor-not-allowed";default:return"bg-[#2D0808] border-gray-300 text-master-text-primary-dark"}},N=y=>{const S=y.booked_count,A=y.available_spots;return y.is_available?y.available_spots===0?"Fully Booked":y.available_spots===1?"Last spot!":`${S}/${y.total_capacity} booked  ${A} left`:"Blocked"},_=se.useMemo(()=>!!(o||a),[o,a]);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(Z,{to:"/book/date",className:"inline-flex items-center text-amber-400 hover:text-amber-300 font-medium transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark font-medium",children:"Step 3 of 4"})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark mb-2 leading-tight",children:"What time works for you?"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark mb-1",children:m}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Each appointment is 40 minutes"}),r.jsx(Z,{to:"/book/date",className:"inline-block mt-3 text-amber-400 hover:text-amber-300 font-medium text-sm transition-colors",children:"Change Date"})]}),p&&r.jsx("div",{className:"space-y-4",children:[...Array(8)].map((y,S)=>r.jsx("div",{className:"animate-pulse",children:r.jsx("div",{className:"bg-white rounded-xl h-24 shadow-lg"})},S))}),j&&r.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-red-400 font-medium mb-2",children:"Failed to load time slots"}),r.jsx("p",{className:"text-red-600 text-sm mb-4",children:"Please try again"}),r.jsx("button",{onClick:()=>f(),className:"px-4 py-2 bg-red-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"})]}),!p&&!j&&x&&x.length===0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-2",children:"No slots available for this date"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:"Please choose another day"}),r.jsx(Z,{to:"/book/date",className:"inline-block px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors shadow-lg",children:"Change Date"})]}),!p&&!j&&x&&x.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-4 mb-6",children:x.map(y=>{const S=o===y.time||a===y.time,A=!y.is_available||y.available_spots===0;return r.jsx("button",{onClick:()=>b(y),disabled:A,className:`w-full text-left rounded-xl border-2 p-6 transition-all duration-200 ${w(y,S)}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-2xl font-bold text-master-text-primary-dark",children:v(y.time)}),S&&r.jsx("svg",{className:"w-6 h-6 text-master-text-primary-dark ml-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),r.jsx("p",{className:`text-sm mt-1 ${S?"text-blue-100":y.status==="limited"?"text-amber-700 font-semibold":"text-master-text-secondary-dark"}`,children:N(y)})]}),!A&&!S&&r.jsx("div",{className:"ml-4",children:r.jsx("span",{className:`inline-block px-4 py-2 rounded-lg font-medium text-sm transition-colors ${y.status==="limited"?"bg-amber-600 text-master-text-primary-dark hover:bg-amber-700":"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark hover:from-red-700 hover:to-red-800"}`,children:"Select"})}),S&&r.jsx("div",{className:"ml-4",children:r.jsx("span",{className:"inline-block px-4 py-2 rounded-lg font-medium text-sm bg-white text-amber-400",children:"Selected "})}),A&&r.jsx("div",{className:"ml-4",children:r.jsx("span",{className:"inline-block px-4 py-2 rounded-lg font-medium text-sm bg-gray-300 text-master-text-secondary-dark",children:y.is_available?"Fully Booked":"Blocked"})})]})},y.time)})}),r.jsx("div",{className:"sticky bottom-0 pb-4 pt-6 bg-gradient-to-t from-blue-50 via-blue-50 to-transparent",children:r.jsx("button",{onClick:g,disabled:!_||c,className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg flex items-center justify-center ${_&&!c?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark hover:from-red-700 hover:to-red-800 hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-master-text-muted-dark cursor-not-allowed"}`,children:c?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):_?"Continue to Details":"Select a time to continue"})})]})]})})})};var $e;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function s(a){throw new Error}e.assertNever=s,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})($e||($e={}));var qb;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(qb||(qb={}));const de=$e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rn=e=>{switch(typeof e){case"undefined":return de.undefined;case"string":return de.string;case"number":return Number.isNaN(e)?de.nan:de.number;case"boolean":return de.boolean;case"function":return de.function;case"bigint":return de.bigint;case"symbol":return de.symbol;case"object":return Array.isArray(e)?de.array:e===null?de.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?de.promise:typeof Map<"u"&&e instanceof Map?de.map:typeof Set<"u"&&e instanceof Set?de.set:typeof Date<"u"&&e instanceof Date?de.date:de.object;default:return de.unknown}},ie=$e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qt extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(s(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof Qt))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}Qt.create=e=>new Qt(e);const yp=(e,t)=>{let s;switch(e.code){case ie.invalid_type:e.received===de.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case ie.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,$e.jsonStringifyReplacer)}`;break;case ie.unrecognized_keys:s=`Unrecognized key(s) in object: ${$e.joinValues(e.keys,", ")}`;break;case ie.invalid_union:s="Invalid input";break;case ie.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${$e.joinValues(e.options)}`;break;case ie.invalid_enum_value:s=`Invalid enum value. Expected ${$e.joinValues(e.options)}, received '${e.received}'`;break;case ie.invalid_arguments:s="Invalid function arguments";break;case ie.invalid_return_type:s="Invalid function return type";break;case ie.invalid_date:s="Invalid date";break;case ie.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:$e.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case ie.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case ie.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case ie.custom:s="Invalid input";break;case ie.invalid_intersection_types:s="Intersection results could not be merged";break;case ie.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case ie.not_finite:s="Number must be finite";break;default:s=t.defaultError,$e.assertNever(e)}return{message:s}};let HE=yp;function KE(){return HE}const GE=e=>{const{data:t,path:s,errorMaps:n,issueData:a}=e,i=[...s,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function le(e,t){const s=KE(),n=GE({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===yp?void 0:yp].filter(a=>!!a)});e.common.issues.push(n)}class vr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const n=[];for(const a of s){if(a.status==="aborted")return ke;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,s){const n=[];for(const a of s){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return vr.mergeObjectSync(t,n)}static mergeObjectSync(t,s){const n={};for(const a of s){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return ke;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const ke=Object.freeze({status:"aborted"}),wo=e=>({status:"dirty",value:e}),Rr=e=>({status:"valid",value:e}),Hb=e=>e.status==="aborted",Kb=e=>e.status==="dirty",Mi=e=>e.status==="valid",Pd=e=>typeof Promise<"u"&&e instanceof Promise;var me;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(me||(me={}));class Rn{constructor(t,s,n,a){this._cachedPath=[],this.parent=t,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gb=(e,t)=>{if(Mi(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Qt(e.common.issues);return this._error=s,this._error}}};function Ee(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:n,description:a}=e;if(t&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??s??l.defaultError}},description:a}}class Le{get description(){return this._def.description}_getType(t){return rn(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:rn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new vr,ctx:{common:t.parent.common,data:t.data,parsedType:rn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(Pd(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const n=this.safeParse(t,s);if(n.success)return n.data;throw n.error}safeParse(t,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rn(t)},a=this._parseSync({data:t,path:n.path,parent:n});return Gb(n,a)}"~validate"(t){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rn(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:s});return Mi(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(i=>Mi(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(t,s){const n=await this.safeParseAsync(t,s);if(n.success)return n.data;throw n.error}async safeParseAsync(t,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:rn(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Pd(a)?a:Promise.resolve(a));return Gb(n,i)}refine(t,s){const n=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:ie.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,s){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(t){return new Bi({schema:this,typeName:Ne.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return En.create(this,this._def)}nullable(){return Li.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xs.create(this)}promise(){return Rd.create(this,this._def)}or(t){return Fd.create([this,t],this._def)}and(t){return Md.create(this,t,this._def)}transform(t){return new Bi({...Ee(this._def),schema:this,typeName:Ne.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new wp({...Ee(this._def),innerType:this,defaultValue:s,typeName:Ne.ZodDefault})}brand(){return new gT({typeName:Ne.ZodBranded,type:this,...Ee(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new jp({...Ee(this._def),innerType:this,catchValue:s,typeName:Ne.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return Nf.create(this,t)}readonly(){return kp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QE=/^c[^\s-]{8,}$/i,YE=/^[0-9a-z]+$/,ZE=/^[0-9A-HJKMNP-TV-Z]{26}$/i,XE=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,JE=/^[a-z0-9_-]{21}$/i,eT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let vm;const nT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,iT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,oT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Vj="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dT=new RegExp(`^${Vj}$`);function Uj(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function uT(e){return new RegExp(`^${Uj(e)}$`)}function mT(e){let t=`${Vj}T${Uj(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function hT(e,t){return!!((t==="v4"||!t)&&nT.test(e)||(t==="v6"||!t)&&iT.test(e))}function pT(e,t){if(!eT.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function xT(e,t){return!!((t==="v4"||!t)&&aT.test(e)||(t==="v6"||!t)&&oT.test(e))}class bn extends Le{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==de.string){const i=this._getOrReturnCtx(t);return le(i,{code:ie.invalid_type,expected:de.string,received:i.parsedType}),ke}const n=new vr;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),le(a,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),le(a,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?le(a,{code:ie.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&le(a,{code:ie.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")rT.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"email",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")vm||(vm=new RegExp(sT,"u")),vm.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"emoji",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")XE.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"uuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")JE.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"nanoid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")QE.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"cuid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")YE.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"cuid2",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")ZE.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"ulid",code:ie.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),le(a,{validation:"url",code:ie.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"regex",code:ie.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?mT(i).test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?dT.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?uT(i).test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{code:ie.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?tT.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"duration",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?hT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"ip",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?pT(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"jwt",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?xT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"cidr",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?lT.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"base64",code:ie.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?cT.test(t.data)||(a=this._getOrReturnCtx(t,a),le(a,{validation:"base64url",code:ie.invalid_string,message:i.message}),n.dirty()):$e.assertNever(i);return{status:n.value,value:t.data}}_regex(t,s,n){return this.refinement(a=>t.test(a),{validation:s,code:ie.invalid_string,...me.errToObj(n)})}_addCheck(t){return new bn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...me.errToObj(t)})}url(t){return this._addCheck({kind:"url",...me.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...me.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...me.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...me.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...me.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...me.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...me.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...me.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...me.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...me.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...me.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...me.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...me.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...me.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...me.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...me.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s==null?void 0:s.position,...me.errToObj(s==null?void 0:s.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...me.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...me.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...me.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...me.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...me.errToObj(s)})}nonempty(t){return this.min(1,me.errToObj(t))}trim(){return new bn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}bn.create=e=>new bn({checks:[],typeName:Ne.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Ee(e)});function fT(e,t){const s=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=s>n?s:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class hl extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==de.number){const i=this._getOrReturnCtx(t);return le(i,{code:ie.invalid_type,expected:de.number,received:i.parsedType}),ke}let n;const a=new vr;for(const i of this._def.checks)i.kind==="int"?$e.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),le(n,{code:ie.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?fT(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),le(n,{code:ie.not_finite,message:i.message}),a.dirty()):$e.assertNever(i);return{status:a.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,me.toString(s))}gt(t,s){return this.setLimit("min",t,!1,me.toString(s))}lte(t,s){return this.setLimit("max",t,!0,me.toString(s))}lt(t,s){return this.setLimit("max",t,!1,me.toString(s))}setLimit(t,s,n,a){return new hl({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:n,message:me.toString(a)}]})}_addCheck(t){return new hl({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:me.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:me.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&$e.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(s)&&Number.isFinite(t)}}hl.create=e=>new hl({checks:[],typeName:Ne.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ee(e)});class pl extends Le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==de.bigint)return this._getInvalidInput(t);let n;const a=new vr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),le(n,{code:ie.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):$e.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return le(s,{code:ie.invalid_type,expected:de.bigint,received:s.parsedType}),ke}gte(t,s){return this.setLimit("min",t,!0,me.toString(s))}gt(t,s){return this.setLimit("min",t,!1,me.toString(s))}lte(t,s){return this.setLimit("max",t,!0,me.toString(s))}lt(t,s){return this.setLimit("max",t,!1,me.toString(s))}setLimit(t,s,n,a){return new pl({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:n,message:me.toString(a)}]})}_addCheck(t){return new pl({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:me.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}pl.create=e=>new pl({checks:[],typeName:Ne.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Ee(e)});class Qb extends Le{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==de.boolean){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.boolean,received:n.parsedType}),ke}return Rr(t.data)}}Qb.create=e=>new Qb({typeName:Ne.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ee(e)});class Dd extends Le{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==de.date){const i=this._getOrReturnCtx(t);return le(i,{code:ie.invalid_type,expected:de.date,received:i.parsedType}),ke}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return le(i,{code:ie.invalid_date}),ke}const n=new vr;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),le(a,{code:ie.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),le(a,{code:ie.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):$e.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Dd({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:me.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:me.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}Dd.create=e=>new Dd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ne.ZodDate,...Ee(e)});class Yb extends Le{_parse(t){if(this._getType(t)!==de.symbol){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.symbol,received:n.parsedType}),ke}return Rr(t.data)}}Yb.create=e=>new Yb({typeName:Ne.ZodSymbol,...Ee(e)});class Zb extends Le{_parse(t){if(this._getType(t)!==de.undefined){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.undefined,received:n.parsedType}),ke}return Rr(t.data)}}Zb.create=e=>new Zb({typeName:Ne.ZodUndefined,...Ee(e)});class Xb extends Le{_parse(t){if(this._getType(t)!==de.null){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.null,received:n.parsedType}),ke}return Rr(t.data)}}Xb.create=e=>new Xb({typeName:Ne.ZodNull,...Ee(e)});class Jb extends Le{constructor(){super(...arguments),this._any=!0}_parse(t){return Rr(t.data)}}Jb.create=e=>new Jb({typeName:Ne.ZodAny,...Ee(e)});class ey extends Le{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Rr(t.data)}}ey.create=e=>new ey({typeName:Ne.ZodUnknown,...Ee(e)});class Bn extends Le{_parse(t){const s=this._getOrReturnCtx(t);return le(s,{code:ie.invalid_type,expected:de.never,received:s.parsedType}),ke}}Bn.create=e=>new Bn({typeName:Ne.ZodNever,...Ee(e)});class ty extends Le{_parse(t){if(this._getType(t)!==de.undefined){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.void,received:n.parsedType}),ke}return Rr(t.data)}}ty.create=e=>new ty({typeName:Ne.ZodVoid,...Ee(e)});class xs extends Le{_parse(t){const{ctx:s,status:n}=this._processInputParams(t),a=this._def;if(s.parsedType!==de.array)return le(s,{code:ie.invalid_type,expected:de.array,received:s.parsedType}),ke;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(le(s,{code:o?ie.too_big:ie.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(le(s,{code:ie.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(le(s,{code:ie.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new Rn(s,o,s.path,l)))).then(o=>vr.mergeArray(n,o));const i=[...s.data].map((o,l)=>a.type._parseSync(new Rn(s,o,s.path,l)));return vr.mergeArray(n,i)}get element(){return this._def.type}min(t,s){return new xs({...this._def,minLength:{value:t,message:me.toString(s)}})}max(t,s){return new xs({...this._def,maxLength:{value:t,message:me.toString(s)}})}length(t,s){return new xs({...this._def,exactLength:{value:t,message:me.toString(s)}})}nonempty(t){return this.min(1,t)}}xs.create=(e,t)=>new xs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ne.ZodArray,...Ee(t)});function Ba(e){if(e instanceof ut){const t={};for(const s in e.shape){const n=e.shape[s];t[s]=En.create(Ba(n))}return new ut({...e._def,shape:()=>t})}else return e instanceof xs?new xs({...e._def,type:Ba(e.element)}):e instanceof En?En.create(Ba(e.unwrap())):e instanceof Li?Li.create(Ba(e.unwrap())):e instanceof _a?_a.create(e.items.map(t=>Ba(t))):e}class ut extends Le{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=$e.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==de.object){const d=this._getOrReturnCtx(t);return le(d,{code:ie.invalid_type,expected:de.object,received:d.parsedType}),ke}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Bn&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Rn(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof Bn){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(le(a,{code:ie.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Rn(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,x=await u.value;d.push({key:m,value:x,alwaysSet:u.alwaysSet})}return d}).then(d=>vr.mergeObjectSync(n,d)):vr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return me.errToObj,new ut({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:me.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new ut({...this._def,unknownKeys:"strip"})}passthrough(){return new ut({...this._def,unknownKeys:"passthrough"})}extend(t){return new ut({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ut({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ne.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new ut({...this._def,catchall:t})}pick(t){const s={};for(const n of $e.objectKeys(t))t[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new ut({...this._def,shape:()=>s})}omit(t){const s={};for(const n of $e.objectKeys(this.shape))t[n]||(s[n]=this.shape[n]);return new ut({...this._def,shape:()=>s})}deepPartial(){return Ba(this)}partial(t){const s={};for(const n of $e.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?s[n]=a:s[n]=a.optional()}return new ut({...this._def,shape:()=>s})}required(t){const s={};for(const n of $e.objectKeys(this.shape))if(t&&!t[n])s[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof En;)i=i._def.innerType;s[n]=i}return new ut({...this._def,shape:()=>s})}keyof(){return Wj($e.objectKeys(this.shape))}}ut.create=(e,t)=>new ut({shape:()=>e,unknownKeys:"strip",catchall:Bn.create(),typeName:Ne.ZodObject,...Ee(t)});ut.strictCreate=(e,t)=>new ut({shape:()=>e,unknownKeys:"strict",catchall:Bn.create(),typeName:Ne.ZodObject,...Ee(t)});ut.lazycreate=(e,t)=>new ut({shape:e,unknownKeys:"strip",catchall:Bn.create(),typeName:Ne.ZodObject,...Ee(t)});class Fd extends Le{_parse(t){const{ctx:s}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Qt(l.ctx.common.issues));return le(s,{code:ie.invalid_union,unionErrors:o}),ke}if(s.common.async)return Promise.all(n.map(async i=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...s,common:{...s.common,issues:[]},parent:null},u=c._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Qt(c));return le(s,{code:ie.invalid_union,unionErrors:l}),ke}}get options(){return this._def.options}}Fd.create=(e,t)=>new Fd({options:e,typeName:Ne.ZodUnion,...Ee(t)});function vp(e,t){const s=rn(e),n=rn(t);if(e===t)return{valid:!0,data:e};if(s===de.object&&n===de.object){const a=$e.objectKeys(t),i=$e.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=vp(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(s===de.array&&n===de.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=vp(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return s===de.date&&n===de.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Md extends Le{_parse(t){const{status:s,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(Hb(i)||Hb(o))return ke;const l=vp(i.value,o.value);return l.valid?((Kb(i)||Kb(o))&&s.dirty(),{status:s.value,value:l.data}):(le(n,{code:ie.invalid_intersection_types}),ke)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Md.create=(e,t,s)=>new Md({left:e,right:t,typeName:Ne.ZodIntersection,...Ee(s)});class _a extends Le{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==de.array)return le(n,{code:ie.invalid_type,expected:de.array,received:n.parsedType}),ke;if(n.data.length<this._def.items.length)return le(n,{code:ie.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ke;!this._def.rest&&n.data.length>this._def.items.length&&(le(n,{code:ie.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Rn(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>vr.mergeArray(s,o)):vr.mergeArray(s,i)}get items(){return this._def.items}rest(t){return new _a({...this._def,rest:t})}}_a.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _a({items:e,typeName:Ne.ZodTuple,rest:null,...Ee(t)})};class ry extends Le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==de.map)return le(n,{code:ie.invalid_type,expected:de.map,received:n.parsedType}),ke;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new Rn(n,l,n.path,[d,"key"])),value:i._parse(new Rn(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return ke;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return ke;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),l.set(d.value,u.value)}return{status:s.value,value:l}}}}ry.create=(e,t,s)=>new ry({valueType:t,keyType:e,typeName:Ne.ZodMap,...Ee(s)});class xl extends Le{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.parsedType!==de.set)return le(n,{code:ie.invalid_type,expected:de.set,received:n.parsedType}),ke;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(le(n,{code:ie.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(le(n,{code:ie.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return ke;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Rn(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,s){return new xl({...this._def,minSize:{value:t,message:me.toString(s)}})}max(t,s){return new xl({...this._def,maxSize:{value:t,message:me.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}xl.create=(e,t)=>new xl({valueType:e,minSize:null,maxSize:null,typeName:Ne.ZodSet,...Ee(t)});class sy extends Le{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}sy.create=(e,t)=>new sy({getter:e,typeName:Ne.ZodLazy,...Ee(t)});class ny extends Le{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return le(s,{received:s.data,code:ie.invalid_literal,expected:this._def.value}),ke}return{status:"valid",value:t.data}}get value(){return this._def.value}}ny.create=(e,t)=>new ny({value:e,typeName:Ne.ZodLiteral,...Ee(t)});function Wj(e,t){return new Ri({values:e,typeName:Ne.ZodEnum,...Ee(t)})}class Ri extends Le{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),n=this._def.values;return le(s,{expected:$e.joinValues(n),received:s.parsedType,code:ie.invalid_type}),ke}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),n=this._def.values;return le(s,{received:s.data,code:ie.invalid_enum_value,options:n}),ke}return Rr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return Ri.create(t,{...this._def,...s})}exclude(t,s=this._def){return Ri.create(this.options.filter(n=>!t.includes(n)),{...this._def,...s})}}Ri.create=Wj;class ay extends Le{_parse(t){const s=$e.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==de.string&&n.parsedType!==de.number){const a=$e.objectValues(s);return le(n,{expected:$e.joinValues(a),received:n.parsedType,code:ie.invalid_type}),ke}if(this._cache||(this._cache=new Set($e.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=$e.objectValues(s);return le(n,{received:n.data,code:ie.invalid_enum_value,options:a}),ke}return Rr(t.data)}get enum(){return this._def.values}}ay.create=(e,t)=>new ay({values:e,typeName:Ne.ZodNativeEnum,...Ee(t)});class Rd extends Le{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==de.promise&&s.common.async===!1)return le(s,{code:ie.invalid_type,expected:de.promise,received:s.parsedType}),ke;const n=s.parsedType===de.promise?s.data:Promise.resolve(s.data);return Rr(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Rd.create=(e,t)=>new Rd({type:e,typeName:Ne.ZodPromise,...Ee(t)});class Bi extends Le{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ne.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{le(n,o),o.fatal?s.abort():s.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return ke;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?ke:c.status==="dirty"||s.value==="dirty"?wo(c.value):c});{if(s.value==="aborted")return ke;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?ke:l.status==="dirty"||s.value==="dirty"?wo(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ke:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ke:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Mi(o))return ke;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Mi(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:s.value,value:l})):ke);$e.assertNever(a)}}Bi.create=(e,t,s)=>new Bi({schema:e,typeName:Ne.ZodEffects,effect:t,...Ee(s)});Bi.createWithPreprocess=(e,t,s)=>new Bi({schema:t,effect:{type:"preprocess",transform:e},typeName:Ne.ZodEffects,...Ee(s)});class En extends Le{_parse(t){return this._getType(t)===de.undefined?Rr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}En.create=(e,t)=>new En({innerType:e,typeName:Ne.ZodOptional,...Ee(t)});class Li extends Le{_parse(t){return this._getType(t)===de.null?Rr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Li.create=(e,t)=>new Li({innerType:e,typeName:Ne.ZodNullable,...Ee(t)});class wp extends Le{_parse(t){const{ctx:s}=this._processInputParams(t);let n=s.data;return s.parsedType===de.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}wp.create=(e,t)=>new wp({innerType:e,typeName:Ne.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ee(t)});class jp extends Le{_parse(t){const{ctx:s}=this._processInputParams(t),n={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Pd(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qt(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Qt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}jp.create=(e,t)=>new jp({innerType:e,typeName:Ne.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ee(t)});class iy extends Le{_parse(t){if(this._getType(t)!==de.nan){const n=this._getOrReturnCtx(t);return le(n,{code:ie.invalid_type,expected:de.nan,received:n.parsedType}),ke}return{status:"valid",value:t.data}}}iy.create=e=>new iy({typeName:Ne.ZodNaN,...Ee(e)});class gT extends Le{_parse(t){const{ctx:s}=this._processInputParams(t),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Nf extends Le{_parse(t){const{status:s,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ke:i.status==="dirty"?(s.dirty(),wo(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ke:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,s){return new Nf({in:t,out:s,typeName:Ne.ZodPipeline})}}class kp extends Le{_parse(t){const s=this._def.innerType._parse(t),n=a=>(Mi(a)&&(a.value=Object.freeze(a.value)),a);return Pd(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}kp.create=(e,t)=>new kp({innerType:e,typeName:Ne.ZodReadonly,...Ee(t)});var Ne;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ne||(Ne={}));const mt=bn.create;Bn.create;xs.create;const Ll=ut.create;Fd.create;Md.create;_a.create;Ri.create;Rd.create;En.create;Li.create;const oy=Ll({customer_name:mt().min(2,"Name must be at least 2 characters").max(100,"Name too long").regex(/^[a-zA-Z\s]+$/,"Name must contain only letters and spaces"),customer_email:mt().email("Please enter a valid email address").max(255,"Email too long"),customer_phone:mt().min(10,"Phone number too short").max(20,"Phone number too long").refine(e=>{const t=e.replace(/[\s()-]/g,"");return/^\+?[1-9]\d{1,14}$/.test(t)},"Please enter a valid phone number"),customer_address:mt().min(5,"Address must be at least 5 characters").max(500,"Address too long").nullable(),booking_for_name:mt().max(255,"Name too long").nullable(),special_request:mt().max(500,"Special request must be 500 characters or less").nullable()}),bT=()=>{var W,Q;const e=Ie(),t=re(B=>B.authentication_state.authentication_status.is_authenticated),s=re(B=>B.authentication_state.auth_token),n=re(B=>B.booking_context),a=re(B=>B.update_booking_context),i=re(B=>B.update_current_user),[o,l]=h.useState({customer_name:"",customer_email:"",customer_phone:"",customer_address:null,booking_for_name:null,special_request:null,inspiration_photos:null,barber_id:null}),[c,d]=h.useState({}),[u,m]=h.useState(!0),[x,p]=h.useState(!1),[j,f]=h.useState(0),[v,b]=h.useState(!1),[g,w]=h.useState(!1),[N,_]=h.useState(!1),[y,S]=h.useState(""),[A,I]=h.useState(""),[F,H]=h.useState(!1),E=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",{data:L,isLoading:O}=ve({queryKey:["userProfile"],queryFn:async()=>!t||!s?null:(await Y.get(`${E()}/api/auth/me`,{headers:{Authorization:`Bearer ${s}`}})).data.user,enabled:t&&!!s&&u,staleTime:6e4}),{data:R,isLoading:z}=ve({queryKey:["activeBarbers"],queryFn:async()=>(await Y.get(`${E()}/api/barbers`)).data.barbers,staleTime:6e4});h.useEffect(()=>{L&&u&&l(B=>({...B,customer_name:L.name||"",customer_email:L.email||"",customer_phone:L.phone||""}))},[L,u]);const ee=ye({mutationFn:async B=>{if(!s)throw new Error("Not authenticated");return(await Y.patch(`${E()}/api/auth/me`,B,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}})).data},onSuccess:B=>{B.user&&i({name:B.user.name,email:B.user.email,phone:B.user.phone})}});h.useEffect(()=>{(n.customer_name||n.customer_email||n.customer_phone)&&(l({customer_name:n.customer_name||"",customer_email:n.customer_email||"",customer_phone:n.customer_phone||"",customer_address:n.customer_address||null,booking_for_name:n.booking_for_name||null,special_request:n.special_request||null,inspiration_photos:n.inspiration_photos||null,barber_id:n.barber_id||null}),n.special_request&&(f(n.special_request.length),w(!0)),n.booking_for_name&&b(!0),n.inspiration_photos&&n.inspiration_photos.length>0&&_(!0))},[n]);const C=h.useCallback((B,te)=>{try{const pe=oy.shape[B];return pe&&(pe.parse(te),d(we=>{const vt={...we};return delete vt[B],vt})),!0}catch(pe){return pe instanceof Qt?(d(we=>({...we,[B]:pe.errors[0].message})),!1):!0}},[]),k=h.useCallback(()=>{var B;try{const te={customer_name:o.customer_name,customer_email:o.customer_email,customer_phone:o.customer_phone,customer_address:n.is_callout?o.customer_address:null,booking_for_name:o.booking_for_name,special_request:o.special_request};return oy.parse(te),n.is_callout&&!((B=o.customer_address)!=null&&B.trim())?(d({customer_address:"Address is required for call-out service"}),!1):(d({}),!0)}catch(te){if(te instanceof Qt){const pe={};return te.errors.forEach(we=>{we.path[0]&&(pe[we.path[0]]=we.message)}),d(pe),!1}return!1}},[o,n.is_callout]),D=(B,te)=>{l(pe=>({...pe,[B]:te})),d(pe=>{const we={...pe};return delete we[B],we}),B==="special_request"&&f(te.length)},T=B=>{const te=o[B];C(B,te)},P=()=>{if(I(""),!y.trim()){I("Please enter a URL");return}try{new URL(y)}catch{I("Please enter a valid URL");return}if(o.inspiration_photos&&o.inspiration_photos.includes(y)){I("This URL has already been added");return}if(o.inspiration_photos&&o.inspiration_photos.length>=3){I("Maximum 3 photos allowed");return}l(B=>({...B,inspiration_photos:B.inspiration_photos?[...B.inspiration_photos,y]:[y]})),S("")},V=B=>{l(te=>({...te,inspiration_photos:te.inspiration_photos?te.inspiration_photos.filter((pe,we)=>we!==B):null}))},J=async()=>{if(!k()){const te=Object.keys(c)[0];if(te){const pe=document.getElementById(te);pe&&pe.scrollIntoView({behavior:"smooth",block:"center"})}return}if(H(!0),a({customer_name:o.customer_name,customer_email:o.customer_email,customer_phone:o.customer_phone,customer_address:o.customer_address,booking_for_name:o.booking_for_name,special_request:o.special_request,inspiration_photos:o.inspiration_photos,barber_id:o.barber_id,step_completed:4}),t&&x)try{await ee.mutateAsync({name:o.customer_name,email:o.customer_email,phone:o.customer_phone})}catch(te){console.error("Failed to update profile:",te)}e("/book/review")},K=o.customer_name.trim().length>0&&o.customer_email.trim().length>0&&o.customer_phone.trim().length>0&&(!n.is_callout||(((W=o.customer_address)==null?void 0:W.trim().length)||0)>0)&&Object.keys(c).length===0,M=n.service_id?4:3,U=n.service_id?4:3;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark mb-2",children:"Your Details"}),r.jsx("p",{className:"text-master-text-secondary-dark text-lg",children:t?"We've pre-filled your information. Update if needed.":"We need your contact details to confirm your booking"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center justify-center space-x-2 text-sm text-master-text-secondary-dark",children:r.jsxs("span",{children:["Step ",M," of ",U]})}),r.jsx("div",{className:"mt-2 w-full bg-white/20 rounded-full h-2",children:r.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${M/U*100}%`}})})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl p-6 mb-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-master-text-primary-dark mb-4 flex items-center",children:[r.jsx(ds,{className:"w-5 h-5 text-green-400 mr-2"}),"Booking Summary"]}),r.jsxs("div",{className:"space-y-3",children:[n.service_name&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center text-master-text-secondary-dark",children:[r.jsx(il,{className:"w-5 h-5 mr-2 text-master-text-muted-dark"}),r.jsx("span",{children:"Service:"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:n.service_name}),r.jsx(Z,{to:"/book/service",className:"text-red-400 hover:text-red-300 text-sm underline",children:"Edit"})]})]}),n.selected_date&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center text-master-text-secondary-dark",children:[r.jsx(qe,{className:"w-5 h-5 mr-2 text-master-text-muted-dark"}),r.jsx("span",{children:"Date:"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:new Date(n.selected_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsx(Z,{to:"/book/date",className:"text-red-400 hover:text-red-300 text-sm underline",children:"Edit"})]})]}),n.selected_time&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center text-master-text-secondary-dark",children:[r.jsx(tt,{className:"w-5 h-5 mr-2 text-master-text-muted-dark"}),r.jsx("span",{children:"Time:"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:n.selected_time}),r.jsx(Z,{to:"/book/time",className:"text-red-400 hover:text-red-300 text-sm underline",children:"Edit"})]})]})]})]}),n.is_callout&&r.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border-2 border-orange-200 rounded-xl p-6 mb-6 shadow-md",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:r.jsx(Kt,{className:"w-6 h-6 text-master-text-primary-dark"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"text-lg font-bold text-orange-900 mb-2 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"Premium Call-Out Service"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark",children:"150"})]}),r.jsx("p",{className:"text-orange-800 text-sm leading-relaxed",children:"A Master Fade barber will come to your location. Please provide your full address including any special instructions (parking, buzzer, floor number, etc.) in the address or notes field below."})]})]})}),!t&&!n.is_callout&&r.jsx("div",{className:"backdrop-blur-xl bg-[#2D0808]0/20 border border-blue-400/30 rounded-lg p-4 mb-6",children:r.jsxs("p",{className:"text-blue-100 text-sm",children:[r.jsx("strong",{children:"Tip:"})," Create a free account to save your details for faster booking next time."," ",r.jsx(Z,{to:"/register",className:"underline font-medium hover:text-blue-200",children:"Sign up here"})]})}),r.jsxs("form",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl p-6 lg:p-8",onSubmit:B=>{B.preventDefault(),J()},"aria-label":"Booking Details Form",role:"form",children:[t&&r.jsx("div",{className:"mb-6 pb-6 border-b border-white/20",children:r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u,onChange:B=>m(B.target.checked),className:"w-5 h-5 text-red-600 border-white/30 rounded focus:ring-red-500 bg-white/10"}),r.jsx("span",{className:"text-master-text-primary-dark font-medium",children:"Use my profile details"})]})}),O&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-white mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading your profile..."})]}),!O&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"Contact Information"}),r.jsxs("p",{className:"text-sm text-master-text-secondary-dark mb-4",children:["Fields marked with ",r.jsx("span",{className:"text-red-400",children:"*"})," are required"]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Full Name ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(cr,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"customer_name",name:"customer_name","data-testid":"customer-name-input","aria-label":"Full Name",type:"text",value:o.customer_name,onChange:B=>D("customer_name",B.target.value),onBlur:()=>T("customer_name"),placeholder:"John Smith","aria-required":"true","aria-invalid":!!c.customer_name,"aria-describedby":c.customer_name?"customer-name-error":void 0,className:`block w-full pl-10 pr-3 py-3 bg-white/10 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 transition-all text-master-text-primary-dark placeholder-master-text-muted-dark ${c.customer_name?"border-red-500 focus:border-red-500":"border-white/30 focus:border-red-400"}`})]}),c.customer_name&&r.jsxs("p",{id:"customer-name-error",className:"mt-1 form-error-text flex items-center",role:"alert",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.customer_name]}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"First and last name"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Email Address ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx($t,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"customer_email",name:"customer_email","data-testid":"customer-email-input","aria-label":"Email Address",type:"email",value:o.customer_email,onChange:B=>D("customer_email",B.target.value),onBlur:()=>T("customer_email"),placeholder:"john@example.com","aria-required":"true","aria-invalid":!!c.customer_email,"aria-describedby":c.customer_email?"customer-email-error":void 0,className:`block w-full pl-10 pr-3 py-3 bg-white/10 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 transition-all text-master-text-primary-dark placeholder-master-text-muted-dark ${c.customer_email?"border-red-500 focus:border-red-500":"border-white/30 focus:border-red-400"}`})]}),c.customer_email&&r.jsxs("p",{id:"customer-email-error",className:"mt-1 form-error-text flex items-center",role:"alert",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.customer_email]}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"We'll send your confirmation here"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Phone Number (WhatsApp preferred) ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Pt,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"customer_phone",name:"customer_phone","data-testid":"customer-phone-input","aria-label":"Phone Number",type:"tel",value:o.customer_phone,onChange:B=>D("customer_phone",B.target.value),onBlur:()=>T("customer_phone"),placeholder:"+1 (555) 123-4567","aria-required":"true","aria-invalid":!!c.customer_phone,"aria-describedby":c.customer_phone?"customer-phone-error":void 0,className:`block w-full pl-10 pr-3 py-3 bg-white/10 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400 transition-all text-master-text-primary-dark placeholder-master-text-muted-dark ${c.customer_phone?"border-red-500 focus:border-red-500":"border-white/30 focus:border-red-400"}`})]}),c.customer_phone&&r.jsxs("p",{id:"customer-phone-error",className:"mt-1 form-error-text flex items-center",role:"alert",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.customer_phone]}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"For confirmation and reminders"})]}),n.is_callout&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"customer_address",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Service Address ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Kt,{className:"h-5 w-5 text-orange-500"})}),r.jsx("input",{id:"customer_address",name:"customer_address","data-testid":"customer-address-input","aria-label":"Service Address",type:"text",value:o.customer_address||"",onChange:B=>D("customer_address",B.target.value),onBlur:()=>T("customer_address"),placeholder:"123 Main St, Dublin 1, D01 ABC1","aria-required":"true","aria-invalid":!!c.customer_address,"aria-describedby":c.customer_address?"customer-address-error":void 0,className:`block w-full pl-10 pr-3 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-100 transition-all ${c.customer_address?"border-red-500 focus:border-red-500":"border-orange-200 focus:border-orange-500"}`})]}),c.customer_address&&r.jsxs("p",{id:"customer-address-error",className:"mt-1 form-error-text flex items-center",role:"alert",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.customer_address]}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:r.jsxs("span",{className:"flex items-center text-orange-600 font-medium",children:[r.jsx(Kt,{className:"w-4 h-4 mr-1"}),"A Master Fade barber will come to your location"]})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-master-text-primary-dark mb-3 flex items-center",children:[r.jsx(il,{className:"w-5 h-5 mr-2 text-red-400"}),"Choose Your Barber"]}),z?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark text-sm",children:"Loading barbers..."})]}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>D("barber_id",""),className:`p-4 rounded-lg border-2 transition-all ${o.barber_id?"border-white/30 bg-white/5 hover:bg-white/10":"border-red-500 bg-red-500/20"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center flex-shrink-0",children:r.jsx(pr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark",children:"First Available"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark",children:"Any barber"})]})]})}),R==null?void 0:R.filter(B=>B.is_active&&B.is_working_today).map(B=>r.jsx("button",{type:"button",onClick:()=>D("barber_id",B.barber_id),className:`p-4 rounded-lg border-2 transition-all ${o.barber_id===B.barber_id?"border-red-500 bg-red-500/20":"border-white/30 bg-white/5 hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[B.photo_url?r.jsx("img",{src:B.photo_url,alt:B.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:r.jsx(cr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark truncate",children:B.name}),B.specialties&&B.specialties.length>0&&r.jsx("p",{className:"text-xs text-master-text-secondary-dark truncate",children:B.specialties.join(", ")})]})]})},B.barber_id))]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:'Select "First Available" for the next free barber'})]}),r.jsx("div",{className:"border-t border-white/20 my-6"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"Additional Information"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Optional - help us serve you better"})]}),r.jsxs("div",{children:[r.jsxs("button",{type:"button",onClick:()=>w(!g),className:"flex items-center justify-between w-full text-left text-amber-400 hover:text-blue-700 font-medium transition-colors",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Jh,{className:"w-5 h-5 mr-2"}),"Add special request (optional)"]}),g?r.jsx(Xh,{className:"w-5 h-5"}):r.jsx(xa,{className:"w-5 h-5"})]}),g&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx("label",{htmlFor:"special_request",className:"block text-sm font-medium text-master-text-secondary-dark",children:"Special Request"}),r.jsx("textarea",{id:"special_request",value:o.special_request||"",onChange:B=>{B.target.value.length<=500&&D("special_request",B.target.value)},onBlur:()=>T("special_request"),placeholder:"e.g., 'low fade', 'beard only', 'sensitive skin', 'don't call, text only'",rows:4,maxLength:500,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-blue-500 transition-all resize-none"}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("p",{className:"text-master-text-muted-dark",children:"Tell us your preferences or requirements"}),r.jsxs("span",{className:`font-medium ${j>450?"text-red-600":"text-master-text-secondary-dark"}`,children:[j,"/500"]})]}),c.special_request&&r.jsxs("p",{className:"form-error-text flex items-center",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.special_request]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:B=>{b(B.target.checked),B.target.checked||D("booking_for_name","")},className:"w-5 h-5 text-amber-400 border-gray-300 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-master-text-primary-dark font-medium",children:"I'm booking this appointment for someone else"})]}),v&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{htmlFor:"booking_for_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Person's Name"}),r.jsx("input",{id:"booking_for_name",type:"text",value:o.booking_for_name||"",onChange:B=>D("booking_for_name",B.target.value),onBlur:()=>T("booking_for_name"),placeholder:"Child's name, family member, etc.",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-blue-500 transition-all"}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"We'll still use your contact for confirmations"}),c.booking_for_name&&r.jsxs("p",{className:"mt-1 form-error-text flex items-center",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),c.booking_for_name]})]})]}),r.jsxs("div",{children:[r.jsxs("button",{type:"button",onClick:()=>_(!N),className:"flex items-center justify-between w-full text-left text-amber-400 hover:text-blue-700 font-medium transition-colors",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(KC,{className:"w-5 h-5 mr-2"}),"Add photos or style inspiration (optional)"]}),N?r.jsx(Xh,{className:"w-5 h-5"}):r.jsx(xa,{className:"w-5 h-5"})]}),N&&r.jsxs("div",{className:"mt-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"photo_url",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Paste Image URL"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{id:"photo_url",type:"url",value:y,onChange:B=>{S(B.target.value),I("")},onKeyPress:B=>{B.key==="Enter"&&(B.preventDefault(),P())},placeholder:"https://example.com/image.jpg",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-blue-500 transition-all"}),r.jsx("button",{type:"button",onClick:P,disabled:!y.trim()||(((Q=o.inspiration_photos)==null?void 0:Q.length)||0)>=3,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Add"})]}),A&&r.jsxs("p",{className:"mt-1 form-error-text flex items-center",children:[r.jsx(De,{className:"w-4 h-4 mr-1"}),A]}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"Maximum 3 images"})]}),o.inspiration_photos&&o.inspiration_photos.length>0&&r.jsx("div",{className:"grid grid-cols-3 gap-4",children:o.inspiration_photos.map((B,te)=>r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:B,alt:`Inspiration ${te+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-gray-200",onError:pe=>{pe.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3ENo Image%3C/text%3E%3C/svg%3E'}}),r.jsx("button",{type:"button",onClick:()=>V(te),className:"absolute -top-2 -right-2 bg-red-600 text-master-text-primary-dark rounded-full p-1 hover:bg-red-700 transition-colors shadow-lg",children:r.jsx(bt,{className:"w-4 h-4"})})]},te))})]})]}),t&&r.jsx("div",{className:"pt-6 border-t border-gray-200",children:r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:B=>p(B.target.checked),className:"w-5 h-5 text-amber-400 border-gray-300 rounded focus:ring-red-500"}),r.jsx("span",{className:"text-master-text-primary-dark",children:"Update my profile with these changes"})]})})]})]}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[r.jsx(Z,{to:"/book/time","data-testid":"back-button",id:"back-button","aria-label":"Back to Time Selection",role:"button",tabIndex:0,className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border-2 border-white/30 rounded-lg font-medium hover:bg-white/20 text-center transition-colors",children:"Back"}),r.jsx("button",{onClick:J,disabled:!K||ee.isPending||F,"data-testid":"continue-to-review-button",id:"continue-to-review-button",name:"continue-to-review","aria-label":"Continue to Review",title:"Continue to Review",type:"button",role:"button",tabIndex:0,className:"flex-1 px-6 py-3 bg-white text-master-text-primary-dark rounded-lg font-medium hover:bg-gray-100 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all focus:outline-none focus:ring-2 focus:ring-white/50",children:ee.isPending||F?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),F?"Loading...":"Processing..."]}):"Continue to Review"})]})]})})})},yT=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",vT=e=>{try{const t=new Date(e),s={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",s)}catch{return e}},ly=e=>{try{const[t,s]=e.split(":").map(Number),n=t>=12?"PM":"AM";return`${t%12||12}:${s.toString().padStart(2,"0")} ${n}`}catch{return e}},wT=(e,t)=>{try{const[s,n]=e.split(":").map(Number),a=s*60+n+t,i=Math.floor(a/60)%24,o=a%60;return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}catch{return e}},jT=(e,t)=>{const s=wT(e,t);return`${ly(e)} - ${ly(s)}`},kT=()=>{const e=Ie(),t=dr(),s=re(y=>y.booking_context),n=re(y=>y.authentication_state.current_user),a=re(y=>y.authentication_state.auth_token),i=re(y=>y.app_settings),[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,m]=h.useState(0),x=ye({mutationFn:async y=>{const S={"Content-Type":"application/json"};return a&&(S.Authorization=`Bearer ${a}`),(await Y.post(`${yT()}/api/bookings`,y,{headers:S})).data},onSuccess:y=>{t.invalidateQueries({queryKey:["availability-slots"]}),t.invalidateQueries({queryKey:["availability"]}),Ti.success("Booking confirmed! Check your email for details.",5e3),e(`/booking/confirmation?ticket_number=${y.booking.ticket_number}`)}}),p=()=>{l(!o)},j=async()=>{if(!o||!s.selected_date||!s.selected_time||!s.customer_name||!s.customer_email||!s.customer_phone)return;const y={user_id:(n==null?void 0:n.id)||null,appointment_date:s.selected_date,appointment_time:s.selected_time,slot_duration:40,customer_name:s.customer_name,customer_email:s.customer_email,customer_phone:s.customer_phone,booking_for_name:s.booking_for_name,service_id:s.service_id,special_request:s.special_request,inspiration_photos:s.inspiration_photos};x.mutate(y)},f=y=>{m(y),d(!0)},v=()=>{d(!1)},b=()=>{s.inspiration_photos&&u<s.inspiration_photos.length-1&&m(u+1)},g=()=>{u>0&&m(u-1)},w=()=>{var A,I,F;if(!x.error)return"";const y=x.error,S=((F=(I=(A=y.response)==null?void 0:A.data)==null?void 0:I.error)==null?void 0:F.message)||y.message||"";return S.toLowerCase().includes("slot")&&S.toLowerCase().includes("available")?"Sorry, this time slot was just booked. Please choose another time.":S.toLowerCase().includes("invalid")||S.toLowerCase().includes("validation")?"Invalid customer information. Please review and try again.":S.toLowerCase().includes("network")||S.toLowerCase().includes("connection")?"Connection issue. Your booking hasn't been confirmed yet.":`Booking failed. Please try again or contact us at ${i.shop_phone}.`},N=()=>w().includes("time slot"),_=s.special_request||s.booking_for_name||s.inspiration_photos&&s.inspiration_photos.length>0;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 md:py-12 lg:py-16",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6 lg:mb-8",children:r.jsx("p",{className:"text-center text-sm font-medium text-master-text-secondary-dark",children:"Final Step"})}),r.jsxs("div",{className:"text-center mb-8 lg:mb-12",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark leading-tight",children:"Review Your Booking"}),r.jsx("p",{className:"mt-2 text-base md:text-lg text-master-text-secondary-dark",children:"Please verify all details before confirming"})]}),x.isError&&r.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 shadow-md",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-red-400",children:w()}),r.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row gap-2",children:[r.jsx("button",{onClick:()=>x.reset(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-red-700 transition-colors text-sm",children:"Try Again"}),N()&&r.jsx(Z,{to:"/book/time",className:"inline-flex items-center px-4 py-2 bg-white text-red-300 border-2 border-red-200 rounded-lg font-medium hover:bg-red-50 transition-colors text-sm",children:"Choose New Time"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[r.jsxs("div",{className:"p-6 lg:p-8 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"h-6 w-6 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Appointment Details"})]}),r.jsx(Z,{to:"/book/date",className:"text-amber-400 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit appointment details",children:"Edit"})]}),r.jsxs("div",{className:"space-y-3",children:[s.service_name&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Service"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.service_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Date"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.selected_date?vT(s.selected_date):"Not selected"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Time"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.selected_time?jT(s.selected_time,40):"Not selected"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Duration"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:"40 minutes"})]})]})]}),r.jsxs("div",{className:"p-6 lg:p-8 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"h-6 w-6 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Contact Information"})]}),r.jsx(Z,{to:"/book/details",className:"text-amber-400 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit contact information",children:"Edit"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Full Name"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.customer_name||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Email Address"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.customer_email||"Not provided"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Phone Number (WhatsApp preferred)"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.customer_phone||"Not provided"})]})]})]}),_&&r.jsxs("div",{className:"p-6 lg:p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"h-6 w-6 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Special Requests"})]}),r.jsx(Z,{to:"/book/details",className:"text-amber-400 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit special requests",children:"Edit"})]}),r.jsxs("div",{className:"space-y-3",children:[s.special_request&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Your Request"}),r.jsx("p",{className:"text-base text-master-text-primary-dark",children:s.special_request})]}),s.booking_for_name&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Booking For"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:s.booking_for_name})]}),s.inspiration_photos&&s.inspiration_photos.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-2",children:"Inspiration Photos"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:s.inspiration_photos.map((y,S)=>r.jsx("button",{onClick:()=>f(S),className:"aspect-square rounded-lg overflow-hidden hover:opacity-80 transition-opacity focus:outline-none focus:ring-2 focus:ring-red-500",children:r.jsx("img",{src:y,alt:`Inspiration ${S+1}`,className:"w-full h-full object-cover"})},S))})]})]})]})]}),r.jsxs("div",{className:"bg-[#2D0808] border-2 border-blue-200 rounded-xl p-6 lg:p-8 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"Important Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsxs("svg",{className:"h-5 w-5 text-amber-400 mt-0.5 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-master-text-primary-dark",children:i.shop_address||"Address not available"}),r.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(i.shop_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-amber-400 hover:text-blue-700 mt-1 inline-block",children:"Get Directions "})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 text-amber-400 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.jsx("a",{href:`tel:${i.shop_phone}`,className:"text-sm font-medium text-master-text-primary-dark hover:text-amber-400",children:i.shop_phone||"Phone not available"})]}),r.jsxs("div",{className:"pt-3 border-t border-blue-300",children:[r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("strong",{children:"Cancellation Policy:"})," You can cancel up to 2 hours before your appointment."]}),r.jsxs("p",{className:"text-sm text-master-text-secondary-dark mt-2",children:[r.jsx("strong",{children:"Reminders:"})," You'll receive a confirmation email and SMS, plus a reminder before your appointment."]})]})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-6",children:r.jsxs("label",{className:"flex items-start cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:o,onChange:p,"data-testid":"terms-checkbox","aria-label":"Accept terms and conditions",className:"mt-1 h-5 w-5 text-amber-400 border-gray-300 rounded focus:ring-4 focus:ring-red-100 cursor-pointer"}),r.jsxs("span",{className:"ml-3 text-sm text-master-text-secondary-dark",children:["I agree to the"," ",r.jsx("button",{type:"button",onClick:()=>window.open("/terms","_blank"),className:"text-amber-400 hover:text-blue-700 font-medium underline",children:"cancellation policy and terms of service"})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(Z,{to:"/book/details",className:"flex-1 sm:flex-none sm:w-auto px-6 py-3 bg-gray-100 text-master-text-primary-dark border-2 border-gray-300 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Back to Edit"}),r.jsx("button",{onClick:j,disabled:!o||x.isPending,"data-testid":"confirm-booking-button","aria-label":"Confirm booking and proceed to confirmation",className:"flex-1 px-8 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",children:x.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Confirming..."]}):"Confirm Booking"})]})]})}),c&&s.inspiration_photos&&s.inspiration_photos.length>0&&r.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:v,children:r.jsxs("div",{className:"relative max-w-4xl w-full",onClick:y=>y.stopPropagation(),children:[r.jsx("button",{onClick:v,className:"absolute top-4 right-4 text-master-text-primary-dark hover:text-master-text-secondary-dark z-10","aria-label":"Close lightbox",children:r.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("img",{src:s.inspiration_photos[u],alt:`Inspiration ${u+1}`,className:"max-h-[80vh] max-w-full rounded-lg"})}),s.inspiration_photos.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:g,disabled:u===0,className:"absolute left-4 top-1/2 -translate-y-1/2 text-master-text-primary-dark hover:text-master-text-secondary-dark disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Previous image",children:r.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:b,disabled:u===s.inspiration_photos.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 text-master-text-primary-dark hover:text-master-text-secondary-dark disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Next image",children:r.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-master-text-primary-dark text-sm bg-black bg-opacity-80 px-3 py-1 rounded-full",children:[u+1," / ",s.inspiration_photos.length]})]})]})})]})},cy=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",NT=e=>{const t=new Date(e),s={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",s)},Np=e=>{const[t,s]=e.split(":"),n=parseInt(t,10),a=n>=12?"PM":"AM";return`${n%12||12}:${s} ${a}`},_T=(e,t)=>{const[s,n]=e.split(":").map(Number),a=s*60+n+t,i=Math.floor(a/60)%24,o=a%60,l=`${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`;return Np(l)},CT=(e,t)=>{const s=new Date(`${e}T${t}`),n=new Date,a=new Date(n.getTime()+2*60*60*1e3);return s>a},ST=(e,t=200)=>{const s=document.createElement("canvas");s.width=t,s.height=t;const n=s.getContext("2d");return n?(n.fillStyle="#FFFFFF",n.fillRect(0,0,t,t),n.fillStyle="#000000",n.strokeStyle="#000000",n.lineWidth=2,n.strokeRect(10,10,t-20,t-20),n.font="bold 14px monospace",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t/2,t/2),s.toDataURL("image/png")):""},AT=(e,t,s,n)=>{const a=new Date(`${e.appointment_date}T${e.appointment_time}`),i=new Date(a.getTime()+e.slot_duration*6e4),o=d=>d.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",l=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//BarberSlot//Booking//EN","BEGIN:VEVENT",`UID:${e.ticket_number}@barberslot.com`,`DTSTAMP:${o(new Date)}`,`DTSTART:${o(a)}`,`DTEND:${o(i)}`,`SUMMARY:Haircut at ${s}${t?` - ${t}`:""}`,`DESCRIPTION:Booking confirmation for ${e.customer_name}\\nTicket: ${e.ticket_number}${e.special_request?`\\nNotes: ${e.special_request}`:""}`,`LOCATION:${n}`,"STATUS:CONFIRMED","BEGIN:VALARM","TRIGGER:-PT2H","DESCRIPTION:Appointment reminder","ACTION:DISPLAY","END:VALARM","END:VEVENT","END:VCALENDAR"].join(`\r
`),c=new Blob([l],{type:"text/calendar;charset=utf-8"});return URL.createObjectURL(c)},ET=()=>{const e=Ie(),[t]=xt(),s=re(F=>F.authentication_state.authentication_status.is_authenticated),n=re(F=>F.app_settings),a=re(F=>F.clear_booking_context),[i,o]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(""),[m,x]=h.useState(!1),[p,j]=h.useState(null),f=t.get("ticket_number"),{data:v,isLoading:b,isError:g}=ve({queryKey:["booking",f],queryFn:async()=>f?(await Y.get(`${cy()}/api/bookings/${f}`)).data:null,enabled:!!f,staleTime:6e4,retry:2}),w=ye({mutationFn:async F=>(await Y.post(`${cy()}/api/bookings/${F}/resend-confirmation`)).data,onSuccess:F=>{Ti.success(F.message||"Confirmation email sent successfully!"),j(F.message||"Confirmation sent successfully!"),setTimeout(()=>j(null),5e3)},onError:F=>{var E,L;const H=((L=(E=F.response)==null?void 0:E.data)==null?void 0:L.message)||"Failed to send confirmation. Please try again.";Ti.error(H),j(H),setTimeout(()=>j(null),5e3)}});h.useEffect(()=>{v&&(o(v.booking),v.service_name&&v.booking.service_id&&c({service_id:v.booking.service_id,name:v.service_name,duration:v.service_duration||40,price:v.service_price||null}))},[v]),h.useEffect(()=>{if(i!=null&&i.ticket_number&&!d){const F=ST(i.ticket_number);u(F)}},[i,d]);const N=async()=>{if(i)try{await navigator.clipboard.writeText(i.ticket_number),x(!0),setTimeout(()=>x(!1),2e3)}catch{alert(`Your ticket number: ${i.ticket_number}`)}},_=()=>{if(!i)return;const F=AT(i,(l==null?void 0:l.name)||null,n.shop_name,n.shop_address),H=document.createElement("a");H.href=F,H.download=`barberslot-${i.ticket_number}.ics`,document.body.appendChild(H),H.click(),document.body.removeChild(H)},y=()=>{i&&w.mutate(i.ticket_number)},S=()=>{window.print()},A=()=>{a(),e("/book/service")};if(!f)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"No Ticket Number"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:"Please provide a valid ticket number."}),r.jsx(Z,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 transition-colors",children:"Search Your Bookings"})]})})});if(b)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark text-lg",children:"Loading confirmation..."})]})})});if(g||!i)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"Booking Not Found"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:"We couldn't find your booking confirmation."}),r.jsx(Z,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 transition-colors",children:"Search Your Bookings"})]})})});const I=CT(i.appointment_date,i.appointment_time);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full mb-4 animate-scale-in ${l!=null&&l.name.toLowerCase().includes("call")?"bg-gradient-to-r from-amber-100 to-orange-100":"bg-green-100"}`,children:l!=null&&l.name.toLowerCase().includes("call")?r.jsx(Kt,{className:"w-12 h-12 text-orange-600",strokeWidth:3}):r.jsx(ds,{className:"w-12 h-12 text-green-600",strokeWidth:3})}),r.jsx("h1",{className:"text-4xl font-bold text-master-text-primary-dark mb-2",children:l!=null&&l.name.toLowerCase().includes("call")?"Call-Out Confirmed!":"Booking Confirmed!"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:l!=null&&l.name.toLowerCase().includes("call")?"A Master Fade barber will arrive at your location":"Your appointment is all set"})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:[r.jsx("div",{className:`px-6 lg:px-8 py-4 ${l!=null&&l.name.toLowerCase().includes("call")?"bg-gradient-to-r from-amber-500 to-orange-500":"bg-gradient-to-r from-blue-600 to-indigo-600"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm font-medium mb-1 ${l!=null&&l.name.toLowerCase().includes("call")?"text-orange-100":"text-blue-100"}`,children:l!=null&&l.name.toLowerCase().includes("call")?"Call-Out Booking Number":"Ticket Number"}),r.jsx("p",{className:"text-master-text-primary-dark text-3xl font-bold tracking-wide",children:i.ticket_number})]}),r.jsx("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-white/20 text-master-text-primary-dark rounded-lg hover:bg-white/30 transition-all duration-200 backdrop-blur-sm","aria-label":"Copy ticket number to clipboard",children:m?r.jsxs(r.Fragment,{children:[r.jsx(ds,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(zx,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"Copy"})]})})]})}),r.jsx("div",{className:"px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx("div",{className:"flex justify-center md:justify-start",children:r.jsx("div",{className:"bg-[#2D0808] p-4 rounded-lg border-2 border-white/10",children:d?r.jsx("img",{src:d,alt:"Booking QR Code",className:"w-32 h-32"}):r.jsx("div",{className:"w-32 h-32 bg-gray-100 animate-pulse rounded"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-900/30 text-green-400 rounded-full text-sm font-semibold mb-4",children:[r.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Upcoming"]}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm leading-relaxed",children:"Save this ticket number or scan the QR code when you arrive for your appointment."})]})]})})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Booking Summary"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border-l-4 border-red-600 pl-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-muted-dark uppercase tracking-wide mb-2",children:"Appointment Details"}),l&&r.jsx("p",{className:"text-lg font-semibold text-master-text-primary-dark mb-1",children:l.name}),r.jsxs("p",{className:"text-master-text-primary-dark font-medium mb-1",children:[NT(i.appointment_date)," at ",Np(i.appointment_time)]}),r.jsxs("p",{className:"text-master-text-secondary-dark text-sm",children:["Duration: ",i.slot_duration," minutes (ending at ",_T(i.appointment_time,i.slot_duration),")"]})]}),r.jsxs("div",{className:"border-l-4 border-indigo-600 pl-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-muted-dark uppercase tracking-wide mb-2",children:"Contact Information"}),r.jsx("p",{className:"text-master-text-primary-dark font-medium mb-1",children:i.customer_name}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm mb-1",children:r.jsx("a",{href:`tel:${i.customer_phone}`,className:"hover:text-amber-400 transition-colors",children:i.customer_phone})}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:r.jsx("a",{href:`mailto:${i.customer_email}`,className:"hover:text-amber-400 transition-colors",children:i.customer_email})}),i.booking_for_name&&r.jsxs("p",{className:"text-master-text-secondary-dark text-sm mt-2",children:["Booking for: ",r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:i.booking_for_name})]})]}),(l==null?void 0:l.name.toLowerCase().includes("call"))&&r.jsxs("div",{className:"border-l-4 border-orange-600 pl-4",children:[r.jsxs("h3",{className:"text-sm font-semibold text-master-text-muted-dark uppercase tracking-wide mb-2 flex items-center",children:[r.jsx(Kt,{className:"w-4 h-4 mr-1 text-orange-600"}),"Service Location"]}),r.jsx("p",{className:"text-master-text-primary-dark font-medium mb-1",children:"Address provided in booking details"}),r.jsxs("div",{className:"mt-3 p-4 bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-lg",children:[r.jsxs("p",{className:"text-orange-900 text-sm font-medium mb-2 flex items-center",children:[r.jsx(tt,{className:"w-4 h-4 mr-1"}),"Estimated Arrival Window"]}),r.jsxs("p",{className:"text-orange-800 text-sm",children:["Our barber will arrive within 15 minutes of your appointment time: ",r.jsx("strong",{children:Np(i.appointment_time)})]}),r.jsx("p",{className:"text-orange-700 text-xs mt-2",children:"You'll receive a notification when our barber is en route to your location."})]})]}),i.special_request&&r.jsxs("div",{className:"border-l-4 border-purple-600 pl-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-muted-dark uppercase tracking-wide mb-2",children:"Special Request"}),r.jsx("p",{className:"text-master-text-primary-dark",children:i.special_request})]}),i.inspiration_photos&&i.inspiration_photos.length>0&&r.jsxs("div",{className:"border-l-4 border-pink-600 pl-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-muted-dark uppercase tracking-wide mb-2",children:"Inspiration Photos"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:i.inspiration_photos.map((F,H)=>r.jsx("img",{src:F,alt:`Inspiration ${H+1}`,className:"w-20 h-20 object-cover rounded-lg border-2 border-white/10"},H))})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"What happens next?"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l!=null&&l.name.toLowerCase().includes("call")?"bg-orange-100":"bg-green-100"}`,children:r.jsx(ds,{className:`w-5 h-5 ${l!=null&&l.name.toLowerCase().includes("call")?"text-orange-600":"text-green-600"}`})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Confirmation sent to your email and phone"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Check your inbox and messages"})]})]}),(l==null?void 0:l.name.toLowerCase().includes("call"))&&r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(Kt,{className:"w-5 h-5 text-orange-600"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Barber assigned and en route notification"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"You'll be notified when your barber is on the way"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(tt,{className:"w-5 h-5 text-amber-400"})})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-master-text-primary-dark font-medium",children:["Reminder will be sent ",n.reminder_hours_before," hours before appointment"]}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"So you don't forget!"})]})]}),(l==null?void 0:l.name.toLowerCase().includes("call"))&&r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx(ep,{className:"w-5 h-5 text-purple-600"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Arrival within 15-minute window"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Our barber will arrive close to your scheduled time"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:r.jsx(ep,{className:"w-5 h-5 text-amber-600"})})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-master-text-primary-dark font-medium",children:["You can cancel up to ",n.same_day_cutoff_hours," hours before"]}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Free cancellation policy"})]})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Quick Actions"}),p&&r.jsx("div",{className:`mb-4 p-4 rounded-lg ${p.includes("Failed")?"bg-red-50 text-red-300":"bg-green-50 text-green-300"}`,children:r.jsx("p",{className:"text-sm font-medium",children:p})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:_,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 hover:shadow-lg transition-all duration-200",children:[r.jsx(qe,{className:"w-5 h-5"}),"Add to Calendar"]}),r.jsxs("button",{onClick:y,disabled:w.isPending,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-master-text-primary-dark font-medium rounded-lg hover:bg-gray-200 transition-colors border border-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(al,{className:`w-5 h-5 ${w.isPending?"animate-spin":""}`}),w.isPending?"Sending...":"Resend Confirmation"]}),r.jsxs("button",{onClick:S,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-master-text-primary-dark font-medium rounded-lg hover:bg-gray-200 transition-colors border border-white/20",children:[r.jsx(Do,{className:"w-5 h-5"}),"Print Ticket"]}),r.jsxs("button",{onClick:A,className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-master-text-primary-dark font-medium rounded-lg hover:bg-indigo-700 hover:shadow-lg transition-all duration-200",children:[r.jsx(As,{className:"w-5 h-5"}),"Book Another Appointment"]}),s?r.jsxs(Z,{to:"/dashboard",className:"flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-master-text-primary-dark font-medium rounded-lg hover:bg-green-700 hover:shadow-lg transition-all duration-200 sm:col-span-2",children:["Go to My Dashboard",r.jsx(As,{className:"w-5 h-5"})]}):r.jsxs(Z,{to:"/search",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-master-text-primary-dark font-medium rounded-lg hover:bg-gray-200 transition-colors border border-white/20 sm:col-span-2",children:["Search Your Bookings",r.jsx(As,{className:"w-5 h-5"})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Shop Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{children:r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:n.shop_name})}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Kt,{className:"w-5 h-5 text-master-text-muted-dark flex-shrink-0 mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-master-text-primary-dark",children:n.shop_address}),r.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n.shop_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-amber-400 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-1 mt-1",children:["Get Directions",r.jsx(As,{className:"w-4 h-4"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Pt,{className:"w-5 h-5 text-master-text-muted-dark"}),r.jsx("a",{href:`tel:${n.shop_phone}`,className:"text-master-text-primary-dark hover:text-amber-400 transition-colors",children:n.shop_phone})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($t,{className:"w-5 h-5 text-master-text-muted-dark"}),r.jsx("a",{href:`mailto:${n.shop_email}`,className:"text-master-text-primary-dark hover:text-amber-400 transition-colors",children:n.shop_email})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-muted-dark flex-shrink-0 mt-1"}),r.jsx("p",{className:"text-master-text-primary-dark",children:n.operating_hours})]})]})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[I&&r.jsx(Z,{to:`/booking/${i.ticket_number}`,className:"text-red-600 hover:text-red-300 font-medium transition-colors",children:"Cancel This Booking"}),r.jsxs("div",{className:"flex items-center gap-2 text-master-text-secondary-dark",children:[r.jsx("span",{className:"text-sm",children:"Need help?"}),r.jsx("a",{href:`tel:${n.shop_phone}`,className:"text-amber-400 hover:text-blue-700 font-medium",children:"Contact Us"})]})]})})]})}),r.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-area, .print-area * {
            visibility: visible;
          }
          .print-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          @media (prefers-reduced-motion: reduce) {
            .animate-scale-in {
              animation: none;
            }
          }
        }
        @keyframes scale-in {
          from {
            transform: scale(0);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-scale-in {
          animation: scale-in 0.3s ease-out;
        }
      `})]})},wm=e=>e?e.toUpperCase().replace(/[^A-Z0-9-]/g,""):"",dy=e=>!e||e.length<5?!1:/^TKT-\d{4,8}-\d{3}$/.test(e)?!0:/^TKT-\d+-\d+$/.test(e),uy=e=>{if(!e||e.trim().length===0)return!1;const t=e.replace(/\D/g,"");return t.length>=7&&t.length<=15},TT=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),PT=e=>{switch(e.toLowerCase()){case"upcoming":case"confirmed":return"bg-blue-900/30 text-blue-400 border-blue-200";case"completed":return"bg-gray-100 text-master-text-secondary-dark border-white/10";case"cancelled":return"bg-red-900/30 text-red-400 border-red-200";default:return"bg-gray-100 text-master-text-secondary-dark border-white/10"}},DT=()=>{const e=Ie(),[t]=xt(),s=re(L=>L.app_settings),[n,a]=h.useState("ticket"),[i,o]=h.useState(""),[l,c]=h.useState(""),[d,u]=h.useState(()=>{const L=new Date,O=L.getFullYear(),R=String(L.getMonth()+1).padStart(2,"0"),z=String(L.getDate()).padStart(2,"0");return`${O}-${R}-${z}`}),[m,x]=h.useState(!1),[p,j]=h.useState(null);h.useEffect(()=>{const L=t.get("ticket_number"),O=t.get("phone"),R=t.get("date");L?(a("ticket"),o(wm(L))):(O||R)&&(a("phone_date"),O&&c(O),R&&u(R))},[t]);const f=n==="ticket"&&dy(i),v=n==="phone_date"&&uy(l)&&d.length>0,b=f||v,{data:g,isLoading:w,error:N,refetch:_}=ve({queryKey:["bookingSearch",n,i,l,d],queryFn:async()=>{var z,ee,C;const O=`${(()=>{var k;return typeof window<"u"&&((k=window.__RUNTIME_CONFIG__)!=null&&k.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"})()}/api/bookings/search`,R={};n==="ticket"?R.ticket_number=i:(R.phone=l,R.date=d);try{const k=await Y.get(O,{params:R,timeout:15e3,validateStatus:D=>D<500});if(k.status>=400){const D=((z=k.data)==null?void 0:z.message)||"Search failed. Please try again.";throw new Error(D)}return k.data}catch(k){if(console.error("Search API error:",k),k.code==="ECONNABORTED")throw new Error("Request timed out. Please try again.");if(Y.isAxiosError(k)){const D=(ee=k.response)==null?void 0:ee.status,T=(C=k.response)==null?void 0:C.data;if(T!=null&&T.message)throw new Error(T.message);if(D===400)throw new Error((T==null?void 0:T.message)||"Invalid search parameters. Please check your input.");if(D===404)throw new Error("Booking not found. Please check your ticket number or search criteria.");if(D===502)throw new Error("Service temporarily unavailable. The server is having issues. Please try again in a moment.");if(D===503)throw new Error("Database connection failed. Please try again later.");if(D===504)throw new Error("Gateway timeout. The request took too long. Please try again.");if(D&&D>=500)throw new Error("Server error occurred. Please try again later.");if(!k.response)throw new Error("Unable to connect to server. Please check your internet connection and try again.")}throw k instanceof Error?k:new Error("An unexpected error occurred. Please try again.")}},enabled:!1,retry:(L,O)=>{var R,z;return((R=O==null?void 0:O.response)==null?void 0:R.status)===502||((z=O==null?void 0:O.response)==null?void 0:z.status)===503?L<2:L<1},retryDelay:L=>Math.min(1e3*2**L,5e3),staleTime:0});h.useEffect(()=>{g&&m&&(x(!1),g.total===1&&g.bookings.length===1?e(`/booking/${g.bookings[0].ticket_number}`):g.total===0&&j("No bookings found. Please check your information and try again."))},[g,m,e]),h.useEffect(()=>{if(N){const L=N instanceof Error?N.message:"Search failed. Please try again.";j(L),x(!1)}},[N]);const y=L=>{a(L),j(null)},S=L=>{const O=L.target.value,R=wm(O);o(R),j(null)},A=L=>{c(L.target.value),j(null)},I=L=>{const O=L.target.value;O?/^\d{4}-\d{2}-\d{2}$/.test(O)?(u(O),j(null)):console.warn("Invalid date format received:",O):(u(O),j(null))},F=L=>{if(L.preventDefault(),L.stopPropagation(),!w){if(!b){n==="ticket"?i?dy(i)||j("Invalid ticket format. Expected format: TKT-YYYYMMDD-XXX"):j("Please enter a ticket number"):l?uy(l)?d||j("Please select a booking date"):j("Please enter a valid phone number (7-15 digits)"):j("Please enter a phone number");return}j(null),x(!0),_()}},H=()=>{o(""),c("");const L=new Date,O=L.getFullYear(),R=String(L.getMonth()+1).padStart(2,"0"),z=String(L.getDate()).padStart(2,"0");u(`${O}-${R}-${z}`),j(null),x(!1)},E=L=>{e(`/booking/${L.ticket_number}`)};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-master-text-primary-dark mb-4",children:"Find Your Booking"}),r.jsx("p",{className:"text-lg text-master-text-secondary-dark",children:"Search for your appointment using your ticket number or phone and date"})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"border-b border-white/10",children:r.jsxs("div",{className:"flex",children:[r.jsxs("button",{type:"button",onClick:()=>y("ticket"),className:`flex-1 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${n==="ticket"?"border-red-600 text-amber-400 bg-[#2D0808]":"border-transparent text-master-text-secondary-dark hover:text-master-text-primary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx(wd,{className:"inline-block size-5 mr-2"}),"Search by Ticket Number"]}),r.jsxs("button",{type:"button",onClick:()=>y("phone_date"),className:`flex-1 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${n==="phone_date"?"border-red-600 text-amber-400 bg-[#2D0808]":"border-transparent text-master-text-secondary-dark hover:text-master-text-primary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx(Pt,{className:"inline-block size-5 mr-2"}),"Search by Phone & Date"]})]})}),r.jsxs("form",{onSubmit:F,className:"p-6 lg:p-8 space-y-6","data-testid":"search-form",role:"search","aria-label":"Booking search form",autoComplete:"off",children:[n==="ticket"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ticket-number",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Ticket Number"}),r.jsx("input",{type:"text",id:"ticket-number",name:"ticket-number","data-testid":"ticket-number-input","aria-label":"Ticket number",value:i,onChange:S,onPaste:L=>{L.preventDefault();const O=L.clipboardData.getData("text"),R=wm(O);o(R)},placeholder:"TKT-20241105-003",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",inputMode:"text","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark text-base",autoFocus:!0}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:"Format: TKT-YYYYMMDD-XXX (e.g., TKT-20241105-003)"})]})}),n==="phone_date"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx(Pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-master-text-muted-dark pointer-events-none"}),r.jsx("input",{type:"tel",id:"phone",name:"phone","data-testid":"phone-input","aria-label":"Phone number",value:l,onChange:A,onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),F(L))},placeholder:"+1 (555) 123-4567",autoComplete:"tel","data-form-type":"other",className:"w-full pl-12 pr-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark text-base",autoFocus:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Booking Date"}),r.jsxs("div",{className:"relative",children:[r.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-master-text-muted-dark pointer-events-none"}),r.jsx("input",{type:"date",id:"date",name:"date","data-testid":"date-input","aria-label":"Booking date",value:d,onChange:I,onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),F(L))},onBlur:L=>{const O=L.target.value;O&&!/^\d{4}-\d{2}-\d{2}$/.test(O)&&j("Please enter a valid date in YYYY-MM-DD format")},autoComplete:"off","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",min:"2020-01-01",max:"2030-12-31",pattern:"\\d{4}-\\d{2}-\\d{2}",onInvalid:L=>{L.preventDefault(),j("Please enter a valid date in YYYY-MM-DD format")},className:"w-full pl-12 pr-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark text-base [&::-webkit-calendar-picker-indicator]:cursor-pointer"})]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:"Enter the date of your appointment (e.g., 2024-11-08)"})]})]}),p&&r.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[r.jsx(De,{className:"size-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-400",children:p})]}),r.jsx("button",{type:"submit",id:"search-submit-button",name:"search-submit-button","data-testid":"search-button","aria-label":w?"Searching for booking...":"Search for booking","aria-disabled":!b||w,"aria-live":"polite","aria-busy":w,disabled:!b||w,className:"w-full px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 disabled:bg-gray-300 disabled:cursor-not-allowed text-master-text-primary-dark font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center space-x-2 focus:outline-none focus:ring-4 focus:ring-red-300",children:w?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin size-5",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Searching..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(wd,{className:"size-5","aria-hidden":"true"}),r.jsx("span",{children:"Search"})]})})]})]}),g&&g.total>1&&r.jsxs("div",{className:"mt-8 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h2",{className:"text-2xl font-bold text-master-text-primary-dark",children:[g.total," Bookings Found"]}),r.jsxs("button",{type:"button",onClick:H,className:"text-sm text-amber-400 hover:text-blue-700 font-medium flex items-center space-x-1",children:[r.jsx(bt,{className:"size-4"}),r.jsx("span",{children:"Clear Search"})]})]}),r.jsx("div",{className:"space-y-4",children:g.bookings.map(L=>r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:L.ticket_number}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${PT(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]}),r.jsxs("p",{className:"text-master-text-secondary-dark",children:[r.jsx(qe,{className:"inline size-4 mr-1"}),TT(L.appointment_date)," at ",L.appointment_time]}),L.service_id&&r.jsxs("p",{className:"text-master-text-secondary-dark text-sm mt-1",children:["Service: ",L.service_id]})]})}),r.jsx("button",{onClick:()=>E(L),className:"w-full px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark font-medium rounded-lg transition-colors",children:"View Details"})]},L.booking_id))})]}),g&&g.total===0&&r.jsx("div",{className:"mt-8 bg-[#2D0808] rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12 text-center",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:r.jsx(Nt,{className:"size-8 text-red-600"})}),r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"No Bookings Found"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"We couldn't find any bookings matching your search."})]}),r.jsxs("div",{className:"bg-[#2D0808] border border-blue-200 rounded-lg p-6 mb-6 text-left",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark mb-3",children:"Suggestions:"}),r.jsxs("ul",{className:"space-y-2 text-sm text-master-text-secondary-dark",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx(pt,{className:"size-4 text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Check your ticket number format (TKT-YYYYMMDD-XXX)"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(pt,{className:"size-4 text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Try a different date or phone number format"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx(pt,{className:"size-4 text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Contact us if you need help"})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] border border-white/10 rounded-lg p-6 mb-6 text-left",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark mb-3",children:"Need Help?"}),r.jsxs("div",{className:"space-y-2 text-sm text-master-text-secondary-dark",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",r.jsx("a",{href:`tel:${s.shop_phone}`,className:"text-amber-400 hover:underline",children:s.shop_phone||"Not available"})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," ",r.jsx("a",{href:`mailto:${s.shop_email}`,className:"text-amber-400 hover:underline",children:s.shop_email||"Not available"})]})]})]}),r.jsx("button",{type:"button",onClick:H,className:"w-full px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark font-medium rounded-lg shadow-lg hover:shadow-xl transition-all",children:"Try Again"})]})}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsxs("p",{className:"text-master-text-secondary-dark mb-4",children:["Don't have an account yet?"," ",r.jsx(Z,{to:"/register",className:"text-amber-400 hover:text-blue-700 font-medium hover:underline",children:"Sign up"})," ","for faster booking and history access."]}),r.jsx(Z,{to:"/",className:"text-master-text-secondary-dark hover:text-master-text-primary-dark text-sm hover:underline",children:" Back to Home"})]})]})})})},FT=()=>{const{ticket_number:e}=Px(),t=Ie(),s=dr(),n=re(K=>K.app_settings.shop_name),a=re(K=>K.app_settings.shop_address),i=re(K=>K.app_settings.shop_phone),o=re(K=>K.app_settings.shop_email),l=re(K=>K.app_settings.operating_hours),c=re(K=>K.app_settings.same_day_cutoff_hours),d=re(K=>K.update_booking_context),[u,m]=h.useState(!1),[x,p]=h.useState(""),[j,f]=h.useState(!1),[v,b]=h.useState(!1),[g,w]=h.useState(null),N=K=>{try{return new Date(K).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return K}},_=K=>{try{const[M,U]=K.split(":"),W=parseInt(M,10),Q=W>=12?"PM":"AM";return`${W%12||12}:${U} ${Q}`}catch{return K}},y=K=>{try{return new Date(K).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return K}},S=(K,M)=>{try{const[U,W]=K.split(":"),B=parseInt(U,10)*60+parseInt(W,10)+M,te=Math.floor(B/60),pe=B%60;return _(`${te.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`)}catch{return""}},A=async()=>{if(e)try{await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch(K){console.error("Failed to copy:",K)}},I=()=>{if(!k)return;const K=new Date(`${k.appointment_date}T${k.appointment_time}`),M=new Date(K.getTime()+k.slot_duration*6e4),U=pe=>pe.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",W=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//BarberSlot//Booking//EN","BEGIN:VEVENT",`UID:${e}@barberslot.com`,`DTSTAMP:${U(new Date)}`,`DTSTART:${U(K)}`,`DTEND:${U(M)}`,`SUMMARY:${(D==null?void 0:D.name)||"Haircut"} at ${n}`,`LOCATION:${a}`,`DESCRIPTION:Service: ${(D==null?void 0:D.name)||"Haircut"}\\nTicket: ${e}${k.special_request?`\\nSpecial Request: ${k.special_request}`:""}`,o?`ORGANIZER:mailto:${o}`:"","END:VEVENT","END:VCALENDAR"].filter(Boolean).join(`\r
`),Q=new Blob([W],{type:"text/calendar"}),B=URL.createObjectURL(Q),te=document.createElement("a");te.href=B,te.download=`${e}.ics`,te.click(),URL.revokeObjectURL(B)},F=()=>{window.print()},H=()=>{x.trim()&&T.mutate(x)},E=()=>{k&&(d({service_id:k.service_id,service_name:(D==null?void 0:D.name)||null,customer_name:k.customer_name,customer_email:k.customer_email,customer_phone:k.customer_phone,special_request:k.special_request,booking_for_name:k.booking_for_name}),t("/book/service"))},L=K=>{switch(K){case"confirmed":return"bg-blue-900/30 text-blue-400 border-blue-200";case"completed":return"bg-gray-100 text-master-text-secondary-dark border-white/10";case"cancelled":return"bg-red-900/30 text-red-400 border-red-200";case"pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-200";default:return"bg-gray-100 text-master-text-secondary-dark border-white/10"}},O=K=>{switch(K){case"confirmed":return"Upcoming";case"completed":return"Completed";case"cancelled":return"Cancelled";case"pending":return"Pending";default:return K}},R=K=>{switch(K){case"created":return r.jsx(qe,{className:"w-5 h-5 text-amber-400"});case"confirmed":return r.jsx(pt,{className:"w-5 h-5 text-green-600"});case"reminder":return r.jsx(tt,{className:"w-5 h-5 text-yellow-600"});case"completed":return r.jsx(pt,{className:"w-5 h-5 text-green-300"});case"cancelled":return r.jsx(Nt,{className:"w-5 h-5 text-red-600"});default:return r.jsx(tt,{className:"w-5 h-5 text-master-text-secondary-dark"})}},{data:z,isLoading:ee,error:C}=ve({queryKey:["booking",e],queryFn:async()=>{if(!e||!/^TKT-\d{4,8}-\d{3}$/.test(e))throw new Error("Invalid ticket number format");return(await Y.get(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}`)).data},enabled:!!e,staleTime:6e4,retry:1,select:K=>{const M=K.booking||K;return{booking:M,service_details:M.service_id?{service_id:M.service_id,name:K.service_name||"Haircut",price:K.service_price?Number(K.service_price):null,duration:K.service_duration||M.slot_duration||40}:null}}}),k=z==null?void 0:z.booking,D=z==null?void 0:z.service_details,T=ye({mutationFn:async K=>(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}/cancel`,{cancellation_reason:K,cancelled_by:"customer"})).data,onSuccess:K=>{s.setQueryData(["booking",e],{booking:K.booking||K,service_details:D}),m(!1),p("")}}),P=ye({mutationFn:async()=>(await Y.post(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}/resend-confirmation`)).data}),V=h.useMemo(()=>{if(!k||k.status!=="confirmed")return!1;try{const K=new Date(`${k.appointment_date}T${k.appointment_time}`),M=new Date,U=new Date(K.getTime()-c*60*60*1e3);return M<U}catch{return!1}},[k,c]),J=h.useMemo(()=>{if(!k)return[];const K=[];return k.created_at&&K.push({type:"created",timestamp:k.created_at,label:"Booking Created",description:`Created on ${y(k.created_at)}`}),k.confirmed_at&&K.push({type:"confirmed",timestamp:k.confirmed_at,label:"Confirmation Sent",description:`Sent on ${y(k.confirmed_at)}`}),k.reminder_sent_at&&K.push({type:"reminder",timestamp:k.reminder_sent_at,label:"Reminder Sent",description:`Sent on ${y(k.reminder_sent_at)}`}),k.completed_at&&K.push({type:"completed",timestamp:k.completed_at,label:"Completed",description:`Completed on ${y(k.completed_at)}`}),k.cancelled_at&&K.push({type:"cancelled",timestamp:k.cancelled_at,label:"Cancelled",description:k.cancellation_reason?`Cancelled on ${y(k.cancelled_at)}: ${k.cancellation_reason}`:`Cancelled on ${y(k.cancelled_at)}`}),K.sort((M,U)=>new Date(M.timestamp).getTime()-new Date(U.timestamp).getTime())},[k]);return ee?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark text-lg",children:"Loading booking details..."})]})})}):C||!k?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"max-w-md w-full text-center",children:[r.jsx(De,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"Booking Not Found"}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-6",children:["We couldn't find a booking with ticket number: ",r.jsx("strong",{children:e})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{to:"/search",className:"block w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Search for Your Booking"}),r.jsx(Z,{to:"/",className:"block w-full bg-gray-100 text-master-text-secondary-dark px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return to Home"})]})]})})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark mb-2",children:"Booking Details"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl font-mono text-amber-400",children:e}),r.jsx("button",{onClick:A,className:"p-2 text-master-text-muted-dark hover:text-amber-400 transition-colors rounded-lg hover:bg-[#2D0808]",title:"Copy ticket number",children:v?r.jsx(pt,{className:"w-5 h-5 text-green-600"}):r.jsx(zx,{className:"w-5 h-5"})})]})]}),r.jsx("div",{children:r.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${L(k.status)}`,children:O(k.status)})})]})}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"mb-6 pb-6 border-b border-white/10",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Appointment Details"}),r.jsxs("div",{className:"space-y-3",children:[D&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(qe,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Service"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:D.name})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(qe,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Date"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:N(k.appointment_date)})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Time"}),r.jsxs("p",{className:"text-base font-medium text-master-text-primary-dark",children:[_(k.appointment_time)," - ",S(k.appointment_time,k.slot_duration)]})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Duration"}),r.jsxs("p",{className:"text-base font-medium text-master-text-primary-dark",children:[k.slot_duration," minutes"]})]})]})]})]}),r.jsxs("div",{className:"mb-6 pb-6 border-b border-white/10",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Contact Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-5 h-5 flex items-center justify-center mt-0.5",children:r.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Name"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:k.customer_name})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx($t,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Email"}),r.jsx("a",{href:`mailto:${k.customer_email}`,className:"text-base font-medium text-amber-400 hover:text-blue-700",children:k.customer_email})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Pt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Phone"}),r.jsx("a",{href:`tel:${k.customer_phone}`,className:"text-base font-medium text-amber-400 hover:text-blue-700",children:k.customer_phone})]})]})]})]}),(k.special_request||k.booking_for_name||k.inspiration_photos&&k.inspiration_photos.length>0)&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Special Requests"}),r.jsxs("div",{className:"space-y-4",children:[k.special_request&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-1",children:"Notes"}),r.jsx("p",{className:"text-base text-master-text-primary-dark",children:k.special_request})]}),k.booking_for_name&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-1",children:"Booking for"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:k.booking_for_name})]}),k.inspiration_photos&&k.inspiration_photos.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-2",children:"Inspiration Photos"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:k.inspiration_photos.map((K,M)=>r.jsx("button",{onClick:()=>w(M),className:"relative aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-red-500 transition-all",children:r.jsx("img",{src:K,alt:`Inspiration ${M+1}`,className:"w-full h-full object-cover"})},M))})]})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mb-6",children:[r.jsxs("button",{onClick:()=>f(!j),className:"w-full flex items-center justify-between text-left",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Booking Timeline"}),j?r.jsx(Xh,{className:"w-5 h-5 text-master-text-muted-dark"}):r.jsx(xa,{className:"w-5 h-5 text-master-text-muted-dark"})]}),j&&r.jsx("div",{className:"mt-6 space-y-4",children:J.map((K,M)=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:R(K.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-master-text-primary-dark",children:K.label}),K.description&&r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:K.description})]})]},M))})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Shop Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Kt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Address"}),r.jsx("p",{className:"text-base text-master-text-primary-dark",children:a}),r.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-amber-400 hover:text-blue-700 inline-flex items-center gap-1 mt-1",children:["Get Directions",r.jsx(UC,{className:"w-3 h-3"})]})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Pt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Phone"}),r.jsx("a",{href:`tel:${i}`,className:"text-base font-medium text-amber-400 hover:text-blue-700",children:i})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Operating Hours"}),r.jsx("p",{className:"text-base text-master-text-primary-dark",children:l})]})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[k.status==="confirmed"&&V&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>m(!0),className:"w-full bg-red-600 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Cancel Booking"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsx("button",{onClick:()=>P.mutate(),disabled:P.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:P.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(am,{className:"w-4 h-4"}),"Resend"]})}),r.jsxs("button",{onClick:I,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(sl,{className:"w-4 h-4"}),"Calendar"]}),r.jsxs("button",{onClick:F,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Do,{className:"w-4 h-4"}),"Print"]})]})]}),k.status==="confirmed"&&!V&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-400 text-sm",children:[r.jsxs("strong",{children:["Cannot cancel within ",c," hours."]})," Please call us: "," ",r.jsx("a",{href:`tel:${i}`,className:"font-semibold underline",children:i})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsx("button",{onClick:()=>P.mutate(),disabled:P.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:P.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(am,{className:"w-4 h-4"}),"Resend"]})}),r.jsxs("button",{onClick:I,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(sl,{className:"w-4 h-4"}),"Calendar"]}),r.jsxs("button",{onClick:F,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Do,{className:"w-4 h-4"}),"Print"]})]})]}),k.status==="completed"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:E,className:"w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Book Again"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:F,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx(Do,{className:"w-4 h-4"}),"Print Receipt"]}),r.jsx("button",{onClick:()=>P.mutate(),disabled:P.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:P.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(am,{className:"w-4 h-4"}),"Resend"]})})]})]}),k.status==="cancelled"&&r.jsxs("div",{className:"space-y-3",children:[k.cancelled_at&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-3",children:r.jsxs("p",{className:"text-red-400 text-sm",children:[r.jsxs("strong",{children:["Cancelled on ",y(k.cancelled_at)]}),k.cancellation_reason&&r.jsx("span",{className:"block mt-1",children:k.cancellation_reason})]})}),r.jsx("button",{onClick:E,className:"w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Book Again"})]})]}),P.isSuccess&&r.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600 text-master-text-primary-dark px-6 py-3 rounded-lg shadow-lg animate-in slide-in-from-bottom",children:r.jsx("p",{className:"font-medium",children:"Confirmation resent successfully!"})}),T.isSuccess&&r.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600 text-master-text-primary-dark px-6 py-3 rounded-lg shadow-lg animate-in slide-in-from-bottom",children:r.jsx("p",{className:"font-medium",children:"Booking cancelled successfully"})})]})}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Cancel Booking?"}),r.jsx("button",{onClick:()=>m(!1),className:"text-master-text-muted-dark hover:text-master-text-secondary-dark",children:r.jsx(bt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-yellow-400 text-sm",children:r.jsx("strong",{children:"Are you sure you want to cancel this booking?"})}),r.jsxs("p",{className:"text-yellow-300 text-sm mt-2",children:[(D==null?void 0:D.name)||"Haircut"," on ",N(k.appointment_date)," at ",_(k.appointment_time)]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cancellation-reason",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Reason for cancellation (optional)"}),r.jsx("textarea",{id:"cancellation-reason",value:x,onChange:K=>p(K.target.value),placeholder:"e.g., schedule changed, emergency",rows:3,maxLength:200,className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500"}),r.jsxs("p",{className:"text-xs text-master-text-muted-dark mt-1",children:[x.length,"/200"]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"No, Keep Booking"}),r.jsx("button",{onClick:H,disabled:T.isPending,className:"flex-1 bg-red-600 text-master-text-primary-dark px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:T.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cancelling..."]}):"Yes, Cancel Booking"})]})]})}),g!==null&&k.inspiration_photos&&r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>w(null),children:[r.jsx("button",{onClick:()=>w(null),className:"absolute top-4 right-4 text-master-text-primary-dark hover:text-master-text-secondary-dark",children:r.jsx(bt,{className:"w-8 h-8"})}),r.jsxs("div",{className:"max-w-4xl max-h-full",children:[r.jsx("img",{src:k.inspiration_photos[g],alt:`Inspiration ${g+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:K=>K.stopPropagation()}),r.jsxs("div",{className:"text-master-text-primary-dark text-center mt-4",children:["Photo ",g+1," of ",k.inspiration_photos.length]})]})]}),r.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-ticket, .print-ticket * {
            visibility: visible;
          }
          .print-ticket {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
        }
      `})]})},MT=Ll({customer_name:mt().min(2,"Name must be at least 2 characters").max(100,"Name too long"),customer_email:mt().email("Please enter a valid email address").max(255,"Email too long"),customer_phone:mt().min(10,"Phone number too short").max(20,"Phone number too long").refine(e=>{const t=e.replace(/[\s()-]/g,"");return/^\+?[1-9]\d{1,14}$/.test(t)},"Please enter a valid phone number"),customer_address:mt().min(10,"Please provide a complete address").max(500,"Address too long"),preferred_date:mt().min(1,"Please select a date"),preferred_time:mt().min(1,"Please select a time")}),RT=()=>{const e=Ie(),[t,s]=h.useState(1),[n,a]=h.useState({customer_name:"",customer_phone:"",customer_email:"",customer_address:"",preferred_date:"",preferred_time:"",special_request:"",barber_id:null}),[i,o]=h.useState({}),{data:l,isLoading:c}=ve({queryKey:["activeBarbers"],queryFn:async()=>(await Y.get(`${d()}/api/barbers`)).data.barbers,staleTime:6e4}),d=()=>{var g;return typeof window<"u"&&((g=window.__RUNTIME_CONFIG__)!=null&&g.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},u=ye({mutationFn:async g=>(await Y.post(`${d()}/api/callouts/book`,g,{headers:{"Content-Type":"application/json"}})).data,onSuccess:g=>{e(`/callout/confirmation?callout=${g.callout.callout_id}`)},onError:g=>{var w,N;console.error("Call-out booking error:",g),alert(((N=(w=g.response)==null?void 0:w.data)==null?void 0:N.message)||"Failed to create call-out booking. Please try again.")}}),m=(g,w)=>{a(N=>({...N,[g]:w})),i[g]&&o(N=>({...N,[g]:void 0}))},x=()=>{try{return MT.parse(n),o({}),!0}catch(g){if(g instanceof Qt){const w={};g.errors.forEach(N=>{N.path[0]&&(w[N.path[0]]=N.message)}),o(w)}return!1}},p=()=>{x()&&(s(2),window.scrollTo({top:0,behavior:"smooth"}))},j=()=>{s(1),window.scrollTo({top:0,behavior:"smooth"})},f=()=>{if(!x())return;const g={customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,service_address:n.customer_address,appointment_date:n.preferred_date,appointment_time:n.preferred_time,special_request:n.special_request||null,barber_id:n.barber_id||null};u.mutate(g)},v=()=>{const g=new Date;return g.setDate(g.getDate()+1),g.toISOString().split("T")[0]},b=()=>{const g=new Date;return g.setDate(g.getDate()+90),g.toISOString().split("T")[0]};return t===1?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full text-master-text-primary-dark font-bold text-sm mb-4",children:[r.jsx(ol,{className:"w-4 h-4"}),"PREMIUM SERVICE"]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:"Book Call-Out Service"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark mb-2",children:"We Come To You - 150 All-Inclusive"}),r.jsx("p",{className:"text-master-text-muted-dark",children:"Professional barbering at your doorstep"})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-4 flex items-center gap-2",children:[r.jsx(cr,{className:"w-6 h-6 text-amber-400"}),"Your Details"]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-master-text-primary-dark font-medium mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",value:n.customer_name,onChange:g=>m("customer_name",g.target.value),className:`w-full px-4 py-3 bg-white/10 border ${i.customer_name?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-amber-500`,placeholder:"Enter your full name"}),i.customer_name&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.customer_name]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-master-text-primary-dark font-medium mb-2",children:"Email Address *"}),r.jsx("input",{type:"email",value:n.customer_email,onChange:g=>m("customer_email",g.target.value),className:`w-full px-4 py-3 bg-white/10 border ${i.customer_email?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-amber-500`,placeholder:"your@email.com"}),i.customer_email&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.customer_email]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-master-text-primary-dark font-medium mb-2",children:"Mobile Number *"}),r.jsx("input",{type:"tel",value:n.customer_phone,onChange:g=>m("customer_phone",g.target.value),className:`w-full px-4 py-3 bg-white/10 border ${i.customer_phone?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-amber-500`,placeholder:"+353 83 327 6229"}),i.customer_phone&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.customer_phone]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-2 flex items-center gap-2",children:[r.jsx(Kt,{className:"w-5 h-5 text-amber-400"}),"Service Address *"]}),r.jsx("textarea",{value:n.customer_address,onChange:g=>m("customer_address",g.target.value),rows:3,className:`w-full px-4 py-3 bg-white/10 border ${i.customer_address?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-amber-500`,placeholder:"Street address, apartment/suite number, city, postcode"}),i.customer_address&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.customer_address]}),r.jsx("p",{className:"text-master-text-muted-dark text-sm mt-1",children:"Include apartment number, buzzer code, or parking instructions"})]})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-4 flex items-center gap-2",children:[r.jsx(qe,{className:"w-6 h-6 text-amber-400"}),"Preferred Date & Time"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-master-text-primary-dark font-medium mb-2",children:"Preferred Date *"}),r.jsx("input",{type:"date",value:n.preferred_date,onChange:g=>m("preferred_date",g.target.value),min:v(),max:b(),className:`w-full px-4 py-3 bg-white/10 border ${i.preferred_date?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark focus:outline-none focus:ring-2 focus:ring-amber-500`}),i.preferred_date&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.preferred_date]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-master-text-primary-dark font-medium mb-2",children:"Preferred Time *"}),r.jsx("input",{type:"time",value:n.preferred_time,onChange:g=>m("preferred_time",g.target.value),className:`w-full px-4 py-3 bg-white/10 border ${i.preferred_time?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark focus:outline-none focus:ring-2 focus:ring-amber-500`}),i.preferred_time&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),i.preferred_time]})]})]})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-3 flex items-center gap-2",children:[r.jsx(il,{className:"w-5 h-5 text-amber-400"}),"Choose Your Barber"]}),c?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark text-sm",children:"Loading barbers..."})]}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>m("barber_id",""),className:`p-4 rounded-lg border-2 transition-all ${n.barber_id?"border-white/30 bg-white/5 hover:bg-white/10":"border-amber-500 bg-amber-500/20"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:r.jsx(pr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark",children:"First Available"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark",children:"Any barber"})]})]})}),l==null?void 0:l.filter(g=>g.is_active&&g.is_working_today).map(g=>r.jsx("button",{type:"button",onClick:()=>m("barber_id",g.barber_id),className:`p-4 rounded-lg border-2 transition-all ${n.barber_id===g.barber_id?"border-amber-500 bg-amber-500/20":"border-white/30 bg-white/5 hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[g.photo_url?r.jsx("img",{src:g.photo_url,alt:g.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:r.jsx(cr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark truncate",children:g.name}),g.specialties&&g.specialties.length>0&&r.jsx("p",{className:"text-xs text-master-text-secondary-dark truncate",children:g.specialties.join(", ")})]})]})},g.barber_id))]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:'Select "First Available" for the next free barber'})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-2 flex items-center gap-2",children:[r.jsx(Jh,{className:"w-5 h-5 text-amber-400"}),"Special Request (Optional)"]}),r.jsx("textarea",{value:n.special_request,onChange:g=>m("special_request",g.target.value),rows:3,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Any special requests, parking instructions, or notes for the barber?",maxLength:500}),r.jsxs("p",{className:"text-master-text-muted-dark text-sm mt-1",children:[n.special_request.length,"/500 characters"]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:()=>e("/"),className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:p,className:"flex-1 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg hover:shadow-amber-500/50 transition-all",children:"Continue to Confirmation"})]})]})})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full text-master-text-primary-dark font-bold text-sm mb-4",children:[r.jsx(ol,{className:"w-4 h-4"}),"CONFIRM YOUR BOOKING"]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:"Review Details"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Please confirm your call-out service details"})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-xl p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"Call-Out Barber Service"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-4",children:"Professional barbering at your location"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-master-text-secondary-dark",children:"Total Price"}),r.jsx("span",{className:"text-3xl font-bold text-amber-400",children:"150"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-3",children:"Contact Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start gap-3 text-master-text-secondary-dark",children:[r.jsx(cr,{className:"w-5 h-5 text-amber-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"Name"}),r.jsx("p",{className:"text-master-text-primary-dark",children:n.customer_name})]})]}),r.jsxs("div",{className:"flex items-start gap-3 text-master-text-secondary-dark",children:[r.jsx($t,{className:"w-5 h-5 text-amber-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"Email"}),r.jsx("p",{className:"text-master-text-primary-dark",children:n.customer_email})]})]}),r.jsxs("div",{className:"flex items-start gap-3 text-master-text-secondary-dark",children:[r.jsx(Pt,{className:"w-5 h-5 text-amber-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"Phone"}),r.jsx("p",{className:"text-master-text-primary-dark",children:n.customer_phone})]})]})]})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-3 flex items-center gap-2",children:[r.jsx(Kt,{className:"w-5 h-5 text-amber-400"}),"Service Location"]}),r.jsx("p",{className:"text-master-text-primary-dark bg-white/10 p-4 rounded-lg",children:n.customer_address})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-3",children:"Scheduled For"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-white/10 p-4 rounded-lg",children:[r.jsx(qe,{className:"w-6 h-6 text-amber-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"Date"}),r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:new Date(n.preferred_date).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white/10 p-4 rounded-lg",children:[r.jsx(tt,{className:"w-6 h-6 text-amber-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"Time"}),r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:n.preferred_time})]})]})]})]}),n.special_request&&r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-3 flex items-center gap-2",children:[r.jsx(Jh,{className:"w-5 h-5 text-amber-400"}),"Special Request"]}),r.jsx("p",{className:"text-master-text-primary-dark bg-white/10 p-4 rounded-lg",children:n.special_request})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{onClick:j,disabled:u.isPending,className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors disabled:opacity-50",children:"Back to Edit"}),r.jsx("button",{onClick:f,disabled:u.isPending,className:"flex-1 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg hover:shadow-amber-500/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ds,{className:"w-5 h-5"}),"Confirm Booking"]})})]})]})})]})})},BT=()=>{const e=Ie(),[t]=xt(),s=t.get("ticket");return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,type:"spring"},children:[r.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full mb-6",children:r.jsx(ds,{className:"w-12 h-12 text-master-text-primary-dark"})}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-full text-master-text-primary-dark font-bold text-sm mb-4",children:[r.jsx(ol,{className:"w-4 h-4"}),"BOOKING CONFIRMED"]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:"Call-Out Service Booked!"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:"Your call-out booking for 150 has been received"})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:r.jsxs("div",{className:"space-y-6",children:[s&&r.jsxs("div",{className:"bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-master-text-secondary-dark mb-2",children:"Your Booking Reference"}),r.jsx("p",{className:"text-3xl font-bold text-amber-400 tracking-wider",children:s})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(Kt,{className:"w-12 h-12 text-amber-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-3",children:"A Master Fade Barber Will Come To Your Address"}),r.jsx("p",{className:"text-master-text-secondary-dark leading-relaxed",children:"We'll send you a confirmation email with all the details. Our barber will arrive at your scheduled time with all necessary equipment for a premium barbering experience."})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"What Happens Next?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-master-text-primary-dark text-sm font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Confirmation Email"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"You'll receive an email with your booking details"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-master-text-primary-dark text-sm font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Barber Assignment"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"We'll assign an expert barber to your appointment"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-master-text-primary-dark text-sm font-bold",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Reminder"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"You'll get a reminder before your appointment"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-master-text-primary-dark text-sm font-bold",children:"4"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Service Day"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"Your barber arrives at the scheduled time"})]})]})]})]}),r.jsxs("div",{className:"border-t border-white/20 pt-6",children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark mb-3",children:"Important Notes"}),r.jsxs("ul",{className:"space-y-2 text-master-text-secondary-dark",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-amber-400 mt-1",children:""}),r.jsx("span",{children:"Payment will be collected after the service is completed"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-amber-400 mt-1",children:""}),r.jsx("span",{children:"Please have a suitable space prepared (chair, mirror, power outlet)"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-amber-400 mt-1",children:""}),r.jsx("span",{children:"Need to reschedule? Contact us at least 24 hours in advance"})]})]})]})]})}),r.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:[r.jsxs("button",{onClick:()=>e("/"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg hover:shadow-amber-500/50 transition-all flex items-center justify-center gap-2",children:[r.jsx(nl,{className:"w-5 h-5"}),"Back to Home"]}),s&&r.jsxs("button",{onClick:()=>e(`/booking/${s}`),className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors flex items-center justify-center gap-2",children:[r.jsx(qe,{className:"w-5 h-5"}),"View Booking Details"]})]})]})})},LT=Ll({customer_name:mt().min(2,"Name must be at least 2 characters").max(100,"Name too long"),customer_phone:mt().min(10,"Phone number too short").max(20,"Phone number too long").refine(e=>{const t=e.replace(/[\s()-]/g,"");return/^\+?[1-9]\d{1,14}$/.test(t)},"Please enter a valid phone number")}),OT=()=>{const e=Ie(),t=dr(),[s,n]=h.useState({customer_name:"",customer_phone:"",barber_id:null}),[a,i]=h.useState({}),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState(!1),[x,p]=h.useState(""),j=()=>{var E;return typeof window<"u"&&((E=window.__RUNTIME_CONFIG__)!=null&&E.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},{data:f,isLoading:v}=ve({queryKey:["waitTime"],queryFn:async()=>(await Y.get(`${j()}/api/wait-time`)).data,refetchInterval:15e3}),{data:b,isLoading:g}=ve({queryKey:["activeBarbers"],queryFn:async()=>(await Y.get(`${j()}/api/barbers`)).data.barbers,staleTime:6e4}),w=ye({mutationFn:async E=>(await Y.post(`${j()}/api/queue/join`,E,{headers:{"Content-Type":"application/json"}})).data,onSuccess:E=>{d(E),l(!0),p(""),t.invalidateQueries({queryKey:["waitTime"]})},onError:E=>{var O,R,z,ee;console.error("Join queue error:",E);const L=((R=(O=E.response)==null?void 0:O.data)==null?void 0:R.message)||((ee=(z=E.response)==null?void 0:z.data)==null?void 0:ee.error)||"We couldn't add you to the queue. Please try again.";p(L)}}),N=ye({mutationFn:async E=>(await Y.post(`${j()}/api/queue/leave/${E}`,{},{headers:{"Content-Type":"application/json"}})).data,onSuccess:()=>{l(!1),d(null),m(!1),n({customer_name:"",customer_phone:""}),t.invalidateQueries({queryKey:["waitTime"]})},onError:E=>{var O,R,z,ee;console.error("Leave queue error:",E);const L=((R=(O=E.response)==null?void 0:O.data)==null?void 0:R.message)||((ee=(z=E.response)==null?void 0:z.data)==null?void 0:ee.error)||"Failed to leave queue. Please try again.";p(L),m(!1)}}),_=(E,L)=>{n(O=>({...O,[E]:L})),a[E]&&i(O=>({...O,[E]:void 0}))},y=()=>{try{return LT.parse(s),i({}),!0}catch(E){if(E instanceof Qt){const L={};E.errors.forEach(O=>{O.path[0]&&(L[O.path[0]]=O.message)}),i(L)}return!1}},S=E=>{if(E.preventDefault(),!y())return;const L={customer_name:s.customer_name,customer_phone:s.customer_phone,barber_id:s.barber_id||null};p(""),w.mutate(L)},A=()=>{e("/")},I=()=>{m(!0)},F=()=>{c!=null&&c.queue_id&&N.mutate(c.queue_id)},H=()=>{m(!1)};return o&&c?r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:[r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse",children:r.jsx(pt,{className:"w-10 h-10 text-master-text-primary-dark"})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:"You're in the queue!"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:"We'll text you when you're next"})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 rounded-xl p-6 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[r.jsx(XC,{className:"w-6 h-6 text-blue-400"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm font-medium",children:"Your Ticket"})]}),r.jsxs("p",{className:"text-5xl font-bold text-master-text-primary-dark mb-2",children:["#",c.position]}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"Queue Position"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-center",children:[r.jsx(pr,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm mb-1",children:"Position"}),r.jsxs("p",{className:"text-2xl font-bold text-master-text-primary-dark",children:["#",c.position," in line"]})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-center",children:[r.jsx(tt,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm mb-1",children:"Estimated Wait"}),r.jsxs("p",{className:"text-2xl font-bold text-master-text-primary-dark",children:[c.estimated_wait_minutes," mins"]})]})]}),r.jsx("div",{className:"border-t border-white/20 pt-6",children:r.jsxs("div",{className:"flex items-center gap-3 text-master-text-secondary-dark",children:[r.jsx(Pt,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"We'll text you at"}),r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:c.customer_phone})]})]})}),r.jsxs("div",{className:"bg-[#2D0808]0/20 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark font-semibold mb-2",children:"What Happens Next:"}),r.jsxs("ul",{className:"space-y-1 text-sm text-master-text-secondary-dark",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"We'll text you when you're next (usually ~5 minutes before)"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"Please arrive within 10 minutes when notified"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"You can leave the page - we'll still text you"})]})]})]})]})}),r.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[r.jsxs("button",{onClick:I,disabled:N.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-master-text-primary-dark rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[r.jsx(bt,{className:"w-5 h-5"}),"Leave Queue"]}),r.jsxs("button",{onClick:A,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all flex items-center justify-center gap-2",children:[r.jsx(nl,{className:"w-5 h-5"}),"Done"]})]}),r.jsx(he.p,{className:"text-center text-master-text-muted-dark text-sm mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.5},children:"Your position updates automatically  Check status anytime at masterfade.ie"})]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs(he.div,{className:"bg-gradient-to-br from-gray-900 to-black border border-white/20 rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[r.jsx(De,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark text-center mb-3",children:"Leave Queue?"}),r.jsxs("p",{className:"text-master-text-secondary-dark text-center mb-6",children:["Are you sure you want to leave the queue? You'll lose your current position (#",c.position,")."]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:H,disabled:N.isPending,className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:F,disabled:N.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-master-text-primary-dark rounded-lg font-bold hover:bg-red-700 transition-colors disabled:opacity-50",children:N.isPending?"Leaving...":"Yes, Leave"})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 rounded-full mb-4 border border-white/20",children:r.jsx(pr,{className:"w-10 h-10 text-master-text-primary-dark"})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:"Join Walk-In Queue"}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:"Skip the physical wait - we'll text you when it's your turn"})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl p-6 mb-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:v&&!f?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(pr,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),r.jsx("p",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:(f==null?void 0:f.queueLength)??0}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"In Queue"})]}),r.jsxs("div",{children:[r.jsx(tt,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),r.jsx("p",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:(f==null?void 0:f.currentWaitMinutes)===0?"No Wait":`~${(f==null?void 0:f.currentWaitMinutes)??15} min`}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Est. Wait"})]})]})}),r.jsxs(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[x&&r.jsx("div",{className:"mb-6 bg-red-500/20 border border-red-500/30 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(De,{className:"w-5 h-5 text-red-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-master-text-primary-dark font-semibold mb-1",children:"Error"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:x})]})]})}),r.jsxs("form",{onSubmit:S,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-2 flex items-center gap-2",children:[r.jsx(cr,{className:"w-5 h-5 text-blue-400"}),"Your Name *"]}),r.jsx("input",{type:"text",value:s.customer_name,onChange:E=>_("customer_name",E.target.value),className:`w-full px-4 py-3 bg-white/10 border ${a.customer_name?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter your name",disabled:w.isPending}),a.customer_name&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),a.customer_name]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-2 flex items-center gap-2",children:[r.jsx(Pt,{className:"w-5 h-5 text-blue-400"}),"Mobile Number *"]}),r.jsx("input",{type:"tel",value:s.customer_phone,onChange:E=>_("customer_phone",E.target.value),className:`w-full px-4 py-3 bg-white/10 border ${a.customer_phone?"border-red-500":"border-white/30"} rounded-lg text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"+353 83 327 6229",disabled:w.isPending}),a.customer_phone&&r.jsxs("p",{className:"form-error-text mt-1 flex items-center gap-1",children:[r.jsx(De,{className:"w-4 h-4"}),a.customer_phone]}),r.jsx("p",{className:"text-master-text-muted-dark text-sm mt-2",children:"We'll text you when you're next in line"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-master-text-primary-dark font-medium mb-3 flex items-center gap-2",children:[r.jsx(il,{className:"w-5 h-5 text-blue-400"}),"Preferred Barber (Optional)"]}),g?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark text-sm",children:"Loading barbers..."})]}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>_("barber_id",""),disabled:w.isPending,className:`p-4 rounded-lg border-2 transition-all disabled:opacity-50 ${s.barber_id?"border-white/30 bg-white/5 hover:bg-white/10":"border-blue-500 bg-[#2D0808]0/20"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0",children:r.jsx(pr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark",children:"First Available"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark",children:"Fastest service"})]})]})}),b==null?void 0:b.filter(E=>E.is_active&&E.is_working_today).map(E=>r.jsx("button",{type:"button",onClick:()=>_("barber_id",E.barber_id),disabled:w.isPending,className:`p-4 rounded-lg border-2 transition-all disabled:opacity-50 ${s.barber_id===E.barber_id?"border-blue-500 bg-[#2D0808]0/20":"border-white/30 bg-white/5 hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[E.photo_url?r.jsx("img",{src:E.photo_url,alt:E.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0",children:r.jsx(cr,{className:"w-6 h-6 text-master-text-primary-dark"})}),r.jsxs("div",{className:"text-left flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold text-master-text-primary-dark truncate",children:E.name}),E.specialties&&E.specialties.length>0&&r.jsx("p",{className:"text-xs text-master-text-secondary-dark truncate",children:E.specialties.join(", ")})]})]})},E.barber_id))]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:'Select a barber or choose "First Available" for faster service'})]}),r.jsxs("div",{className:"bg-[#2D0808]0/20 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark font-semibold mb-2",children:"What to Expect:"}),r.jsxs("ul",{className:"space-y-1 text-sm text-master-text-secondary-dark",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"You'll receive your queue position immediately"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"We'll text you when you're next (usually 5 minutes before)"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"Please arrive within 10 minutes when notified"})]})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>e("/"),disabled:w.isPending,className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w.isPending,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:w.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Joining..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pr,{className:"w-5 h-5"}),"Join Queue"]})})]})]})]}),r.jsx(he.p,{className:"text-center text-master-text-muted-dark text-sm mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:"By joining the queue, you agree to our terms of service"})]})})},$T=()=>{const e=Ie(),[t]=xt(),s=t.get("id"),[n,a]=h.useState(!1),i=()=>{var g;return typeof window<"u"&&((g=window.__RUNTIME_CONFIG__)!=null&&g.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},{data:o,isLoading:l,error:c,refetch:d}=ve({queryKey:["queueStatus",s],queryFn:async()=>{if(!s)throw new Error("No queue ID provided");return(await Y.get(`${i()}/api/queue/status/${s}`)).data},refetchInterval:15e3,enabled:!!s}),u=ye({mutationFn:async()=>{if(!s)throw new Error("No queue ID");return(await Y.post(`${i()}/api/queue/leave/${s}`,{},{headers:{"Content-Type":"application/json"}})).data},onSuccess:()=>{e("/")},onError:g=>{var w,N;console.error("Leave queue error:",g),alert(((N=(w=g.response)==null?void 0:w.data)==null?void 0:N.error)||"Failed to leave queue. Please try again.")}}),m=()=>{a(!0)},x=()=>{u.mutate()},p=()=>{a(!1)},j=()=>{if(!o)return"blue";switch(o.status){case"ready":case"called":return"green";case"completed":return"gray";case"cancelled":return"red";default:return"blue"}},f=()=>{if(!o)return"";switch(o.status){case"ready":return"You're next! Please head to the shop now.";case"called":return"You've been called! Please arrive within 10 minutes.";case"completed":return"Your queue session has been completed.";case"cancelled":return"You have left the queue.";default:return"You're in the queue"}};if(l)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-white mx-auto mb-4"}),r.jsx("p",{className:"text-master-text-primary-dark text-xl",children:"Loading queue status..."})]})});if(c||!o)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 text-center",children:[r.jsx(De,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-bold text-master-text-primary-dark mb-3",children:"Queue Not Found"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:"We couldn't find your queue status. You may have already been served or left the queue."}),r.jsx("button",{onClick:()=>e("/"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-master-text-primary-dark rounded-lg font-bold hover:shadow-lg transition-all",children:"Back to Home"})]})});const v=j(),b=o.status==="waiting"||o.status==="ready"||o.status==="called";return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:[r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs(he.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.status==="ready"||o.status==="called"?r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mb-4 animate-pulse",children:r.jsx(pt,{className:"w-10 h-10 text-master-text-primary-dark"})}):r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 rounded-full mb-4 border border-white/20",children:r.jsx(pr,{className:"w-10 h-10 text-master-text-primary-dark"})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-master-text-primary-dark mb-3",children:f()}),r.jsx("p",{className:"text-xl text-master-text-secondary-dark",children:o.customer_name})]}),r.jsx(he.div,{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-2xl p-8 shadow-2xl mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:r.jsxs("div",{className:"space-y-6",children:[b&&r.jsx("div",{className:`bg-gradient-to-br from-${v}-500/20 to-${v}-600/20 border border-${v}-500/30 rounded-xl p-6 text-center`,children:r.jsxs("div",{className:"flex items-center justify-center gap-8",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-secondary-dark mb-2",children:"Your Position"}),r.jsxs("p",{className:"text-5xl font-bold text-master-text-primary-dark",children:["#",o.position]})]}),r.jsx("div",{className:"h-16 w-px bg-white/20"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-secondary-dark mb-2",children:"Estimated Wait"}),r.jsxs("p",{className:"text-5xl font-bold text-master-text-primary-dark",children:[o.estimated_wait_minutes,r.jsx("span",{className:"text-2xl text-master-text-secondary-dark",children:"min"})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white/10 rounded-lg p-4 flex items-center gap-3",children:[r.jsx(pr,{className:"w-8 h-8 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"Total in Queue"}),r.jsx("p",{className:"text-2xl font-bold text-master-text-primary-dark",children:o.total_in_queue})]})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg p-4 flex items-center gap-3",children:[r.jsx(tt,{className:"w-8 h-8 text-green-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"Joined At"}),r.jsx("p",{className:"text-lg font-semibold text-master-text-primary-dark",children:new Date(o.created_at).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})]})]})]}),r.jsx("div",{className:"border-t border-white/20 pt-6",children:r.jsxs("div",{className:"flex items-center gap-3 text-master-text-secondary-dark",children:[r.jsx(Pt,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-master-text-muted-dark text-sm",children:"We'll text you at"}),r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:o.customer_phone})]})]})}),o.status==="ready"&&r.jsx("div",{className:"border-t border-white/20 pt-6",children:r.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-master-text-primary-dark font-bold mb-2 flex items-center gap-2",children:[r.jsx(pt,{className:"w-5 h-5 text-green-400"}),"You're Next!"]}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Please head to Master Fade barbershop now. Your barber is ready for you!"})]})}),o.status==="waiting"&&r.jsx("div",{className:"border-t border-white/20 pt-6",children:r.jsxs("div",{className:"bg-[#2D0808]0/20 border border-blue-500/30 rounded-lg p-4",children:[r.jsx("h3",{className:"text-master-text-primary-dark font-semibold mb-2",children:"While You Wait"}),r.jsxs("ul",{className:"space-y-1 text-sm text-master-text-secondary-dark",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"We'll text you 5 minutes before your turn"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"This page updates automatically every 15 seconds"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-blue-400 mt-0.5",children:""}),r.jsx("span",{children:"Please arrive within 10 minutes when notified"})]})]})]})})]})}),r.jsxs(he.div,{className:"flex flex-col sm:flex-row gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:[b&&r.jsxs("button",{onClick:m,disabled:u.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-master-text-primary-dark rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[r.jsx(bt,{className:"w-5 h-5"}),"Leave Queue"]}),r.jsxs("button",{onClick:()=>e("/"),className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors flex items-center justify-center gap-2",children:[r.jsx(nl,{className:"w-5 h-5"}),"Back to Home"]})]}),r.jsxs(he.p,{className:"text-center text-master-text-muted-dark text-sm mt-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:["Status updates automatically  Last updated: ",new Date().toLocaleTimeString("en-GB")]})]}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs(he.div,{className:"bg-gradient-to-br from-gray-900 to-black border border-white/20 rounded-2xl p-8 max-w-md w-full shadow-2xl",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[r.jsx(De,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark text-center mb-3",children:"Leave Queue?"}),r.jsx("p",{className:"text-master-text-secondary-dark text-center mb-6",children:"Are you sure you want to leave the queue? You'll lose your current position."}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:p,disabled:u.isPending,className:"flex-1 px-6 py-3 bg-white/10 text-master-text-primary-dark border border-white/30 rounded-lg font-semibold hover:bg-white/20 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:x,disabled:u.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-master-text-primary-dark rounded-lg font-bold hover:bg-red-700 transition-colors disabled:opacity-50",children:u.isPending?"Leaving...":"Yes, Leave"})]})]})})]})},IT=()=>{const[e,t]=xt(),[s,n]=h.useState(e.get("service_filter")||null),[a,i]=h.useState("newest_first"),[o,l]=h.useState(parseInt(e.get("page")||"1",10)),[c,d]=h.useState(!1),[u,m]=h.useState(null),x=20,p=re(O=>O.app_settings.gallery_enabled),j="https://123barber-booking-app-with-ticket-system.launchpulse.ai",{data:f}=ve({queryKey:["services","active"],queryFn:async()=>{const O=await Y.get(`${j}/api/services`,{params:{is_active:!0,sort_by:"display_order",sort_order:"asc"}});return O.data.services||O.data||[]},staleTime:5*60*1e3}),{data:v,isLoading:b}=ve({queryKey:["gallery",s,a,o],queryFn:async()=>{const O={sort_by:"created_at",sort_order:a==="newest_first"?"desc":"asc",limit:x,offset:(o-1)*x};s&&(O.service_id=s);const R=await Y.get(`${j}/api/gallery`,{params:O});return{images:R.data.images||[],total:R.data.total||0,has_more:R.data.has_more||!1}},staleTime:2*60*1e3}),g=(v==null?void 0:v.images)||[],w=(v==null?void 0:v.total)||0;h.useEffect(()=>{const O={};s&&(O.service_filter=s),o>1&&(O.page=o.toString()),t(O,{replace:!0})},[s,o,t]);const N=h.useCallback(O=>{n(O),l(1)},[]),_=h.useCallback(O=>{i(O),l(1)},[]),y=h.useCallback(O=>{l(O),window.scrollTo({top:0,behavior:"smooth"})},[]),S=h.useCallback(O=>{m(O),d(!0)},[]),A=h.useCallback(()=>{d(!1),m(null)},[]),I=h.useCallback(O=>{u!==null&&(O==="prev"&&u>0?m(u-1):O==="next"&&u<g.length-1&&m(u+1))},[u,g.length]);h.useEffect(()=>{if(!c)return;const O=R=>{R.key==="Escape"?A():R.key==="ArrowLeft"?I("prev"):R.key==="ArrowRight"&&I("next")};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[c,A,I]);const F=h.useRef(null),H=O=>{F.current=O.touches[0].clientX},E=O=>{if(F.current===null)return;const R=O.changedTouches[0].clientX,z=F.current-R;Math.abs(z)>50&&(z>0?I("next"):I("prev")),F.current=null},L=Math.ceil(w/x);return p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-master-text-primary-dark leading-tight",children:"Our Work"}),r.jsx("p",{className:"mt-4 text-lg md:text-xl text-master-text-secondary-dark leading-relaxed",children:"Check out our latest styles"})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"service-filter",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Filter by Service"}),r.jsxs("select",{id:"service-filter",value:s||"",onChange:O=>N(O.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200",children:[r.jsx("option",{value:"",children:"All Services"}),f==null?void 0:f.map(O=>r.jsx("option",{value:O.service_id,children:O.name},O.service_id))]})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"sort-order",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Sort Order"}),r.jsxs("select",{id:"sort-order",value:a,onChange:O=>_(O.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200",children:[r.jsx("option",{value:"newest_first",children:"Newest First"}),r.jsx("option",{value:"oldest_first",children:"Oldest First"})]})]})]})}),b&&r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((O,R)=>r.jsx("div",{className:"aspect-square bg-gray-200 rounded-xl animate-pulse"},R))}),!b&&g.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("svg",{className:"mx-auto h-24 w-24 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("h3",{className:"mt-6 text-2xl font-semibold text-master-text-primary-dark",children:"Gallery coming soon!"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"We're adding new photos regularly. Check back soon."})]}),!b&&g.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:g.map((O,R)=>{const z=f==null?void 0:f.find(ee=>ee.service_id===O.service_id);return r.jsxs("div",{className:"group relative aspect-square rounded-xl overflow-hidden shadow-lg border border-gray-100 cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-xl",onClick:()=>S(R),children:[r.jsx("img",{src:O.thumbnail_url,alt:O.caption||"Gallery image",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-110",loading:"lazy"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[O.caption&&r.jsx("p",{className:"text-master-text-primary-dark font-medium text-sm md:text-base mb-1",children:O.caption}),z&&r.jsx("span",{className:"inline-block px-2 py-1 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark text-xs rounded-md",children:z.name})]})]},O.image_id)})}),r.jsxs("div",{className:"text-center text-master-text-secondary-dark mb-6",children:["Showing ",(o-1)*x+1,"-",Math.min(o*x,w)," of ",w]}),L>1&&r.jsxs("div",{className:"flex justify-center items-center gap-2 flex-wrap",children:[r.jsx("button",{onClick:()=>y(o-1),disabled:o===1,className:"px-4 py-2 bg-[#2D0808] rounded-lg border border-white/20 text-master-text-secondary-dark font-medium hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Previous"}),[...Array(Math.min(5,L))].map((O,R)=>{let z;return L<=5||o<=3?z=R+1:o>=L-2?z=L-4+R:z=o-2+R,r.jsx("button",{onClick:()=>y(z),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o===z?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-[#2D0808] border border-white/20 text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:z},z)}),r.jsx("button",{onClick:()=>y(o+1),disabled:o===L,className:"px-4 py-2 bg-[#2D0808] rounded-lg border border-white/20 text-master-text-secondary-dark font-medium hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Next"})]})]})]})}),c&&u!==null&&g[u]&&r.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:A,onTouchStart:H,onTouchEnd:E,children:[r.jsx("button",{onClick:A,className:"absolute top-4 right-4 z-10 p-2 text-master-text-primary-dark hover:text-master-text-secondary-dark transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Close lightbox",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 text-master-text-primary-dark text-lg font-medium bg-black bg-opacity-80 px-4 py-2 rounded-lg",children:[u+1," / ",g.length]}),u>0&&r.jsx("button",{onClick:O=>{O.stopPropagation(),I("prev")},className:"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 text-master-text-primary-dark hover:text-master-text-secondary-dark transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Previous image",children:r.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{className:"max-w-7xl max-h-screen w-full flex flex-col items-center justify-center",onClick:O=>O.stopPropagation(),children:[r.jsx("img",{src:g[u].image_url,alt:g[u].caption||"Gallery image",className:"max-w-full max-h-[80vh] object-contain"}),g[u].caption&&r.jsx("p",{className:"text-master-text-primary-dark text-center mt-4 text-lg font-medium max-w-2xl",children:g[u].caption})]}),u<g.length-1&&r.jsx("button",{onClick:O=>{O.stopPropagation(),I("next")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 text-master-text-primary-dark hover:text-master-text-secondary-dark transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Next image",children:r.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"mx-auto h-16 w-16 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("h2",{className:"mt-4 text-2xl font-bold text-master-text-primary-dark",children:"Gallery Not Available"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"The gallery is currently disabled."}),r.jsx(Z,{to:"/",className:"mt-6 inline-block px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-all duration-200",children:"Return Home"})]})})})},my=Ll({email:mt().email().min(1).max(255),password:mt().min(8).max(100).regex(/^(?=.*[a-zA-Z])(?=.*\d)/,"Password must contain letters and numbers"),name:mt().min(2).max(255).regex(/^[a-zA-Z\s]+$/,"Name must contain only letters and spaces"),phone:mt().min(10).max(20).regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format")}),zT=()=>{const e=Ie(),[t]=xt(),s=t.get("redirect_url"),[n,a]=h.useState({email:"",password:"",name:"",phone:""}),[i,o]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[m,x]=h.useState(!1),[p,j]=h.useState({}),[f,v]=h.useState({score:0,label:"weak",color:"red"}),[b,g]=h.useState(!1),[w,N]=h.useState(!1),_=re(T=>T.authentication_state.authentication_status.is_loading),y=re(T=>T.authentication_state.error_message),S=re(T=>T.register_user),A=re(T=>T.clear_auth_error),I=y,F=h.useCallback(T=>{let P=0;return T.length>=8&&P++,T.length>=12&&P++,/[a-z]/.test(T)&&/[A-Z]/.test(T)&&P++,/\d/.test(T)&&P++,/[^a-zA-Z0-9]/.test(T)&&P++,P<=2?{score:P,label:"weak",color:"red"}:P<=3?{score:P,label:"medium",color:"amber"}:{score:P,label:"strong",color:"green"}},[]),H=h.useCallback(async T=>{if(!T||!mt().email().safeParse(T).success)return!1;N(!0);try{const V=await fetch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/auth/check-email-exists?email=${encodeURIComponent(T)}`);return V.ok&&(await V.json()).exists||!1}catch{return console.warn("Email uniqueness check endpoint not available"),!1}finally{N(!1)}},[]);h.useEffect(()=>{if(!n.email)return;const T=setTimeout(async()=>{const P=await H(n.email);j(P?V=>({...V,email:"Email already registered. Log in instead?"}):V=>{const{email:J,...K}=V;return K})},500);return()=>clearTimeout(T)},[n.email,H]);const E=(T,P)=>{try{my.shape[T].parse(P);return}catch(V){return V instanceof Qt?V.errors[0].message:"Invalid input"}},L=()=>{const T=n.password===i;return g(T),i&&!T?(j(P=>({...P,password_confirm:"Passwords don't match"})),!1):(j(P=>{const{password_confirm:V,...J}=P;return J}),!0)};h.useEffect(()=>{if(n.password){const T=F(n.password);v(T)}else v({score:0,label:"weak",color:"red"})},[n.password,F]),h.useEffect(()=>{if(i&&n.password){const T=n.password===i;g(T),j(i&&!T?P=>({...P,password_confirm:"Passwords don't match"}):P=>{const{password_confirm:V,...J}=P;return J})}},[n.password,i]),h.useEffect(()=>{A()},[A]),h.useEffect(()=>{I&&console.log("Auth error:",I)},[I]);const O=(T,P)=>{a(V=>({...V,[T]:P})),j(V=>{const{[T]:J,...K}=V;return K}),y&&A()},R=T=>{const P=n[T],V=E(T,P);j(V?J=>({...J,[T]:V}):J=>{const{[T]:K,...M}=J;return M})},z=T=>{o(T),j(P=>{const{password_confirm:V,...J}=P;return J})},ee=T=>{x(T),T&&j(P=>{const{terms:V,...J}=P;return J})},C=async T=>{T.preventDefault();const P={},V=my.safeParse(n);if(V.success||V.error.errors.forEach(J=>{const K=J.path[0];P[K]=J.message}),i?n.password!==i&&(P.password_confirm="Passwords don't match"):P.password_confirm="Please confirm your password",m||(P.terms="You must accept the terms to continue"),Object.keys(P).length>0){j(P);return}A();try{await S(n.email,n.password,n.name,n.phone),e("/verify-email",{replace:!0,state:{email:n.email,redirect_url:s||"/dashboard"}})}catch(J){console.error("Registration error:",J)}},k=T=>{alert(`${T.charAt(0).toUpperCase()+T.slice(1)} registration is not available yet. Please use email registration.`)},D=n.email&&n.password&&n.name&&n.phone&&i&&b&&m&&Object.keys(p).length===0&&!w;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full mx-auto space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark leading-tight",children:"Create Your Account"}),r.jsx("p",{className:"mt-2 text-base text-master-text-secondary-dark leading-relaxed",children:"Book faster with saved details and view your history"})]}),r.jsx("div",{className:"bg-[#2D0808] shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[y&&r.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",role:"alert","aria-live":"polite",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(Nt,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm font-medium text-red-400",children:y})})]})}),r.jsxs("form",{onSubmit:C,className:"space-y-6",noValidate:!0,children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-master-text-primary-dark mb-1",children:["Full Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n.name,onChange:T=>O("name",T.target.value),onBlur:()=>R("name"),placeholder:"John Smith","aria-invalid":!!p.name,"aria-describedby":p.name?"name-error":"name-helper",className:`
                      w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                      ${p.name?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}
                      focus:outline-none text-master-text-primary-dark placeholder-master-text-muted-dark
                    `}),p.name?r.jsxs("p",{id:"name-error",className:"mt-1 form-error-text flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.name]}):r.jsx("p",{id:"name-helper",className:"mt-1 text-sm text-master-text-muted-dark",children:"First and last name"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-master-text-primary-dark mb-1",children:["Email Address ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:T=>O("email",T.target.value),onBlur:()=>R("email"),placeholder:"john@example.com","aria-invalid":!!p.email,"aria-describedby":p.email?"email-error":"email-helper",className:`
                        w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                        ${p.email?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}
                        focus:outline-none text-master-text-primary-dark placeholder-master-text-muted-dark
                      `}),w&&r.jsx("div",{className:"absolute right-3 top-3.5",children:r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-red-600 border-t-transparent rounded-full"})})]}),p.email?r.jsxs("p",{id:"email-error",className:"mt-1 form-error-text flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.email]}):r.jsx("p",{id:"email-helper",className:"mt-1 text-sm text-master-text-muted-dark",children:"We'll send a verification email"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-master-text-primary-dark mb-1",children:["Phone Number ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:n.phone,onChange:T=>O("phone",T.target.value),onBlur:()=>R("phone"),placeholder:"+1 (555) 123-4567","aria-invalid":!!p.phone,"aria-describedby":p.phone?"phone-error":"phone-helper",className:`
                      w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                      ${p.phone?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}
                      focus:outline-none text-master-text-primary-dark placeholder-master-text-muted-dark
                    `}),p.phone?r.jsxs("p",{id:"phone-error",className:"mt-1 form-error-text flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.phone]}):r.jsx("p",{id:"phone-helper",className:"mt-1 text-sm text-master-text-muted-dark",children:"For confirmation and reminders"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-master-text-primary-dark mb-1",children:["Create Password ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:T=>O("password",T.target.value),onBlur:()=>R("password"),placeholder:"","aria-invalid":!!p.password,"aria-describedby":p.password?"password-error":"password-helper",className:`
                        w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200
                        ${p.password?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}
                        focus:outline-none text-master-text-primary-dark placeholder-master-text-muted-dark
                      `}),r.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-3 text-master-text-muted-dark hover:text-master-text-secondary-dark focus:outline-none focus:text-master-text-secondary-dark transition-colors","aria-label":l?"Hide password":"Show password",children:l?r.jsx(Ei,{className:"h-5 w-5"}):r.jsx(Dn,{className:"h-5 w-5"})})]}),n.password&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs font-medium text-master-text-secondary-dark",children:"Password strength:"}),r.jsx("span",{className:`text-xs font-semibold ${f.color==="red"?"text-red-600":f.color==="amber"?"text-amber-600":"text-green-600"}`,children:f.label.charAt(0).toUpperCase()+f.label.slice(1)})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${f.color==="red"?"bg-red-500":f.color==="amber"?"bg-amber-500":"bg-green-500"}`,style:{width:`${f.score/5*100}%`}})})]}),p.password?r.jsxs("p",{id:"password-error",className:"mt-1 form-error-text flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.password]}):r.jsx("p",{id:"password-helper",className:"mt-1 text-sm text-master-text-muted-dark",children:"Minimum 8 characters, include letters and numbers"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"password_confirm",className:"block text-sm font-medium text-master-text-primary-dark mb-1",children:["Confirm Password ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password_confirm",name:"password_confirm",type:d?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:T=>z(T.target.value),onBlur:L,placeholder:"","aria-invalid":!!p.password_confirm,"aria-describedby":p.password_confirm?"password-confirm-error":"password-confirm-helper",className:`
                        w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200
                        ${p.password_confirm?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":b&&i?"border-green-300 focus:border-green-500 focus:ring-4 focus:ring-green-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}
                        focus:outline-none text-master-text-primary-dark placeholder-master-text-muted-dark
                      `}),r.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-3 text-master-text-muted-dark hover:text-master-text-secondary-dark focus:outline-none focus:text-master-text-secondary-dark transition-colors","aria-label":d?"Hide password":"Show password",children:d?r.jsx(Ei,{className:"h-5 w-5"}):r.jsx(Dn,{className:"h-5 w-5"})}),b&&i&&r.jsx("div",{className:"absolute right-12 top-3.5",children:r.jsx(pt,{className:"h-5 w-5 text-green-600"})})]}),p.password_confirm?r.jsxs("p",{id:"password-confirm-error",className:"mt-1 form-error-text flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.password_confirm]}):r.jsx("p",{id:"password-confirm-helper",className:"mt-1 text-sm text-master-text-muted-dark",children:"Re-enter your password"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:m,onChange:T=>ee(T.target.checked),"aria-invalid":!!p.terms,"aria-describedby":p.terms?"terms-error":void 0,className:"h-5 w-5 rounded border-white/20 text-amber-400 focus:ring-4 focus:ring-red-100 focus:ring-offset-0 transition-all cursor-pointer"})}),r.jsx("div",{className:"ml-3",children:r.jsxs("label",{htmlFor:"terms",className:"text-sm text-master-text-secondary-dark cursor-pointer",children:["I agree to the"," ",r.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-amber-400 hover:text-blue-700 font-medium underline",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-amber-400 hover:text-blue-700 font-medium underline",children:"Privacy Policy"})," ",r.jsx("span",{className:"text-red-600",children:"*"})]})})]}),p.terms&&r.jsxs("p",{id:"terms-error",className:"mt-1 ml-8 text-sm text-red-600 flex items-center",children:[r.jsx(Nt,{className:"h-4 w-4 mr-1"}),p.terms]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:!D||_,className:`
                      w-full px-6 py-3 rounded-lg font-medium text-white
                      transition-all duration-200
                      ${D&&!_?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-lg hover:shadow-xl cursor-pointer":"bg-gray-400 cursor-not-allowed opacity-50"}
                      focus:outline-none focus:ring-4 focus:ring-red-100
                      flex items-center justify-center
                    `,"aria-busy":_,children:_?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating account..."]}):"Create Account"})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-white/20"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-[#2D0808] text-master-text-muted-dark",children:"Or sign up with"})})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>k("google"),className:"w-full inline-flex justify-center items-center px-4 py-3 border border-white/20 rounded-lg shadow-sm bg-[#2D0808] text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200",children:[r.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),r.jsxs("button",{type:"button",onClick:()=>k("facebook"),className:"w-full inline-flex justify-center items-center px-4 py-3 border border-white/20 rounded-lg shadow-sm bg-[#2D0808] text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:["Already have an account?"," ",r.jsx(Z,{to:"/login",className:"text-amber-400 hover:text-blue-700 font-medium underline transition-colors",children:"Log in"})]})})]})})]})})})},VT=()=>{const[e]=xt(),t=Ie(),s=e.get("redirect_url")||"/dashboard",n=re(C=>C.authentication_state.authentication_status.is_loading),a=re(C=>C.authentication_state.error_message),i=re(C=>C.authentication_state.authentication_status.is_authenticated),o=re(C=>C.login_user),l=re(C=>C.register_user),c=re(C=>C.clear_auth_error),[d,u]=h.useState(!0),[m,x]=h.useState({email:"",password:"",name:"",phone:""}),[p,j]=h.useState(!1),[f,v]=h.useState(!1),[b,g]=h.useState({});h.useEffect(()=>{if(i){const C=setTimeout(()=>{t(s,{replace:!0})},1500);return()=>clearTimeout(C)}},[i,t,s]);const w=C=>{if(!C)return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C))return"Please enter a valid email address"},N=C=>{if(!C)return"Password is required";if(!d&&C.length<8)return"Password must be at least 8 characters"},_=C=>{if(!C)return"Name is required";if(C.length<2)return"Name must be at least 2 characters"},y=C=>{if(!C)return"Phone is required";if(C.length<10)return"Invalid phone number"},S=()=>{const C=w(m.email);g(k=>({...k,email:C}))},A=()=>{const C=N(m.password);g(k=>({...k,password:C}))},I=()=>{const C=_(m.name);g(k=>({...k,name:C}))},F=()=>{const C=y(m.phone);g(k=>({...k,phone:C}))},H=async C=>{if(C.preventDefault(),c(),g({}),d){const k=w(m.email),D=N(m.password);if(k||D){g({email:k,password:D});return}try{await o(m.email,m.password)}catch(T){console.error("Login error:",T);const P=T instanceof Error?T.message:"Login failed";Ti.error(P)}}else{const k=w(m.email),D=N(m.password),T=_(m.name),P=y(m.phone);if(k||D||T||P){g({email:k,password:D,name:T,phone:P});return}try{await l(m.email,m.password,m.name,m.phone)}catch(V){console.error("Registration error:",V);const J=V instanceof Error?V.message:"Registration failed";Ti.error(J)}}},E=C=>{alert(`${C.charAt(0).toUpperCase()+C.slice(1)} login coming soon`)},L=()=>{u(!d),g({}),c(),x({email:"",password:"",name:"",phone:""})},R=(d?m.email&&m.password&&!b.email&&!b.password:m.email&&m.password&&m.name&&m.phone&&!b.email&&!b.password&&!b.name&&!b.phone)&&!n,ee=(()=>{if(!a)return null;const C=a.toLowerCase();return C.includes("verified")||C.includes("verify")?{type:"warning",message:a,showResend:!0}:C.includes("locked")||C.includes("attempts")?{type:"error",message:a,showRetry:!1}:C.includes("connection")||C.includes("network")?{type:"error",message:a,showRetry:!0}:{type:"error",message:a,showRetry:!1}})();return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold text-master-text-primary-dark leading-tight",children:d?"Welcome Back":"Create Your Account"}),r.jsx("p",{className:"mt-2 text-base text-master-text-secondary-dark",children:d?"Sign in to access your dashboard and bookings":"Register to book faster and view your history"})]}),ee&&r.jsx("div",{className:`rounded-xl p-4 border ${ee.type==="warning"?"bg-amber-900/20 border-amber-500/30":"bg-red-900/20 border-red-500/30"}`,role:"alert","aria-live":"polite",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(De,{className:`size-5 mt-0.5 mr-3 flex-shrink-0 ${ee.type==="warning"?"text-amber-400":"text-red-400"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm ${ee.type==="warning"?"text-amber-300":"text-red-300"}`,children:ee.message}),ee.showResend&&r.jsx("button",{type:"button",className:"mt-2 text-sm font-medium text-amber-400 hover:text-amber-300 underline",onClick:()=>{alert("Resend verification email - to be implemented")},children:"Resend verification link"}),ee.showRetry&&r.jsx("button",{type:"button",className:"mt-2 text-sm font-medium text-red-400 hover:text-red-300 underline",onClick:()=>c(),children:"Try again"})]})]})}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-8 py-8",children:[r.jsxs("form",{onSubmit:H,className:"space-y-6",noValidate:!0,children:[!d&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Full Name"}),r.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:m.name,onChange:C=>{x(k=>({...k,name:C.target.value})),g(k=>({...k,name:void 0}))},onBlur:I,placeholder:"Full Name",className:`block w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 bg-white/90 ${b.name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"} text-gray-900 placeholder-gray-500 focus:outline-none`,"aria-invalid":b.name?"true":"false","aria-describedby":b.name?"name-error":void 0}),b.name&&r.jsx("p",{id:"name-error",className:"mt-2 form-error-text",role:"alert",children:b.name})]}),!d&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Phone Number"}),r.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:m.phone,onChange:C=>{x(k=>({...k,phone:C.target.value})),g(k=>({...k,phone:void 0}))},onBlur:F,placeholder:"Phone Number",className:`block w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 bg-white/90 ${b.phone?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"} text-gray-900 placeholder-gray-500 focus:outline-none`,"aria-invalid":b.phone?"true":"false","aria-describedby":b.phone?"phone-error":void 0}),b.phone&&r.jsx("p",{id:"phone-error",className:"mt-2 form-error-text",role:"alert",children:b.phone})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx($t,{className:"size-5 text-gray-500"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:m.email,onChange:C=>{x(k=>({...k,email:C.target.value})),g(k=>({...k,email:void 0})),a&&!n&&c()},onBlur:S,placeholder:"Email Address",className:`block w-full pl-10 pr-4 py-3 rounded-lg border-2 transition-all duration-200 bg-white/90 ${b.email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"} text-gray-900 placeholder-gray-500 focus:outline-none`,"aria-invalid":b.email?"true":"false","aria-describedby":b.email?"email-error":void 0})]}),b.email&&r.jsx("p",{id:"email-error",className:"mt-2 form-error-text",role:"alert",children:b.email})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-master-text-primary-dark",children:"Password"}),d&&r.jsx(Z,{to:"/reset-password",className:"text-sm font-medium text-amber-400 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(cu,{className:"size-5 text-gray-500"})}),r.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:d?"current-password":"new-password",required:!0,value:m.password,onChange:C=>{x(k=>({...k,password:C.target.value})),g(k=>({...k,password:void 0})),a&&!n&&c()},onBlur:A,placeholder:"Password",className:`block w-full pl-10 pr-12 py-3 rounded-lg border-2 transition-all duration-200 bg-white/90 ${b.password?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"} text-gray-900 placeholder-gray-500 focus:outline-none`,"aria-invalid":b.password?"true":"false","aria-describedby":b.password?"password-error":void 0}),r.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 transition-colors","aria-label":f?"Hide password":"Show password",children:f?r.jsx(Ei,{className:"size-5"}):r.jsx(Dn,{className:"size-5"})})]}),b.password&&r.jsx("p",{id:"password-error",className:"mt-2 form-error-text",role:"alert",children:b.password})]}),d&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:p,onChange:C=>j(C.target.checked),className:"h-4 w-4 rounded border-white/20 text-amber-400 focus:ring-red-500 transition-colors cursor-pointer"}),r.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-master-text-secondary-dark cursor-pointer",children:"Remember me for 30 days"})]}),r.jsx("button",{type:"submit",disabled:!R,className:"w-full flex justify-center items-center px-6 py-3 rounded-lg font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gradient-to-r from-red-600 to-red-700 disabled:hover:shadow-lg",children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-master-text-primary-dark",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Signing in...":"Creating account..."]}):d?"Sign In":"Create Account"})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-white/10"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-[#2D0808] text-master-text-muted-dark",children:"Or log in with"})})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>E("google"),disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-white/20 rounded-lg shadow-sm bg-[#2D0808] text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Coming soon",children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),r.jsxs("button",{type:"button",onClick:()=>E("facebook"),disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-white/20 rounded-lg shadow-sm bg-[#2D0808] text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Coming soon",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]})]}),r.jsx("div",{className:"px-8 py-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] border-t border-gray-100",children:r.jsx("div",{className:"text-center text-sm text-master-text-secondary-dark",children:r.jsx("button",{type:"button",onClick:L,className:"font-medium text-amber-400 hover:text-blue-700 transition-colors","aria-label":d?"Don't have an account? Sign up":"Already have an account? Sign in",children:d?"Don't have an account? Sign up":"Already have an account? Sign in"})})})]}),r.jsxs("p",{className:"text-center text-xs text-master-text-muted-dark",children:["By signing in, you agree to our"," ",r.jsx("a",{href:"#",className:"text-amber-400 hover:text-blue-700 underline",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"#",className:"text-amber-400 hover:text-blue-700 underline",children:"Privacy Policy"})]})]})})})},hy=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",UT=()=>{var A,I,F,H,E,L,O,R,z,ee,C;const t=(A=zs().state)==null?void 0:A.email,s=re(k=>{var D;return(D=k.authentication_state.current_user)==null?void 0:D.email}),n=re(k=>k.authentication_state.auth_token),a=re(k=>k.update_current_user),i=s||t,[o,l]=h.useState(!1),[c,d]=h.useState(60),[u,m]=h.useState(null),[x,p]=h.useState(!1),[j,f]=h.useState(""),[v,b]=h.useState(0);h.useEffect(()=>{let k=null;return c>0&&(k=setInterval(()=>{d(D=>D<=1?(l(!0),0):D-1)},1e3)),()=>{k&&clearInterval(k)}},[c]);const g=ye({mutationFn:async k=>(await Y.post(`${hy()}/api/auth/resend-verification`,k,{headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}})).data});h.useEffect(()=>{g.isSuccess&&(d(60),l(!1),b(k=>k+1),m("Verification email sent! Check your inbox."),setTimeout(()=>{m(null)},5e3)),g.isError&&console.error("Resend verification failed:",g.error)},[g.isSuccess,g.isError,g.error]);const w=ye({mutationFn:async k=>{if(!n)throw new Error("Not authenticated");return(await Y.patch(`${hy()}/api/auth/me`,k,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).data}});h.useEffect(()=>{w.isSuccess&&w.data&&(a({email:w.data.user.email}),p(!1),f(""),m(`Verification email sent to new address: ${w.data.user.email}`),d(60),l(!1),b(0),setTimeout(()=>{m(null)},5e3)),w.isError&&console.error("Change email failed:",w.error)},[w.isSuccess,w.isError,w.error,w.data,a]);const N=()=>{if(!i){console.error("No user email available");return}g.mutate({email:i})},_=k=>{k.preventDefault(),!(!j||!j.trim())&&w.mutate({email:j.trim()})},y=()=>{f(i||""),p(!0)},S=()=>{p(!1),f(""),w.reset()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#2D0808] rounded-full mb-4",children:r.jsx($t,{className:"w-8 h-8 text-amber-400"})}),r.jsx("h1",{className:"text-2xl font-bold text-master-text-primary-dark",children:"Verify Your Email"})]}),r.jsxs("div",{className:"px-6 py-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("p",{className:"text-master-text-primary-dark text-lg font-medium mb-2",children:"We sent a verification link to"}),r.jsx("p",{className:"text-amber-400 font-semibold text-lg break-all",children:i||"your email"})]}),r.jsxs("div",{className:"bg-[#2D0808] border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("p",{className:"text-blue-900 text-sm mb-2",children:"Click the link in the email to activate your account."}),r.jsx("p",{className:"text-blue-700 text-sm",children:"Check your spam folder if you don't see it within a few minutes."})]}),u&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-start",children:[r.jsx(pt,{className:"w-5 h-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-green-400 text-sm font-medium",children:u})]}),g.isError&&!u&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[r.jsx(De,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-red-400 text-sm font-medium",children:((E=(H=(F=(I=g.error)==null?void 0:I.response)==null?void 0:F.data)==null?void 0:H.error)==null?void 0:E.message)||((L=g.error)==null?void 0:L.message)||"Failed to send verification email. Please try again."})})]}),w.isError&&x&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[r.jsx(De,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-red-400 text-sm font-medium",children:((ee=(z=(R=(O=w.error)==null?void 0:O.response)==null?void 0:R.data)==null?void 0:z.error)==null?void 0:ee.message)||((C=w.error)==null?void 0:C.message)||"Failed to update email. Please try again."})})]}),r.jsxs("div",{className:"border-t border-white/10 pt-6",children:[r.jsx("p",{className:"text-master-text-secondary-dark font-medium mb-4",children:"Didn't receive the email?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("p",{className:"text-master-text-secondary-dark text-sm flex items-start",children:[r.jsx("span",{className:"text-amber-400 mr-2",children:""}),"Check your spam or junk folder"]}),r.jsx("button",{onClick:N,disabled:!o||g.isPending,className:`w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-all duration-200 ${o&&!g.isPending?"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark shadow-lg hover:shadow-xl":"bg-gray-100 text-master-text-muted-dark cursor-not-allowed"}`,children:g.isPending?r.jsxs(r.Fragment,{children:[r.jsx(al,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):o?r.jsxs(r.Fragment,{children:[r.jsx($t,{className:"w-4 h-4 mr-2"}),"Resend verification email"]}):r.jsxs(r.Fragment,{children:[r.jsx($t,{className:"w-4 h-4 mr-2"}),"You can resend in ",c,"s"]})}),v>=3&&r.jsxs("p",{className:"text-amber-700 text-sm bg-amber-50 border border-amber-200 rounded-lg p-3",children:["Still not receiving? Contact support at"," ",r.jsx("a",{href:"tel:+15551234567",className:"font-medium underline",children:"+1 (555) 123-4567"})]}),r.jsx("button",{onClick:y,className:"w-full text-amber-400 hover:text-blue-700 text-sm font-medium transition-colors",children:"Change email address"})]})]})]})]}),r.jsx("p",{className:"text-center text-master-text-secondary-dark text-sm mt-6 px-4",children:"For security reasons, please keep this page open while you check your email."})]})}),x&&r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 transition-opacity",onClick:S}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-[#2D0808] rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsx("button",{onClick:S,className:"absolute top-4 right-4 text-master-text-muted-dark hover:text-master-text-secondary-dark transition-colors","aria-label":"Close modal",children:r.jsx(bt,{className:"w-6 h-6"})}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Change Email Address"}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"new-email",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"New Email Address"}),r.jsx("input",{id:"new-email",name:"new-email",type:"email",required:!0,value:j,onChange:k=>f(k.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all outline-none"}),r.jsx("p",{className:"text-master-text-muted-dark text-sm mt-2",children:"A new verification email will be sent to this address."})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:S,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-master-text-primary-dark rounded-lg font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w.isPending||!j.trim(),className:"flex-1 px-4 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:w.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx(al,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Email"})]})]})]})})]})]})},WT=()=>{var w,N;const[e]=xt(),t=Ie(),s=e.get("token")||"",[n,a]=h.useState(!1),[i,o]=h.useState(!1),l=re(_=>_.booking_context),c=re(_=>_.initialize_auth),d=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",u=_=>({id:_.user_id,email:_.email,name:_.name,phone:_.phone,is_verified:_.is_verified,created_at:_.created_at}),m=(_,y)=>{const A={state:{authentication_state:{current_user:_,auth_token:y,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null},booking_context:l},version:0};try{return localStorage.setItem("barberslot-storage",JSON.stringify(A)),!0}catch(I){return console.error("Failed to update persisted auth state:",I),!1}},x=ye({mutationFn:async _=>(await Y.post(`${d()}/api/auth/verify-email`,_,{headers:{"Content-Type":"application/json"}})).data,onSuccess:_=>{const y=u(_.user);_.token?m(y,_.token)&&(a(!0),setTimeout(async()=>{await c(),a(!1)},2e3)):(a(!0),setTimeout(()=>a(!1),3e3))},onError:_=>{console.error("Email verification failed:",_)}});h.useEffect(()=>{s?x.mutate({verification_token:s}):x.mutate({verification_token:"invalid"})},[s,x]);const p=l.step_completed>0,j=((w=x.data)==null?void 0:w.user.name.split(" ")[0])||"there",f=((N=x.data)==null?void 0:N.user.email)||"",v=()=>{o(!0),setTimeout(()=>{t("/dashboard")},500)},b=()=>{o(!0);const _=l.step_completed;let y="/book/service";_>=4?y="/book/review":_>=3?y="/book/details":_>=2?y="/book/time":_>=1&&(y="/book/date"),setTimeout(()=>{t(y)},500)},g=()=>{o(!0),setTimeout(()=>{t("/book/service")},500)};return x.isPending?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mb-6 relative",children:r.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto animate-pulse",children:r.jsx(Po,{className:"w-12 h-12 animate-spin text-amber-400",strokeWidth:2.5})})}),r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-master-text-primary-dark mb-3",children:"Verifying Your Email..."}),r.jsx("p",{className:"text-master-text-secondary-dark text-lg",children:"Please wait while we confirm your account"}),r.jsxs("div",{className:"mt-6 flex justify-center space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-red-600 to-red-700 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-red-600 to-red-700 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-red-600 to-red-700 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})}):x.isError||!s?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-4 py-12",children:r.jsx("div",{className:"max-w-md w-full",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-red-100 overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 px-8 py-10 text-center",children:[r.jsx("div",{className:"mb-4",children:r.jsx(De,{className:"w-16 h-16 text-master-text-primary-dark mx-auto",strokeWidth:2})}),r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-master-text-primary-dark mb-2",children:"Verification Failed"})]}),r.jsxs("div",{className:"px-8 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-red-400 text-sm leading-relaxed",children:r.jsx("strong",{className:"font-semibold",children:"The verification link is invalid or has expired."})}),r.jsx("p",{className:"text-red-300 text-sm mt-2",children:"This can happen if:"}),r.jsxs("ul",{className:"text-red-300 text-sm mt-2 ml-4 list-disc space-y-1",children:[r.jsx("li",{children:"The link is more than 24 hours old"}),r.jsx("li",{children:"The link has already been used"}),r.jsx("li",{children:"The link was copied incorrectly"})]})]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Z,{to:"/login",className:"block w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-semibold text-center hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:"Go to Login"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark text-center px-4",children:"You can request a new verification email from the login page"}),r.jsx("div",{className:"pt-3 border-t border-white/10",children:r.jsx(Z,{to:"/",className:"block text-center text-master-text-secondary-dark hover:text-master-text-primary-dark text-sm font-medium transition-colors",children:" Return to Home"})})]})]})]})})})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 px-4 py-12",children:r.jsxs("div",{className:"max-w-2xl w-full",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-xl border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 px-8 py-12 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-[#2D0808] opacity-10 rounded-full -translate-x-16 -translate-y-16"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-[#2D0808] opacity-10 rounded-full translate-x-20 translate-y-20"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"mb-6 inline-block",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-[#2D0808] opacity-20 rounded-full animate-ping"}),r.jsx(pt,{className:"w-20 h-20 text-master-text-primary-dark relative z-10 animate-bounce",strokeWidth:2.5,fill:"rgba(255,255,255,0.2)"})]})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark mb-3 leading-tight",children:"Email Verified!"}),r.jsx("p",{className:"text-lg md:text-xl text-green-50 mb-3 leading-relaxed",children:"Your account is now active and ready to use"}),r.jsxs("p",{className:"text-xl md:text-2xl font-semibold text-master-text-primary-dark",children:["Welcome to BarberSlot, ",j,"!"]})]})]}),r.jsxs("div",{className:"px-6 sm:px-8 py-10",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-5 text-center",children:"What you can do now:"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-5 border border-blue-200 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center shadow-lg",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-master-text-primary-dark mb-1",children:"Faster Booking"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark leading-relaxed",children:"Your details are saved for quick appointments"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-5 border border-purple-200 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg flex items-center justify-center shadow-lg",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-master-text-primary-dark mb-1",children:"Booking History"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark leading-relaxed",children:"Track all your past and upcoming visits"})]})]})}),r.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-5 border border-amber-200 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-lg flex items-center justify-center shadow-lg",children:r.jsx("svg",{className:"w-5 h-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-master-text-primary-dark mb-1",children:"Easy Management"}),r.jsx("p",{className:"text-xs text-master-text-secondary-dark leading-relaxed",children:"Cancel or reschedule appointments anytime"})]})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[p?r.jsx("button",{onClick:b,disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-master-text-primary-dark px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Po,{className:"w-5 h-5 mr-2 animate-spin"}),"Redirecting..."]}):r.jsxs(r.Fragment,{children:["Continue Booking",r.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}):r.jsx("button",{onClick:v,disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-master-text-primary-dark px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Po,{className:"w-5 h-5 mr-2 animate-spin"}),"Redirecting..."]}):r.jsxs(r.Fragment,{children:["Continue to Dashboard",r.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),!p&&r.jsxs("button",{onClick:g,disabled:i,className:"w-full bg-[#2D0808] text-amber-400 px-8 py-4 rounded-lg font-semibold text-lg border-2 border-red-600 hover:bg-[#2D0808] transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Book Your First Appointment"]}),r.jsx("div",{className:"text-center pt-2",children:r.jsxs(Z,{to:"/",className:"text-master-text-secondary-dark hover:text-master-text-primary-dark text-sm font-medium transition-colors inline-flex items-center group",children:[r.jsx("svg",{className:"w-4 h-4 mr-1 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Home"]})})]})]})]}),f&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx("div",{className:"bg-[#2D0808] bg-opacity-80 backdrop-blur-sm rounded-lg px-6 py-4 border border-white/10 shadow-sm",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark leading-relaxed",children:[r.jsxs("span",{className:"inline-flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1.5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"A confirmation email has been sent to"]}),r.jsx("br",{}),r.jsx("span",{className:"font-semibold text-master-text-primary-dark",children:f})]})})})]})}),n&&r.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-in-right",children:r.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-master-text-primary-dark px-6 py-4 rounded-lg shadow-2xl border border-green-500 flex items-center space-x-3 max-w-sm",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(pt,{className:"w-6 h-6",strokeWidth:2.5})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm",children:"Account verified successfully!"}),r.jsx("p",{className:"text-xs text-green-100 mt-0.5",children:"You're all set to start booking"})]})]})}),r.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})},qT=Ll({email:mt().email("Please enter a valid email address")}),HT=async e=>(await Y.post("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/auth/request-password-reset",e,{headers:{"Content-Type":"application/json"}})).data,KT=()=>{const[e,t]=h.useState(""),[s,n]=h.useState(null),[a,i]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(60),[u,m]=h.useState(0),x=h.useRef(null),p=ye({mutationFn:HT,onSuccess:()=>{i(!0),w()},onError:y=>{Y.isAxiosError(y)&&!y.response?n("Network error. Please check your connection and try again."):(i(!0),w())}}),j=y=>{try{return qT.parse({email:y}),n(null),!0}catch(S){return S instanceof Qt&&n(S.errors[0].message),!1}},f=y=>{const S=y.target.value;t(S),s&&n(null)},v=()=>{e.trim()&&j(e)},b=async y=>{y.preventDefault(),j(e)&&p.mutate({email:e.trim()})},g=()=>{o&&(m(y=>y+1),l(!1),d(60),p.mutate({email:e.trim()}))},w=()=>{l(!1),d(60),x.current&&clearInterval(x.current),x.current=setInterval(()=>{d(y=>y<=1?(l(!0),x.current&&(clearInterval(x.current),x.current=null),0):y-1)},1e3)};h.useEffect(()=>()=>{x.current&&clearInterval(x.current)},[]);const N=e.trim().length>0&&!s,_=p.isPending;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"px-6 py-8 sm:px-8 bg-gradient-to-br from-green-50 to-emerald-50 border-b border-green-100",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center animate-scale-in",children:r.jsx(i2,{className:"w-10 h-10 text-master-text-primary-dark"})})}),r.jsx("h2",{className:"text-center text-3xl font-bold text-master-text-primary-dark leading-tight",children:"Check Your Email"}),r.jsx("p",{className:"mt-3 text-center text-base text-master-text-secondary-dark leading-relaxed",children:"We sent a password reset link to"}),r.jsx("p",{className:"mt-2 text-center text-lg font-semibold text-amber-400",children:e})]}),r.jsxs("div",{className:"px-6 py-8 sm:px-8 space-y-6",children:[r.jsxs("div",{className:"bg-[#2D0808] border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-900 font-medium mb-2",children:"The link expires in 1 hour"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Click the link in the email to create your new password. If you don't see the email, check your spam folder."})]}),r.jsxs("div",{className:"border-t border-white/10 pt-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-master-text-primary-dark mb-3",children:"Didn't receive it?"}),r.jsxs("ul",{className:"space-y-2 mb-4",children:[r.jsxs("li",{className:"flex items-start text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),r.jsx("span",{children:"Check your spam or junk folder"})]}),r.jsxs("li",{className:"flex items-start text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),r.jsx("span",{children:"Make sure you entered the correct email address"})]}),r.jsxs("li",{className:"flex items-start text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),r.jsx("span",{children:"Wait a few minutes for the email to arrive"})]})]}),r.jsx("button",{type:"button",onClick:g,disabled:!o||_,className:"w-full flex items-center justify-center px-4 py-2.5 rounded-lg font-medium text-amber-400 bg-[#2D0808] hover:bg-blue-100 border border-blue-200 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-[#2D0808]",children:_?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-amber-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):!o&&c>0?r.jsxs(r.Fragment,{children:["Resend in ",c,"s"]}):r.jsxs(r.Fragment,{children:[r.jsx($t,{className:"w-4 h-4 mr-2"}),"Resend reset link"]})}),u>0&&r.jsx("p",{className:"mt-3 text-xs text-master-text-muted-dark text-center",children:u===1?"1 resend attempt":`${u} resend attempts`})]}),r.jsx("div",{className:"border-t border-white/10 pt-6",children:r.jsxs(Z,{to:"/login",className:"w-full flex items-center justify-center px-4 py-2.5 rounded-lg font-medium text-master-text-secondary-dark bg-gray-100 hover:bg-gray-200 border border-white/20 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:[r.jsx(Zh,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"px-6 py-8 sm:px-8 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-100",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-600 to-red-700 rounded-full flex items-center justify-center",children:r.jsx($t,{className:"w-8 h-8 text-master-text-primary-dark"})})}),r.jsx("h2",{className:"text-center text-3xl font-bold text-master-text-primary-dark leading-tight",children:"Reset Your Password"}),r.jsx("p",{className:"mt-3 text-center text-base text-master-text-secondary-dark leading-relaxed",children:"Enter your email and we'll send you a reset link"})]}),r.jsx("div",{className:"px-6 py-8 sm:px-8",children:r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Email Address ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:f,onBlur:v,placeholder:"john@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${s?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"} text-master-text-primary-dark placeholder-master-text-muted-dark focus:outline-none`,disabled:_}),s&&r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx(De,{className:"h-5 w-5 text-red-500"})})]}),s&&r.jsxs("p",{className:"mt-2 form-error-text flex items-center",role:"alert",children:[r.jsx(De,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-muted-dark",children:"We'll send a password reset link to this email address"})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:!N||_,className:"w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gradient-to-r from-red-600 to-red-700 disabled:hover:shadow-lg",children:_?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-master-text-primary-dark",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx($t,{className:"w-5 h-5 mr-2"}),"Send Reset Link"]})})}),r.jsx("div",{className:"text-center",children:r.jsxs(Z,{to:"/login",className:"inline-flex items-center text-sm font-medium text-amber-400 hover:text-blue-700 transition-colors",children:[r.jsx(Zh,{className:"w-4 h-4 mr-1"}),"Back to Login"]})})]})})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:["Need help?"," ",r.jsx("a",{href:"tel:+15551234567",className:"font-medium text-amber-400 hover:text-blue-700 transition-colors",children:"Contact support"})]})})]})}),r.jsx("style",{children:`
        @keyframes scale-in {
          0% {
            transform: scale(0);
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
          }
        }
        .animate-scale-in {
          animation: scale-in 0.5s ease-out;
        }
      `})]})},GT=e=>{if(!e)return{level:"weak",score:0,feedback:"Enter a password"};let t=0;const s=/[a-z]/.test(e),n=/[A-Z]/.test(e),a=/\d/.test(e),i=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e.length>=8&&(t+=1),s&&(t+=1),n&&(t+=1),a&&(t+=1),i&&(t+=1),t<=2?{level:"weak",score:t,feedback:"Weak - Add more variety"}:t<=4?{level:"medium",score:t,feedback:"Medium - Good password"}:{level:"strong",score:t,feedback:"Strong - Excellent!"}},QT=e=>({min_length:e.length>=8,has_letters:/[a-zA-Z]/.test(e),has_numbers:/\d/.test(e)}),YT=()=>{const e=Ie(),[t]=xt(),s=t.get("token")||"",[n,a]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState({new_password:!1,confirm_password:!1}),[d,u]=h.useState({}),m=h.useMemo(()=>GT(n),[n]),x=h.useMemo(()=>QT(n),[n]);h.useEffect(()=>{s||u({token:"No reset token found. Please request a new password reset link."})},[s]);const p=ye({mutationFn:async y=>(await Y.post("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/auth/reset-password",y,{headers:{"Content-Type":"application/json"}})).data,onSuccess:()=>{e("/reset-password/success")},onError:y=>{var F,H,E,L,O,R;const S=(E=(H=(F=y.response)==null?void 0:F.data)==null?void 0:H.error)==null?void 0:E.code,A=(R=(O=(L=y.response)==null?void 0:L.data)==null?void 0:O.error)==null?void 0:R.message,I={};S==="INVALID_TOKEN"?I.token="Reset link is invalid or expired. Please request a new one.":S==="TOKEN_EXPIRED"?I.token="Reset link has expired. Please request a new one.":S==="TOKEN_USED"?I.token="This reset link has already been used. Please request a new one.":S==="WEAK_PASSWORD"?I.new_password=A||"Password does not meet security requirements.":I.new_password="Failed to reset password. Please try again.",u(I)}}),j=()=>{const y={};return s?(x.min_length?x.has_letters?x.has_numbers||(y.new_password="Password must contain numbers."):y.new_password="Password must contain letters.":y.new_password="Password must be at least 8 characters long.",n!==i&&(y.confirm_password="Passwords do not match."),u(y),Object.keys(y).length===0):(y.token="No reset token found.",u(y),!1)},f=async y=>{y.preventDefault(),u({}),j()&&p.mutate({reset_token:s,new_password:n})},v=y=>{c(S=>({...S,[y]:!S[y]}))},b=()=>{u(i&&n!==i?y=>({...y,confirm_password:"Passwords do not match."}):y=>{const{confirm_password:S,...A}=y;return A})},g=s&&x.min_length&&x.has_letters&&x.has_numbers&&n===i&&n.length>0&&i.length>0,w=p.isPending,N=y=>{switch(y){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500";default:return"bg-gray-300"}},_=y=>{switch(y){case"weak":return"text-red-300";case"medium":return"text-yellow-300";case"strong":return"text-green-300";default:return"text-master-text-muted-dark"}};return d.token&&!s?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-12 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-md w-full space-y-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:r.jsx(De,{className:"h-8 w-8 text-red-600"})}),r.jsx("h2",{className:"text-3xl font-bold text-master-text-primary-dark mb-2",children:"Invalid Reset Link"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:d.token}),r.jsx(Z,{to:"/reset-password",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Request New Reset Link"})]})})})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-master-text-primary-dark mb-2",children:"Create New Password"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Enter your new password below. Make sure it's strong and secure."})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[d.token&&s&&r.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(De,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-red-400 font-medium",children:d.token}),r.jsx(Z,{to:"/reset-password",className:"text-sm text-red-600 hover:text-red-300 font-medium underline mt-2 inline-block",children:"Request a new reset link "})]})]})}),r.jsxs("form",{onSubmit:f,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"new_password",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["New Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l.new_password?"text":"password",id:"new_password",value:n,onChange:y=>{a(y.target.value),u(S=>{const{new_password:A,...I}=S;return I})},placeholder:"Enter new password",className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-red-100 ${d.new_password?"border-red-300 focus:border-red-500":"border-white/20 focus:border-blue-500"}`,disabled:w,"aria-invalid":!!d.new_password,"aria-describedby":d.new_password?"new_password_error":"new_password_helper"}),r.jsx("button",{type:"button",onClick:()=>v("new_password"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-master-text-muted-dark hover:text-master-text-secondary-dark transition-colors","aria-label":l.new_password?"Hide password":"Show password",children:l.new_password?r.jsx(Ei,{className:"h-5 w-5"}):r.jsx(Dn,{className:"h-5 w-5"})})]}),n&&r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs font-medium text-master-text-secondary-dark",children:"Password Strength:"}),r.jsx("span",{className:`text-xs font-semibold ${_(m.level)}`,children:m.feedback})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${N(m.level)}`,style:{width:`${m.score/5*100}%`}})})]}),d.new_password?r.jsxs("p",{id:"new_password_error",className:"mt-2 form-error-text flex items-start",children:[r.jsx(bt,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),d.new_password]}):r.jsx("p",{id:"new_password_helper",className:"mt-2 text-sm text-master-text-secondary-dark",children:"Minimum 8 characters, include letters and numbers"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Confirm New Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l.confirm_password?"text":"password",id:"confirm_password",value:i,onChange:y=>{o(y.target.value),u(S=>{const{confirm_password:A,...I}=S;return I})},onBlur:b,placeholder:"Re-enter new password",className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-red-100 ${d.confirm_password?"border-red-300 focus:border-red-500":i&&n===i?"border-green-300 focus:border-green-500":"border-white/20 focus:border-blue-500"}`,disabled:w,"aria-invalid":!!d.confirm_password,"aria-describedby":d.confirm_password?"confirm_password_error":"confirm_password_helper"}),r.jsx("button",{type:"button",onClick:()=>v("confirm_password"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-master-text-muted-dark hover:text-master-text-secondary-dark transition-colors","aria-label":l.confirm_password?"Hide password":"Show password",children:l.confirm_password?r.jsx(Ei,{className:"h-5 w-5"}):r.jsx(Dn,{className:"h-5 w-5"})}),i&&n===i&&r.jsx("div",{className:"absolute right-12 top-1/2 -translate-y-1/2",children:r.jsx(ds,{className:"h-5 w-5 text-green-600"})})]}),d.confirm_password?r.jsxs("p",{id:"confirm_password_error",className:"mt-2 form-error-text flex items-start",children:[r.jsx(bt,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),d.confirm_password]}):r.jsx("p",{id:"confirm_password_helper",className:"mt-2 text-sm text-master-text-secondary-dark",children:"Re-enter your new password"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-4 border border-white/10",children:[r.jsx("p",{className:"text-sm font-medium text-master-text-primary-dark mb-3",children:"Password Requirements:"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start text-sm",children:[x.min_length?r.jsx(ds,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):r.jsx(bt,{className:"h-5 w-5 text-master-text-muted-dark mr-2 flex-shrink-0"}),r.jsx("span",{className:x.min_length?"text-green-300 font-medium":"text-master-text-secondary-dark",children:"At least 8 characters"})]}),r.jsxs("li",{className:"flex items-start text-sm",children:[x.has_letters?r.jsx(ds,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):r.jsx(bt,{className:"h-5 w-5 text-master-text-muted-dark mr-2 flex-shrink-0"}),r.jsx("span",{className:x.has_letters?"text-green-300 font-medium":"text-master-text-secondary-dark",children:"Contains letters"})]}),r.jsxs("li",{className:"flex items-start text-sm",children:[x.has_numbers?r.jsx(ds,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):r.jsx(bt,{className:"h-5 w-5 text-master-text-muted-dark mr-2 flex-shrink-0"}),r.jsx("span",{className:x.has_numbers?"text-green-300 font-medium":"text-master-text-secondary-dark",children:"Contains numbers"})]})]})]}),r.jsx("button",{type:"submit",disabled:!g||w,className:"w-full px-6 py-3 rounded-lg font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gradient-to-r from-red-600 to-red-700 disabled:hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-red-100",children:w?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"}),r.jsx("div",{className:"text-center",children:r.jsx(Z,{to:"/login",className:"text-sm text-amber-400 hover:text-blue-700 font-medium transition-colors",children:" Back to Login"})})]})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"For your security, you'll be logged out of all devices after resetting your password."})})]})})})},ZT=()=>{const e=re(d=>d.app_settings.shop_phone),t=re(d=>d.app_settings.shop_email),[s,n]=h.useState(5),[a,i]=h.useState(!0),o=Ie();h.useEffect(()=>{if(!a)return;const d=setInterval(()=>{n(u=>u<=1?(o("/login"),0):u-1)},1e3);return()=>clearInterval(d)},[a,o]);const l=()=>{o("/login")},c=()=>{i(!1)};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"px-6 py-12 sm:px-8",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping opacity-75"}),r.jsx("div",{className:"relative bg-green-500 rounded-full p-4 shadow-lg",children:r.jsx("svg",{className:"h-12 w-12 text-master-text-primary-dark animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}),r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark text-center mb-4 leading-tight",children:"Password Reset Successfully"}),r.jsx("p",{className:"text-lg text-master-text-secondary-dark text-center mb-2",children:"Your password has been updated"}),r.jsx("p",{className:"text-base text-master-text-secondary-dark text-center mb-8",children:"You can now log in with your new password"}),a&&r.jsxs("div",{className:"bg-[#2D0808] border border-blue-200 rounded-lg p-4 mb-6 text-center",children:[r.jsxs("p",{className:"text-blue-700 text-sm font-medium mb-2",children:["Redirecting to login in"," ",r.jsx("span",{className:"text-blue-900 font-bold text-lg",children:s})," ",s===1?"second":"seconds","..."]}),r.jsx("button",{type:"button",onClick:c,className:"text-amber-400 hover:text-blue-800 text-sm font-medium underline transition-colors",children:"Stay on this page"})]}),r.jsxs("button",{onClick:l,className:"w-full flex justify-center items-center px-6 py-3 rounded-lg font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-red-100",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Log In Now"]}),r.jsx("div",{className:"mt-8 pt-6 border-t border-white/10",children:r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-yellow-400 font-medium mb-1",children:"Security Notice"}),r.jsx("p",{className:"text-sm text-yellow-300 mb-2",children:"If you didn't make this change, contact us immediately."}),r.jsxs("div",{className:"text-sm text-yellow-400 space-y-1",children:[e&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Phone:"})," ",r.jsx("a",{href:`tel:${e}`,className:"underline hover:text-yellow-900 transition-colors",children:e})]}),t&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",r.jsx("a",{href:`mailto:${t}`,className:"underline hover:text-yellow-900 transition-colors",children:t})]}),!e&&!t&&r.jsx("p",{children:"Please contact our support team for assistance."})]})]})]})})})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(Z,{to:"/",className:"text-master-text-secondary-dark hover:text-master-text-primary-dark text-sm font-medium transition-colors",children:" Back to Home"})})]})})})},XT=(e,t)=>{const s=new Date(`${e}T${t}`),n=new Date,a=s.getTime()-n.getTime();if(a<0)return"Past";const i=Math.floor(a/(1e3*60*60)),o=Math.floor(i/24);return i<1?"Starting soon":i<24?`In ${i} hour${i>1?"s":""}`:o===1?"Tomorrow":o<7?`In ${o} days`:e},py=(e,t)=>{const s=new Date(`${e}T${t}`),n=new Date;return(s.getTime()-n.getTime())/(1e3*60*60)>2},JT=(e,t)=>{const s=new Date(`${e}T${t}`),n={weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0};return s.toLocaleDateString("en-US",n)},eP=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",tP=()=>{var O,R,z,ee;const e=Ie(),t=dr(),[s,n]=xt(),{transitionTo:a}=du(),i=re(C=>C.authentication_state.current_user),o=re(C=>C.authentication_state.auth_token),l=re(C=>C.update_booking_context),c=re(C=>C.clear_booking_context),[d,u]=h.useState(s.get("tab")||"upcoming"),[m]=h.useState(s.get("highlight_booking")),[x,p]=h.useState({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1});h.useEffect(()=>{const C=new URLSearchParams;C.set("tab",d),m&&C.set("highlight_booking",m),n(C,{replace:!0})},[d,m,n]);const j={upcoming:"confirmed",past:"completed",cancelled:"cancelled"},{data:f,isLoading:v,error:b,refetch:g}=ve({queryKey:["user-bookings",d,o],queryFn:async()=>{if(!o)throw new Error("Not authenticated");return(await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/user/bookings",{headers:{Authorization:`Bearer ${o}`},params:{status:j[d]}})).data},select:C=>{const k=(C.bookings||[]).map(D=>({...D,time_until_appointment:d==="upcoming"?XT(D.appointment_date,D.appointment_time):void 0,service_name:(D.service_id,"Haircut"),can_cancel:d==="upcoming"?py(D.appointment_date,D.appointment_time):!1,can_reschedule:d==="upcoming"?py(D.appointment_date,D.appointment_time):!1}));return d==="upcoming"?k.sort((D,T)=>{const P=new Date(`${D.appointment_date}T${D.appointment_time}`),V=new Date(`${T.appointment_date}T${T.appointment_time}`);return P.getTime()-V.getTime()}):k.sort((D,T)=>{const P=new Date(`${D.appointment_date}T${D.appointment_time}`);return new Date(`${T.appointment_date}T${T.appointment_time}`).getTime()-P.getTime()}),{bookings:k,total:C.total||0}},enabled:!!o,staleTime:6e4,refetchOnWindowFocus:!1}),{data:w}=ve({queryKey:["user-bookings-all",o],queryFn:async()=>{if(!o)throw new Error("Not authenticated");const[C,k,D]=await Promise.all([Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/user/bookings",{headers:{Authorization:`Bearer ${o}`},params:{status:"confirmed"}}),Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/user/bookings",{headers:{Authorization:`Bearer ${o}`},params:{status:"completed"}}),Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/user/bookings",{headers:{Authorization:`Bearer ${o}`},params:{status:"cancelled"}})]),T=[...C.data.bookings||[],...k.data.bookings||[],...D.data.bookings||[]];return{bookings:T,total:T.length}},enabled:!!o,staleTime:6e4,refetchOnWindowFocus:!1}),N=ye({mutationFn:async({ticketNumber:C,reason:k})=>(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${C}/cancel`,{cancellation_reason:k||"No reason provided",cancelled_by:"customer"},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["user-bookings"]}),t.invalidateQueries({queryKey:["user-bookings-all"]}),p({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1}),u("cancelled")},onError:C=>{var k,D,T;p(P=>({...P,isSubmitting:!1})),alert(((T=(D=(k=C.response)==null?void 0:k.data)==null?void 0:D.error)==null?void 0:T.message)||"Failed to cancel booking. Please try again.")}}),_=C=>{u(C)},y=C=>{if(!C.can_cancel){alert("Cannot cancel within 2 hours of appointment. Please call us.");return}p({isOpen:!0,bookingId:C.booking_id,ticketNumber:C.ticket_number,reason:"",isSubmitting:!1})},S=()=>{x.isSubmitting||p({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1})},A=()=>{x.ticketNumber&&(p(C=>({...C,isSubmitting:!0})),N.mutate({ticketNumber:x.ticketNumber,reason:x.reason}))},I=C=>{if(!C.can_reschedule){alert("Cannot reschedule within 2 hours of appointment. Please call us.");return}l({service_id:C.service_id,service_name:C.service_name||null,selected_date:null,selected_time:null,customer_name:C.customer_name,customer_email:C.customer_email,customer_phone:C.customer_phone,booking_for_name:C.booking_for_name,special_request:C.special_request,step_completed:0}),e("/book/date")},F=C=>{c(),l({service_id:C.service_id,service_name:C.service_name||null,customer_name:(i==null?void 0:i.name)||C.customer_name,customer_email:(i==null?void 0:i.email)||C.customer_email,customer_phone:(i==null?void 0:i.phone)||C.customer_phone,booking_for_name:C.booking_for_name,special_request:C.special_request,inspiration_photos:null,step_completed:0}),e("/book/date")},H=se.useMemo(()=>{const k=[...(w==null?void 0:w.bookings)||[]].sort((D,T)=>{const P=new Date(`${D.appointment_date}T${D.appointment_time}`);return new Date(`${T.appointment_date}T${T.appointment_time}`).getTime()-P.getTime()});return{total_bookings:(w==null?void 0:w.total)||0,last_booking_date:k.length>0?k[0].appointment_date:null,most_booked_service:"Haircut",member_since:i!=null&&i.created_at?new Date(i.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Unknown"}},[w,i]),E=(f==null?void 0:f.bookings)||[],L=((O=i==null?void 0:i.name)==null?void 0:O.split(" ")[0])||"User";return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] border-b border-white/10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:["Welcome back, ",L,"!"]}),r.jsxs("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:["Member since ",H.member_since]})]}),r.jsxs("button",{onClick:()=>a("/book/service"),className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[r.jsx(qe,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg p-4 border border-blue-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(pt,{className:"w-8 h-8 text-amber-400 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Total Bookings"}),r.jsx("p",{className:"text-2xl font-bold text-amber-400",children:H.total_bookings})]})]})}),r.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(tt,{className:"w-8 h-8 text-green-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-900",children:"Last Visit"}),r.jsx("p",{className:"text-sm font-semibold text-green-600",children:H.last_booking_date?new Date(H.last_booking_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"No visits yet"})]})]})}),r.jsx("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-100",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(pr,{className:"w-8 h-8 text-purple-600 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Favorite Service"}),r.jsx("p",{className:"text-sm font-semibold text-purple-600",children:H.most_booked_service})]})]})})]})]})}),r.jsx("div",{className:"bg-[#2D0808] border-b border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>_("upcoming"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="upcoming"?"border-blue-500 text-amber-400":"border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20"}`,children:"Upcoming Bookings"}),r.jsx("button",{onClick:()=>_("past"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="past"?"border-blue-500 text-amber-400":"border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20"}`,children:"Past Bookings"}),r.jsx("button",{onClick:()=>_("cancelled"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="cancelled"?"border-blue-500 text-amber-400":"border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20"}`,children:"Cancelled"})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(C=>r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl border border-white/10 p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},C))}),b&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx(De,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),r.jsx("p",{className:"text-red-900 font-medium mb-2",children:"Failed to load bookings"}),r.jsx("p",{className:"text-red-300 text-sm mb-4",children:((ee=(z=(R=b.response)==null?void 0:R.data)==null?void 0:z.error)==null?void 0:ee.message)||b.message}),r.jsx("button",{onClick:()=>g(),className:"px-4 py-2 bg-red-600 text-master-text-primary-dark rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}),!v&&!b&&r.jsxs(r.Fragment,{children:[E.length===0&&r.jsxs("div",{className:"text-center py-12",children:[d==="upcoming"&&r.jsxs(r.Fragment,{children:[r.jsx(qe,{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark mb-2",children:"No upcoming appointments"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-6",children:"You don't have any bookings scheduled yet."}),r.jsx(Z,{to:"/book/service",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 transition-colors",children:"Book Now"})]}),d==="past"&&r.jsxs(r.Fragment,{children:[r.jsx(pt,{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark mb-2",children:"No past bookings yet"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Your completed appointments will appear here."})]}),d==="cancelled"&&r.jsxs(r.Fragment,{children:[r.jsx(Nt,{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark mb-2",children:"No cancelled bookings"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"You haven't cancelled any appointments."})]})]}),E.length>0&&r.jsx("div",{className:"space-y-4",children:E.map(C=>r.jsx("div",{className:`bg-[#2D0808] rounded-xl border shadow-sm hover:shadow-md transition-all duration-200 ${m===C.ticket_number?"border-blue-500 ring-4 ring-red-100":"border-white/10"}`,children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Z,{to:`/booking/${C.ticket_number}`,className:"text-sm font-mono font-semibold text-amber-400 hover:text-blue-700 hover:underline",children:C.ticket_number}),d==="upcoming"&&r.jsx("span",{className:"px-3 py-1 bg-blue-900/30 text-blue-400 text-xs font-semibold rounded-full",children:"Upcoming"}),d==="past"&&r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-master-text-secondary-dark text-xs font-semibold rounded-full",children:"Completed"}),d==="cancelled"&&r.jsx("span",{className:"px-3 py-1 bg-red-900/30 text-red-400 text-xs font-semibold rounded-full",children:"Cancelled"})]}),r.jsx("h3",{className:`text-2xl font-bold mb-1 ${d==="cancelled"?"text-master-text-muted-dark line-through":"text-master-text-primary-dark"}`,children:JT(C.appointment_date,C.appointment_time)}),C.service_name&&r.jsx("p",{className:"text-master-text-secondary-dark",children:C.service_name}),d==="upcoming"&&C.time_until_appointment&&r.jsxs("div",{className:"flex items-center mt-2 text-sm text-amber-400 font-medium",children:[r.jsx(tt,{className:"w-4 h-4 mr-1"}),C.time_until_appointment]}),d==="cancelled"&&C.cancelled_at&&r.jsxs("p",{className:"text-sm text-master-text-muted-dark mt-2",children:["Cancelled on ",new Date(C.cancelled_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),C.special_request&&r.jsx("div",{className:"mb-4 p-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg border border-white/10",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"font-medium",children:"Special Request: "}),eP(C.special_request,100),C.special_request.length>100&&r.jsx(Z,{to:`/booking/${C.ticket_number}`,className:"text-amber-400 hover:text-blue-700 ml-1",children:"Read more"})]})}),d==="cancelled"&&C.cancellation_reason&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:r.jsxs("p",{className:"text-sm text-red-300",children:[r.jsx("span",{className:"font-medium",children:"Reason: "}),C.cancellation_reason]})}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(Z,{to:`/booking/${C.ticket_number}`,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-master-text-secondary-dark font-medium rounded-lg hover:bg-gray-200 transition-colors",children:["View Details",r.jsx(As,{className:"w-4 h-4 ml-1"})]}),d==="upcoming"&&C.can_reschedule&&r.jsx("button",{onClick:()=>I(C),className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 font-medium rounded-lg hover:bg-blue-200 transition-colors",children:"Reschedule"}),d==="upcoming"&&C.can_cancel&&r.jsx("button",{onClick:()=>y(C),className:"inline-flex items-center px-4 py-2 bg-red-100 text-red-300 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"Cancel"}),(d==="past"||d==="cancelled")&&r.jsx("button",{onClick:()=>F(C),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 transition-colors shadow-md hover:shadow-lg",children:"Book Again"})]})]})},C.booking_id))})]})]}),x.isOpen&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]0 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:S}),r.jsxs("div",{className:"inline-block align-bottom bg-[#2D0808] rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[r.jsx("div",{className:"bg-[#2D0808] px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx(De,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-master-text-primary-dark",id:"modal-title",children:"Cancel This Booking?"}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-4",children:"Are you sure you want to cancel this booking? This action cannot be undone."}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"cancellation-reason",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Reason for cancellation (optional)"}),r.jsx("textarea",{id:"cancellation-reason",rows:3,maxLength:200,value:x.reason,onChange:C=>p(k=>({...k,reason:C.target.value})),placeholder:"e.g., schedule changed, found another barber, emergency",className:"w-full px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500",disabled:x.isSubmitting}),r.jsxs("p",{className:"mt-1 text-xs text-master-text-muted-dark text-right",children:[x.reason.length,"/200"]})]})]})]})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3",children:[r.jsx("button",{type:"button",onClick:A,disabled:x.isSubmitting,className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-master-text-primary-dark hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:x.isSubmitting?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel Booking"}),r.jsx("button",{type:"button",onClick:S,disabled:x.isSubmitting,className:"mt-3 w-full inline-flex justify-center rounded-lg border border-white/20 shadow-sm px-4 py-2 bg-[#2D0808] text-base font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"No, Keep Booking"})]})]})]})})]})})};function xy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gu(...e){return t=>{let s=!1;const n=e.map(a=>{const i=xy(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():xy(e[a],null)}}}}function Vs(...e){return h.useCallback(gu(...e),e)}var rP=Symbol.for("react.lazy"),Bd=zd[" use ".trim().toString()];function sP(e){return typeof e=="object"&&e!==null&&"then"in e}function qj(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===rP&&"_payload"in e&&sP(e._payload)}function Hj(e){const t=aP(e),s=h.forwardRef((n,a)=>{let{children:i,...o}=n;qj(i)&&typeof Bd=="function"&&(i=Bd(i._payload));const l=h.Children.toArray(i),c=l.find(oP);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}var nP=Hj("Slot");function aP(e){const t=h.forwardRef((s,n)=>{let{children:a,...i}=s;if(qj(a)&&typeof Bd=="function"&&(a=Bd(a._payload)),h.isValidElement(a)){const o=cP(a),l=lP(i,a.props);return a.type!==h.Fragment&&(l.ref=n?gu(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iP=Symbol("radix.slottable");function oP(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iP}function lP(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function cP(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Kj(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=Kj(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Gj(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=Kj(e))&&(n&&(n+=" "),n+=t);return n}const fy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,gy=Gj,_f=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return gy(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],m=i==null?void 0:i[d];if(u===null)return null;const x=fy(u)||fy(m);return a[d][x]}),l=s&&Object.entries(s).reduce((d,u)=>{let[m,x]=u;return x===void 0||(d[m]=x),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:x,...p}=u;return Object.entries(p).every(j=>{let[f,v]=j;return Array.isArray(v)?v.includes({...i,...l}[f]):{...i,...l}[f]===v})?[...d,m,x]:d},[]);return gy(e,o,c,s==null?void 0:s.class,s==null?void 0:s.className)},Cf="-",dP=e=>{const t=mP(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Cf);return l[0]===""&&l.length!==1&&l.shift(),Qj(l,t)||uP(o)},getConflictingClassGroupIds:(o,l)=>{const c=s[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Qj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?Qj(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Cf);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},by=/^\[(.+)\]$/,uP=e=>{if(by.test(e)){const t=by.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},mP=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return pP(Object.entries(e.classGroups),s).forEach(([i,o])=>{_p(o,n,i,t)}),n},_p=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:yy(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(hP(a)){_p(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{_p(o,yy(t,i),s,n)})})},yy=(e,t)=>{let s=e;return t.split(Cf).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},hP=e=>e.isThemeGetter,pP=(e,t)=>t?e.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[s,a]}):e,xP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},Yj="!",fP=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,m;for(let v=0;v<l.length;v++){let b=l[v];if(d===0){if(b===a&&(n||l.slice(v,v+i)===t)){c.push(l.slice(u,v)),u=v+i;continue}if(b==="/"){m=v;continue}}b==="["?d++:b==="]"&&d--}const x=c.length===0?l:l.substring(u),p=x.startsWith(Yj),j=p?x.substring(1):x,f=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:j,maybePostfixModifierPosition:f}};return s?l=>s({className:l,parseClassName:o}):o},gP=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},bP=e=>({cache:xP(e.cacheSize),parseClassName:fP(e),...dP(e)}),yP=/\s+/,vP=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(yP);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:p}=s(d);let j=!!p,f=n(j?x.substring(0,p):x);if(!f){if(!j){l=d+(l.length>0?" "+l:l);continue}if(f=n(x),!f){l=d+(l.length>0?" "+l:l);continue}j=!1}const v=gP(u).join(":"),b=m?v+Yj:v,g=b+f;if(i.includes(g))continue;i.push(g);const w=a(f,j);for(let N=0;N<w.length;++N){const _=w[N];i.push(b+_)}l=d+(l.length>0?" "+l:l)}return l};function wP(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=Zj(t))&&(n&&(n+=" "),n+=s);return n}const Zj=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Zj(e[n]))&&(s&&(s+=" "),s+=t);return s};function jP(e,...t){let s,n,a,i=o;function o(c){const d=t.reduce((u,m)=>m(u),e());return s=bP(d),n=s.cache.get,a=s.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=vP(c,s);return a(c,u),u}return function(){return i(wP.apply(null,arguments))}}const Ke=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},Xj=/^\[(?:([a-z-]+):)?(.+)\]$/i,kP=/^\d+\/\d+$/,NP=new Set(["px","full","screen"]),_P=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=e=>oi(e)||NP.has(e)||kP.test(e),Qs=e=>Qi(e,"length",LP),oi=e=>!!e&&!Number.isNaN(Number(e)),jm=e=>Qi(e,"number",oi),co=e=>!!e&&Number.isInteger(Number(e)),TP=e=>e.endsWith("%")&&oi(e.slice(0,-1)),Ce=e=>Xj.test(e),Ys=e=>_P.test(e),PP=new Set(["length","size","percentage"]),DP=e=>Qi(e,PP,Jj),FP=e=>Qi(e,"position",Jj),MP=new Set(["image","url"]),RP=e=>Qi(e,MP,$P),BP=e=>Qi(e,"",OP),uo=()=>!0,Qi=(e,t,s)=>{const n=Xj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},LP=e=>CP.test(e)&&!SP.test(e),Jj=()=>!1,OP=e=>AP.test(e),$P=e=>EP.test(e),IP=()=>{const e=Ke("colors"),t=Ke("spacing"),s=Ke("blur"),n=Ke("brightness"),a=Ke("borderColor"),i=Ke("borderRadius"),o=Ke("borderSpacing"),l=Ke("borderWidth"),c=Ke("contrast"),d=Ke("grayscale"),u=Ke("hueRotate"),m=Ke("invert"),x=Ke("gap"),p=Ke("gradientColorStops"),j=Ke("gradientColorStopPositions"),f=Ke("inset"),v=Ke("margin"),b=Ke("opacity"),g=Ke("padding"),w=Ke("saturate"),N=Ke("scale"),_=Ke("sepia"),y=Ke("skew"),S=Ke("space"),A=Ke("translate"),I=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",Ce,t],E=()=>[Ce,t],L=()=>["",gs,Qs],O=()=>["auto",oi,Ce],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>["start","end","center","between","around","evenly","stretch"],k=()=>["","0",Ce],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>[oi,Ce];return{cacheSize:500,separator:":",theme:{colors:[uo],spacing:[gs,Qs],blur:["none","",Ys,Ce],brightness:T(),borderColor:[e],borderRadius:["none","","full",Ys,Ce],borderSpacing:E(),borderWidth:L(),contrast:T(),grayscale:k(),hueRotate:T(),invert:k(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[TP,Qs],inset:H(),margin:H(),opacity:T(),padding:E(),saturate:T(),scale:T(),sepia:k(),skew:T(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Ys]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),Ce]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",co,Ce]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",co,Ce]}],"grid-cols":[{"grid-cols":[uo]}],"col-start-end":[{col:["auto",{span:["full",co,Ce]},Ce]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[uo]}],"row-start-end":[{row:["auto",{span:[co,Ce]},Ce]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...C()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...C(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...C(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,t]}],"min-w":[{"min-w":[Ce,t,"min","max","fit"]}],"max-w":[{"max-w":[Ce,t,"none","full","min","max","fit","prose",{screen:[Ys]},Ys]}],h:[{h:[Ce,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ys,Qs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jm]}],"font-family":[{font:[uo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",oi,jm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,Qs]}],"underline-offset":[{"underline-offset":["auto",gs,Ce]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),FP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[gs,Ce]}],"outline-w":[{outline:[gs,Qs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[gs,Qs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ys,BP]}],"shadow-color":[{shadow:[uo]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ys,Ce]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[co,Ce]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[y]}],"skew-y":[{"skew-y":[y]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gs,Qs,jm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zP=jP(IP);function Ct(...e){return zP(Gj(e))}const VP=_f("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-neutral-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/90",outline:"border border-neutral-200 bg-white hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),jt=h.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...a},i)=>{const o=n?nP:"button";return r.jsx(o,{className:Ct(VP({variant:t,size:s,className:e})),ref:i,...a})});jt.displayName="Button";const mr=h.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:Ct("flex h-10 w-full rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:ring-offset-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",e),ref:n,...s}));mr.displayName="Input";var UP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],WP=UP.reduce((e,t)=>{const s=Hj(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),qP="Label",ek=h.forwardRef((e,t)=>r.jsx(WP.label,{...e,ref:t,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));ek.displayName=qP;var tk=ek;const HP=_f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mt=h.forwardRef(({className:e,...t},s)=>r.jsx(tk,{ref:s,className:Ct(HP(),e),...t}));Mt.displayName=tk.displayName;const fl=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:Ct("rounded-lg border border-neutral-200 bg-white text-neutral-950 shadow-sm dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",e),...t}));fl.displayName="Card";const Ld=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:Ct("flex flex-col space-y-1.5 p-6",e),...t}));Ld.displayName="CardHeader";const Od=h.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:Ct("text-2xl font-semibold leading-none tracking-tight",e),...t}));Od.displayName="CardTitle";const Cp=h.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:Ct("text-sm text-neutral-500 dark:text-neutral-400",e),...t}));Cp.displayName="CardDescription";const gl=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:Ct("p-6 pt-0",e),...t}));gl.displayName="CardContent";const KP=h.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:Ct("flex items-center p-6 pt-0",e),...t}));KP.displayName="CardFooter";const GP=_f("inline-flex items-center rounded-full border border-neutral-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 dark:border-neutral-800 dark:focus:ring-neutral-300",{variants:{variant:{default:"border-transparent bg-neutral-900 text-neutral-50 hover:bg-neutral-900/80 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/80",secondary:"border-transparent bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",destructive:"border-transparent bg-red-500 text-neutral-50 hover:bg-red-500/80 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/80",outline:"text-neutral-950 dark:text-neutral-50"}},defaultVariants:{variant:"default"}});function Sp({className:e,variant:t,...s}){return r.jsx("div",{className:Ct(GP({variant:t}),e),...s})}const QP=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",YP=()=>{const e=re(f=>f.authentication_state.current_user),t=re(f=>f.authentication_state.auth_token),s=re(f=>f.update_current_user),[n,a]=h.useState(!1),[i,o]=h.useState({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||""}),[l,c]=h.useState(!1),[d,u]=h.useState(null),m=ye({mutationFn:async f=>{if(!t)throw new Error("Not authenticated");return(await Y.patch(`${QP()}/api/auth/me`,f,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data},onSuccess:f=>{f.user&&(s({name:f.user.name,phone:f.user.phone}),u({type:"success",text:"Profile updated successfully!"}),setTimeout(()=>u(null),3e3)),a(!1),c(!1)},onError:f=>{var b,g;const v=((g=(b=f.response)==null?void 0:b.data)==null?void 0:g.message)||"Failed to update profile";u({type:"error",text:v}),setTimeout(()=>u(null),5e3),c(!1)}}),x=()=>{n&&(o({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||""}),u(null)),a(!n)},p=async()=>{if(!i.name.trim()){u({type:"error",text:"Name is required"});return}c(!0),u(null),await m.mutateAsync({name:i.name.trim(),phone:i.phone.trim()})},j=(f,v)=>{o(b=>({...b,[f]:v}))};return e?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Profile Settings"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"Manage your account information and preferences"})]}),r.jsxs(fl,{children:[r.jsx(Ld,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(Od,{className:"text-2xl",children:"Account Information"}),r.jsx(Cp,{children:"Your personal details and account status"})]}),r.jsx("div",{className:"flex gap-2",children:n?r.jsxs(r.Fragment,{children:[r.jsxs(jt,{onClick:p,size:"sm",disabled:l,children:[r.jsx(d2,{className:"h-4 w-4 mr-2"}),l?"Saving...":"Save"]}),r.jsxs(jt,{onClick:x,variant:"outline",size:"sm",disabled:l,children:[r.jsx(bt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):r.jsxs(jt,{onClick:x,variant:"outline",size:"sm",children:[r.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})}),r.jsxs(gl,{className:"space-y-6",children:[d&&r.jsx("div",{className:`p-4 rounded-lg ${d.type==="success"?"bg-green-50 border border-green-200 text-green-400":"bg-red-50 border border-red-200 text-red-400"}`,children:r.jsx("p",{className:"text-sm font-medium",children:d.text})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[e.is_verified?r.jsx(pt,{className:"h-5 w-5 text-green-600"}):r.jsx(Nt,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-master-text-primary-dark",children:"Account Status"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:e.is_verified?"Your account is verified":"Account not verified"})]})]}),r.jsx(Sp,{variant:e.is_verified?"default":"secondary",children:e.is_verified?"Verified":"Unverified"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Mt,{htmlFor:"name",className:"flex items-center gap-2",children:[r.jsx(cr,{className:"h-4 w-4"}),"Full Name"]}),n?r.jsx(mr,{id:"name",type:"text",value:i.name,onChange:f=>j("name",f.target.value),placeholder:"Enter your full name"}):r.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-md border border-white/10",children:r.jsx("p",{className:"text-master-text-primary-dark",children:e.name})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Mt,{htmlFor:"email",className:"flex items-center gap-2",children:[r.jsx($t,{className:"h-4 w-4"}),"Email Address"]}),r.jsxs("div",{className:"p-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-md border border-white/10",children:[r.jsx("p",{className:"text-master-text-primary-dark",children:e.email}),r.jsx("p",{className:"text-xs text-master-text-muted-dark mt-1",children:"Email cannot be changed"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(Mt,{htmlFor:"phone",className:"flex items-center gap-2",children:[r.jsx(Pt,{className:"h-4 w-4"}),"Phone Number"]}),n?r.jsx(mr,{id:"phone",type:"tel",value:i.phone,onChange:f=>j("phone",f.target.value),placeholder:"Enter your phone number"}):r.jsx("div",{className:"p-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-md border border-white/10",children:r.jsx("p",{className:"text-master-text-primary-dark",children:e.phone})})]}),r.jsx("div",{className:"pt-4 border-t border-white/10",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"font-medium",children:"Member since:"})," ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})})]})]})]}),r.jsxs(fl,{className:"mt-6",children:[r.jsxs(Ld,{children:[r.jsx(Od,{children:"Password & Security"}),r.jsx(Cp,{children:"Manage your password and security settings"})]}),r.jsx(gl,{children:r.jsx(jt,{variant:"outline",children:"Change Password"})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center",children:r.jsx("p",{className:"text-master-text-secondary-dark",children:"Loading user profile..."})})},ZP=()=>{const[e,t]=h.useState(""),[s,n]=h.useState(""),[a,i]=h.useState(""),[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[x,p]=h.useState(!1),[j,f]=h.useState(0),[v,b]=h.useState(null),[g,w]=h.useState({}),N=re(D=>D.authentication_state.authentication_status.is_loading),_=re(D=>D.authentication_state.error_message),y=re(D=>D.login_admin),S=re(D=>D.clear_auth_error),A=Ie(),[I,F]=h.useState(null);h.useEffect(()=>{if(!v){F(null);return}const D=setInterval(()=>{const T=new Date().getTime(),V=new Date(v).getTime()-T;if(V<=0)F(null),b(null),f(0),clearInterval(D);else{const J=Math.floor(V/6e4),K=Math.floor(V%6e4/1e3);F(`${J}:${K.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(D)},[v]);const H=D=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D),E=()=>{const D={};return e?H(e)||(D.email="Please enter a valid email address"):D.email="Email is required",s||(D.password="Password is required"),u&&!a?D.two_factor_code="Two-factor code is required":u&&a.length!==6&&(D.two_factor_code="Code must be 6 digits"),w(D),Object.keys(D).length===0},L=D=>{t(D.target.value),g.email&&w(T=>({...T,email:void 0})),S()},O=D=>{n(D.target.value),g.password&&w(T=>({...T,password:void 0})),S()},R=D=>{const T=D.target.value.replace(/\D/g,"").slice(0,6);i(T),g.two_factor_code&&w(P=>({...P,two_factor_code:void 0})),S()},z=()=>{d(!c)},ee=D=>{l(D.target.checked)},C=async D=>{if(D.preventDefault(),v){const T=new Date().getTime(),P=new Date(v).getTime();if(T<P){w({general:"Too many failed attempts. Please try again later."});return}else b(null),f(0)}if(E()){S(),w({}),p(!0);try{(await y(e,s,u?a:void 0)).requires_2fa?(m(!0),w({general:"Please enter your two-factor authentication code"}),p(!1)):A("/admin")}catch(T){p(!1);const P=T.message||"Login failed";if(P.includes("Invalid email or password")){if(w({general:"Invalid email or password"}),f(V=>V+1),j+1>=5){const V=new Date(Date.now()+9e5).toISOString();b(V),w({general:"Too many failed attempts. Try again in 15 minutes."})}}else if(P.includes("Account locked")||P.includes("Too many")){w({general:"Too many failed attempts. Try again in 15 minutes."});const V=new Date(Date.now()+15*60*1e3).toISOString();b(V)}else P.includes("Invalid two-factor code")?w({two_factor_code:"Invalid two-factor code"}):P.includes("Account disabled")?w({general:"Account disabled. Contact administrator."}):P.includes("Two-factor authentication required")?(m(!0),w({general:"Please enter your two-factor authentication code"})):w({general:P})}}},k=x||N||!!v;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 rounded-full p-4",children:r.jsx(Ng,{className:"h-12 w-12 text-master-text-primary-dark"})})}),r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark mb-2",children:"BarberSlot Admin"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"Administrative Portal"})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6 text-center",children:"Admin Login"}),g.general&&r.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(De,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-red-300",children:g.general}),I&&r.jsxs("p",{className:"text-xs text-red-600 mt-1 font-mono",children:["Time remaining: ",I]})]})]})}),_&&!g.general&&r.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(De,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-300",children:_})]})}),r.jsxs("form",{onSubmit:C,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Admin Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx($t,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,disabled:k,value:e,onChange:L,placeholder:"admin@example.com",className:`block w-full pl-10 pr-3 py-3 border ${g.email?"border-red-500":"border-white/20"} rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-master-text-primary-dark placeholder-master-text-muted-dark`})]}),g.email&&r.jsx("p",{className:"mt-1 form-error-text",children:g.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Password ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(cu,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"current-password",required:!0,disabled:k,value:s,onChange:O,placeholder:"",className:`block w-full pl-10 pr-10 py-3 border ${g.password?"border-red-500":"border-white/20"} rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-master-text-primary-dark placeholder-master-text-muted-dark`}),r.jsx("button",{type:"button",onClick:z,disabled:k,className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-master-text-secondary-dark disabled:opacity-50",children:c?r.jsx(Ei,{className:"h-5 w-5 text-master-text-muted-dark"}):r.jsx(Dn,{className:"h-5 w-5 text-master-text-muted-dark"})})]}),g.password&&r.jsx("p",{className:"mt-1 form-error-text",children:g.password})]}),u&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"two_factor_code",className:"block text-sm font-medium text-master-text-primary-dark mb-2",children:["Two-Factor Code ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ng,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{id:"two_factor_code",name:"two_factor_code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,required:u,disabled:k,value:a,onChange:R,placeholder:"000000",className:`block w-full pl-10 pr-3 py-3 border ${g.two_factor_code?"border-red-500":"border-white/20"} rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-mono text-center text-lg tracking-widest text-master-text-primary-dark placeholder-master-text-muted-dark`})]}),g.two_factor_code&&r.jsx("p",{className:"mt-1 form-error-text",children:g.two_factor_code}),r.jsx("p",{className:"mt-1 text-xs text-master-text-muted-dark",children:"Enter the 6-digit code from your authenticator app"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",disabled:k,checked:o,onChange:ee,className:"h-4 w-4 text-amber-400 focus:ring-red-500 border-white/20 rounded disabled:opacity-50"}),r.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-master-text-secondary-dark",children:"Remember me for 30 days"})]}),r.jsx("button",{type:"submit",disabled:k,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:x||N?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-master-text-primary-dark",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Log In"}),r.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",disabled:k,className:"text-sm text-amber-400 hover:text-blue-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Forgot Password?"})}),r.jsx("div",{className:"text-center",children:r.jsx(Z,{to:"/login",className:"text-sm text-master-text-secondary-dark hover:text-master-text-primary-dark font-medium transition-colors",children:"Customer Login "})})]})]})]}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:"Powered by BarberSlot"}),r.jsx("p",{className:"text-xs text-master-text-muted-dark mt-1",children:"v1.0.0"})]})]})})})},XP=e=>{const t=new Date,s=new Date(e),n=t.getTime()-s.getTime(),a=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return a<1?"just now":a<60?`${a} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`},km=e=>{const[t,s]=e.split(":"),n=parseInt(t,10),a=n>=12?"PM":"AM";return`${n%12||12}:${s} ${a}`},JP=()=>{var j;const e=re(f=>f.authentication_state.auth_token),t=re(f=>f.authentication_state.current_user),[s,n]=h.useState("today"),[a,i]=h.useState(!1),{data:o,isLoading:l,error:c}=ve({queryKey:["admin-dashboard-stats",s],queryFn:async()=>(await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/dashboard/stats",{params:{date_range:s},headers:{Authorization:`Bearer ${e}`}})).data,staleTime:6e4,retry:1,enabled:!!e,select:f=>({today_bookings:Number(f.today_bookings||0),today_completed:Number(f.today_completed||0),today_upcoming:Number(f.today_upcoming||0),week_bookings:Number(f.week_bookings||0),week_revenue:f.week_revenue!==null?Number(f.week_revenue):null,week_cancelled:Number(f.week_cancelled||0),cancellation_rate:Number(f.cancellation_rate||0),month_no_shows:Number(f.month_no_shows||0)})}),{data:d,isLoading:u}=ve({queryKey:["admin-upcoming-appointments"],queryFn:async()=>(await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/bookings",{params:{status:"upcoming",sort_by:"appointment_date",sort_order:"asc",limit:10},headers:{Authorization:`Bearer ${e}`}})).data.bookings.map(v=>({booking_id:v.booking_id,ticket_number:v.ticket_number,appointment_time:v.appointment_time,customer_name:v.customer_name,customer_phone:v.customer_phone,service_id:v.service_id,service_name:v.service_name||"Haircut"})),staleTime:6e4,refetchInterval:6e4,enabled:!!e}),{data:m}=ve({queryKey:["admin-recent-bookings-activity"],queryFn:async()=>(await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/bookings",{params:{limit:20,sort_by:"created_at",sort_order:"desc"},headers:{Authorization:`Bearer ${e}`}})).data.bookings,staleTime:6e4,enabled:!!e}),x=h.useMemo(()=>{if(!m)return[];const f=[];return m.forEach(v=>{f.push({id:`new-${v.booking_id}`,type:"new_booking",description:`New booking: ${v.customer_name} at ${km(v.appointment_time)}`,timestamp:v.created_at,icon:r.jsx(qe,{className:"w-4 h-4 text-amber-400"})}),v.status==="cancelled"&&v.cancelled_at&&f.push({id:`cancel-${v.booking_id}`,type:"cancelled",description:`Cancelled: ${v.customer_name} at ${km(v.appointment_time)}`,timestamp:v.cancelled_at,icon:r.jsx(Nt,{className:"w-4 h-4 text-red-600"})}),v.status==="completed"&&v.completed_at&&f.push({id:`complete-${v.booking_id}`,type:"completed",description:`Completed: ${v.customer_name}`,timestamp:v.completed_at,icon:r.jsx(qe,{className:"w-4 h-4 text-green-600"})})}),f.sort((v,b)=>new Date(b.timestamp).getTime()-new Date(v.timestamp).getTime()).slice(0,15)},[m]),p=async()=>{if(e){i(!0);try{const f=new Date().toISOString().split("T")[0],v=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/bookings/export",{params:{start_date:f,end_date:f},headers:{Authorization:`Bearer ${e}`},responseType:"blob"}),b=new Blob([v.data],{type:"text/csv"}),g=window.URL.createObjectURL(b),w=document.createElement("a");w.href=g,w.download=`bookings_${f}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(g)}catch(f){console.error("Export failed:",f),alert("Failed to export bookings. Please try again.")}finally{i(!1)}}};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] shadow-sm border-b border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Dashboard"}),r.jsxs("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:["Welcome back, ",(t==null?void 0:t.name)||"Admin"]})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsxs("select",{value:s,onChange:f=>n(f.target.value),className:"block w-full sm:w-auto px-4 py-2 bg-[#2D0808] border border-white/20 text-master-text-primary-dark rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all","aria-label":"Select date range",children:[r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"this_week",children:"This Week"}),r.jsx("option",{value:"this_month",children:"This Month"})]})})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(Z,{to:"/admin/bookings?status=upcoming",className:"group",children:r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6 hover:shadow-xl hover:scale-105 hover:bg-white/15 transition-all duration-200",children:l?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-12 w-12 bg-white/20 rounded-lg mb-4"}),r.jsx("div",{className:"h-8 bg-white/10 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg shadow-lg",children:r.jsx(qe,{className:"w-6 h-6 text-master-text-primary-dark"})}),o&&o.today_bookings>0&&r.jsxs("div",{className:"flex items-center text-green-400 text-sm font-medium",children:[r.jsx(eS,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Active"})]})]}),r.jsx("h3",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:(o==null?void 0:o.today_bookings)||0}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-2",children:"Today's Bookings"}),r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-master-text-muted-dark",children:[r.jsxs("span",{children:[(o==null?void 0:o.today_completed)||0," completed"]}),r.jsx("span",{children:""}),r.jsxs("span",{children:[(o==null?void 0:o.today_upcoming)||0," upcoming"]})]})]})})}),(o==null?void 0:o.week_revenue)!==null&&r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6 hover:bg-white/15 transition-all duration-200",children:l?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-12 w-12 bg-white/20 rounded-lg mb-4"}),r.jsx("div",{className:"h-8 bg-white/10 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg shadow-lg",children:r.jsx(o2,{className:"w-6 h-6 text-master-text-primary-dark"})})}),r.jsxs("h3",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:["$",((j=o==null?void 0:o.week_revenue)==null?void 0:j.toFixed(2))||"0.00"]}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:s==="this_week"?"This Week":"This Month"})]})}),r.jsx(Z,{to:"/admin/bookings?status=cancelled",className:"group",children:r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6 hover:shadow-xl hover:scale-105 hover:bg-white/15 transition-all duration-200",children:l?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-12 w-12 bg-white/20 rounded-lg mb-4"}),r.jsx("div",{className:"h-8 bg-white/10 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500 to-red-700 rounded-lg shadow-lg",children:r.jsx(Nt,{className:"w-6 h-6 text-master-text-primary-dark"})}),o&&o.cancellation_rate>0&&r.jsxs("div",{className:"flex items-center form-error-text font-medium",children:[r.jsx(JC,{className:"w-4 h-4 mr-1"}),r.jsxs("span",{children:[o.cancellation_rate.toFixed(1),"%"]})]})]}),r.jsx("h3",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:(o==null?void 0:o.week_cancelled)||0}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-2",children:"Cancellations"}),r.jsx("p",{className:"text-xs text-master-text-muted-dark",children:"This week"})]})})}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6 hover:bg-white/15 transition-all duration-200",children:l?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-12 w-12 bg-white/20 rounded-lg mb-4"}),r.jsx("div",{className:"h-8 bg-white/10 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg shadow-lg",children:r.jsx(jd,{className:"w-6 h-6 text-master-text-primary-dark"})})}),r.jsx("h3",{className:"text-3xl font-bold text-master-text-primary-dark mb-1",children:(o==null?void 0:o.month_no_shows)||0}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-2",children:"No-Shows"}),r.jsx("p",{className:"text-xs text-master-text-muted-dark",children:"This month"})]})})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(Z,{to:"/admin/bookings/new",className:"flex flex-col items-center justify-center p-4 bg-[#2D0808] hover:bg-[#3D0F0F] rounded-lg border-2 border-amber-500/30 hover:border-amber-500 transition-all duration-200 group shadow-lg",children:[r.jsx(vd,{className:"w-8 h-8 text-amber-400 mb-2 group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark text-center",children:"Add Manual Booking"})]}),r.jsxs(Z,{to:"/admin/blocking",className:"flex flex-col items-center justify-center p-4 bg-[#2D0808] hover:bg-[#3D0F0F] rounded-lg border-2 border-red-500/30 hover:border-red-500 transition-all duration-200 group shadow-lg",children:[r.jsx(cu,{className:"w-8 h-8 text-red-400 mb-2 group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark text-center",children:"Block Time Slot"})]}),r.jsxs(Z,{to:"/admin/gallery/upload",className:"flex flex-col items-center justify-center p-4 bg-[#2D0808] hover:bg-[#3D0F0F] rounded-lg border-2 border-orange-500/30 hover:border-orange-500 transition-all duration-200 group shadow-lg",children:[r.jsx(u2,{className:"w-8 h-8 text-orange-400 mb-2 group-hover:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark text-center",children:"Upload to Gallery"})]}),r.jsxs("button",{onClick:p,disabled:a,className:"flex flex-col items-center justify-center p-4 bg-[#2D0808] hover:bg-[#3D0F0F] rounded-lg border-2 border-green-500/30 hover:border-green-500 transition-all duration-200 group disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[r.jsx(sl,{className:`w-8 h-8 text-green-400 mb-2 group-hover:scale-110 transition-transform ${a?"animate-bounce":""}`}),r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark text-center",children:a?"Exporting...":"Export Today's Bookings"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Next Appointments"}),r.jsx(Z,{to:"/admin/bookings/calendar",className:"text-sm text-amber-400 hover:text-amber-300 font-medium transition-colors",children:"View All "})]}),u?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>r.jsxs("div",{className:"animate-pulse flex items-center space-x-4 p-3 bg-[#2D0808] rounded-lg",children:[r.jsx("div",{className:"h-10 w-10 bg-white/10 rounded-full"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),r.jsx("div",{className:"h-3 bg-white/10 rounded w-1/2"})]})]},f))}):d&&d.length>0?r.jsx("div",{className:"space-y-3",children:d.map(f=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2D0808] hover:bg-[#3D0F0F] rounded-lg border border-white/10 hover:border-white/20 transition-all duration-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:r.jsx(tt,{className:"w-5 h-5 text-master-text-primary-dark"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold text-master-text-primary-dark",children:km(f.appointment_time)}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark truncate",children:f.customer_name}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("span",{className:"text-xs text-master-text-muted-dark",children:f.service_name}),r.jsx("span",{className:"text-xs text-master-text-muted-dark",children:""}),r.jsx("span",{className:"text-xs text-master-text-muted-dark font-mono",children:f.ticket_number})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx("a",{href:`tel:${f.customer_phone}`,className:"p-2 text-master-text-secondary-dark hover:text-amber-400 hover:bg-[#3D0F0F] rounded-lg transition-colors","aria-label":"Call customer",children:r.jsx(Pt,{className:"w-4 h-4"})}),r.jsx(Z,{to:`/admin/bookings/${f.ticket_number}`,className:"p-2 text-master-text-secondary-dark hover:text-amber-400 hover:bg-[#3D0F0F] rounded-lg transition-colors","aria-label":"View booking details",children:r.jsx(Dn,{className:"w-4 h-4"})})]})]},f.booking_id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(qe,{className:"w-12 h-12 text-master-text-muted-dark mx-auto mb-3"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"No upcoming appointments"}),r.jsx(Z,{to:"/admin/bookings/new",className:"inline-block mt-3 text-amber-400 hover:text-amber-300 text-sm font-medium",children:"Add a booking "})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-master-glow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Recent Activity"}),x.length>0?r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.map(f=>r.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-[#2D0808] rounded-lg border border-white/10 hover:border-white/20 transition-all",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:f.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark",children:f.description}),r.jsx("p",{className:"text-xs text-master-text-muted-dark mt-1",children:XP(f.timestamp)})]})]},f.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(tt,{className:"w-12 h-12 text-master-text-muted-dark mx-auto mb-3"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm",children:"No recent activity"})]})]})]}),c&&r.jsx("div",{className:"mt-8 backdrop-blur-xl bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(jd,{className:"w-5 h-5 text-red-400 mr-2"}),r.jsx("p",{className:"text-red-200 text-sm",children:"Failed to load dashboard data. Please try refreshing the page."})]})})]})]})})},eD=()=>{const e=re(y=>y.authentication_state.auth_token),t=dr(),[s,n]=h.useState("all"),[a,i]=h.useState(null),[o,l]=h.useState(null),c=()=>{var y;return typeof window<"u"&&((y=window.__RUNTIME_CONFIG__)!=null&&y.API_BASE_URL)?window.__RUNTIME_CONFIG__.API_BASE_URL:"https://123barber-booking-app-with-ticket-system.launchpulse.ai"},{data:d,isLoading:u}=ve({queryKey:["admin-queue"],queryFn:async()=>(await Y.get(`${c()}/api/admin/queue`,{headers:{Authorization:`Bearer ${e}`}})).data,refetchInterval:15e3,enabled:!!e}),{data:m,isLoading:x}=ve({queryKey:["admin-callouts",s],queryFn:async()=>{const y=new Date().toISOString().split("T")[0],S={limit:100};return s==="today"?(S.appointment_date_from=y,S.appointment_date_to=y):s==="upcoming"&&(S.appointment_date_from=y),(await Y.get(`${c()}/api/admin/callouts`,{headers:{Authorization:`Bearer ${e}`},params:S})).data},refetchInterval:3e4,enabled:!!e}),p=ye({mutationFn:async({queue_id:y,status:S})=>(await Y.patch(`${c()}/api/admin/queue/${y}`,{status:S},{headers:{Authorization:`Bearer ${e}`}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin-queue"]}),t.invalidateQueries({queryKey:["waitTime"]}),i(null)},onError:y=>{var S,A;console.error("Update queue error:",y),alert(((A=(S=y.response)==null?void 0:S.data)==null?void 0:A.message)||"Failed to update queue status")}}),j=ye({mutationFn:async({callout_id:y,status:S,cancellation_reason:A})=>(await Y.patch(`${c()}/api/admin/callouts/${y}`,{status:S,cancellation_reason:A},{headers:{Authorization:`Bearer ${e}`}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin-callouts"]}),l(null)},onError:y=>{var S,A;console.error("Update callout error:",y),alert(((A=(S=y.response)==null?void 0:S.data)==null?void 0:A.message)||"Failed to update call-out status")}}),f=(y,S)=>{confirm(`Are you sure you want to change this queue entry to "${S}"?`)&&p.mutate({queue_id:y,status:S})},v=(y,S)=>{let A;S==="cancelled"&&(A=prompt("Cancellation reason (optional):")||"Cancelled by admin"),confirm(`Are you sure you want to change this call-out to "${S}"?`)&&j.mutate({callout_id:y,status:S,cancellation_reason:A})},b=y=>{switch(y){case"waiting":case"scheduled":return"bg-blue-900/30 text-blue-400 border-blue-200";case"in_service":case"en_route":return"bg-yellow-900/30 text-yellow-400 border-yellow-200";case"completed":return"bg-green-900/30 text-green-400 border-green-200";case"no_show":case"cancelled":return"bg-red-900/30 text-red-400 border-red-200";default:return"bg-gray-100 text-master-text-secondary-dark border-white/10"}},g=y=>{const[S,A]=y.split(":"),I=parseInt(S,10),F=I>=12?"PM":"AM";return`${I%12||12}:${A} ${F}`},w=y=>new Date(y).toLocaleDateString("en-GB",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),N=(d==null?void 0:d.queue)||[],_=(m==null?void 0:m.callouts)||[];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#600000] via-[#730000] to-[#8b0000]",children:[r.jsx("div",{className:"bg-gradient-to-r from-[#730000] to-[#8b0000] shadow-master-elevated border-b border-white/15",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Queue & Call-Out Management"}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"Manage walk-in queue and call-out bookings in real-time"})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{onClick:()=>{t.invalidateQueries({queryKey:["admin-queue"]}),t.invalidateQueries({queryKey:["admin-callouts"]})},className:"flex items-center gap-2 px-4 py-2 bg-white text-master-text-primary-light rounded-lg hover:bg-gray-100 transition-colors font-semibold shadow-lg",children:[r.jsx(al,{className:"w-4 h-4"}),"Refresh"]})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"glass-card-light rounded-xl shadow-master-elevated border-white/25 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-blue-600/30 rounded-lg border border-blue-500/30",children:r.jsx(pr,{className:"w-6 h-6 text-blue-200"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark",children:"Live Walk-In Queue"}),r.jsxs("p",{className:"text-sm text-master-text-primary-dark font-medium",children:[N.filter(y=>y.status==="waiting").length," customers waiting"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse shadow-lg shadow-green-400/50"}),r.jsx("span",{className:"text-sm text-master-text-primary-dark font-medium",children:"Live"})]})]}),u?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})}):N.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(pr,{className:"w-12 h-12 text-master-text-secondary-dark mx-auto mb-3"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"No one in queue"})]}):r.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:N.map(y=>r.jsxs(he.div,{className:"bg-white/10 border border-white/20 rounded-lg p-4 hover:shadow-master-glow hover:bg-white/15 transition-all",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center justify-center w-10 h-10 bg-amber-600/30 border border-amber-500/50 rounded-full font-bold text-amber-200",children:["#",y.position]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-master-text-primary-dark",children:y.customer_name}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-master-text-primary-dark",children:[r.jsx(Pt,{className:"w-4 h-4"}),y.customer_phone]})]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${b(y.status)}`,children:y.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-master-text-primary-dark mb-3 font-medium",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(tt,{className:"w-4 h-4"}),r.jsxs("span",{children:["~",y.estimated_wait_minutes," min wait"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qe,{className:"w-4 h-4"}),r.jsx("span",{children:new Date(y.created_at).toLocaleTimeString()})]})]}),y.status==="waiting"&&r.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/15",children:[r.jsxs("button",{onClick:()=>f(y.queue_id,"in_service"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-yellow-600 to-yellow-700 text-master-text-primary-dark rounded-lg hover:from-yellow-700 hover:to-yellow-800 transition-colors text-sm font-semibold shadow-lg",children:[r.jsx(VC,{className:"w-4 h-4"}),"Start Service"]}),r.jsxs("button",{onClick:()=>f(y.queue_id,"no_show"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors text-sm font-semibold shadow-lg",children:[r.jsx(Nt,{className:"w-4 h-4"}),"No-Show"]})]}),y.status==="in_service"&&r.jsx("div",{className:"flex gap-2 pt-3 border-t border-white/15",children:r.jsxs("button",{onClick:()=>f(y.queue_id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-gradient-to-r from-green-600 to-green-700 text-master-text-primary-dark rounded-lg hover:from-green-700 hover:to-green-800 transition-colors text-sm font-semibold shadow-lg",children:[r.jsx(pt,{className:"w-4 h-4"}),"Complete"]})})]},y.queue_id))})]}),r.jsxs("div",{className:"glass-card-light rounded-xl shadow-master-elevated border-white/25 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-3 bg-orange-600/30 rounded-lg border border-orange-500/30",children:r.jsx(nm,{className:"w-6 h-6 text-orange-200"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark",children:"Call-Out Jobs"}),r.jsxs("p",{className:"text-sm text-master-text-primary-dark font-medium",children:[_.length," bookings"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>n("all"),className:`px-3 py-1 text-sm font-semibold rounded-lg transition-colors ${s==="all"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:"All"}),r.jsx("button",{onClick:()=>n("today"),className:`px-3 py-1 text-sm font-semibold rounded-lg transition-colors ${s==="today"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:"Today"}),r.jsx("button",{onClick:()=>n("upcoming"),className:`px-3 py-1 text-sm font-semibold rounded-lg transition-colors ${s==="upcoming"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:"Upcoming"})]})]}),x?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})}):_.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(nm,{className:"w-12 h-12 text-master-text-secondary-dark mx-auto mb-3"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"No call-out bookings"})]}):r.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:_.map(y=>r.jsxs(he.div,{className:"border border-white/10 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-master-text-primary-dark",children:y.customer_name}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-master-text-secondary-dark mt-1",children:[r.jsx(Pt,{className:"w-4 h-4"}),y.customer_phone]}),y.customer_email&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-master-text-secondary-dark mt-1",children:[r.jsx($t,{className:"w-4 h-4"}),y.customer_email]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${b(y.status)}`,children:y.status.replace("_"," ").toUpperCase()})]}),r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsxs("div",{className:"flex items-start gap-2 text-sm text-master-text-secondary-dark",children:[r.jsx(qe,{className:"w-4 h-4 mt-0.5 text-master-text-muted-dark"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:w(y.appointment_date)}),r.jsxs("span",{className:"text-master-text-muted-dark",children:[" at ",g(y.appointment_time)]})]})]}),r.jsxs("div",{className:"flex items-start gap-2 text-sm text-master-text-secondary-dark",children:[r.jsx(Kt,{className:"w-4 h-4 mt-0.5 text-master-text-muted-dark"}),r.jsx("span",{children:y.service_address})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(o2,{className:"w-4 h-4 text-green-600"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",y.price.toFixed(2)]})]})]}),y.special_request&&r.jsx("div",{className:"mb-3 p-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg",children:r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"font-medium",children:"Note: "}),y.special_request]})}),y.status==="scheduled"&&r.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/10",children:[r.jsxs("button",{onClick:()=>v(y.callout_id,"en_route"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-yellow-600 text-master-text-primary-dark rounded-lg hover:bg-yellow-700 transition-colors text-sm font-medium",children:[r.jsx(nm,{className:"w-4 h-4"}),"On the Way"]}),r.jsxs("button",{onClick:()=>v(y.callout_id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-master-text-primary-dark rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:[r.jsx(Nt,{className:"w-4 h-4"}),"Cancel"]})]}),y.status==="en_route"&&r.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/10",children:[r.jsxs("button",{onClick:()=>v(y.callout_id,"completed"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-600 text-master-text-primary-dark rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[r.jsx(pt,{className:"w-4 h-4"}),"Complete"]}),r.jsxs("button",{onClick:()=>v(y.callout_id,"cancelled"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-600 text-master-text-primary-dark rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:[r.jsx(Nt,{className:"w-4 h-4"}),"Cancel"]})]})]},y.callout_id))})]})]})})]})},Nm=["10:00","10:40","11:20","12:00","12:40","13:20","14:00","14:20"],vy=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wy={pending:"bg-yellow-100 border-yellow-500 text-yellow-900",confirmed:"bg-blue-100 border-blue-500 text-blue-900",completed:"bg-gray-100 border-gray-500 text-master-text-primary-dark",cancelled:"bg-red-100 border-red-500 text-red-900"},bu=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",bs=e=>e.toISOString().split("T")[0],rk=e=>new Date(e+"T00:00:00"),tD=e=>rk(e).getDay(),rD=e=>e>=1&&e<=3?2:3,jy=(e,t)=>{const s=new Date(e,t,1),n=new Date(e,t+1,0),a=[],i=s.getDay();for(let l=i-1;l>=0;l--){const c=new Date(e,t,-l);a.push(c)}for(let l=1;l<=n.getDate();l++)a.push(new Date(e,t,l));const o=7-a.length%7;if(o<7)for(let l=1;l<=o;l++)a.push(new Date(e,t+1,l));return a},_m=e=>{const t=e.getDay(),s=[],n=new Date(e);n.setDate(e.getDate()-t);for(let a=0;a<7;a++){const i=new Date(n);i.setDate(n.getDate()+a),s.push(i)}return s},sD=e=>{const t={};return e.forEach(s=>{const n=s.appointment_date,a=s.appointment_time;t[n]||(t[n]={}),t[n][a]||(t[n][a]=[]),t[n][a].push(s)}),t},nD=async(e,t)=>{try{const s=new URLSearchParams;t.status&&t.status!=="all"&&s.append("status",t.status),t.service_id&&s.append("service_id",t.service_id),s.append("appointment_date_from",t.start_date),s.append("appointment_date_to",t.end_date),t.search&&s.append("query",t.search);const n=await Y.get(`${bu()}/api/admin/bookings?${s.toString()}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.bookings||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(s){return console.error("Failed to fetch bookings:",s),[]}},aD=async e=>(await Y.get(`${bu()}/api/services?is_active=true`,{headers:{Authorization:`Bearer ${e}`}})).data.services||[],iD=async(e,t,s)=>{try{const n=await Y.get(`${bu()}/api/admin/capacity-overrides?override_date_from=${t}&override_date_to=${s}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.overrides||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(n){return console.error("Failed to fetch capacity overrides:",n),[]}},oD=async(e,t,s)=>{try{const n=await Y.get(`${bu()}/api/admin/blocked-slots?block_date_from=${t}&block_date_to=${s}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.blocked_slots||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(n){return console.error("Failed to fetch blocked slots:",n),[]}},lD=()=>{const[e,t]=xt(),s=re(C=>C.authentication_state.auth_token),[n,a]=h.useState(e.get("view_type")||"month"),[i,o]=h.useState(()=>{const C=e.get("date");return C?rk(C):new Date}),[l,c]=h.useState(e.get("status_filter")||"all"),[d,u]=h.useState(null),[m,x]=h.useState(""),[p,j]=h.useState("");se.useEffect(()=>{const C=setTimeout(()=>{j(m)},300);return()=>clearTimeout(C)},[m]);const f=h.useMemo(()=>{let C,k;if(n==="month"){const D=i.getFullYear(),T=i.getMonth(),P=jy(D,T);C=P[0],k=P[P.length-1]}else if(n==="week"){const D=_m(i);C=D[0],k=D[6]}else C=new Date(i),k=new Date(i);return{start:bs(C),end:bs(k)}},[i,n]),{data:v=[],isLoading:b,refetch:g}=ve({queryKey:["admin-bookings",f.start,f.end,l,d,p],queryFn:()=>nD(s,{status:l,service_id:d||void 0,start_date:f.start,end_date:f.end,search:p||void 0}),enabled:!!s,staleTime:3e4}),{data:w=[]}=ve({queryKey:["services"],queryFn:()=>aD(s),enabled:!!s,staleTime:3e5}),{data:N=[]}=ve({queryKey:["capacity-overrides",f.start,f.end],queryFn:()=>iD(s,f.start,f.end),enabled:!!s,staleTime:6e4}),{data:_=[]}=ve({queryKey:["blocked-slots",f.start,f.end],queryFn:()=>oD(s,f.start,f.end),enabled:!!s,staleTime:6e4}),y=h.useMemo(()=>sD(v),[v]),S=h.useCallback(()=>{const C=new Date(i);n==="month"?C.setMonth(C.getMonth()-1):n==="week"?C.setDate(C.getDate()-7):C.setDate(C.getDate()-1),o(C)},[i,n]),A=h.useCallback(()=>{const C=new Date(i);n==="month"?C.setMonth(C.getMonth()+1):n==="week"?C.setDate(C.getDate()+7):C.setDate(C.getDate()+1),o(C)},[i,n]),I=h.useCallback(()=>{o(new Date)},[]),F=h.useCallback(C=>{a(C),t(k=>{const D=new URLSearchParams(k);return D.set("view_type",C),D})},[t]),H=h.useCallback((C,k)=>{var J,K;if(_.find(M=>M.block_date===C&&(M.time_slot===null||M.time_slot===k)))return{capacity:0,booked:0,isBlocked:!0};const T=N.find(M=>M.override_date===C&&M.time_slot===k&&M.is_active),P=T?T.capacity:rD(tD(C)),V=((K=(J=y[C])==null?void 0:J[k])==null?void 0:K.length)||0;return{capacity:P,booked:V,isBlocked:!1}},[_,N,y]),E=h.useCallback(()=>{const C=["Ticket Number","Date","Time","Customer Name","Phone","Status","Service"],k=v.map(J=>[J.ticket_number,J.appointment_date,J.appointment_time,J.customer_name,J.customer_phone,J.status,J.service_id||"N/A"]),D=[C,...k].map(J=>J.join(",")).join(`
`),T=new Blob([D],{type:"text/csv"}),P=URL.createObjectURL(T),V=document.createElement("a");V.href=P,V.download=`bookings_${f.start}_${f.end}.csv`,V.click(),URL.revokeObjectURL(P)},[v,f]),L=h.useCallback(()=>{window.print()},[]),O=()=>{let C="";if(n==="month")C=i.toLocaleDateString("en-US",{month:"long",year:"numeric"});else if(n==="week"){const k=_m(i),D=k[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),T=k[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});C=`${D} - ${T}`}else C=i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});return r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:S,className:"p-2 hover:bg-white/10 rounded-lg transition-colors border border-white/20","aria-label":"Previous",children:r.jsx(yd,{className:"w-5 h-5 text-master-text-primary-dark"})}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark",children:C}),r.jsx("button",{onClick:A,className:"p-2 hover:bg-white/10 rounded-lg transition-colors border border-white/20","aria-label":"Next",children:r.jsx(As,{className:"w-5 h-5 text-master-text-primary-dark"})}),r.jsx("button",{onClick:I,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors text-sm font-semibold shadow-lg",children:"Today"})]})})},R=()=>{const C=i.getFullYear(),k=i.getMonth(),D=jy(C,k);return r.jsxs("div",{className:"glass-card-light rounded-xl shadow-master-elevated overflow-hidden border-white/25",children:[r.jsx("div",{className:"grid grid-cols-7 border-b border-white/20",children:vy.map(T=>r.jsx("div",{className:"px-4 py-3 text-center text-sm font-bold text-master-text-primary-dark bg-[#6B2020] border-r border-white/15 last:border-r-0",children:T},T))}),r.jsx("div",{className:"grid grid-cols-7",children:D.map((T,P)=>{const V=bs(T),J=T.getMonth()===k,K=bs(new Date)===V,M=y[V],U=M?Object.values(M).flat().length:0,W=new Set(Nm);M&&Object.keys(M).forEach(te=>W.add(te));let Q=0,B=0;return Array.from(W).forEach(te=>{const{capacity:pe,booked:we}=H(V,te);Q+=pe,B+=we}),r.jsxs("div",{className:`min-h-[120px] border-b border-r border-white/15 p-2 hover:bg-white/10 transition-colors cursor-pointer ${J?"bg-white/5":"bg-[#5C1B1B]/30 text-master-text-secondary-dark"} ${K?"bg-amber-600/20 border-2 border-amber-500/50":""}`,onClick:()=>{o(T),a("day")},children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:`text-sm font-bold ${K?"text-amber-300":"text-master-text-primary-dark"}`,children:T.getDate()}),U>0&&r.jsx("span",{className:"text-xs bg-blue-600/30 text-blue-200 px-2 py-1 rounded-full font-semibold border border-blue-500/30",children:U})]}),J&&r.jsx("div",{className:"text-xs text-master-text-secondary-dark mb-2",children:r.jsxs("span",{className:B>=Q?"text-red-600 font-semibold":"",children:[B,"/",Q," booked"]})}),M&&J&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.values(M).flat().slice(0,3).map((te,pe)=>r.jsx("div",{className:`w-2 h-2 rounded-full ${te.status==="confirmed"||te.status==="pending"?"bg-[#2D0808]0":te.status==="completed"?"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]0":"bg-red-500"}`},pe)),U>3&&r.jsxs("span",{className:"text-xs text-master-text-muted-dark",children:["+",U-3]})]})]},P)})})]})},z=()=>{const C=_m(i),k=new Set(Nm);C.forEach(T=>{const P=bs(T);y[P]&&Object.keys(y[P]).forEach(V=>{k.add(V)})});const D=Array.from(k).sort();return r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"grid grid-cols-8 border-b border-white/10",children:[r.jsx("div",{className:"px-4 py-3 text-center text-sm font-semibold text-master-text-secondary-dark bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:"Time"}),C.map((T,P)=>{const V=bs(new Date)===bs(T);return r.jsxs("div",{className:`px-2 py-3 text-center text-sm font-semibold border-l border-white/10 ${V?"bg-[#2D0808] text-blue-700":"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] text-master-text-secondary-dark"}`,children:[r.jsx("div",{children:vy[T.getDay()]}),r.jsx("div",{className:"text-lg font-bold",children:T.getDate()})]},P)})]}),r.jsx("div",{className:"grid grid-cols-8",children:D.map(T=>r.jsxs(se.Fragment,{children:[r.jsx("div",{className:"px-4 py-4 text-sm font-medium text-master-text-secondary-dark bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] border-b border-white/10",children:T}),C.map((P,V)=>{var Q;const J=bs(P),K=((Q=y[J])==null?void 0:Q[T])||[],{capacity:M,booked:U,isBlocked:W}=H(J,T);return r.jsx("div",{className:"p-2 min-h-[100px] border-b border-l border-white/10 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:W?r.jsx("div",{className:"text-xs text-master-text-muted-dark italic bg-gray-100 p-2 rounded",children:"Blocked"}):K.length>0?r.jsx("div",{className:"space-y-2",children:K.map(B=>r.jsxs(Z,{to:`/admin/bookings/${B.ticket_number}`,className:`block p-2 rounded-lg border-l-4 text-xs ${wy[B.status]} hover:shadow-md transition-shadow`,children:[r.jsx("div",{className:"font-semibold truncate",children:B.customer_name}),r.jsx("div",{className:"text-xs truncate",children:B.ticket_number})]},B.booking_id))}):r.jsxs("div",{className:"text-xs text-master-text-muted-dark italic",children:[U,"/",M," booked"]})},V)})]},T))})]})},ee=()=>{const C=bs(i),k=new Set(Nm);y[C]&&Object.keys(y[C]).forEach(T=>{k.add(T)});const D=Array.from(k).sort();return r.jsx("div",{className:"space-y-4",children:D.map(T=>{var M;const P=((M=y[C])==null?void 0:M[T])||[],{capacity:V,booked:J,isBlocked:K}=H(C,T);return r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-secondary-dark"}),r.jsx("span",{className:"text-xl font-bold text-master-text-primary-dark",children:T})]}),r.jsx("div",{className:"flex items-center space-x-4",children:K?r.jsx("span",{className:"form-error-text font-semibold",children:"Blocked"}):r.jsxs("span",{className:`text-sm font-semibold ${J>=V?"text-red-600":"text-master-text-secondary-dark"}`,children:[J,"/",V," booked"]})})]}),r.jsx("div",{className:"p-6",children:K?r.jsx("p",{className:"text-master-text-muted-dark italic",children:"This time slot is blocked"}):P.length>0?r.jsx("div",{className:"space-y-4",children:P.map(U=>r.jsx("div",{className:`border-l-4 rounded-lg p-4 ${wy[U.status]}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(cr,{className:"w-5 h-5"}),r.jsx("span",{className:"font-bold text-lg",children:U.customer_name})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Pt,{className:"w-4 h-4"}),r.jsx("a",{href:`tel:${U.customer_phone}`,className:"hover:underline",children:U.customer_phone})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Kt,{className:"w-4 h-4"}),r.jsx("span",{children:U.ticket_number})]}),U.special_request&&r.jsxs("div",{className:"mt-2 text-xs text-master-text-secondary-dark bg-[#2D0808] bg-opacity-50 p-2 rounded",children:[r.jsx("strong",{children:"Note:"})," ",U.special_request.substring(0,100),U.special_request.length>100&&"..."]})]})]}),r.jsx("div",{className:"flex flex-col space-y-2",children:r.jsx(Z,{to:`/admin/bookings/${U.ticket_number}`,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors text-sm font-medium text-center",children:"View"})})]})},U.booking_id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-3",children:r.jsx(qe,{className:"w-8 h-8 text-green-600"})}),r.jsx("p",{className:"text-green-600 font-semibold",children:"Available"}),r.jsxs("p",{className:"text-sm text-master-text-muted-dark mt-1",children:[V-J," spots remaining"]})]})})]},T)})})};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#600000] via-[#730000] to-[#8b0000] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-master-text-primary-dark mb-2",children:"Bookings Calendar"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Manage and view all appointments"})]}),r.jsx("div",{className:"glass-card-light rounded-xl shadow-master-elevated p-6 mb-6 border-white/25",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>F("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="month"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:[r.jsx(l2,{className:"w-4 h-4"}),r.jsx("span",{children:"Month"})]}),r.jsxs("button",{onClick:()=>F("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="week"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:[r.jsx(qe,{className:"w-4 h-4"}),r.jsx("span",{children:"Week"})]}),r.jsxs("button",{onClick:()=>F("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="day"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark shadow-lg":"bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20"}`,children:[r.jsx(tt,{className:"w-4 h-4"}),r.jsx("span",{children:"Day"})]}),r.jsxs(Z,{to:"/admin/bookings",className:"px-4 py-2 rounded-lg font-medium bg-white/10 text-master-text-primary-dark hover:bg-white/20 border border-white/20 transition-colors flex items-center space-x-2",children:[r.jsx(c2,{className:"w-4 h-4"}),r.jsx("span",{children:"List"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs(Z,{to:"/admin/bookings/new",className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-master-text-primary-dark rounded-lg hover:from-green-700 hover:to-green-800 transition-colors flex items-center space-x-2 font-medium shadow-lg",children:[r.jsx(vd,{className:"w-4 h-4"}),r.jsx("span",{children:"Add Booking"})]}),r.jsx("button",{onClick:()=>g(),className:"p-2 bg-white/10 text-master-text-primary-dark rounded-lg hover:bg-white/20 border border-white/20 transition-colors","aria-label":"Refresh",children:r.jsx(al,{className:"w-5 h-5"})}),r.jsx("button",{onClick:L,className:"p-2 bg-white/10 text-master-text-primary-dark rounded-lg hover:bg-white/20 border border-white/20 transition-colors","aria-label":"Print",children:r.jsx(Do,{className:"w-5 h-5"})}),r.jsx("button",{onClick:E,className:"p-2 bg-white/10 text-master-text-primary-dark rounded-lg hover:bg-white/20 border border-white/20 transition-colors","aria-label":"Export",children:r.jsx(sl,{className:"w-5 h-5"})})]})]})}),r.jsx("div",{className:"glass-card-light rounded-xl shadow-master-elevated p-6 mb-6 border-white/25",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-master-text-secondary-dark"}),r.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),placeholder:"Search by name, phone, or ticket...",className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-master-text-primary-dark placeholder-master-text-muted-dark"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(qC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-master-text-secondary-dark"}),r.jsxs("select",{value:l,onChange:C=>c(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 appearance-none text-master-text-primary-dark",children:[r.jsx("option",{value:"all",className:"bg-[#4A1515] text-master-text-primary-dark",children:"All Statuses"}),r.jsx("option",{value:"upcoming",className:"bg-[#4A1515] text-master-text-primary-dark",children:"Upcoming"}),r.jsx("option",{value:"completed",className:"bg-[#4A1515] text-master-text-primary-dark",children:"Completed"}),r.jsx("option",{value:"cancelled",className:"bg-[#4A1515] text-master-text-primary-dark",children:"Cancelled"})]})]}),r.jsx("div",{children:r.jsxs("select",{value:d||"",onChange:C=>u(C.target.value||null),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 appearance-none text-master-text-primary-dark",children:[r.jsx("option",{value:"",className:"bg-[#4A1515] text-master-text-primary-dark",children:"All Services"}),w.map(C=>r.jsx("option",{value:C.service_id,className:"bg-[#4A1515] text-master-text-primary-dark",children:C.name},C.service_id))]})})]})}),O(),b?r.jsxs("div",{className:"glass-card-light rounded-xl shadow-master-elevated p-12 text-center border-white/25",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-master-text-secondary-dark font-medium",children:"Loading bookings..."})]}):r.jsxs(r.Fragment,{children:[n==="month"&&R(),n==="week"&&z(),n==="day"&&ee()]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"Legend"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-[#2D0808]0"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Upcoming"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]0"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Completed"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Cancelled"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 rounded bg-yellow-500"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Pending"})]})]})]})]})})})},uc=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",cD=(e,t)=>{try{return new Date(`${e}T${t}`).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return`${e} ${t}`}},dD=e=>{switch(e){case"pending":case"confirmed":return"bg-blue-900/30 text-blue-400";case"completed":return"bg-[#2D0808] text-master-text-secondary-dark";case"cancelled":return"bg-red-900/30 text-red-400";default:return"bg-orange-100 text-orange-800"}},uD=()=>{const e=new Date,t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-t);const n=new Date(e);return n.setDate(e.getDate()+(6-t)),{start:s.toISOString().split("T")[0],end:n.toISOString().split("T")[0]}},ky=(e,t)=>{const s=["Ticket Number","Date","Time","Customer Name","Email","Phone","Service","Status","Special Request","Admin Notes","Created At"],n=new Map(t.map(u=>[u.service_id,u.name])),a=e.map(u=>[u.ticket_number,u.appointment_date,u.appointment_time,u.customer_name,u.customer_email,u.customer_phone,u.service_id&&n.get(u.service_id)||"N/A",u.status,u.special_request||"",u.admin_notes||"",u.created_at]),i=[s.join(","),...a.map(u=>u.map(m=>`"${String(m).replace(/"/g,'""')}"`).join(","))].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),c=URL.createObjectURL(o),d=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);l.setAttribute("href",c),l.setAttribute("download",`bookings_${d}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},mD=()=>{const e=Ie(),[t,s]=xt(),n=dr(),a=re(M=>M.authentication_state.auth_token),i=uD(),o={status:t.get("status")||"all",service_id:t.get("service_id")||"all",start_date:t.get("start_date")||i.start,end_date:t.get("end_date")||i.end,search:t.get("search")||"",page:Number(t.get("page"))||1,limit:Number(t.get("limit"))||20,sort_by:t.get("sort")||"appointment_date",sort_order:t.get("sort_order")||"desc"},[l,c]=h.useState(o),[d,u]=h.useState(l.search),[m,x]=h.useState(new Set),[p,j]=h.useState(!1),[f,v]=h.useState(null);h.useEffect(()=>{const M=setTimeout(()=>{c(U=>({...U,search:d,page:1}))},300);return()=>clearTimeout(M)},[d]),h.useEffect(()=>{const M=new URLSearchParams;l.status!=="all"&&M.set("status",l.status),l.service_id!=="all"&&M.set("service_id",l.service_id),l.start_date&&M.set("start_date",l.start_date),l.end_date&&M.set("end_date",l.end_date),l.search&&M.set("search",l.search),l.page>1&&M.set("page",l.page.toString()),l.limit!==20&&M.set("limit",l.limit.toString()),l.sort_by!=="appointment_date"&&M.set("sort",l.sort_by),l.sort_order!=="desc"&&M.set("sort_order",l.sort_order),s(M)},[l,s]);const{data:b,isLoading:g,error:w,refetch:N}=ve({queryKey:["admin-bookings",l],queryFn:async()=>{const M=new URLSearchParams;l.status!=="all"&&M.set("status",l.status),l.service_id!=="all"&&M.set("service_id",l.service_id),l.start_date&&M.set("appointment_date_from",l.start_date),l.end_date&&M.set("appointment_date_to",l.end_date),l.search&&M.set("query",l.search),M.set("limit",l.limit.toString()),M.set("offset",((l.page-1)*l.limit).toString()),M.set("sort_by",l.sort_by),M.set("sort_order",l.sort_order);const U=await Y.get(`${uc()}/api/admin/bookings?${M.toString()}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),W=U.data.bookings||[],Q=U.data.total||W.length;return{bookings:W,total:Q,page:l.page,limit:l.limit,has_more:Q>l.page*l.limit}},staleTime:30*1e3,enabled:!!a}),{data:_=[]}=ve({queryKey:["services"],queryFn:async()=>(await Y.get(`${uc()}/api/services?is_active=true&sort_by=display_order&sort_order=asc`)).data.services||[],staleTime:5*60*1e3}),y=ye({mutationFn:async M=>{await Y.post(`${uc()}/api/bookings/${M}/cancel`,{cancellation_reason:"Cancelled by admin",cancelled_by:"admin"},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),S=ye({mutationFn:async({bookingId:M,status:U})=>{await Y.patch(`${uc()}/api/bookings/${M}`,{status:U},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),A=h.useCallback(M=>{c(U=>({...U,sort_by:M,sort_order:U.sort_by===M&&U.sort_order==="asc"?"desc":"asc",page:1}))},[]),I=h.useCallback(M=>{c(U=>({...U,page:M})),window.scrollTo({top:0,behavior:"smooth"})},[]),F=h.useCallback(M=>{c(U=>({...U,limit:M,page:1}))},[]),H=h.useCallback(M=>{x(U=>{const W=new Set(U);return W.has(M)?W.delete(M):W.add(M),j(W.size>0),W})},[]),E=h.useCallback(()=>{if(!(b!=null&&b.bookings))return;const M=b.bookings.map(U=>U.booking_id);m.size===M.length?(x(new Set),j(!1)):(x(new Set(M)),j(!0))},[b,m.size]),L=h.useCallback(()=>{x(new Set),j(!1)},[]),O=h.useCallback(()=>{if(!(b!=null&&b.bookings))return;const M=b.bookings.filter(U=>m.has(U.booking_id));ky(M,_)},[b,m,_]),R=h.useCallback(()=>{b!=null&&b.bookings&&ky(b.bookings,_)},[b,_]),z=h.useCallback(async()=>{if(!confirm(`Cancel ${m.size} selected booking(s)?`))return;const M=Array.from(m).map(U=>y.mutateAsync(U).catch(()=>null));await Promise.all(M),L()},[m,y,L]),ee=h.useCallback(async(M,U)=>{confirm(`Cancel booking ${U}?`)&&await y.mutateAsync(M)},[y]),C=h.useCallback(async(M,U)=>{await S.mutateAsync({bookingId:M,status:U}),v(null)},[S]),k=h.useMemo(()=>b?Math.ceil(b.total/l.limit):0,[b,l.limit]),D=h.useMemo(()=>{const M=[];if(k<=5)for(let W=1;W<=k;W++)M.push(W);else{M.push(1),l.page>3&&M.push("...");const W=Math.max(2,l.page-1),Q=Math.min(k-1,l.page+1);for(let B=W;B<=Q;B++)M.push(B);l.page<k-2&&M.push("..."),M.push(k)}return M},[l.page,k]),T=M=>l.sort_by!==M?null:r.jsx("span",{className:"ml-1",children:l.sort_order==="asc"?"":""}),P=()=>r.jsxs("div",{className:"text-center py-16 px-4",children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"mx-auto h-16 w-16 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"No bookings found"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-4",children:"Try adjusting your filters or date range"}),r.jsx(Z,{to:"/admin/bookings/new",className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors",children:"Add New Booking"})]}),V=()=>r.jsx("div",{className:"animate-pulse",children:[...Array(5)].map((M,U)=>r.jsx("div",{className:"border-b border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})]})},U))}),J=(b==null?void 0:b.bookings)||[],K=(b==null?void 0:b.total)||0;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] border-b border-white/10 sticky top-16 z-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"All Bookings"}),r.jsxs("div",{className:"flex bg-[#2D0808] rounded-lg p-1",children:[r.jsx("button",{onClick:()=>e("/admin/bookings/calendar"),className:"px-4 py-2 text-sm font-medium text-master-text-secondary-dark rounded-md hover:bg-[#2D0808] hover:shadow-sm transition-all",children:"Calendar View"}),r.jsx("button",{className:"px-4 py-2 text-sm font-medium text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 rounded-md shadow-sm",children:"List View"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>e("/admin/bookings/new"),className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark font-medium rounded-lg hover:from-red-700 hover:to-red-800 shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Booking"}),r.jsx("button",{onClick:R,className:"px-4 py-3 bg-[#2D0808] text-master-text-primary-dark font-medium rounded-lg border border-white/20 hover:bg-gray-200 transition-all duration-200",children:"Export to CSV"}),r.jsx("button",{onClick:()=>N(),className:"p-3 text-master-text-secondary-dark hover:bg-[#5C1B1B] rounded-lg transition-colors",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"From Date"}),r.jsx("input",{type:"date",value:l.start_date,onChange:M=>c(U=>({...U,start_date:M.target.value,page:1})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"To Date"}),r.jsx("input",{type:"date",value:l.end_date,onChange:M=>c(U=>({...U,end_date:M.target.value,page:1})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"Status"}),r.jsxs("select",{value:l.status,onChange:M=>c(U=>({...U,status:M.target.value,page:1})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"confirmed",children:"Upcoming"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"pending",children:"Pending"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"Service"}),r.jsxs("select",{value:l.service_id,onChange:M=>c(U=>({...U,service_id:M.target.value,page:1})),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All"}),_.map(M=>r.jsx("option",{value:M.service_id,children:M.name},M.service_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Name, phone, or ticket",value:d,onChange:M=>u(M.target.value),className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500"})]})]})]})}),p&&r.jsx("div",{className:"bg-[#2D0808] border-b border-blue-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[m.size," selected"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:O,className:"px-4 py-2 text-sm font-medium text-blue-700 bg-[#2D0808] rounded-md border border-blue-300 hover:bg-[#2D0808] transition-colors",children:"Export Selected"}),r.jsx("button",{onClick:z,className:"px-4 py-2 text-sm font-medium text-red-300 bg-[#2D0808] rounded-md border border-red-300 hover:bg-red-50 transition-colors",children:"Cancel Selected"}),r.jsx("button",{onClick:L,className:"text-sm text-blue-700 hover:text-blue-900 font-medium",children:"Deselect All"})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[w&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[r.jsx("p",{className:"text-red-300",children:"Failed to load bookings. Please try again."}),r.jsx("button",{onClick:()=>N(),className:"mt-2 form-error-text underline hover:no-underline",children:"Retry"})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg overflow-hidden",children:g?V():J.length===0?P():r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:J.length>0&&m.size===J.length,onChange:E,className:"w-4 h-4 text-amber-400 border-white/20 rounded focus:ring-red-500"})}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider cursor-pointer hover:bg-[#5C1B1B]",onClick:()=>A("ticket_number"),children:["Ticket Number ",T("ticket_number")]}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider cursor-pointer hover:bg-[#5C1B1B]",onClick:()=>A("appointment_date"),children:["Date & Time ",T("appointment_date")]}),r.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider cursor-pointer hover:bg-[#5C1B1B]",onClick:()=>A("customer_name"),children:["Customer ",T("customer_name")]}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Phone"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:J.map(M=>{const U=_.find(W=>W.service_id===M.service_id);return r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:m.has(M.booking_id),onChange:()=>H(M.booking_id),className:"w-4 h-4 text-amber-400 border-white/20 rounded focus:ring-red-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(Z,{to:`/admin/bookings/${M.ticket_number}`,className:"text-amber-400 hover:text-blue-800 font-medium",children:M.ticket_number})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-primary-dark",children:cD(M.appointment_date,M.appointment_time)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-master-text-primary-dark",children:M.customer_name}),r.jsx("div",{className:"text-sm text-master-text-muted-dark",children:M.customer_email})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-muted-dark",children:r.jsx("a",{href:`tel:${M.customer_phone}`,className:"text-amber-400 hover:text-blue-800",children:M.customer_phone})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-primary-dark",children:(U==null?void 0:U.name)||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${dD(M.status)}`,children:M.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(Z,{to:`/admin/bookings/${M.ticket_number}`,className:"text-master-text-secondary-dark hover:text-master-text-primary-dark",title:"View",children:r.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),M.status==="confirmed"&&r.jsx("button",{onClick:()=>ee(M.booking_id,M.ticket_number),className:"text-red-600 hover:text-red-900",title:"Cancel",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>v(f===M.booking_id?null:M.booking_id),className:"text-master-text-secondary-dark hover:text-master-text-primary-dark",title:"More",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),f===M.booking_id&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-[#2D0808] rounded-lg shadow-lg border border-white/10 z-20",children:[r.jsx("button",{onClick:()=>C(M.booking_id,"completed"),className:"w-full text-left px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-[#5C1B1B]",children:"Mark Completed"}),r.jsx("button",{onClick:()=>C(M.booking_id,"cancelled"),className:"w-full text-left px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-[#5C1B1B]",children:"Mark No-show"}),r.jsx(Z,{to:`/admin/bookings/${M.ticket_number}`,className:"block w-full text-left px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-[#5C1B1B]",children:"Add Note"})]})]})]})})]},M.booking_id)})})]})}),r.jsx("div",{className:"bg-[#2D0808] px-4 py-3 border-t border-white/10 sm:px-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-sm text-master-text-secondary-dark",children:["Showing ",r.jsx("span",{className:"font-medium",children:(l.page-1)*l.limit+1})," to"," ",r.jsx("span",{className:"font-medium",children:Math.min(l.page*l.limit,K)})," of"," ",r.jsx("span",{className:"font-medium",children:K})," bookings"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:l.limit,onChange:M=>F(Number(M.target.value)),className:"px-3 py-1 border border-white/20 rounded-md text-sm focus:ring-red-500 focus:border-blue-500",children:[r.jsx("option",{value:"20",children:"20"}),r.jsx("option",{value:"50",children:"50"}),r.jsx("option",{value:"100",children:"100"})]}),r.jsxs("nav",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>I(l.page-1),disabled:l.page===1,className:"px-3 py-1 text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] border border-white/20 rounded-md hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),D.map((M,U)=>typeof M=="number"?r.jsx("button",{onClick:()=>I(M),className:`px-3 py-1 text-sm font-medium rounded-md ${l.page===M?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"text-master-text-secondary-dark bg-[#2D0808] border border-white/20 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:M},U):r.jsx("span",{className:"px-2 text-master-text-muted-dark",children:M},U)),r.jsx("button",{onClick:()=>I(l.page+1),disabled:!(b!=null&&b.has_more),className:"px-3 py-1 text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] border border-white/20 rounded-md hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]})})]})]})})},hD=()=>{const{ticket_number:e}=Px(),t=dr(),[s,n]=h.useState(!1),[a,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(!1),[u,m]=h.useState(""),[x,p]=h.useState(null),j=R=>{try{return new Date(R).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return R}},f=R=>{try{const[z,ee]=R.split(":"),C=parseInt(z,10),k=C>=12?"PM":"AM";return`${C%12||12}:${ee} ${k}`}catch{return R}},v=R=>{try{return new Date(R).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return R}},b=(R,z)=>{try{const[ee,C]=R.split(":"),D=parseInt(ee,10)*60+parseInt(C,10)+z,T=Math.floor(D/60),P=D%60;return f(`${T.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`)}catch{return""}},g=async()=>{if(e)try{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)}catch(R){console.error("Failed to copy:",R)}},w=R=>{switch(R){case"confirmed":return"bg-blue-900/30 text-blue-400 border-blue-200";case"completed":return"bg-green-900/30 text-green-400 border-green-200";case"cancelled":return"bg-red-900/30 text-red-400 border-red-200";case"pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-200";default:return"bg-gray-100 text-master-text-secondary-dark border-white/10"}},N=R=>R.charAt(0).toUpperCase()+R.slice(1),{data:_,isLoading:y,error:S}=ve({queryKey:["admin-booking",e],queryFn:async()=>{if(!e||!/^TKT-\d{4,8}-\d{3}$/.test(e))throw new Error("Invalid ticket number format");const R=localStorage.getItem("admin_token");return(await Y.get(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}`,{headers:{Authorization:`Bearer ${R}`}})).data},enabled:!!e,staleTime:3e4,retry:1,select:R=>{const z=R.booking||R;return{booking:z,service_details:z.service_id?{service_id:z.service_id,name:R.service_name||"Haircut",price:R.service_price?Number(R.service_price):null,duration:R.service_duration||z.slot_duration||40}:null}}}),A=_==null?void 0:_.booking,I=_==null?void 0:_.service_details;h.useMemo(()=>{A!=null&&A.admin_notes&&l(A.admin_notes)},[A]);const F=ye({mutationFn:async()=>{const R=localStorage.getItem("admin_token");return(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}/complete`,{},{headers:{Authorization:`Bearer ${R}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]})}}),H=ye({mutationFn:async R=>{const z=localStorage.getItem("admin_token");return(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}/cancel`,{cancellation_reason:R,cancelled_by:"admin"},{headers:{Authorization:`Bearer ${z}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]}),d(!1),m("")}}),E=ye({mutationFn:async R=>{const z=localStorage.getItem("admin_token");return(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/bookings/${e}`,{admin_notes:R},{headers:{Authorization:`Bearer ${z}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]}),i(!1)}}),L=()=>{E.mutate(o)},O=()=>{u.trim()&&H.mutate(u)};return y?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark text-lg",children:"Loading booking details..."})]})}):S||!A?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"max-w-md w-full text-center",children:[r.jsx(De,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-2",children:"Booking Not Found"}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-6",children:["We couldn't find a booking with ticket number: ",r.jsx("strong",{children:e})]}),r.jsx("div",{className:"space-y-3",children:r.jsx(Z,{to:"/admin/bookings",className:"block w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Back to Bookings"})})]})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(Z,{to:"/admin/bookings",className:"inline-flex items-center text-amber-400 hover:text-blue-700 font-medium",children:[r.jsx(Zh,{className:"w-4 h-4 mr-2"}),"Back to Bookings"]})}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark mb-2",children:"Booking Details"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl font-mono text-amber-400",children:e}),r.jsx("button",{onClick:g,className:"p-2 text-master-text-muted-dark hover:text-amber-400 transition-colors rounded-lg hover:bg-[#2D0808]",title:"Copy ticket number",children:s?r.jsx(pt,{className:"w-5 h-5 text-green-600"}):r.jsx(zx,{className:"w-5 h-5"})})]})]}),r.jsx("div",{children:r.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${w(A.status)}`,children:N(A.status)})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Appointment Details"}),r.jsxs("div",{className:"space-y-3",children:[I&&r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(qe,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Service"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:I.name}),I.price&&r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:["$",I.price]})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(qe,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Date"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:j(A.appointment_date)})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(tt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Time"}),r.jsxs("p",{className:"text-base font-medium text-master-text-primary-dark",children:[f(A.appointment_time)," - ",b(A.appointment_time,A.slot_duration)]}),r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[A.slot_duration," minutes"]})]})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Customer Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(cr,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Name"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:A.customer_name}),A.booking_for_name&&r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:["Booking for: ",A.booking_for_name]})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx($t,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Email"}),r.jsx("a",{href:`mailto:${A.customer_email}`,className:"text-base font-medium text-amber-400 hover:text-blue-700",children:A.customer_email})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Pt,{className:"w-5 h-5 text-master-text-muted-dark mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Phone"}),r.jsx("a",{href:`tel:${A.customer_phone}`,className:"text-base font-medium text-amber-400 hover:text-blue-700",children:A.customer_phone})]})]})]})]}),(A.special_request||A.inspiration_photos&&A.inspiration_photos.length>0)&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Special Requests"}),r.jsxs("div",{className:"space-y-4",children:[A.special_request&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-1",children:"Customer Notes"}),r.jsx("p",{className:"text-base text-master-text-primary-dark bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] p-3 rounded-lg",children:A.special_request})]}),A.inspiration_photos&&A.inspiration_photos.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-2",children:"Inspiration Photos"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:A.inspiration_photos.map((R,z)=>r.jsx("button",{onClick:()=>p(z),className:"relative aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-red-500 transition-all",children:r.jsx("img",{src:R,alt:`Inspiration ${z+1}`,className:"w-full h-full object-cover"})},z))})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Admin Notes"}),a?r.jsx("button",{onClick:L,disabled:E.isPending,className:"text-green-600 hover:text-green-300 disabled:opacity-50",children:r.jsx(d2,{className:"w-5 h-5"})}):r.jsx("button",{onClick:()=>i(!0),className:"text-amber-400 hover:text-blue-700",children:r.jsx(ZC,{className:"w-5 h-5"})})]}),a?r.jsx("textarea",{value:o,onChange:R=>l(R.target.value),rows:6,className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500",placeholder:"Add internal notes about this booking..."}):r.jsx("div",{className:"text-base text-master-text-secondary-dark whitespace-pre-wrap bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] p-3 rounded-lg min-h-[100px]",children:A.admin_notes||"No notes added yet"})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Admin Actions"}),r.jsxs("div",{className:"space-y-3",children:[A.status==="confirmed"&&r.jsx("button",{onClick:()=>F.mutate(),disabled:F.isPending,className:"w-full bg-green-600 text-master-text-primary-dark px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:F.isPending?"Marking...":"Mark as Completed"}),(A.status==="confirmed"||A.status==="pending")&&r.jsx("button",{onClick:()=>d(!0),className:"w-full bg-red-600 text-master-text-primary-dark px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Cancel Booking"})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Timeline"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[A.created_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark",children:"Created"}),r.jsx("p",{className:"text-master-text-primary-dark",children:v(A.created_at)})]}),A.confirmed_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark",children:"Confirmed"}),r.jsx("p",{className:"text-master-text-primary-dark",children:v(A.confirmed_at)})]}),A.completed_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark",children:"Completed"}),r.jsx("p",{className:"text-master-text-primary-dark",children:v(A.completed_at)})]}),A.cancelled_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-master-text-muted-dark",children:"Cancelled"}),r.jsx("p",{className:"text-master-text-primary-dark",children:v(A.cancelled_at)}),A.cancellation_reason&&r.jsxs("p",{className:"text-master-text-secondary-dark mt-1",children:["Reason: ",A.cancellation_reason]})]})]})]})]})]})]})}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Cancel Booking"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Cancellation Reason"}),r.jsx("textarea",{value:u,onChange:R=>m(R.target.value),rows:3,className:"w-full px-4 py-2 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500",placeholder:"Enter reason for cancellation..."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-100 text-master-text-secondary-dark px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:O,disabled:H.isPending||!u.trim(),className:"flex-1 bg-red-600 text-master-text-primary-dark px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:H.isPending?"Cancelling...":"Confirm"})]})]})}),x!==null&&A.inspiration_photos&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>p(null),children:r.jsx("div",{className:"max-w-4xl max-h-full",children:r.jsx("img",{src:A.inspiration_photos[x],alt:`Inspiration ${x+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:R=>R.stopPropagation()})})})]})},Cm="admin_booking_form_draft",pD=1,xD=()=>{var W,Q;const e=Ie(),[t]=xt(),s=re(B=>B.authentication_state.auth_token),[n,a]=h.useState({service_id:"",appointment_date:"",appointment_time:"",customer_name:"",customer_email:"",customer_phone:"",booking_for_name:"",special_request:"",admin_notes:"",is_booking_for_other:!1,skip_confirmation:!1,mark_as_prepaid:!1,override_capacity:!1}),[i,o]=h.useState({}),[l,c]=h.useState(!1),[d,u]=h.useState(null),[m,x]=h.useState(!1),[p,j]=h.useState(!1),f="https://123barber-booking-app-with-ticket-system.launchpulse.ai",v=t.get("customer_id"),b=t.get("date"),g=t.get("time"),{data:w,isLoading:N}=ve({queryKey:["services","active"],queryFn:async()=>(await Y.get(`${f}/api/services?is_active=true&sort_by=display_order&sort_order=asc`)).data.services||[],staleTime:5*60*1e3,retry:1}),_=w||[],{data:y,isLoading:S}=ve({queryKey:["customer",v],queryFn:async()=>!v||!s?null:(await Y.get(`${f}/api/admin/customers/${v}`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!v&&!!s,staleTime:5*60*1e3,retry:1}),{data:A,isLoading:I}=ve({queryKey:["availability",n.appointment_date,n.service_id],queryFn:async()=>{if(!n.appointment_date)return null;const B=n.service_id?`?service_id=${n.service_id}`:"";return(await Y.get(`${f}/api/availability/${n.appointment_date}${B}`)).data},enabled:!!n.appointment_date,staleTime:30*1e3,retry:1}),F=h.useMemo(()=>(A==null?void 0:A.slots)||[],[A==null?void 0:A.slots]),H=ye({mutationFn:async B=>(await Y.post(`${f}/api/bookings`,B,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}})).data,onSuccess:B=>{u(B),c(!0),O(),a({service_id:"",appointment_date:"",appointment_time:"",customer_name:"",customer_email:"",customer_phone:"",booking_for_name:"",special_request:"",admin_notes:"",is_booking_for_other:!1,skip_confirmation:!1,mark_as_prepaid:!1,override_capacity:!1}),o({})},onError:B=>{var pe,we,vt;const te=((vt=(we=(pe=B.response)==null?void 0:pe.data)==null?void 0:we.error)==null?void 0:vt.message)||B.message||"Failed to create booking";alert(`Error: ${te}`)}}),E=h.useCallback(()=>{const B={formData:n,timestamp:Date.now()};sessionStorage.setItem(Cm,JSON.stringify(B))},[n]),L=h.useCallback(()=>{const B=sessionStorage.getItem(Cm);if(B)try{const te=JSON.parse(B),pe=Date.now()-te.timestamp,we=pD*60*60*1e3;pe<we?a(te.formData):O()}catch{O()}},[]),O=()=>{sessionStorage.removeItem(Cm)};h.useEffect(()=>{L()},[L]),h.useEffect(()=>{y&&a(B=>({...B,customer_name:y.name,customer_email:y.email,customer_phone:y.phone}))},[y]),h.useEffect(()=>{b&&!n.appointment_date&&a(B=>({...B,appointment_date:b}))},[b,n.appointment_date]),h.useEffect(()=>{if(g&&n.appointment_date&&F.length>0){const B=F.find(te=>te.time===g);B&&B.is_available&&a(te=>({...te,appointment_time:g}))}},[g,n.appointment_date,F]),h.useEffect(()=>{if(Object.values(n).some(te=>te!==""&&te!==!1)){const te=setTimeout(E,1e3);return()=>clearTimeout(te)}},[n,E]),h.useEffect(()=>{if(n.appointment_time&&F.length>0){const B=F.find(te=>te.time===n.appointment_time);B&&B.available_slots===0?x(!0):x(!1)}else x(!1)},[n.appointment_time,F]);const R=(B,te)=>{a(pe=>({...pe,[B]:te})),i[B]&&o(pe=>{const we={...pe};return delete we[B],we})},z=B=>{const te=B.target.value;a(pe=>({...pe,appointment_date:te,appointment_time:""}))},ee=B=>{const te=B.target.value;a(pe=>({...pe,appointment_time:te}))},C=()=>{const B={};n.customer_name.trim()?(n.customer_name.length<2||n.customer_name.length>255)&&(B.customer_name="Customer name must be between 2 and 255 characters"):B.customer_name="Customer name is required";const te=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;n.customer_email.trim()?te.test(n.customer_email)||(B.customer_email="Please enter a valid email address"):B.customer_email="Email is required";const pe=/^\+?[1-9]\d{1,14}$/;return n.customer_phone.trim()?pe.test(n.customer_phone.replace(/[\s()-]/g,""))||(B.customer_phone="Please enter a valid phone number"):B.customer_phone="Phone number is required",n.appointment_date||(B.appointment_date="Please select an appointment date"),n.appointment_time||(B.appointment_time="Please select a time slot"),n.special_request.length>1e3&&(B.special_request="Special request must be 1000 characters or less"),n.admin_notes.length>2e3&&(B.admin_notes="Admin notes must be 2000 characters or less"),o(B),Object.keys(B).length===0},k=async B=>{if(B.preventDefault(),!C()){alert("Please fix the validation errors before submitting");return}if(m&&!n.override_capacity){alert('This slot is at full capacity. Please check "Override capacity" to proceed.');return}if(n.override_capacity&&m){j(!0);return}await D()},D=async()=>{const B={user_id:null,appointment_date:n.appointment_date,appointment_time:n.appointment_time,slot_duration:40,customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,booking_for_name:n.is_booking_for_other&&n.booking_for_name?n.booking_for_name:null,service_id:n.service_id||null,special_request:n.special_request||null,inspiration_photos:null};await H.mutateAsync(B)},T=async()=>{j(!1),await D()},P=()=>{Object.values(n).some(te=>te!==""&&te!==!1)&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(O(),e("/admin/bookings/calendar"))},V=()=>{c(!1),u(null),window.scrollTo({top:0,behavior:"smooth"})},J=()=>{d&&e(`/admin/bookings/${d.ticket_number}`)},K=()=>{d&&e(`/admin/bookings/calendar?highlight=${d.ticket_number}`)},M=()=>!n.appointment_date||!n.appointment_time?!1:new Date(`${n.appointment_date}T${n.appointment_time}`)<new Date,U=B=>{const te=F.find(pe=>pe.time===B);return te?{count:te.total_capacity-te.available_slots,capacity:te.total_capacity,available:te.available_slots}:null};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("nav",{className:"flex items-center text-sm text-master-text-secondary-dark mb-4",children:[r.jsx(Z,{to:"/admin",className:"hover:text-amber-400 transition-colors",children:"Admin"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Z,{to:"/admin/bookings",className:"hover:text-amber-400 transition-colors",children:"Bookings"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-master-text-primary-dark font-medium",children:"Add Booking"})]}),r.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-master-text-primary-dark leading-tight",children:"Add Manual Booking"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark text-base leading-relaxed",children:"Create a booking for walk-ins, phone bookings, or record-keeping"})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg shadow-gray-200/50 border border-gray-100 overflow-hidden",children:r.jsxs("form",{onSubmit:k,className:"p-6 lg:p-8 space-y-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h2",{className:"text-xl font-semibold text-master-text-secondary-dark flex items-center",children:[r.jsx("span",{className:"w-8 h-8 bg-blue-100 text-amber-400 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"1"}),"Service Selection"]}),N?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"}),r.jsx("span",{className:"ml-3 text-master-text-secondary-dark",children:"Loading services..."})]}):r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service_id",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Service Type"}),r.jsxs("select",{id:"service_id",value:n.service_id,onChange:B=>R("service_id",B.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200 outline-none",children:[r.jsx("option",{value:"",children:"None / General Haircut"}),_.map(B=>r.jsxs("option",{value:B.service_id,children:[B.name," ",B.price?`- $${typeof B.price=="number"?B.price.toFixed(2):parseFloat(String(B.price)).toFixed(2)}`:""]},B.service_id))]}),r.jsx("p",{className:"mt-2 text-sm text-master-text-muted-dark",children:'Optional: Select a specific service or leave as "General Haircut"'})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h2",{className:"text-xl font-semibold text-master-text-secondary-dark flex items-center",children:[r.jsx("span",{className:"w-8 h-8 bg-blue-100 text-amber-400 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"2"}),"Date & Time"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"appointment_date",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Appointment Date *"}),r.jsx("input",{type:"date",id:"appointment_date",value:n.appointment_date,onChange:z,className:`w-full px-4 py-3 rounded-lg border-2 ${i.appointment_date?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.appointment_date&&r.jsx("p",{className:"mt-1 form-error-text",children:i.appointment_date}),r.jsx("p",{className:"mt-2 text-sm text-master-text-muted-dark",children:"Past dates allowed for record-keeping"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"appointment_time",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Time Slot *"}),r.jsxs("select",{id:"appointment_time",value:n.appointment_time,onChange:ee,disabled:!n.appointment_date||I,className:`w-full px-4 py-3 rounded-lg border-2 ${i.appointment_time?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none disabled:bg-gray-100 disabled:cursor-not-allowed`,children:[r.jsx("option",{value:"",children:"Select time slot"}),F.map(B=>{const te=U(B.time);return r.jsxs("option",{value:B.time,disabled:!B.is_available&&!n.override_capacity,children:[B.time," - ",te?`${te.count}/${te.capacity} booked`:"Loading...",B.available_slots===0?" (FULL)":B.available_slots===1?" (1 left)":""]},B.time)})]}),i.appointment_time&&r.jsx("p",{className:"mt-1 form-error-text",children:i.appointment_time}),I&&r.jsxs("p",{className:"mt-2 text-sm text-master-text-muted-dark flex items-center",children:[r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading availability..."]})]})]}),m&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("svg",{className:"h-5 w-5 text-amber-600 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-amber-800",children:"Slot at Capacity"}),r.jsx("p",{className:"mt-1 text-sm text-amber-700",children:'This time slot is at full capacity. Check "Override capacity" below to proceed.'}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:n.override_capacity,onChange:B=>R("override_capacity",B.target.checked),className:"h-4 w-4 text-amber-400 border-white/20 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-amber-900",children:"Override capacity limit"})]}),n.override_capacity&&r.jsx("p",{className:"mt-2 text-sm text-amber-600 bg-amber-100 px-3 py-2 rounded-md",children:" This will exceed the slot capacity. Confirm before submitting."})]})]})]})}),M()&&r.jsxs("div",{className:"bg-[#2D0808] border border-blue-200 rounded-lg p-4 flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-amber-400 mr-2 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"Past Booking"}),r.jsx("p",{className:"mt-1 text-sm text-blue-700",children:'This booking is in the past. Status will be set to "Completed" upon creation.'})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h2",{className:"text-xl font-semibold text-master-text-secondary-dark flex items-center",children:[r.jsx("span",{className:"w-8 h-8 bg-blue-100 text-amber-400 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"3"}),"Customer Information"]}),S&&r.jsxs("div",{className:"flex items-center text-sm text-master-text-secondary-dark bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-3",children:[r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customer information..."]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Customer Name *"}),r.jsx("input",{type:"text",id:"customer_name",value:n.customer_name,onChange:B=>R("customer_name",B.target.value),placeholder:"John Smith",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_name&&r.jsx("p",{className:"mt-1 form-error-text",children:i.customer_name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Email Address *"}),r.jsx("input",{type:"email",id:"customer_email",value:n.customer_email,onChange:B=>R("customer_email",B.target.value),placeholder:"john@example.com",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_email&&r.jsx("p",{className:"mt-1 form-error-text",children:i.customer_email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Phone Number *"}),r.jsx("input",{type:"tel",id:"customer_phone",value:n.customer_phone,onChange:B=>R("customer_phone",B.target.value),placeholder:"+1 (555) 123-4567",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_phone&&r.jsx("p",{className:"mt-1 form-error-text",children:i.customer_phone})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:n.is_booking_for_other,onChange:B=>R("is_booking_for_other",B.target.checked),className:"h-4 w-4 text-amber-400 border-white/20 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-master-text-secondary-dark",children:"Booking for someone else"})]}),n.is_booking_for_other&&r.jsxs("div",{className:"ml-6 animate-fadeIn",children:[r.jsx("label",{htmlFor:"booking_for_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Person's Name"}),r.jsx("input",{type:"text",id:"booking_for_name",value:n.booking_for_name,onChange:B=>R("booking_for_name",B.target.value),placeholder:"e.g., Child's name, family member",className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200 outline-none"}),r.jsx("p",{className:"mt-2 text-sm text-master-text-muted-dark",children:"We'll still use the contact info above for confirmations"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h2",{className:"text-xl font-semibold text-master-text-secondary-dark flex items-center",children:[r.jsx("span",{className:"w-8 h-8 bg-blue-100 text-amber-400 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"4"}),"Special Options"]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"special_request",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Special Request"}),r.jsx("textarea",{id:"special_request",value:n.special_request,onChange:B=>R("special_request",B.target.value),placeholder:"Any special requests or preferences...",rows:3,maxLength:1e3,className:`w-full px-4 py-3 rounded-lg border-2 ${i.special_request?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none resize-none`}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Optional customer preferences"}),r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:[n.special_request.length,"/1000"]})]}),i.special_request&&r.jsx("p",{className:"mt-1 form-error-text",children:i.special_request})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"admin_notes",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Admin Notes (Private)"}),r.jsx("textarea",{id:"admin_notes",value:n.admin_notes,onChange:B=>R("admin_notes",B.target.value),placeholder:"Internal notes (not visible to customer)...",rows:3,maxLength:2e3,className:`w-full px-4 py-3 rounded-lg border-2 ${i.admin_notes?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-red-100"} focus:ring-4 transition-all duration-200 outline-none resize-none`}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Private admin notes"}),r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:[n.admin_notes.length,"/2000"]})]}),i.admin_notes&&r.jsx("p",{className:"mt-1 form-error-text",children:i.admin_notes})]}),r.jsxs("div",{className:"space-y-3 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:n.skip_confirmation,onChange:B=>R("skip_confirmation",B.target.checked),className:"h-4 w-4 text-amber-400 border-white/20 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-master-text-secondary-dark",children:"Skip confirmation email"})]}),r.jsx("p",{className:"ml-6 text-sm text-master-text-muted-dark",children:"Don't send confirmation email (useful for walk-ins already present)"}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:n.mark_as_prepaid,onChange:B=>R("mark_as_prepaid",B.target.checked),className:"h-4 w-4 text-amber-400 border-white/20 rounded focus:ring-red-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-master-text-secondary-dark",children:"Mark as pre-paid"})]}),r.jsx("p",{className:"ml-6 text-sm text-master-text-muted-dark",children:"Customer has already paid for this booking"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-white/10",children:[r.jsx("button",{type:"submit",disabled:H.isPending,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:H.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Booking..."]}):"Create Booking"}),r.jsx("button",{type:"button",onClick:P,disabled:H.isPending,className:"flex-1 sm:flex-initial px-6 py-3 bg-gray-100 hover:bg-gray-200 text-master-text-primary-dark rounded-lg font-medium border border-white/20 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full p-6 animate-fadeIn",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mr-4",children:r.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:"Override Capacity?"})]}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-6",children:["This slot currently has ",((W=U(n.appointment_time))==null?void 0:W.count)||0," bookings out of"," ",((Q=U(n.appointment_time))==null?void 0:Q.capacity)||0," capacity. Creating this booking will exceed the capacity limit."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-master-text-primary-dark rounded-lg font-medium transition-colors",children:"Cancel"}),r.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-master-text-primary-dark rounded-lg font-medium transition-colors",children:"Proceed with Override"})]})]})}),l&&d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-lg w-full p-8 animate-fadeIn",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark text-center mb-2",children:"Booking Created Successfully!"}),r.jsx("p",{className:"text-master-text-secondary-dark text-center mb-6",children:"The booking has been created and the customer will receive a confirmation."}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-4 mb-6 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Ticket Number:"}),r.jsx("span",{className:"text-lg font-bold text-amber-400",children:d.ticket_number})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Customer:"}),r.jsx("span",{className:"text-sm text-master-text-primary-dark",children:d.customer_name})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Date & Time:"}),r.jsxs("span",{className:"text-sm text-master-text-primary-dark",children:[new Date(d.appointment_date).toLocaleDateString()," at"," ",d.appointment_time]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:J,className:"w-full px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-master-text-primary-dark rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"View Booking Detail"}),r.jsx("button",{onClick:V,className:"w-full px-6 py-3 bg-gray-100 hover:bg-gray-200 text-master-text-primary-dark rounded-lg font-medium border border-white/20 transition-all duration-200",children:"Create Another Booking"}),r.jsx("button",{onClick:K,className:"w-full text-amber-400 hover:text-blue-700 font-medium transition-colors",children:"Go to Calendar"})]})]})})]})},fD=()=>{const[e]=xt(),t=e.get("date"),s=re(ne=>ne.authentication_state.auth_token),n=re(ne=>ne.app_settings.capacity_mon_wed),a=re(ne=>ne.app_settings.capacity_thu_sun),i=re(ne=>ne.update_app_settings),[o,l]=h.useState("overrides"),[c,d]=h.useState(t||null),[u,m]=h.useState(null),[x,p]=h.useState(null),[j,f]=h.useState(!1),[v,b]=h.useState(null),[g,w]=h.useState(null),[N,_]=h.useState(null),[y,S]=h.useState(null),[A,I]=h.useState({date:null,capacity:null}),[F,H]=h.useState(null),E="https://123barber-booking-app-with-ticket-system.launchpulse.ai",{data:L,isLoading:O}=ve({queryKey:["admin-settings"],queryFn:async()=>(await Y.get(`${E}/api/admin/settings`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s,staleTime:6e4}),{data:R,isLoading:z,refetch:ee}=ve({queryKey:["capacity-overrides"],queryFn:async()=>(await Y.get(`${E}/api/admin/capacity-overrides`,{headers:{Authorization:`Bearer ${s}`},params:{is_active:!0,sort_by:"override_date",sort_order:"asc",limit:100}})).data,enabled:!!s,staleTime:3e4}),C=(R==null?void 0:R.overrides)||[],k=ye({mutationFn:async ne=>(await Y.post(`${E}/api/admin/capacity-overrides`,ne,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{ee(),d(null),m(null),p(null),I({date:null,capacity:null}),H(null)}}),D=ye({mutationFn:async({override_id:ne,payload:Oe})=>(await Y.patch(`${E}/api/admin/capacity-overrides/${ne}`,Oe,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{ee(),_(null)}}),T=ye({mutationFn:async ne=>(await Y.delete(`${E}/api/admin/capacity-overrides/${ne}`,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{ee(),S(null)}}),P=ye({mutationFn:async ne=>(await Y.patch(`${E}/api/admin/settings`,ne,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:ne=>{i({capacity_mon_wed:ne.capacity_mon_wed,capacity_thu_sun:ne.capacity_thu_sun}),f(!1),b(null),w(null)}}),[V,J]=h.useState(!1),K=async(ne,Oe)=>{J(!0);try{const kr=((await Y.get(`${E}/api/admin/bookings`,{headers:{Authorization:`Bearer ${s}`},params:{appointment_date:ne,status:"upcoming"}})).data.data||[]).length;return kr>Oe?(H({show:!0,count:kr,date:ne,capacity:Oe}),!1):!0}catch(Je){return console.error("Error checking bookings:",Je),!0}finally{J(!1)}},M=()=>{const ne={date:null,capacity:null};if(!c)ne.date="Please select a date";else if(!/^\d{4}-\d{2}-\d{2}$/.test(c))ne.date="Date must be in YYYY-MM-DD format";else{const Je=new Date(c+"T00:00:00"),Ue=new Date;Ue.setHours(0,0,0,0),isNaN(Je.getTime())?ne.date="Invalid date":Je<Ue?ne.date="Cannot create override for past dates":C.find(zt=>zt.override_date===c)&&(ne.date="Override already exists for this date. Edit the existing one instead.")}return u==null?ne.capacity="Please enter capacity":(u<0||u>10)&&(ne.capacity="Capacity must be between 0 and 10"),I(ne),!ne.date&&!ne.capacity},U=async()=>{if(!M()||!c||u===null)return;const ne=Jr(c);if(!/^\d{4}-\d{2}-\d{2}$/.test(ne)){I({...A,date:"Invalid date format. Must be YYYY-MM-DD."});return}await K(ne,u)&&k.mutate({override_date:ne,time_slot:"00:00",capacity:u,is_active:!0})},W=()=>{if(!c||u===null)return;const ne=Jr(c);if(!/^\d{4}-\d{2}-\d{2}$/.test(ne)){I({...A,date:"Invalid date format. Must be YYYY-MM-DD."}),H(null);return}k.mutate({override_date:ne,time_slot:"00:00",capacity:u,is_active:!0}),H(null)},Q=ne=>{_({override_id:ne.override_id,override_date:ne.override_date,capacity:ne.capacity,time_slot:ne.time_slot})},B=()=>{if(!N)return;const ne=Jr(N.override_date);if(!/^\d{4}-\d{2}-\d{2}$/.test(ne)){alert("Invalid date format. Must be YYYY-MM-DD.");return}D.mutate({override_id:N.override_id,payload:{override_date:ne,capacity:N.capacity,time_slot:N.time_slot}})},te=ne=>{S({override_id:ne.override_id,override_date:ne.override_date})},pe=()=>{y&&T.mutate(y.override_id)},we=()=>{b((L==null?void 0:L.capacity_mon_wed)??n),w((L==null?void 0:L.capacity_thu_sun)??a),f(!0)},vt=()=>{if(!(v===null||g===null)){if(v<0||v>10||g<0||g>10){alert("Capacity must be between 0 and 10");return}P.mutate({capacity_mon_wed:v,capacity_thu_sun:g})}},Jr=ne=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(ne)){const Je=new Date(ne);if(!isNaN(Je.getTime())){const Ue=Je.getFullYear(),kr=String(Je.getMonth()+1).padStart(2,"0"),zt=String(Je.getDate()).padStart(2,"0");return`${Ue}-${kr}-${zt}`}}return ne},es=ne=>new Date(ne+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Us=ne=>{const Je=new Date(ne).getDay();return Je>=1&&Je<=3?(L==null?void 0:L.capacity_mon_wed)??n:(L==null?void 0:L.capacity_thu_sun)??a};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Capacity Management"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark leading-relaxed",children:"Manage default slot capacity rules and date-specific overrides"})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[r.jsx("div",{className:"border-b border-white/10",children:r.jsxs("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>l("overrides"),className:`py-4 px-8 text-center border-b-2 font-medium text-sm transition-all duration-200 ${o==="overrides"?"border-red-600 text-amber-400":"border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20"}`,children:"Daily Overrides"}),r.jsx(Z,{to:"/admin/blocking",className:"py-4 px-8 text-center border-b-2 border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20 font-medium text-sm transition-all duration-200",children:"Blocked Slots"}),r.jsx("button",{onClick:()=>l("defaults"),className:`py-4 px-8 text-center border-b-2 font-medium text-sm transition-all duration-200 ${o==="defaults"?"border-red-600 text-amber-400":"border-transparent text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20"}`,children:"Default Settings"})]})}),r.jsxs("div",{className:"p-6",children:[o==="overrides"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-6 border border-white/10",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Override Capacity for Specific Date"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"override-date",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Date ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{id:"override-date",type:"date",min:new Date().toISOString().split("T")[0],value:c||"",onChange:ne=>{const Oe=ne.target.value;Oe&&/^\d{4}-\d{2}-\d{2}$/.test(Oe)?d(Oe):Oe||d(null),I({...A,date:null})},className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${A.date?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}`}),A.date&&r.jsx("p",{className:"mt-1 form-error-text",children:A.date})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"override-capacity",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["New Capacity ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{id:"override-capacity",type:"number",min:"0",max:"10",value:u===null?"":u,onChange:ne=>{const Oe=ne.target.value===""?null:parseInt(ne.target.value,10);m(Oe),I({...A,capacity:null})},placeholder:"0-10",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${A.capacity?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100"}`}),A.capacity&&r.jsx("p",{className:"mt-1 form-error-text",children:A.capacity})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"override-reason",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Reason (Optional)"}),r.jsx("input",{id:"override-reason",type:"text",value:x||"",onChange:ne=>p(ne.target.value),placeholder:"e.g., Staff shortage",className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:U,disabled:k.isPending||V,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Override..."]}):V?"Checking Bookings...":"Add Override"})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Existing Capacity Overrides"}),z?r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg border border-white/10 p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading overrides..."})]}):C.length===0?r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg border border-white/10 p-12 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-master-text-primary-dark",children:"No capacity overrides set"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"Default capacity applies to all dates."})]}):r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg border border-white/10 overflow-hidden shadow-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Capacity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Reason"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:C.map(ne=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-master-text-primary-dark",children:es(ne.override_date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-900/30 text-blue-400",children:[ne.capacity," ",ne.capacity===1?"slot":"slots"]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-master-text-secondary-dark",children:r.jsx("span",{className:"text-master-text-muted-dark italic",children:"N/A"})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3",children:[r.jsx("button",{onClick:()=>Q(ne),className:"text-amber-400 hover:text-blue-900 transition-colors",children:"Edit"}),r.jsx("button",{onClick:()=>te(ne),className:"text-red-600 hover:text-red-900 transition-colors",children:"Remove"})]})]},ne.override_id))})]})})]})]}),o==="defaults"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Default Capacity Rules"}),O?r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg border border-white/10 p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading settings..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg border border-white/10 p-6 shadow-lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg",children:[r.jsx("span",{className:"text-master-text-secondary-dark font-medium",children:"Monday - Wednesday:"}),r.jsxs("span",{className:"text-2xl font-bold text-amber-400",children:[(L==null?void 0:L.capacity_mon_wed)??n," people per slot"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg",children:[r.jsx("span",{className:"text-master-text-secondary-dark font-medium",children:"Thursday - Sunday:"}),r.jsxs("span",{className:"text-2xl font-bold text-amber-400",children:[(L==null?void 0:L.capacity_thu_sun)??a," people per slot"]})]})]})}),r.jsx("button",{onClick:we,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Edit Defaults"})]})]})]})]})]})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-dark mb-4",children:"Edit Default Capacity"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"modal-mon-wed",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Monday - Wednesday Capacity"}),r.jsx("input",{id:"modal-mon-wed",type:"number",min:"0",max:"10",value:v===null?"":v,onChange:ne=>b(ne.target.value===""?null:parseInt(ne.target.value,10)),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"modal-thu-sun",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Thursday - Sunday Capacity"}),r.jsx("input",{id:"modal-thu-sun",type:"number",min:"0",max:"10",value:g===null?"":g,onChange:ne=>w(ne.target.value===""?null:parseInt(ne.target.value,10)),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200"})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:vt,disabled:P.isPending||v===null||g===null,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:P.isPending?"Saving...":"Save Changes"})]})]})}),N&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-master-text-primary-dark mb-4",children:"Edit Capacity Override"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Date"}),r.jsx("input",{id:"edit-date",type:"date",value:N.override_date,onChange:ne=>{const Oe=ne.target.value;Oe&&/^\d{4}-\d{2}-\d{2}$/.test(Oe)&&_({...N,override_date:Oe})},className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-capacity",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Capacity"}),r.jsx("input",{id:"edit-capacity",type:"number",min:"0",max:"10",value:N.capacity,onChange:ne=>_({...N,capacity:parseInt(ne.target.value,10)}),className:"w-full px-4 py-3 rounded-lg border-2 border-white/20 focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all duration-200"})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>_(null),className:"flex-1 px-6 py-3 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:B,disabled:D.isPending,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:D.isPending?"Saving...":"Save Changes"})]})]})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("div",{className:"ml-4",children:r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:"Remove Capacity Override?"})})]}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-2",children:["Are you sure you want to remove the capacity override for"," ",r.jsx("span",{className:"font-semibold",children:es(y.override_date)}),"?"]}),r.jsxs("p",{className:"text-master-text-secondary-dark text-sm mb-6",children:["Capacity will return to default:"," ",r.jsxs("span",{className:"font-semibold",children:[Us(y.override_date)," people per slot"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>S(null),className:"flex-1 px-6 py-3 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:pe,disabled:T.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:T.isPending?"Removing...":"Remove Override"})]})]})}),F&&F.show&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-12 w-12 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("div",{className:"ml-4",children:r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:"Capacity Warning"})})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[r.jsxs("p",{className:"text-yellow-400 font-semibold",children:["Warning: ",F.count," bookings already scheduled for this date exceed new capacity ",F.capacity,"."]}),r.jsx("p",{className:"text-yellow-300 text-sm mt-2",children:"Existing bookings will be kept but no new bookings will be accepted."})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>H(null),className:"flex-1 px-6 py-3 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:W,className:"flex-1 px-6 py-3 bg-yellow-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-yellow-700 focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all duration-200",children:"Proceed Anyway"})]})]})})]})},gD=["10:00","10:40","11:20","12:00","12:40","13:20","14:00","14:20"],mo=()=>"https://123barber-booking-app-with-ticket-system.launchpulse.ai",Ny=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),bD=e=>{const t=new Date;t.setHours(0,0,0,0);const s=new Date(e);return s.setHours(0,0,0,0),s<t},yD=()=>{const[e]=xt(),t=e.get("date"),s=re(T=>T.authentication_state.auth_token),[n,a]=h.useState("entire_day"),[i,o]=h.useState(t||null),[l,c]=h.useState(null),[d,u]=h.useState(null),[m,x]=h.useState({date:null,time_slot:null}),[p,j]=h.useState(null),[f,v]=h.useState(null),[b,g]=h.useState(!1),[w,N]=h.useState(null),_=dr(),{data:y,isLoading:S,error:A}=ve({queryKey:["blocked-slots"],queryFn:async()=>(await Y.get(`${mo()}/api/admin/blocked-slots`,{params:{sort_by:"block_date",sort_order:"asc",limit:100},headers:{Authorization:`Bearer ${s}`}})).data.data,staleTime:3e4,enabled:!!s}),I=y||[],F=ye({mutationFn:async T=>(await Y.post(`${mo()}/api/admin/blocked-slots`,T,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{_.invalidateQueries({queryKey:["blocked-slots"]}),o(null),c(null),u(null),a("entire_day"),v(null)}}),H=ye({mutationFn:async T=>(await Y.delete(`${mo()}/api/admin/blocked-slots/${T}`,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{_.invalidateQueries({queryKey:["blocked-slots"]}),j(null)}}),E=ye({mutationFn:async T=>(await Y.patch(`${mo()}/api/admin/bookings/${T.booking_id}/cancel`,{cancellation_reason:T.cancellation_reason,cancelled_by:"admin"},{headers:{Authorization:`Bearer ${s}`}})).data}),L=()=>{const T={date:null,time_slot:null};let P=!0;return i?bD(i)&&(T.date="Cannot block dates in the past",P=!1):(T.date="Please select a date",P=!1),n==="specific_slot"&&!l&&(T.time_slot="Please select a time slot",P=!1),x(T),P},O=async()=>{if(!i)return null;try{const T={appointment_date:i,status:"upcoming"};n==="specific_slot"&&l&&(T.appointment_time=l);const V=(await Y.get(`${mo()}/api/admin/bookings`,{params:T,headers:{Authorization:`Bearer ${s}`}})).data.data||[];return V.length>0?{bookings_count:V.length,bookings:V.map(J=>({booking_id:J.booking_id,ticket_number:J.ticket_number,customer_name:J.customer_name}))}:null}catch(T){return console.error("Error checking existing bookings:",T),null}},R=async T=>{if(T.preventDefault(),!L())return;const P=await O();P?(v(P),N(d||"Slot blocked by admin")):await z()},z=async()=>{if(!i)return;const T={block_date:i,time_slot:n==="specific_slot"?l:null,reason:d};await F.mutateAsync(T)},ee=async()=>{await z(),v(null)},C=async()=>{if(!f||!w)return;const T=f.bookings.map(P=>E.mutateAsync({booking_id:P.booking_id,cancellation_reason:w}));try{await Promise.all(T),await z(),v(null),g(!1)}catch(P){console.error("Error canceling bookings:",P)}},k=T=>{j({block_id:T.block_id,block_date:T.block_date,time_slot:T.time_slot})},D=async()=>{p&&await H.mutateAsync(p.block_id)};return h.useEffect(()=>{n==="entire_day"&&c(null)},[n]),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] shadow",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Blocked Slots and Days"}),r.jsx("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:"Block specific time slots or entire days to prevent customer bookings during closures"})]})}),r.jsx("div",{className:"bg-[#2D0808] border-b border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[r.jsx("button",{className:"border-b-2 border-red-600 py-4 px-1 text-sm font-medium text-amber-400","aria-current":"page",children:"Blocked Slots"}),r.jsx(Z,{to:"/admin/capacity",className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-master-text-muted-dark hover:text-master-text-secondary-dark hover:border-white/20 transition-colors",children:"Daily Overrides"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-6",children:"Add New Block"}),r.jsxs("form",{onSubmit:R,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-3",children:["Block Type ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"radio",name:"block_type",value:"entire_day",checked:n==="entire_day",onChange:T=>a(T.target.value),className:"h-4 w-4 text-amber-400 focus:ring-red-500 border-white/20"}),r.jsx("span",{className:"ml-3 text-sm text-master-text-secondary-dark",children:"Entire Day"})]}),r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"radio",name:"block_type",value:"specific_slot",checked:n==="specific_slot",onChange:T=>a(T.target.value),className:"h-4 w-4 text-amber-400 focus:ring-red-500 border-white/20"}),r.jsx("span",{className:"ml-3 text-sm text-master-text-secondary-dark",children:"Specific Time Slot"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"block_date",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Date ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"date",id:"block_date",value:i||"",onChange:T=>{o(T.target.value),x(P=>({...P,date:null}))},className:"w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all"}),m.date&&r.jsx("p",{className:"mt-2 form-error-text",children:m.date})]}),n==="specific_slot"&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"time_slot",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Time Slot ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"time_slot",value:l||"",onChange:T=>{c(T.target.value),x(P=>({...P,time_slot:null}))},className:"w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all",children:[r.jsx("option",{value:"",children:"Select a time slot"}),gD.map(T=>r.jsx("option",{value:T,children:T},T))]}),m.time_slot&&r.jsx("p",{className:"mt-2 form-error-text",children:m.time_slot})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"block_reason",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Reason (Optional)"}),r.jsx("input",{type:"text",id:"block_reason",placeholder:"e.g., Vacation, Holiday, Emergency",value:d||"",onChange:T=>u(T.target.value),className:"w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all",maxLength:200})]}),r.jsx("button",{type:"submit",disabled:F.isPending,className:"w-full bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Blocking..."]}):"Block"})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Blocked Slots"})}),S&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading blocked slots..."})]}),A&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-master-text-primary-dark font-medium",children:"Failed to load blocked slots"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm mt-1",children:"Please try refreshing the page"})]}),!S&&!A&&I.length===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-master-text-muted-dark mb-4",children:r.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-master-text-primary-dark font-medium text-lg",children:"No blocked slots"}),r.jsx("p",{className:"text-master-text-secondary-dark text-sm mt-1",children:"Add a new block using the form on the left"})]}),!S&&!A&&I.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Reason"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:I.map(T=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-master-text-primary-dark",children:Ny(T.block_date)}),r.jsx("div",{className:"text-xs text-master-text-muted-dark",children:T.block_date})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${T.time_slot?"bg-blue-900/30 text-blue-400":"bg-gray-100 text-master-text-secondary-dark"}`,children:T.time_slot||"All Day"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"text-sm text-master-text-primary-dark max-w-xs truncate",children:T.reason||r.jsx("span",{className:"text-master-text-muted-dark italic",children:"No reason provided"})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx("button",{onClick:()=>k(T),className:"text-red-600 hover:text-red-900 font-medium transition-colors",children:"Unblock"})})]},T.block_id))})]})})]})})]})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-8 w-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Existing Bookings Found"}),r.jsxs("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:["Warning: ",f.bookings_count," booking",f.bookings_count>1?"s":""," exist for this ",n==="entire_day"?"day":"time slot",". Blocking will not cancel them automatically."]})]})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-master-text-primary-dark mb-3",children:"Affected Bookings:"}),r.jsx("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-4 max-h-40 overflow-y-auto",children:r.jsx("ul",{className:"space-y-2",children:f.bookings.map(T=>r.jsxs("li",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("span",{className:"font-medium",children:T.ticket_number})," - ",T.customer_name]},T.booking_id))})})]}),b?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-sm font-medium text-red-900 mb-2",children:["Cancel ",f.bookings_count," booking",f.bookings_count>1?"s":""," and notify customers?"]}),r.jsx("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-red-900 mb-2",children:"Reason for cancellation:"}),r.jsx("textarea",{id:"cancellation_reason",rows:3,value:w||"",onChange:T=>N(T.target.value),className:"w-full px-4 py-3 border-2 border-red-300 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all",placeholder:"Explain why bookings are being cancelled..."})]}),r.jsx("button",{onClick:C,disabled:E.isPending,className:"w-full bg-red-600 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?"Cancelling...":"Yes, Cancel Bookings"}),r.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gray-100 text-master-text-secondary-dark px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Back"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{onClick:ee,className:"w-full bg-amber-600 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:bg-amber-700 transition-all",children:"Block anyway (keep bookings)"}),r.jsx("button",{onClick:()=>g(!0),className:"w-full bg-red-600 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-all",children:"Block and cancel bookings"}),r.jsx("button",{onClick:()=>{v(null),g(!1)},className:"w-full bg-gray-100 text-master-text-secondary-dark px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Cancel"})]})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full",children:[r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:"Unblock Slot?"}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-2",children:["Unblock ",r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:Ny(p.block_date)}),p.time_slot&&r.jsxs("span",{children:[" at ",r.jsx("span",{className:"font-medium text-master-text-primary-dark",children:p.time_slot})]}),!p.time_slot&&r.jsx("span",{children:" (All Day)"}),"?"]}),r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"This will become available for booking again."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-6 py-4 flex gap-3",children:[r.jsx("button",{onClick:D,disabled:H.isPending,className:"flex-1 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark px-6 py-3 rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:H.isPending?"Unblocking...":"Unblock"}),r.jsx("button",{onClick:()=>j(null),className:"flex-1 bg-gray-100 text-master-text-secondary-dark px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Cancel"})]})]})})]})})},vD=()=>{const[e,t]=xt(),s=re(W=>W.authentication_state.auth_token),[n,a]=h.useState("grid"),[i,o]=h.useState(e.get("sort")||"manual"),[l,c]=h.useState(e.get("service_filter")||null),[d,u]=h.useState(new Set),[m,x]=h.useState(null),[p,j]=h.useState(""),[f,v]=h.useState(null),[b,g]=h.useState(null),[w,N]=h.useState(null),[_,y]=h.useState(null),S=h.useRef(null),A=dr(),I="https://123barber-booking-app-with-ticket-system.launchpulse.ai",{data:F=[],isLoading:H}=ve({queryKey:["admin-gallery",l,i],queryFn:async()=>{const W={limit:100};return l&&(W.service_id=l),i==="manual"?(W.sort_by="display_order",W.sort_order="asc"):i==="newest"?(W.sort_by="uploaded_at",W.sort_order="desc"):(W.sort_by="uploaded_at",W.sort_order="asc"),(await Y.get(`${I}/api/admin/gallery`,{params:W,headers:{Authorization:`Bearer ${s}`}})).data.map(B=>({image_id:B.image_id,image_url:B.image_url,thumbnail_url:B.thumbnail_url,caption:B.caption,service_id:B.service_id,display_order:B.display_order,uploaded_at:B.uploaded_at}))},staleTime:3e4}),{data:E=[]}=ve({queryKey:["services-active"],queryFn:async()=>((await Y.get(`${I}/api/services`,{params:{is_active:!0}})).data.services||[]).map(Q=>({service_id:Q.service_id,name:Q.name})),staleTime:6e4}),L=ye({mutationFn:async({image_id:W,payload:Q})=>(await Y.patch(`${I}/api/admin/gallery/${W}`,Q,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{A.invalidateQueries({queryKey:["admin-gallery"]})}}),O=ye({mutationFn:async W=>{await Y.delete(`${I}/api/admin/gallery/${W}`,{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{A.invalidateQueries({queryKey:["admin-gallery"]}),g(null),u(new Set)}}),R=ye({mutationFn:async W=>{await Promise.all(W.map(Q=>Y.delete(`${I}/api/admin/gallery/${Q}`,{headers:{Authorization:`Bearer ${s}`}})))},onSuccess:()=>{A.invalidateQueries({queryKey:["admin-gallery"]}),g(null),u(new Set)}}),z=ye({mutationFn:async W=>{await Y.post(`${I}/api/admin/gallery/reorder`,{image_ids:W},{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{A.invalidateQueries({queryKey:["admin-gallery"]})}}),ee=W=>{S.current&&clearTimeout(S.current),L.mutate({image_id:W,payload:{caption:p||null}}),x(null),j("")},C=W=>{j(W),S.current&&clearTimeout(S.current)},k=()=>{f&&(L.mutate({image_id:f.image_id,payload:{caption:f.caption,service_id:f.service_id}}),v(null))},D=()=>{b&&(Array.isArray(b)?R.mutate(b):O.mutate(b.image_id))},T=W=>{const Q=new Set(d);Q.has(W)?Q.delete(W):Q.add(W),u(Q)},P=()=>{u(new Set(F.map(W=>W.image_id)))},V=()=>{u(new Set)},J=(W,Q)=>{N(Q),W.dataTransfer.effectAllowed="move"},K=(W,Q)=>{W.preventDefault(),y(Q)},M=(W,Q)=>{if(W.preventDefault(),!w)return;const B=F.findIndex(we=>we.image_id===w);if(B===-1||B===Q){N(null),y(null);return}const te=[...F],[pe]=te.splice(B,1);te.splice(Q,0,pe),z.mutate(te.map(we=>we.image_id)),N(null),y(null)},U=()=>{N(null),y(null)};return h.useEffect(()=>{const W={};l&&(W.service_filter=l),i!=="manual"&&(W.sort=i),t(W)},[l,i,t]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Gallery Management"})}),r.jsx("div",{className:"mb-6 border-b border-white/10",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{className:"border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-amber-400",children:"All Images"}),r.jsx(Z,{to:"/admin/gallery/upload",className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-master-text-muted-dark hover:border-white/20 hover:text-master-text-secondary-dark",children:"Upload New"}),r.jsx("button",{className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-master-text-muted-dark hover:border-white/20 hover:text-master-text-secondary-dark",children:"Settings"})]})}),r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex rounded-lg border border-white/20 bg-white",children:[r.jsx("button",{onClick:()=>a("grid"),className:`px-4 py-2 text-sm font-medium rounded-l-lg transition-colors ${n==="grid"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:r.jsx(l2,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 text-sm font-medium rounded-r-lg transition-colors ${n==="list"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:r.jsx(c2,{className:"w-4 h-4"})})]}),r.jsxs("select",{value:i,onChange:W=>o(W.target.value),className:"rounded-lg border border-white/20 bg-[#2D0808] px-4 py-2 text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"manual",children:"Manual Order"}),r.jsx("option",{value:"newest",children:"Newest First"}),r.jsx("option",{value:"oldest",children:"Oldest First"})]}),r.jsxs("select",{value:l||"",onChange:W=>c(W.target.value||null),className:"rounded-lg border border-white/20 bg-[#2D0808] px-4 py-2 text-sm font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"All Services"}),E.map(W=>r.jsx("option",{value:W.service_id,children:W.name},W.service_id))]})]}),d.size>0&&r.jsxs("div",{className:"flex items-center gap-4 bg-[#2D0808] border border-blue-200 rounded-lg px-4 py-2",children:[r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.size," selected"]}),r.jsx("button",{onClick:()=>g(Array.from(d)),className:"text-sm font-medium text-red-600 hover:text-red-300",children:"Delete Selected"}),r.jsx("button",{onClick:V,className:"text-sm font-medium text-master-text-secondary-dark hover:text-master-text-secondary-dark",children:"Deselect All"})]})]}),H&&r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})}),!H&&F.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(zC,{className:"mx-auto h-12 w-12 text-master-text-muted-dark"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-master-text-primary-dark",children:"No gallery images yet"}),r.jsx("p",{className:"mt-1 text-sm text-master-text-muted-dark",children:"Get started by uploading your first photo."}),r.jsx("div",{className:"mt-6",children:r.jsxs(Z,{to:"/admin/gallery/upload",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(u2,{className:"mr-2 h-4 w-4"}),"Upload Your First Photo"]})})]}),!H&&F.length>0&&n==="grid"&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:F.map((W,Q)=>{var B;return r.jsxs("div",{draggable:i==="manual",onDragStart:te=>i==="manual"&&J(te,W.image_id),onDragOver:te=>i==="manual"&&K(te,Q),onDrop:te=>i==="manual"&&M(te,Q),onDragEnd:U,className:`bg-[#2D0808] rounded-lg shadow-md overflow-hidden border-2 transition-all ${w===W.image_id?"opacity-50 scale-105":_===Q?"border-blue-500":"border-transparent"} ${d.has(W.image_id)?"ring-2 ring-red-500":""}`,children:[r.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-2 z-10",children:[r.jsx("input",{type:"checkbox",checked:d.has(W.image_id),onChange:()=>T(W.image_id),className:"h-5 w-5 rounded border-white/20 text-amber-400 focus:ring-red-500"}),i==="manual"&&r.jsx("div",{className:"cursor-move bg-[#2D0808] rounded p-1 shadow",children:r.jsx(HC,{className:"w-4 h-4 text-master-text-muted-dark"})})]}),r.jsx("div",{className:"relative aspect-square",children:r.jsx("img",{src:W.thumbnail_url,alt:W.caption||"Gallery image",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-3",children:[m===W.image_id?r.jsx("input",{type:"text",value:p,onChange:te=>C(te.target.value),onBlur:()=>ee(W.image_id),autoFocus:!0,className:"w-full px-2 py-1 text-sm border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-red-500"}):r.jsx("p",{onClick:()=>{x(W.image_id),j(W.caption||"")},className:"text-sm text-master-text-primary-dark cursor-pointer hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-2 py-1 rounded min-h-[28px]",children:W.caption||"Click to add caption..."}),W.service_id&&r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-900/30 text-blue-400",children:((B=E.find(te=>te.service_id===W.service_id))==null?void 0:B.name)||"Service"})}),r.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>v(W),className:"flex-1 inline-flex justify-center items-center px-3 py-1.5 border border-white/20 shadow-sm text-xs font-medium rounded text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(Vx,{className:"mr-1 h-3 w-3"}),"Edit"]}),r.jsxs("button",{onClick:()=>g(W),className:"flex-1 inline-flex justify-center items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-300 bg-[#2D0808] hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(tp,{className:"mr-1 h-3 w-3"}),"Delete"]})]})]})]},W.image_id)})}),!H&&F.length>0&&n==="list"&&r.jsx("div",{className:"bg-[#2D0808] shadow overflow-hidden sm:rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:r.jsx("input",{type:"checkbox",checked:d.size===F.length,onChange:()=>{d.size===F.length?V():P()},className:"h-4 w-4 rounded border-white/20 text-amber-400 focus:ring-red-500"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Image"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Caption"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Uploaded"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:F.map(W=>{var Q;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:d.has(W.image_id),onChange:()=>T(W.image_id),className:"h-4 w-4 rounded border-white/20 text-amber-400 focus:ring-red-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("img",{src:W.thumbnail_url,alt:W.caption||"Gallery image",className:"h-16 w-16 object-cover rounded"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm text-master-text-primary-dark",children:W.caption||"No caption"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:W.service_id?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-900/30 text-blue-400",children:((Q=E.find(B=>B.service_id===W.service_id))==null?void 0:Q.name)||"Service"}):r.jsx("span",{className:"text-sm text-master-text-muted-dark",children:"None"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-muted-dark",children:new Date(W.uploaded_at).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>v(W),className:"text-amber-400 hover:text-blue-900 mr-4",children:"Edit"}),r.jsx("button",{onClick:()=>g(W),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},W.image_id)})})]})})]})}),f&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]0 bg-opacity-75",onClick:()=>v(null)}),r.jsxs("div",{className:"inline-block align-bottom bg-[#2D0808] rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[r.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:r.jsx("button",{onClick:()=>v(null),className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-md text-master-text-muted-dark hover:text-master-text-muted-dark focus:outline-none",children:r.jsx(bt,{className:"h-6 w-6"})})}),r.jsx("div",{className:"sm:flex sm:items-start",children:r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-master-text-primary-dark mb-4",children:"Edit Image"}),r.jsx("div",{className:"mb-4",children:r.jsx("img",{src:f.image_url,alt:f.caption||"Gallery image",className:"w-full max-h-96 object-contain rounded-lg"})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"edit-caption",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Caption"}),r.jsx("input",{id:"edit-caption",type:"text",value:f.caption||"",onChange:W=>v({...f,caption:W.target.value}),className:"w-full px-3 py-2 border border-white/20 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-blue-500",placeholder:"Enter image caption..."})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"edit-service",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Service Association"}),r.jsxs("select",{id:"edit-service",value:f.service_id||"",onChange:W=>v({...f,service_id:W.target.value||null}),className:"w-full px-3 py-2 border border-white/20 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"None"}),E.map(W=>r.jsx("option",{value:W.service_id,children:W.name},W.service_id))]})]}),r.jsxs("div",{className:"mb-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-master-text-secondary-dark mb-2",children:"Metadata"}),r.jsxs("p",{className:"text-sm text-master-text-secondary-dark",children:[r.jsx("strong",{children:"Uploaded on:"})," ",new Date(f.uploaded_at).toLocaleString()]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[r.jsx("button",{onClick:k,disabled:L.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-base font-medium text-master-text-primary-dark hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm disabled:opacity-50",children:L.isPending?"Saving...":"Save Changes"}),r.jsx("button",{onClick:()=>v(null),className:"mt-3 w-full inline-flex justify-center rounded-md border border-white/20 shadow-sm px-4 py-2 bg-[#2D0808] text-base font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"}),r.jsx("button",{onClick:()=>{g(f),v(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-red-300 shadow-sm px-4 py-2 bg-[#2D0808] text-base font-medium text-red-300 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Delete Image"})]})]})})]})]})}),b&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 transition-opacity bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]0 bg-opacity-75",onClick:()=>g(null)}),r.jsxs("div",{className:"inline-block align-bottom bg-[#2D0808] rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx(tp,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[r.jsxs("h3",{className:"text-lg leading-6 font-medium text-master-text-primary-dark",children:["Delete Image",Array.isArray(b)&&b.length>1?"s":"","?"]}),r.jsxs("div",{className:"mt-2",children:[r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:["This action cannot be undone. ",Array.isArray(b)?`${b.length} image${b.length>1?"s":""} will be permanently deleted.`:"This image will be permanently deleted from storage."]}),!Array.isArray(b)&&b.caption&&r.jsxs("p",{className:"mt-2 text-sm font-medium text-master-text-secondary-dark",children:['"',b.caption,'"']})]})]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[r.jsx("button",{onClick:D,disabled:O.isPending||R.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-master-text-primary-dark hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm disabled:opacity-50",children:O.isPending||R.isPending?"Deleting...":"Delete"}),r.jsx("button",{onClick:()=>g(null),className:"mt-3 w-full inline-flex justify-center rounded-md border border-white/20 shadow-sm px-4 py-2 bg-[#2D0808] text-base font-medium text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},wD=()=>{const e=Ie(),t=h.useRef(null),[s,n]=h.useState([]),[a,i]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState([]),u=re(E=>E.authentication_state.auth_token),{data:m}=ve({queryKey:["services","active"],queryFn:async()=>(await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/services",{params:{is_active:!0},headers:u?{Authorization:`Bearer ${u}`}:{}})).data.services||[],select:E=>E.map(L=>({service_id:L.service_id,name:L.name})),staleTime:6e4,refetchOnWindowFocus:!1}),x=m||[],p=E=>["image/jpeg","image/jpg","image/png","image/webp"].includes(E.type)?E.size>10485760?`File exceeds 10MB limit (${(E.size/1024/1024).toFixed(2)}MB).`:null:"Invalid file format. Please upload JPG, PNG, or WebP images only.",j=E=>{const L=Array.from(E),O=[],R=[];L.forEach(z=>{const ee=p(z);if(ee)O.push({filename:z.name,error:ee});else{const C=URL.createObjectURL(z),k=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;R.push({temp_id:k,file:z,filename:z.name,preview_url:C,upload_progress:0,upload_status:"pending",uploaded_image_id:null,caption:null,service_id:null,error_message:null})}}),d(z=>[...z,...O]),n(z=>[...z,...R])},f=E=>{E.target.files&&E.target.files.length>0&&j(E.target.files)},v=E=>{E.preventDefault(),i(!0)},b=E=>{E.preventDefault(),i(!1)},g=E=>{E.preventDefault(),i(!1),E.dataTransfer.files&&E.dataTransfer.files.length>0&&j(E.dataTransfer.files)},w=(E,L)=>{n(O=>O.map(R=>R.temp_id===E?{...R,caption:L}:R))},N=(E,L)=>{n(O=>O.map(R=>R.temp_id===E?{...R,service_id:L}:R))},_=E=>{const L=s.find(O=>O.temp_id===E);L&&URL.revokeObjectURL(L.preview_url),n(O=>O.filter(R=>R.temp_id!==E))},y=ye({mutationFn:async E=>{const L=new FormData;return L.append("image",E.file),E.caption&&L.append("caption",E.caption),E.service_id&&L.append("service_id",E.service_id),(await Y.post("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/gallery",L,{headers:{Authorization:`Bearer ${u}`,"Content-Type":"multipart/form-data"},onUploadProgress:R=>{if(R.total){const z=Math.round(R.loaded*100/R.total);n(ee=>ee.map(C=>C.temp_id===E.temp_id?{...C,upload_progress:z,upload_status:"uploading"}:C))}}})).data},onSuccess:(E,L)=>{n(O=>O.map(R=>{var z;return R.temp_id===L.temp_id?{...R,upload_status:"success",upload_progress:100,uploaded_image_id:E.image_id||((z=E.data)==null?void 0:z.image_id)}:R}))},onError:(E,L)=>{var R,z,ee;const O=((ee=(z=(R=E.response)==null?void 0:R.data)==null?void 0:z.error)==null?void 0:ee.message)||E.message||"Upload failed";n(C=>C.map(k=>k.temp_id===L.temp_id?{...k,upload_status:"error",error_message:O}:k))}}),S=async()=>{l(!0);for(const L of s)(L.upload_status==="pending"||L.upload_status==="error")&&await y.mutateAsync(L);l(!1),s.every(L=>L.upload_status==="success")&&e("/admin/gallery",{state:{successMessage:`${s.length} images uploaded successfully!`}})},A=()=>{s.forEach(E=>{URL.revokeObjectURL(E.preview_url)}),n([]),e("/admin/gallery")};h.useEffect(()=>()=>{s.forEach(E=>{URL.revokeObjectURL(E.preview_url)})},[s]);const I=s.length>0,F=s.every(E=>E.upload_status==="success"),H=I&&!o&&!F;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Upload Gallery Images"}),r.jsx(Z,{to:"/admin/gallery",className:"text-sm text-amber-400 hover:text-blue-700 font-medium transition-colors",children:" Back to Gallery"})]})}),c.length>0&&r.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-red-500 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Invalid Files:"}),r.jsx("ul",{className:"space-y-1",children:c.map((E,L)=>r.jsxs("li",{className:"text-sm text-red-300",children:[r.jsxs("strong",{children:[E.filename,":"]})," ",E.error]},L))}),r.jsx("button",{onClick:()=>d([]),className:"mt-3 form-error-text hover:text-red-400 font-medium underline",children:"Clear Errors"})]})]})}),r.jsxs("div",{className:`
              relative border-2 border-dashed rounded-xl p-12 text-center cursor-pointer transition-all
              ${a?"border-blue-500 bg-[#2D0808] scale-[1.02]":"border-white/20 bg-[#2D0808] hover:border-gray-400 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}
            `,onDragOver:v,onDragLeave:b,onDrop:g,onClick:()=>{var E;return(E=t.current)==null?void 0:E.click()},children:[r.jsx("input",{ref:t,type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:f,className:"hidden"}),r.jsx("svg",{className:"mx-auto h-16 w-16 text-master-text-muted-dark mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsx("p",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"Drag and drop images here or click to browse"}),r.jsx("p",{className:"text-sm text-master-text-muted-dark mb-6",children:"JPG, PNG, WebP  Max 10MB per file"}),r.jsxs("button",{type:"button",className:"inline-flex items-center px-6 py-3 border border-white/20 shadow-sm text-sm font-medium rounded-lg text-master-text-secondary-dark bg-[#2D0808] hover:bg-[#3D0F0F] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all",onClick:E=>{var L;E.stopPropagation(),(L=t.current)==null||L.click()},children:[r.jsx("svg",{className:"h-5 w-5 mr-2 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Browse Files"]})]}),I&&r.jsxs("div",{className:"mt-8",children:[r.jsxs("h2",{className:"text-xl font-semibold text-master-text-primary-dark mb-4",children:["Files to Upload (",s.length,")"]}),r.jsx("div",{className:"space-y-4",children:s.map(E=>{var L;return r.jsx("div",{className:"bg-[#2D0808] border border-white/10 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("img",{src:E.preview_url,alt:E.filename,className:"h-24 w-24 object-cover rounded-lg border border-white/10"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-master-text-primary-dark truncate mb-2",children:E.filename}),r.jsxs("div",{className:"mb-3",children:[E.upload_status==="pending"&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-master-text-secondary-dark",children:"Pending Upload"}),E.upload_status==="uploading"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("svg",{className:"animate-spin h-4 w-4 text-amber-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-sm text-amber-400 font-medium",children:"Uploading..."})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 h-2.5 rounded-full transition-all duration-300",style:{width:`${E.upload_progress}%`}})}),r.jsxs("p",{className:"text-xs text-master-text-muted-dark",children:[E.upload_progress,"%"]})]}),E.upload_status==="success"&&r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-900/30 text-green-400",children:[r.jsx("svg",{className:"h-3.5 w-3.5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Uploaded Successfully"]}),E.upload_status==="error"&&r.jsxs("div",{className:"space-y-1",children:[r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-900/30 text-red-400",children:[r.jsx("svg",{className:"h-3.5 w-3.5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Upload Failed"]}),E.error_message&&r.jsx("p",{className:"text-xs text-red-600",children:E.error_message})]})]}),(E.upload_status==="pending"||E.upload_status==="error")&&r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{htmlFor:`caption-${E.temp_id}`,className:"block text-xs font-medium text-master-text-secondary-dark mb-1",children:"Caption (optional)"}),r.jsx("input",{id:`caption-${E.temp_id}`,type:"text",value:E.caption||"",onChange:O=>w(E.temp_id,O.target.value),placeholder:"e.g., Skin Fade, Curly Cut",maxLength:100,className:"block w-full px-3 py-2 border border-white/20 rounded-md shadow-sm text-sm placeholder-master-text-muted-dark focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors"}),r.jsxs("p",{className:"mt-1 text-xs text-master-text-muted-dark",children:[((L=E.caption)==null?void 0:L.length)||0,"/100 characters"]})]}),(E.upload_status==="pending"||E.upload_status==="error")&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:`service-${E.temp_id}`,className:"block text-xs font-medium text-master-text-secondary-dark mb-1",children:"Service Association"}),r.jsxs("select",{id:`service-${E.temp_id}`,value:E.service_id||"",onChange:O=>N(E.temp_id,O.target.value||null),className:"block w-full px-3 py-2 border border-white/20 rounded-md shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",children:[r.jsx("option",{value:"",children:"None"}),x.map(O=>r.jsx("option",{value:O.service_id,children:O.name},O.service_id))]})]})]}),(E.upload_status==="pending"||E.upload_status==="error")&&r.jsx("button",{onClick:()=>_(E.temp_id),className:"flex-shrink-0 p-2 text-master-text-muted-dark hover:text-red-600 hover:bg-red-50 rounded-md transition-all",title:"Remove file",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},E.temp_id)})}),r.jsxs("div",{className:"mt-8 flex items-center justify-end space-x-4",children:[r.jsx("button",{onClick:A,disabled:o,className:"px-6 py-3 border border-white/20 shadow-sm text-sm font-medium rounded-lg text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"}),r.jsx("button",{onClick:S,disabled:!H,className:"px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-lg text-master-text-primary-dark bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading Images..."]}):F?r.jsxs("span",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"All Uploaded!"]}):`Upload ${s.length} Image${s.length>1?"s":""}`})]})]}),!I&&r.jsxs("div",{className:"mt-12 text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-master-text-muted-dark mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-master-text-muted-dark text-sm",children:"No files selected yet. Drag and drop images above or click to browse."})]})]})})})},jD=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never",kD=e=>e.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),ND=()=>{var J,K;const e=re(M=>M.authentication_state.auth_token),[t,s]=xt(),n=Ie(),[a,i]=h.useState(t.get("search")||""),[o,l]=h.useState(t.get("search")||""),[c,d]=h.useState(t.get("type")||"all"),[u,m]=h.useState(t.get("sort")||"total_bookings_desc"),[x,p]=h.useState(Number(t.get("page"))||1),[j,f]=h.useState(50),[v,b]=h.useState(!1),[g,w]=h.useState(null);h.useEffect(()=>{const M=setTimeout(()=>{l(a),p(1)},300);return()=>clearTimeout(M)},[a]),h.useEffect(()=>{const M={};o&&(M.search=o),c!=="all"&&(M.type=c),u!=="total_bookings_desc"&&(M.sort=u),x!==1&&(M.page=x.toString()),s(M,{replace:!0})},[o,c,u,x,s]);const N=M=>{switch(M){case"total_bookings_desc":return{sort_by:"total_bookings",sort_order:"desc"};case"last_booking_newest":return{sort_by:"last_booking_date",sort_order:"desc"};case"name_asc":return{sort_by:"name",sort_order:"asc"};default:return{sort_by:"total_bookings",sort_order:"desc"}}},_=(x-1)*j,{sort_by:y,sort_order:S}=N(u),{data:A,isLoading:I,error:F,refetch:H}=ve({queryKey:["admin-customers",o,c,y,S,j,_],queryFn:async()=>{var M;try{const U={limit:j,offset:_,sort_by:y,sort_order:S};o&&(U.search=o),c!=="all"&&(U.type=c);const W=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/customers",{headers:{Authorization:`Bearer ${e}`},params:U});return console.log("[Customers] Fetched successfully:",W.data),W.data}catch(U){throw console.error("[Customers] Fetch error:",((M=U.response)==null?void 0:M.data)||U.message),U}},enabled:!!e,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),E=(A==null?void 0:A.customers)||[],L=(A==null?void 0:A.total)||0,O=Math.ceil(L/j),R=async()=>{b(!0);try{const M={sort_by:y,sort_order:S};o&&(M.search=o),c!=="all"&&(M.type=c);const U=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/customers/export",{headers:{Authorization:`Bearer ${e}`},params:M,responseType:"blob"}),W=new Blob([U.data],{type:"text/csv"}),Q=window.URL.createObjectURL(W),B=document.createElement("a");B.href=Q,B.download=`customers_${new Date().toISOString().split("T")[0]}.csv`,B.click(),window.URL.revokeObjectURL(Q)}catch(M){console.error("Export error:",M),alert("Failed to export customers. Please try again.")}finally{b(!1)}},z=M=>{d(M),p(1)},ee=M=>{m(M),p(1)},C=M=>{p(M)},k=M=>{f(M),p(1)},D=M=>{n(`/admin/customers/${M}`)},T=(M,U)=>{U.stopPropagation(),n(`/admin/customers/${M}`)},P=(M,U)=>{U.stopPropagation(),n(`/admin/bookings?customer_id=${M}`)},V=(M,U)=>{U.stopPropagation(),w(g===M?null:M)};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] shadow-sm border-b border-white/10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Customers"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"Manage and view all customer records"})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(wd,{className:"h-5 w-5 text-master-text-muted-dark"})}),r.jsx("input",{type:"text",placeholder:"Search by name, email, or phone",value:a,onChange:M=>i(M.target.value),className:"block w-full pl-10 pr-3 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark placeholder-master-text-muted-dark"})]})}),r.jsx("div",{className:"w-full lg:w-48",children:r.jsxs("select",{value:c,onChange:M=>z(M.target.value),className:"block w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark",children:[r.jsx("option",{value:"all",children:"All Customers"}),r.jsx("option",{value:"registered",children:"Registered"}),r.jsx("option",{value:"guest",children:"Guest"})]})}),r.jsx("div",{className:"w-full lg:w-56",children:r.jsxs("select",{value:u,onChange:M=>ee(M.target.value),className:"block w-full px-4 py-3 border-2 border-white/10 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-red-100 transition-all text-master-text-primary-dark",children:[r.jsx("option",{value:"total_bookings_desc",children:"Total Bookings (High to Low)"}),r.jsx("option",{value:"last_booking_newest",children:"Last Booking (Newest)"}),r.jsx("option",{value:"name_asc",children:"Name (A-Z)"})]})}),r.jsx("button",{onClick:R,disabled:v||I,className:"px-6 py-3 bg-green-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Exporting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sl,{className:"h-5 w-5"}),"Export CSV"]})})]})}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[I&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading customers..."})]}),F&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"Error loading customers"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-4",children:((K=(J=F==null?void 0:F.response)==null?void 0:J.data)==null?void 0:K.message)||(F==null?void 0:F.message)||"Unable to fetch customer data. Please try again."}),r.jsx("button",{onClick:()=>H(),className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Retry"})]}),!I&&!F&&E.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"text-master-text-muted-dark mb-4",children:r.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"No customers yet"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Customers will appear after the first booking"})]}),!I&&!F&&E.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Name"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Email"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Phone"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Type"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Total Bookings"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Last Booking"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-semibold text-master-text-secondary-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:E.map(M=>r.jsxs("tr",{onClick:()=>D(M.customer_id),className:"hover:bg-[#2D0808] cursor-pointer transition-colors duration-150",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-master-text-primary-dark font-semibold",children:kD(M.name)}),r.jsx("div",{className:"ml-4",children:r.jsx("div",{className:"text-sm font-medium text-master-text-primary-dark",children:M.name})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-master-text-primary-dark",children:M.email||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-master-text-primary-dark",children:M.phone||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.customer_type==="registered"?r.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-900/30 text-blue-400",children:"Registered"}):r.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-[#2D0808] text-master-text-secondary-dark",children:"Guest"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-semibold text-master-text-primary-dark",children:M.total_bookings})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-master-text-secondary-dark",children:jD(M.last_booking_date)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:U=>T(M.customer_id,U),className:"text-amber-400 hover:text-blue-800 transition-colors p-2 rounded-lg hover:bg-[#2D0808]",title:"View Details",children:r.jsx(Dn,{className:"h-5 w-5"})}),r.jsx("button",{onClick:U=>P(M.customer_id,U),className:"text-green-600 hover:text-green-400 transition-colors p-2 rounded-lg hover:bg-green-50",title:"View Bookings",children:r.jsx(qe,{className:"h-5 w-5"})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:U=>V(M.customer_id,U),className:"text-master-text-secondary-dark hover:text-master-text-secondary-dark transition-colors p-2 rounded-lg hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",title:"Contact",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),g===M.customer_id&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-[#2D0808] ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",children:[M.email&&r.jsxs("a",{href:`mailto:${M.email}`,className:"flex items-center gap-2 px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-[#5C1B1B] transition-colors",onClick:U=>U.stopPropagation(),children:[r.jsx($t,{className:"h-4 w-4"}),"Email"]}),M.phone&&r.jsxs("a",{href:`tel:${M.phone}`,className:"flex items-center gap-2 px-4 py-2 text-sm text-master-text-secondary-dark hover:bg-[#5C1B1B] transition-colors",onClick:U=>U.stopPropagation(),children:[r.jsx(Pt,{className:"h-4 w-4"}),"Call"]})]})})]})]})})]},M.customer_id))})]})}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-6 py-4 border-t border-white/10 flex flex-col sm:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-sm text-master-text-secondary-dark",children:["Showing ",_+1,"-",Math.min(_+j,L)," of ",L," customers"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm text-master-text-secondary-dark",children:"Rows:"}),r.jsxs("select",{value:j,onChange:M=>k(Number(M.target.value)),className:"px-3 py-1 border border-white/20 rounded-md text-sm focus:border-blue-500 focus:ring-2 focus:ring-red-100",children:[r.jsx("option",{value:20,children:"20"}),r.jsx("option",{value:50,children:"50"}),r.jsx("option",{value:100,children:"100"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>C(x-1),disabled:x===1,className:"p-2 rounded-lg border border-white/20 hover:bg-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(yd,{className:"h-5 w-5 text-master-text-secondary-dark"})}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,O)},(M,U)=>{let W;return O<=5||x<=3?W=U+1:x>=O-2?W=O-4+U:W=x-2+U,r.jsx("button",{onClick:()=>C(W),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${x===W?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"text-master-text-secondary-dark hover:bg-[#5C1B1B]"}`,children:W},W)})}),r.jsx("button",{onClick:()=>C(x+1),disabled:x===O,className:"p-2 rounded-lg border border-white/20 hover:bg-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(As,{className:"h-5 w-5 text-master-text-secondary-dark"})})]})]})]})]})]})]})]})})},_D=e=>{const t=e.map(i=>i.service_name).filter(i=>i!==null&&i!=="");if(t.length===0)return null;const s={};t.forEach(i=>{s[i]=(s[i]||0)+1});let n=0,a=null;for(const[i,o]of Object.entries(s))o>n&&(n=o,a=i);return a},CD=e=>{const t=e.filter(a=>a.status==="completed"&&a.appointment_date).sort((a,i)=>new Date(a.appointment_date).getTime()-new Date(i.appointment_date).getTime());if(t.length<2)return null;const s=[];for(let a=1;a<t.length;a++){const i=new Date(t[a-1].appointment_date),o=new Date(t[a].appointment_date),l=Math.floor((o.getTime()-i.getTime())/(1e3*60*60*24));l>0&&s.push(l)}return s.length===0?null:Math.round(s.reduce((a,i)=>a+i,0)/s.length)},mc=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",SD=e=>{switch(e){case"confirmed":case"upcoming":return"bg-blue-900/30 text-blue-400";case"completed":return"bg-green-900/30 text-green-400";case"cancelled":return"bg-red-900/30 text-red-400";case"pending":return"bg-yellow-900/30 text-yellow-400";default:return"bg-gray-100 text-master-text-secondary-dark"}},AD=()=>{const{customer_id:e}=Px(),[t,s]=xt(),n=Ie(),a=dr(),i=re(Q=>Q.authentication_state.auth_token),o=re(Q=>Q.authentication_state.authentication_status.user_type),[l,c]=h.useState("overview"),[d,u]=h.useState(""),[m,x]=h.useState(null),[p,j]=h.useState(""),[f,v]=h.useState({status:null,start_date:null,end_date:null}),[b,g]=h.useState(!1),[w,N]=h.useState(null),_="https://123barber-booking-app-with-ticket-system.launchpulse.ai";h.useEffect(()=>{o!=="admin"&&n("/admin/login")},[o,n]),h.useEffect(()=>{const Q=t.get("tab");Q==="bookings"||Q==="notes"?c(Q):(Q==="overview"||!Q)&&c("overview")},[t]);const y=Q=>{c(Q),s({tab:Q})},{data:S,isLoading:A,error:I}=ve({queryKey:["admin","customer",e],queryFn:async()=>(await Y.get(`${_}/api/admin/customers/${e}`,{headers:{Authorization:`Bearer ${i}`}})).data,enabled:!!e&&!!i,staleTime:5*60*1e3}),{data:F,isLoading:H,error:E}=ve({queryKey:["admin","customer",e,"bookings",f],queryFn:async()=>{var pe;const Q={customer_id:e,sort_by:"appointment_date",sort_order:"desc",limit:"100"};return f.status&&(Q.status=f.status),f.start_date&&(Q.appointment_date_from=f.start_date),f.end_date&&(Q.appointment_date_to=f.end_date),(((pe=(await Y.get(`${_}/api/admin/bookings`,{headers:{Authorization:`Bearer ${i}`},params:Q})).data)==null?void 0:pe.bookings)||[]).map(we=>({booking_id:we.booking_id,ticket_number:we.ticket_number,status:we.status,appointment_date:we.appointment_date,appointment_time:we.appointment_time,service_id:we.service_id,service_name:we.service_name||"N/A",customer_name:we.customer_name,special_request:we.special_request,created_at:we.created_at,cancelled_at:we.cancelled_at}))},enabled:!!e&&!!i&&l==="bookings",staleTime:2*60*1e3}),{data:L,isLoading:O,error:R}=ve({queryKey:["admin","customer",e,"notes"],queryFn:async()=>{const B=(await Y.get(`${_}/api/admin/customers/${e}/notes`,{headers:{Authorization:`Bearer ${i}`}})).data;return Array.isArray(B)?B:B&&Array.isArray(B.notes)?B.notes:[]},enabled:!!e&&!!i&&l==="notes",staleTime:2*60*1e3}),z=ye({mutationFn:async Q=>{const B=await Y.post(`${_}/api/admin/customers/${e}/notes`,{note_text:Q},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});return B.data.note||B.data},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),u("")}}),ee=()=>{if(d.trim().length!==0){if(d.length>2e3){alert("Note text cannot exceed 2000 characters");return}z.mutate(d.trim())}},C=ye({mutationFn:async({noteId:Q,noteText:B})=>{const te=await Y.patch(`${_}/api/admin/customers/${e}/notes/${Q}`,{note_text:B},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});return te.data.note||te.data},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),x(null),j("")}}),k=Q=>{if(p.trim().length!==0){if(p.length>2e3){alert("Note text cannot exceed 2000 characters");return}C.mutate({noteId:Q,noteText:p.trim()})}},D=Q=>{x(Q.note_id),j(Q.note_text)},T=()=>{x(null),j("")},P=ye({mutationFn:async Q=>{await Y.delete(`${_}/api/admin/customers/${e}/notes/${Q}`,{headers:{Authorization:`Bearer ${i}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),g(!1),N(null)}}),V=()=>{w&&P.mutate(w)},J=Q=>{N(Q),g(!0)},K=()=>{g(!1),N(null)},M=h.useMemo(()=>{if(!F)return null;const Q=_D(F),B=CD(F);return{favoriteService:Q||"N/A",averageFrequency:B!==null?`Every ${B} days`:"N/A"}},[F]),U=()=>{if(!S)return;const Q=new URLSearchParams({customer_id:S.customer_id,customer_name:S.name,customer_email:S.email,customer_phone:S.phone});n(`/admin/bookings/new?${Q.toString()}`)},W=(Q,B)=>{v(te=>({...te,[Q]:B}))};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("nav",{className:"mb-6","aria-label":"Breadcrumb",children:r.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-master-text-secondary-dark",children:[r.jsx("li",{children:r.jsx(Z,{to:"/admin/customers",className:"hover:text-amber-400 transition-colors",children:"Customers"})}),r.jsx("li",{children:r.jsx("svg",{className:"w-4 h-4 text-master-text-muted-dark",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsx("li",{className:"text-master-text-primary-dark font-medium",children:A?"Loading...":(S==null?void 0:S.name)||"Customer Detail"})]})}),r.jsx("div",{className:"mb-8",children:r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:A?"Loading...":(S==null?void 0:S.name)||"Customer Detail"})}),I&&r.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-300 px-4 py-3 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium",children:"Failed to load customer profile"}),r.jsx("p",{className:"text-sm mt-1",children:(I==null?void 0:I.message)||"Please try again"})]}),r.jsx("div",{className:"border-b border-white/10 mb-6",children:r.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>y("overview"),className:`${l==="overview"?"border-red-600 text-amber-400":"border-transparent text-master-text-secondary-dark hover:text-master-text-primary-dark hover:border-white/20"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Overview"}),r.jsx("button",{onClick:()=>y("bookings"),className:`${l==="bookings"?"border-red-600 text-amber-400":"border-transparent text-master-text-secondary-dark hover:text-master-text-primary-dark hover:border-white/20"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Booking History"}),r.jsx("button",{onClick:()=>y("notes"),className:`${l==="notes"?"border-red-600 text-amber-400":"border-transparent text-master-text-secondary-dark hover:text-master-text-primary-dark hover:border-white/20"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Notes"})]})}),l==="overview"&&r.jsx("div",{className:"space-y-6",children:A?r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg h-64"}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg h-64"})]}):S?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Customer Information"})}),r.jsx("div",{className:"px-6 py-5 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Name"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:S.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Email"}),r.jsx("a",{href:`mailto:${S.email}`,className:"text-base font-medium text-amber-400 hover:text-blue-700 transition-colors",children:S.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Phone"}),r.jsx("a",{href:`tel:${S.phone}`,className:"text-base font-medium text-amber-400 hover:text-blue-700 transition-colors",children:S.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Type"}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${S.is_registered?"bg-green-900/30 text-green-400":"bg-gray-100 text-master-text-secondary-dark"}`,children:S.is_registered?"Registered":"Guest"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:S.is_registered?"Member Since":"First Booking"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:mc(S.created_at)})]})]})})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Statistics"})}),r.jsxs("div",{className:"px-6 py-5",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-master-text-primary-dark",children:S.total_bookings}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"Total Bookings"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-green-600",children:S.completed_bookings}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"Completed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-red-600",children:S.cancelled_bookings}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"Cancelled"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-orange-600",children:S.no_shows}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"No-shows"})]})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10 grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Favorite Service"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:(M==null?void 0:M.favoriteService)||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Average Frequency"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:(M==null?void 0:M.averageFrequency)||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-1",children:"Last Visit"}),r.jsx("p",{className:"text-base font-medium text-master-text-primary-dark",children:mc(S.last_booking_date)})]})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Quick Actions"})}),r.jsx("div",{className:"px-6 py-5",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("button",{onClick:U,className:"flex items-center justify-center px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Booking for Customer"]}),r.jsxs("a",{href:`mailto:${S.email}`,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-master-text-primary-dark rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]}),r.jsxs("a",{href:`tel:${S.phone}`,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-master-text-primary-dark rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call"]})]})})]})]}):null}),l==="bookings"&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Booking History"})}),r.jsx("div",{className:"px-6 py-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] border-b border-white/10",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"Status"}),r.jsxs("select",{id:"status-filter",value:f.status||"",onChange:Q=>W("status",Q.target.value||null),className:"w-full px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"confirmed",children:"Confirmed"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"}),r.jsx("option",{value:"pending",children:"Pending"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"Start Date"}),r.jsx("input",{type:"date",id:"start-date",value:f.start_date||"",onChange:Q=>W("start_date",Q.target.value||null),className:"w-full px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"End Date"}),r.jsx("input",{type:"date",id:"end-date",value:f.end_date||"",onChange:Q=>W("end_date",Q.target.value||null),className:"w-full px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:H?r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading bookings..."})]}):E?r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load bookings"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:(E==null?void 0:E.message)||"Please try again"})]}):F&&F.length>0?r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Ticket"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Date & Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:F.map(Q=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(Z,{to:`/admin/bookings/${Q.ticket_number}`,className:"text-sm font-medium text-amber-400 hover:text-blue-700",children:Q.ticket_number})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-primary-dark",children:[mc(Q.appointment_date)," at ",Q.appointment_time]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-master-text-primary-dark",children:Q.service_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-medium rounded-full ${SD(Q.status)}`,children:Q.status.charAt(0).toUpperCase()+Q.status.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:r.jsx(Z,{to:`/admin/bookings/${Q.ticket_number}`,className:"text-amber-400 hover:text-blue-700 font-medium",children:"View Details"})})]},Q.booking_id))})]}):r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-master-text-secondary-dark font-medium",children:"No bookings found"}),r.jsx("p",{className:"text-sm text-master-text-muted-dark mt-1",children:"This customer hasn't made any bookings yet"})]})})]}),l==="notes"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-white/10",children:[r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Private Notes About This Customer"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"Notes are shared with all admins for institutional knowledge"})]}),r.jsxs("div",{className:"px-6 py-5",children:[r.jsx("textarea",{value:d,onChange:Q=>u(Q.target.value),placeholder:"Add a note about preferences, issues, or other information...",rows:4,maxLength:2e3,className:"w-full px-4 py-3 border-2 border-white/20 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-blue-500 resize-none"}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:[d.length," / 2000 characters"]}),r.jsx("button",{onClick:ee,disabled:d.trim().length===0||z.isPending,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:z.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Note"})]})]})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h2",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Previous Notes"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:O?r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading notes..."})]}):R?r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load notes"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:(R==null?void 0:R.message)||"Please try again"})]}):L&&L.length>0?L.map(Q=>r.jsx("div",{className:"px-6 py-5",children:m===Q.note_id?r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{value:p,onChange:B=>j(B.target.value),rows:4,maxLength:2e3,className:"w-full px-4 py-3 border-2 border-white/20 rounded-lg focus:outline-none focus:ring-4 focus:ring-red-100 focus:border-blue-500 resize-none"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:[p.length," / 2000 characters"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>k(Q.note_id),disabled:p.trim().length===0||C.isPending,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?"Saving...":"Save"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-master-text-primary-dark whitespace-pre-wrap mb-3",children:Q.note_text}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"text-master-text-secondary-dark",children:[r.jsx("span",{className:"font-medium",children:"Created by:"})," ",Q.created_by,r.jsx("span",{className:"mx-2",children:""}),r.jsx("span",{children:mc(Q.created_at)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>D(Q),className:"text-amber-400 hover:text-blue-700 font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>J(Q.note_id),className:"text-red-600 hover:text-red-300 font-medium",children:"Delete"})]})]})]})},Q.note_id)):r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-master-text-muted-dark mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-master-text-secondary-dark font-medium",children:"No notes yet"}),r.jsx("p",{className:"text-sm text-master-text-muted-dark mt-1",children:"Add the first note about this customer"})]})})]})]})]})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-md w-full",children:[r.jsx("div",{className:"px-6 py-5 border-b border-white/10",children:r.jsx("h3",{className:"text-xl font-semibold text-master-text-primary-dark",children:"Delete Note?"})}),r.jsx("div",{className:"px-6 py-5",children:r.jsx("p",{className:"text-master-text-secondary-dark",children:"Are you sure you want to delete this note? This action cannot be undone."})}),r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] flex justify-end gap-3 rounded-b-xl",children:[r.jsx("button",{onClick:K,disabled:P.isPending,className:"px-4 py-2 bg-gray-100 text-master-text-secondary-dark rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:V,disabled:P.isPending,className:"px-4 py-2 bg-red-600 text-master-text-primary-dark rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:P.isPending?"Deleting...":"Delete Note"})]})]})})]})};function Ds(e,t,{checkForDefaultPrevented:s=!0}={}){return function(a){if(e==null||e(a),s===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function ED(e,t){const s=h.createContext(t),n=i=>{const{children:o,...l}=i,c=h.useMemo(()=>l,Object.values(l));return r.jsx(s.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=h.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function sk(e,t=[]){let s=[];function n(i,o){const l=h.createContext(o),c=s.length;s=[...s,o];const d=m=>{var b;const{scope:x,children:p,...j}=m,f=((b=x==null?void 0:x[e])==null?void 0:b[c])||l,v=h.useMemo(()=>j,Object.values(j));return r.jsx(f.Provider,{value:v,children:p})};d.displayName=i+"Provider";function u(m,x){var f;const p=((f=x==null?void 0:x[e])==null?void 0:f[c])||l,j=h.useContext(p);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(o=>h.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,TD(a,...t)]}function TD(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}var Oi=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},PD=zd[" useInsertionEffect ".trim().toString()]||Oi;function nk({prop:e,defaultProp:t,onChange:s=()=>{},caller:n}){const[a,i,o]=DD({defaultProp:t,onChange:s}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=h.useCallback(u=>{var m;if(l){const x=FD(u)?u(e):u;x!==e&&((m=o.current)==null||m.call(o,x))}else i(u)},[l,e,i,o]);return[c,d]}function DD({defaultProp:e,onChange:t}){const[s,n]=h.useState(e),a=h.useRef(s),i=h.useRef(t);return PD(()=>{i.current=t},[t]),h.useEffect(()=>{var o;a.current!==s&&((o=i.current)==null||o.call(i,s),a.current=s)},[s,a]),[s,n,i]}function FD(e){return typeof e=="function"}function MD(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function RD(e){const[t,s]=h.useState(void 0);return Oi(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else s(void 0)},[e]),t}function BD(e){const t=LD(e),s=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find($D);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function LD(e){const t=h.forwardRef((s,n)=>{const{children:a,...i}=s;if(h.isValidElement(a)){const o=zD(a),l=ID(i,a.props);return a.type!==h.Fragment&&(l.ref=n?gu(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var OD=Symbol("radix.slottable");function $D(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===OD}function ID(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function zD(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var VD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zr=VD.reduce((e,t)=>{const s=BD(`Primitive.${t}`),n=h.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function UD(e,t){e&&Cx.flushSync(()=>e.dispatchEvent(t))}var yu="Switch",[WD]=sk(yu),[qD,HD]=WD(yu),ak=h.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[x,p]=h.useState(null),j=Vs(t,w=>p(w)),f=h.useRef(!1),v=x?u||!!x.closest("form"):!0,[b,g]=nk({prop:a,defaultProp:i??!1,onChange:d,caller:yu});return r.jsxs(qD,{scope:s,checked:b,disabled:l,children:[r.jsx(Zr.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":ck(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:j,onClick:Ds(e.onClick,w=>{g(N=>!N),v&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})}),v&&r.jsx(lk,{control:x,bubbles:!f.current,name:n,value:c,checked:b,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});ak.displayName=yu;var ik="SwitchThumb",ok=h.forwardRef((e,t)=>{const{__scopeSwitch:s,...n}=e,a=HD(ik,s);return r.jsx(Zr.span,{"data-state":ck(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});ok.displayName=ik;var KD="SwitchBubbleInput",lk=h.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...a},i)=>{const o=h.useRef(null),l=Vs(o,i),c=MD(s),d=RD(t);return h.useEffect(()=>{const u=o.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==s&&p){const j=new Event("click",{bubbles:n});p.call(u,s),u.dispatchEvent(j)}},[c,s,n]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lk.displayName=KD;function ck(e){return e?"checked":"unchecked"}var dk=ak,GD=ok;const Yn=h.forwardRef(({className:e,...t},s)=>r.jsx(dk,{className:Ct("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-neutral-900 data-[state=unchecked]:bg-neutral-200 dark:focus-visible:ring-neutral-300 dark:focus-visible:ring-offset-neutral-950 dark:data-[state=checked]:bg-neutral-50 dark:data-[state=unchecked]:bg-neutral-800",e),...t,ref:s,children:r.jsx(GD,{className:Ct("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 dark:bg-neutral-950")})}));Yn.displayName=dk.displayName;var QD=zd[" useId ".trim().toString()]||(()=>{}),YD=0;function Sm(e){const[t,s]=h.useState(QD());return Oi(()=>{s(n=>n??String(YD++))},[e]),e||(t?`radix-${t}`:"")}function bl(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...s)=>{var n;return(n=t.current)==null?void 0:n.call(t,...s)},[])}function ZD(e,t=globalThis==null?void 0:globalThis.document){const s=bl(e);h.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[s,t])}var XD="DismissableLayer",Ap="dismissableLayer.update",JD="dismissableLayer.pointerDownOutside",eF="dismissableLayer.focusOutside",_y,uk=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mk=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=h.useContext(uk),[u,m]=h.useState(null),x=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=h.useState({}),j=Vs(t,S=>m(S)),f=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=f.indexOf(v),g=u?f.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,N=g>=b,_=sF(S=>{const A=S.target,I=[...d.branches].some(F=>F.contains(A));!N||I||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},x),y=nF(S=>{const A=S.target;[...d.branches].some(F=>F.contains(A))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},x);return ZD(S=>{g===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},x),h.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(_y=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Cy(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=_y)}},[u,x,s,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Cy())},[u,d]),h.useEffect(()=>{const S=()=>p({});return document.addEventListener(Ap,S),()=>document.removeEventListener(Ap,S)},[]),r.jsx(Zr.div,{...c,ref:j,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:Ds(e.onFocusCapture,y.onFocusCapture),onBlurCapture:Ds(e.onBlurCapture,y.onBlurCapture),onPointerDownCapture:Ds(e.onPointerDownCapture,_.onPointerDownCapture)})});mk.displayName=XD;var tF="DismissableLayerBranch",rF=h.forwardRef((e,t)=>{const s=h.useContext(uk),n=h.useRef(null),a=Vs(t,n);return h.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(Zr.div,{...e,ref:a})});rF.displayName=tF;function sF(e,t=globalThis==null?void 0:globalThis.document){const s=bl(e),n=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){hk(JD,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function nF(e,t=globalThis==null?void 0:globalThis.document){const s=bl(e),n=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!n.current&&hk(eF,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cy(){const e=new CustomEvent(Ap);document.dispatchEvent(e)}function hk(e,t,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),n?UD(a,i):a.dispatchEvent(i)}var Am="focusScope.autoFocusOnMount",Em="focusScope.autoFocusOnUnmount",Sy={bubbles:!1,cancelable:!0},aF="FocusScope",pk=h.forwardRef((e,t)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=h.useState(null),d=bl(a),u=bl(i),m=h.useRef(null),x=Vs(t,f=>c(f)),p=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(n){let f=function(w){if(p.paused||!l)return;const N=w.target;l.contains(N)?m.current=N:Js(m.current,{select:!0})},v=function(w){if(p.paused||!l)return;const N=w.relatedTarget;N!==null&&(l.contains(N)||Js(m.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Js(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",v);const g=new MutationObserver(b);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",v),g.disconnect()}}},[n,l,p.paused]),h.useEffect(()=>{if(l){Ey.add(p);const f=document.activeElement;if(!l.contains(f)){const b=new CustomEvent(Am,Sy);l.addEventListener(Am,d),l.dispatchEvent(b),b.defaultPrevented||(iF(uF(xk(l)),{select:!0}),document.activeElement===f&&Js(l))}return()=>{l.removeEventListener(Am,d),setTimeout(()=>{const b=new CustomEvent(Em,Sy);l.addEventListener(Em,u),l.dispatchEvent(b),b.defaultPrevented||Js(f??document.body,{select:!0}),l.removeEventListener(Em,u),Ey.remove(p)},0)}}},[l,d,u,p]);const j=h.useCallback(f=>{if(!s&&!n||p.paused)return;const v=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,b=document.activeElement;if(v&&b){const g=f.currentTarget,[w,N]=oF(g);w&&N?!f.shiftKey&&b===N?(f.preventDefault(),s&&Js(w,{select:!0})):f.shiftKey&&b===w&&(f.preventDefault(),s&&Js(N,{select:!0})):b===g&&f.preventDefault()}},[s,n,p.paused]);return r.jsx(Zr.div,{tabIndex:-1,...o,ref:x,onKeyDown:j})});pk.displayName=aF;function iF(e,{select:t=!1}={}){const s=document.activeElement;for(const n of e)if(Js(n,{select:t}),document.activeElement!==s)return}function oF(e){const t=xk(e),s=Ay(t,e),n=Ay(t.reverse(),e);return[s,n]}function xk(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Ay(e,t){for(const s of e)if(!lF(s,{upTo:t}))return s}function lF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cF(e){return e instanceof HTMLInputElement&&"select"in e}function Js(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&cF(e)&&t&&e.select()}}var Ey=dF();function dF(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=Ty(e,t),e.unshift(t)},remove(t){var s;e=Ty(e,t),(s=e[0])==null||s.resume()}}}function Ty(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function uF(e){return e.filter(t=>t.tagName!=="A")}var mF="Portal",fk=h.forwardRef((e,t)=>{var l;const{container:s,...n}=e,[a,i]=h.useState(!1);Oi(()=>i(!0),[]);const o=s||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?uw.createPortal(r.jsx(Zr.div,{...n,ref:t}),o):null});fk.displayName=mF;function hF(e,t){return h.useReducer((s,n)=>t[s][n]??s,e)}var vu=e=>{const{present:t,children:s}=e,n=pF(t),a=typeof s=="function"?s({present:n.isPresent}):h.Children.only(s),i=Vs(n.ref,xF(a));return typeof s=="function"||n.isPresent?h.cloneElement(a,{ref:i}):null};vu.displayName="Presence";function pF(e){const[t,s]=h.useState(),n=h.useRef(null),a=h.useRef(e),i=h.useRef("none"),o=e?"mounted":"unmounted",[l,c]=hF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=hc(n.current);i.current=l==="mounted"?d:"none"},[l]),Oi(()=>{const d=n.current,u=a.current;if(u!==e){const x=i.current,p=hc(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&x!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Oi(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=p=>{const f=hc(n.current).includes(CSS.escape(p.animationName));if(p.target===t&&f&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},x=p=>{p.target===t&&(i.current=hc(n.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function hc(e){return(e==null?void 0:e.animationName)||"none"}function xF(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Tm=0;function fF(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Py()),document.body.insertAdjacentElement("beforeend",e[1]??Py()),Tm++,()=>{Tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Tm--}},[])}function Py(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cs=function(){return cs=Object.assign||function(t){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},cs.apply(this,arguments)};function gk(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s}function gF(e,t,s){if(s||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Oc="right-scroll-bar-position",$c="width-before-scroll-bar",bF="with-scroll-bars-hidden",yF="--removed-body-scroll-bar-size";function Pm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vF(e,t){var s=h.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=t,s.facade}var wF=typeof window<"u"?h.useLayoutEffect:h.useEffect,Dy=new WeakMap;function jF(e,t){var s=vF(null,function(n){return e.forEach(function(a){return Pm(a,n)})});return wF(function(){var n=Dy.get(s);if(n){var a=new Set(n),i=new Set(e),o=s.current;a.forEach(function(l){i.has(l)||Pm(l,null)}),i.forEach(function(l){a.has(l)||Pm(l,o)})}Dy.set(s,e)},[e]),s}function kF(e){return e}function NF(e,t){t===void 0&&(t=kF);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(i){var o=t(i,n);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;s.length;){var o=s;s=[],o.forEach(i)}s={push:function(l){return i(l)},filter:function(){return s}}},assignMedium:function(i){n=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(i),o=s}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),s}}}};return a}function _F(e){e===void 0&&(e={});var t=NF(null);return t.options=cs({async:!0,ssr:!1},e),t}var bk=function(e){var t=e.sideCar,s=gk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return h.createElement(n,cs({},s))};bk.isSideCarExport=!0;function CF(e,t){return e.useMedium(t),bk}var yk=_F(),Dm=function(){},wu=h.forwardRef(function(e,t){var s=h.useRef(null),n=h.useState({onScrollCapture:Dm,onWheelCapture:Dm,onTouchMoveCapture:Dm}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,x=e.sideCar,p=e.noRelative,j=e.noIsolation,f=e.inert,v=e.allowPinchZoom,b=e.as,g=b===void 0?"div":b,w=e.gapMode,N=gk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=x,y=jF([s,t]),S=cs(cs({},N),a);return h.createElement(h.Fragment,null,u&&h.createElement(_,{sideCar:yk,removeScrollBar:d,shards:m,noRelative:p,noIsolation:j,inert:f,setCallbacks:i,allowPinchZoom:!!v,lockRef:s,gapMode:w}),o?h.cloneElement(h.Children.only(l),cs(cs({},S),{ref:y})):h.createElement(g,cs({},S,{className:c,ref:y}),l))});wu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wu.classNames={fullWidth:$c,zeroRight:Oc};var SF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=SF();return t&&e.setAttribute("nonce",t),e}function EF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function TF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var PF=function(){var e=0,t=null;return{add:function(s){e==0&&(t=AF())&&(EF(t,s),TF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},DF=function(){var e=PF();return function(t,s){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},vk=function(){var e=DF(),t=function(s){var n=s.styles,a=s.dynamic;return e(n,a),null};return t},FF={left:0,top:0,right:0,gap:0},Fm=function(e){return parseInt(e||"",10)||0},MF=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Fm(s),Fm(n),Fm(a)]},RF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return FF;var t=MF(e),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-s+t[2]-t[0])}},BF=vk(),li="data-scroll-locked",LF=function(e,t,s,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(bF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(li,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat($c,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Oc," .").concat(Oc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat($c," .").concat($c,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(li,`] {
    `).concat(yF,": ").concat(l,`px;
  }
`)},Fy=function(){var e=parseInt(document.body.getAttribute(li)||"0",10);return isFinite(e)?e:0},OF=function(){h.useEffect(function(){return document.body.setAttribute(li,(Fy()+1).toString()),function(){var e=Fy()-1;e<=0?document.body.removeAttribute(li):document.body.setAttribute(li,e.toString())}},[])},$F=function(e){var t=e.noRelative,s=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;OF();var i=h.useMemo(function(){return RF(a)},[a]);return h.createElement(BF,{styles:LF(i,!t,a,s?"":"!important")})},Ep=!1;if(typeof window<"u")try{var pc=Object.defineProperty({},"passive",{get:function(){return Ep=!0,!0}});window.addEventListener("test",pc,pc),window.removeEventListener("test",pc,pc)}catch{Ep=!1}var Fa=Ep?{passive:!1}:!1,IF=function(e){return e.tagName==="TEXTAREA"},wk=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!IF(e)&&s[t]==="visible")},zF=function(e){return wk(e,"overflowY")},VF=function(e){return wk(e,"overflowX")},My=function(e,t){var s=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=jk(e,n);if(a){var i=kk(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},UF=function(e){var t=e.scrollTop,s=e.scrollHeight,n=e.clientHeight;return[t,s,n]},WF=function(e){var t=e.scrollLeft,s=e.scrollWidth,n=e.clientWidth;return[t,s,n]},jk=function(e,t){return e==="v"?zF(t):VF(t)},kk=function(e,t){return e==="v"?UF(t):WF(t)},qF=function(e,t){return e==="h"&&t==="rtl"?-1:1},HF=function(e,t,s,n,a){var i=qF(e,window.getComputedStyle(t).direction),o=i*n,l=s.target,c=t.contains(l),d=!1,u=o>0,m=0,x=0;do{if(!l)break;var p=kk(e,l),j=p[0],f=p[1],v=p[2],b=f-v-i*j;(j||b)&&jk(e,l)&&(m+=b,x+=j);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(m)<1||!u&&Math.abs(x)<1)&&(d=!0),d},xc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ry=function(e){return[e.deltaX,e.deltaY]},By=function(e){return e&&"current"in e?e.current:e},KF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},GF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},QF=0,Ma=[];function YF(e){var t=h.useRef([]),s=h.useRef([0,0]),n=h.useRef(),a=h.useState(QF++)[0],i=h.useState(vk)[0],o=h.useRef(e);h.useEffect(function(){o.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=gF([e.lockRef.current],(e.shards||[]).map(By),!0).filter(Boolean);return f.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(f,v){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!o.current.allowPinchZoom;var b=xc(f),g=s.current,w="deltaX"in f?f.deltaX:g[0]-b[0],N="deltaY"in f?f.deltaY:g[1]-b[1],_,y=f.target,S=Math.abs(w)>Math.abs(N)?"h":"v";if("touches"in f&&S==="h"&&y.type==="range")return!1;var A=My(S,y);if(!A)return!0;if(A?_=S:(_=S==="v"?"h":"v",A=My(S,y)),!A)return!1;if(!n.current&&"changedTouches"in f&&(w||N)&&(n.current=_),!_)return!0;var I=n.current||_;return HF(I,v,f,I==="h"?w:N)},[]),c=h.useCallback(function(f){var v=f;if(!(!Ma.length||Ma[Ma.length-1]!==i)){var b="deltaY"in v?Ry(v):xc(v),g=t.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&KF(_.delta,b)})[0];if(g&&g.should){v.cancelable&&v.preventDefault();return}if(!g){var w=(o.current.shards||[]).map(By).filter(Boolean).filter(function(_){return _.contains(v.target)}),N=w.length>0?l(v,w[0]):!o.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),d=h.useCallback(function(f,v,b,g){var w={name:f,delta:v,target:b,should:g,shadowParent:ZF(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(N){return N!==w})},1)},[]),u=h.useCallback(function(f){s.current=xc(f),n.current=void 0},[]),m=h.useCallback(function(f){d(f.type,Ry(f),f.target,l(f,e.lockRef.current))},[]),x=h.useCallback(function(f){d(f.type,xc(f),f.target,l(f,e.lockRef.current))},[]);h.useEffect(function(){return Ma.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",c,Fa),document.addEventListener("touchmove",c,Fa),document.addEventListener("touchstart",u,Fa),function(){Ma=Ma.filter(function(f){return f!==i}),document.removeEventListener("wheel",c,Fa),document.removeEventListener("touchmove",c,Fa),document.removeEventListener("touchstart",u,Fa)}},[]);var p=e.removeScrollBar,j=e.inert;return h.createElement(h.Fragment,null,j?h.createElement(i,{styles:GF(a)}):null,p?h.createElement($F,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ZF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const XF=CF(yk,YF);var Nk=h.forwardRef(function(e,t){return h.createElement(wu,cs({},e,{ref:t,sideCar:XF}))});Nk.classNames=wu.classNames;var JF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ra=new WeakMap,fc=new WeakMap,gc={},Mm=0,_k=function(e){return e&&(e.host||_k(e.parentNode))},eM=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=_k(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},tM=function(e,t,s,n){var a=eM(t,Array.isArray(e)?e:[e]);gc[s]||(gc[s]=new WeakMap);var i=gc[s],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(x){if(l.has(x))u(x);else try{var p=x.getAttribute(n),j=p!==null&&p!=="false",f=(Ra.get(x)||0)+1,v=(i.get(x)||0)+1;Ra.set(x,f),i.set(x,v),o.push(x),f===1&&j&&fc.set(x,!0),v===1&&x.setAttribute(s,"true"),j||x.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",x,b)}})};return u(t),l.clear(),Mm++,function(){o.forEach(function(m){var x=Ra.get(m)-1,p=i.get(m)-1;Ra.set(m,x),i.set(m,p),x||(fc.has(m)||m.removeAttribute(n),fc.delete(m)),p||m.removeAttribute(s)}),Mm--,Mm||(Ra=new WeakMap,Ra=new WeakMap,fc=new WeakMap,gc={})}},rM=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=JF(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),tM(n,a,s,"aria-hidden")):function(){return null}};function sM(e){const t=nM(e),s=h.forwardRef((n,a)=>{const{children:i,...o}=n,l=h.Children.toArray(i),c=l.find(iM);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return r.jsx(t,{...o,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}function nM(e){const t=h.forwardRef((s,n)=>{const{children:a,...i}=s;if(h.isValidElement(a)){const o=lM(a),l=oM(i,a.props);return a.type!==h.Fragment&&(l.ref=n?gu(n,o):o),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var aM=Symbol("radix.slottable");function iM(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===aM}function oM(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function lM(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var ju="Dialog",[Ck]=sk(ju),[cM,Xr]=Ck(ju),Sk=e=>{const{__scopeDialog:t,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=h.useRef(null),c=h.useRef(null),[d,u]=nk({prop:n,defaultProp:a??!1,onChange:i,caller:ju});return r.jsx(cM,{scope:t,triggerRef:l,contentRef:c,contentId:Sm(),titleId:Sm(),descriptionId:Sm(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(m=>!m),[u]),modal:o,children:s})};Sk.displayName=ju;var Ak="DialogTrigger",dM=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Xr(Ak,s),i=Vs(t,a.triggerRef);return r.jsx(Zr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ef(a.open),...n,ref:i,onClick:Ds(e.onClick,a.onOpenToggle)})});dM.displayName=Ak;var Sf="DialogPortal",[uM,Ek]=Ck(Sf,{forceMount:void 0}),Tk=e=>{const{__scopeDialog:t,forceMount:s,children:n,container:a}=e,i=Xr(Sf,t);return r.jsx(uM,{scope:t,forceMount:s,children:h.Children.map(n,o=>r.jsx(vu,{present:s||i.open,children:r.jsx(fk,{asChild:!0,container:a,children:o})}))})};Tk.displayName=Sf;var $d="DialogOverlay",Pk=h.forwardRef((e,t)=>{const s=Ek($d,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=Xr($d,e.__scopeDialog);return i.modal?r.jsx(vu,{present:n||i.open,children:r.jsx(hM,{...a,ref:t})}):null});Pk.displayName=$d;var mM=sM("DialogOverlay.RemoveScroll"),hM=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Xr($d,s);return r.jsx(Nk,{as:mM,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Zr.div,{"data-state":Ef(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ca="DialogContent",Dk=h.forwardRef((e,t)=>{const s=Ek(Ca,e.__scopeDialog),{forceMount:n=s.forceMount,...a}=e,i=Xr(Ca,e.__scopeDialog);return r.jsx(vu,{present:n||i.open,children:i.modal?r.jsx(pM,{...a,ref:t}):r.jsx(xM,{...a,ref:t})})});Dk.displayName=Ca;var pM=h.forwardRef((e,t)=>{const s=Xr(Ca,e.__scopeDialog),n=h.useRef(null),a=Vs(t,s.contentRef,n);return h.useEffect(()=>{const i=n.current;if(i)return rM(i)},[]),r.jsx(Fk,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ds(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ds(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ds(e.onFocusOutside,i=>i.preventDefault())})}),xM=h.forwardRef((e,t)=>{const s=Xr(Ca,e.__scopeDialog),n=h.useRef(!1),a=h.useRef(!1);return r.jsx(Fk,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Fk=h.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Xr(Ca,s),c=h.useRef(null),d=Vs(t,c);return fF(),r.jsxs(r.Fragment,{children:[r.jsx(pk,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(mk,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ef(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(fM,{titleId:l.titleId}),r.jsx(bM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Af="DialogTitle",Mk=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Xr(Af,s);return r.jsx(Zr.h2,{id:a.titleId,...n,ref:t})});Mk.displayName=Af;var Rk="DialogDescription",Bk=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Xr(Rk,s);return r.jsx(Zr.p,{id:a.descriptionId,...n,ref:t})});Bk.displayName=Rk;var Lk="DialogClose",Ok=h.forwardRef((e,t)=>{const{__scopeDialog:s,...n}=e,a=Xr(Lk,s);return r.jsx(Zr.button,{type:"button",...n,ref:t,onClick:Ds(e.onClick,()=>a.onOpenChange(!1))})});Ok.displayName=Lk;function Ef(e){return e?"open":"closed"}var $k="DialogTitleWarning",[_7,Ik]=ED($k,{contentName:Ca,titleName:Af,docsSlug:"dialog"}),fM=({titleId:e})=>{const t=Ik($k),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},gM="DialogDescriptionWarning",bM=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ik(gM).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},yM=Sk,vM=Tk,zk=Pk,Vk=Dk,Uk=Mk,Wk=Bk,wM=Ok;const Rm=yM,jM=vM,qk=h.forwardRef(({className:e,...t},s)=>r.jsx(zk,{ref:s,className:Ct("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));qk.displayName=zk.displayName;const Ic=h.forwardRef(({className:e,children:t,...s},n)=>r.jsxs(jM,{children:[r.jsx(qk,{}),r.jsxs(Vk,{ref:n,className:Ct("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-neutral-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-neutral-800 dark:bg-neutral-950",e),...s,children:[t,r.jsxs(wM,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-neutral-100 data-[state=open]:text-neutral-500 dark:ring-offset-neutral-950 dark:focus:ring-neutral-300 dark:data-[state=open]:bg-neutral-800 dark:data-[state=open]:text-neutral-400",children:[r.jsx(bt,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ic.displayName=Vk.displayName;const zc=({className:e,...t})=>r.jsx("div",{className:Ct("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});zc.displayName="DialogHeader";const Vc=({className:e,...t})=>r.jsx("div",{className:Ct("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vc.displayName="DialogFooter";const Uc=h.forwardRef(({className:e,...t},s)=>r.jsx(Uk,{ref:s,className:Ct("text-lg font-semibold leading-none tracking-tight",e),...t}));Uc.displayName=Uk.displayName;const Wc=h.forwardRef(({className:e,...t},s)=>r.jsx(Wk,{ref:s,className:Ct("text-sm text-neutral-500 dark:text-neutral-400",e),...t}));Wc.displayName=Wk.displayName;var kM=e=>{switch(e){case"success":return CM;case"info":return AM;case"warning":return SM;case"error":return EM;default:return null}},NM=Array(12).fill(0),_M=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},NM.map((s,n)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),CM=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SM=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AM=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EM=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),TM=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),PM=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e},Tp=1,DM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Tp++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:s}),{...l,...e,id:a,dismissible:o,title:s}):l):this.addToast({title:s,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=s!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],se.isValidElement(c))a=!1,this.create({id:s,type:"default",message:c});else if(MM(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,u=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:s,type:"error",message:d,description:u})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:s,type:"success",message:d,description:u})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,u=typeof t.description=="function"?await t.description(c):t.description;this.create({id:s,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(s),s=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,t)=>{let s=(t==null?void 0:t.id)||Tp++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},tr=new DM,FM=(e,t)=>{let s=(t==null?void 0:t.id)||Tp++;return tr.addToast({title:e,...t,id:s}),s},MM=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",RM=FM,BM=()=>tr.toasts,LM=()=>tr.getActiveToasts(),_r=Object.assign(RM,{success:tr.success,info:tr.info,warning:tr.warning,error:tr.error,custom:tr.custom,message:tr.message,promise:tr.promise,dismiss:tr.dismiss,loading:tr.loading},{getHistory:BM,getToasts:LM});function OM(e,{insertAt:t}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}OM(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function bc(e){return e.label!==void 0}var $M=3,IM="32px",zM="16px",Ly=4e3,VM=356,UM=14,WM=20,qM=200;function Ir(...e){return e.filter(Boolean).join(" ")}function HM(e){let[t,s]=e.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}var KM=e=>{var t,s,n,a,i,o,l,c,d,u,m;let{invert:x,toast:p,unstyled:j,interacting:f,setHeights:v,visibleToasts:b,heights:g,index:w,toasts:N,expanded:_,removeToast:y,defaultRichColors:S,closeButton:A,style:I,cancelButtonStyle:F,actionButtonStyle:H,className:E="",descriptionClassName:L="",duration:O,position:R,gap:z,loadingIcon:ee,expandByDefault:C,classNames:k,icons:D,closeButtonAriaLabel:T="Close toast",pauseWhenPageIsHidden:P}=e,[V,J]=se.useState(null),[K,M]=se.useState(null),[U,W]=se.useState(!1),[Q,B]=se.useState(!1),[te,pe]=se.useState(!1),[we,vt]=se.useState(!1),[Jr,es]=se.useState(!1),[Us,ne]=se.useState(0),[Oe,Je]=se.useState(0),Ue=se.useRef(p.duration||O||Ly),kr=se.useRef(null),zt=se.useRef(null),Yi=w===0,ku=w+1<=b,Xt=p.type,Ws=p.dismissible!==!1,Nu=p.className||"",_u=p.descriptionClassName||"",Ta=se.useMemo(()=>g.findIndex(ge=>ge.toastId===p.id)||0,[g,p.id]),Cu=se.useMemo(()=>{var ge;return(ge=p.closeButton)!=null?ge:A},[p.closeButton,A]),Ol=se.useMemo(()=>p.duration||O||Ly,[p.duration,O]),Zi=se.useRef(0),qs=se.useRef(0),Xi=se.useRef(0),fs=se.useRef(null),[$l,q]=R.split("-"),xe=se.useMemo(()=>g.reduce((ge,Re,Ze)=>Ze>=Ta?ge:ge+Re.height,0),[g,Ta]),Pe=PM(),je=p.invert||x,ze=Xt==="loading";qs.current=se.useMemo(()=>Ta*z+xe,[Ta,xe]),se.useEffect(()=>{Ue.current=Ol},[Ol]),se.useEffect(()=>{W(!0)},[]),se.useEffect(()=>{let ge=zt.current;if(ge){let Re=ge.getBoundingClientRect().height;return Je(Re),v(Ze=>[{toastId:p.id,height:Re,position:p.position},...Ze]),()=>v(Ze=>Ze.filter(Br=>Br.toastId!==p.id))}},[v,p.id]),se.useLayoutEffect(()=>{if(!U)return;let ge=zt.current,Re=ge.style.height;ge.style.height="auto";let Ze=ge.getBoundingClientRect().height;ge.style.height=Re,Je(Ze),v(Br=>Br.find(Lr=>Lr.toastId===p.id)?Br.map(Lr=>Lr.toastId===p.id?{...Lr,height:Ze}:Lr):[{toastId:p.id,height:Ze,position:p.position},...Br])},[U,p.title,p.description,v,p.id]);let Me=se.useCallback(()=>{B(!0),ne(qs.current),v(ge=>ge.filter(Re=>Re.toastId!==p.id)),setTimeout(()=>{y(p)},qM)},[p,y,v,qs]);se.useEffect(()=>{if(p.promise&&Xt==="loading"||p.duration===1/0||p.type==="loading")return;let ge;return _||f||P&&Pe?(()=>{if(Xi.current<Zi.current){let Re=new Date().getTime()-Zi.current;Ue.current=Ue.current-Re}Xi.current=new Date().getTime()})():Ue.current!==1/0&&(Zi.current=new Date().getTime(),ge=setTimeout(()=>{var Re;(Re=p.onAutoClose)==null||Re.call(p,p),Me()},Ue.current)),()=>clearTimeout(ge)},[_,f,p,Xt,P,Pe,Me]),se.useEffect(()=>{p.delete&&Me()},[Me,p.delete]);function Pa(){var ge,Re,Ze;return D!=null&&D.loading?se.createElement("div",{className:Ir(k==null?void 0:k.loader,(ge=p==null?void 0:p.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":Xt==="loading"},D.loading):ee?se.createElement("div",{className:Ir(k==null?void 0:k.loader,(Re=p==null?void 0:p.classNames)==null?void 0:Re.loader,"sonner-loader"),"data-visible":Xt==="loading"},ee):se.createElement(_M,{className:Ir(k==null?void 0:k.loader,(Ze=p==null?void 0:p.classNames)==null?void 0:Ze.loader),visible:Xt==="loading"})}return se.createElement("li",{tabIndex:0,ref:zt,className:Ir(E,Nu,k==null?void 0:k.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,k==null?void 0:k.default,k==null?void 0:k[Xt],(s=p==null?void 0:p.classNames)==null?void 0:s[Xt]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:S,"data-styled":!(p.jsx||p.unstyled||j),"data-mounted":U,"data-promise":!!p.promise,"data-swiped":Jr,"data-removed":Q,"data-visible":ku,"data-y-position":$l,"data-x-position":q,"data-index":w,"data-front":Yi,"data-swiping":te,"data-dismissible":Ws,"data-type":Xt,"data-invert":je,"data-swipe-out":we,"data-swipe-direction":K,"data-expanded":!!(_||C&&U),style:{"--index":w,"--toasts-before":w,"--z-index":N.length-w,"--offset":`${Q?Us:qs.current}px`,"--initial-height":C?"auto":`${Oe}px`,...I,...p.style},onDragEnd:()=>{pe(!1),J(null),fs.current=null},onPointerDown:ge=>{ze||!Ws||(kr.current=new Date,ne(qs.current),ge.target.setPointerCapture(ge.pointerId),ge.target.tagName!=="BUTTON"&&(pe(!0),fs.current={x:ge.clientX,y:ge.clientY}))},onPointerUp:()=>{var ge,Re,Ze,Br;if(we||!Ws)return;fs.current=null;let Lr=Number(((ge=zt.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Hs=Number(((Re=zt.current)==null?void 0:Re.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vn=new Date().getTime()-((Ze=kr.current)==null?void 0:Ze.getTime()),Or=V==="x"?Lr:Hs,Ks=Math.abs(Or)/Vn;if(Math.abs(Or)>=WM||Ks>.11){ne(qs.current),(Br=p.onDismiss)==null||Br.call(p,p),M(V==="x"?Lr>0?"right":"left":Hs>0?"down":"up"),Me(),vt(!0),es(!1);return}pe(!1),J(null)},onPointerMove:ge=>{var Re,Ze,Br,Lr;if(!fs.current||!Ws||((Re=window.getSelection())==null?void 0:Re.toString().length)>0)return;let Hs=ge.clientY-fs.current.y,Vn=ge.clientX-fs.current.x,Or=(Ze=e.swipeDirections)!=null?Ze:HM(R);!V&&(Math.abs(Vn)>1||Math.abs(Hs)>1)&&J(Math.abs(Vn)>Math.abs(Hs)?"x":"y");let Ks={x:0,y:0};V==="y"?(Or.includes("top")||Or.includes("bottom"))&&(Or.includes("top")&&Hs<0||Or.includes("bottom")&&Hs>0)&&(Ks.y=Hs):V==="x"&&(Or.includes("left")||Or.includes("right"))&&(Or.includes("left")&&Vn<0||Or.includes("right")&&Vn>0)&&(Ks.x=Vn),(Math.abs(Ks.x)>0||Math.abs(Ks.y)>0)&&es(!0),(Br=zt.current)==null||Br.style.setProperty("--swipe-amount-x",`${Ks.x}px`),(Lr=zt.current)==null||Lr.style.setProperty("--swipe-amount-y",`${Ks.y}px`)}},Cu&&!p.jsx?se.createElement("button",{"aria-label":T,"data-disabled":ze,"data-close-button":!0,onClick:ze||!Ws?()=>{}:()=>{var ge;Me(),(ge=p.onDismiss)==null||ge.call(p,p)},className:Ir(k==null?void 0:k.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=D==null?void 0:D.close)!=null?i:TM):null,p.jsx||h.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:se.createElement(se.Fragment,null,Xt||p.icon||p.promise?se.createElement("div",{"data-icon":"",className:Ir(k==null?void 0:k.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Pa():null,p.type!=="loading"?p.icon||(D==null?void 0:D[Xt])||kM(Xt):null):null,se.createElement("div",{"data-content":"",className:Ir(k==null?void 0:k.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},se.createElement("div",{"data-title":"",className:Ir(k==null?void 0:k.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?se.createElement("div",{"data-description":"",className:Ir(L,_u,k==null?void 0:k.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),h.isValidElement(p.cancel)?p.cancel:p.cancel&&bc(p.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||F,onClick:ge=>{var Re,Ze;bc(p.cancel)&&Ws&&((Ze=(Re=p.cancel).onClick)==null||Ze.call(Re,ge),Me())},className:Ir(k==null?void 0:k.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,h.isValidElement(p.action)?p.action:p.action&&bc(p.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||H,onClick:ge=>{var Re,Ze;bc(p.action)&&((Ze=(Re=p.action).onClick)==null||Ze.call(Re,ge),!ge.defaultPrevented&&Me())},className:Ir(k==null?void 0:k.actionButton,(m=p==null?void 0:p.classNames)==null?void 0:m.actionButton)},p.action.label):null))};function Oy(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function GM(e,t){let s={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?zM:IM;function c(d){["top","right","bottom","left"].forEach(u=>{s[`${o}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?s[`${o}-${d}`]=l:s[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),s}h.forwardRef(function(e,t){let{invert:s,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:m,duration:x,style:p,visibleToasts:j=$M,toastOptions:f,dir:v=Oy(),gap:b=UM,loadingIcon:g,icons:w,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:_}=e,[y,S]=se.useState([]),A=se.useMemo(()=>Array.from(new Set([n].concat(y.filter(P=>P.position).map(P=>P.position)))),[y,n]),[I,F]=se.useState([]),[H,E]=se.useState(!1),[L,O]=se.useState(!1),[R,z]=se.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ee=se.useRef(null),C=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=se.useRef(null),D=se.useRef(!1),T=se.useCallback(P=>{S(V=>{var J;return(J=V.find(K=>K.id===P.id))!=null&&J.delete||tr.dismiss(P.id),V.filter(({id:K})=>K!==P.id)})},[]);return se.useEffect(()=>tr.subscribe(P=>{if(P.dismiss){S(V=>V.map(J=>J.id===P.id?{...J,delete:!0}:J));return}setTimeout(()=>{uw.flushSync(()=>{S(V=>{let J=V.findIndex(K=>K.id===P.id);return J!==-1?[...V.slice(0,J),{...V[J],...P},...V.slice(J+1)]:[P,...V]})})})}),[]),se.useEffect(()=>{if(u!=="system"){z(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:V})=>{z(V?"dark":"light")})}catch{P.addListener(({matches:J})=>{try{z(J?"dark":"light")}catch(K){console.error(K)}})}},[u]),se.useEffect(()=>{y.length<=1&&E(!1)},[y]),se.useEffect(()=>{let P=V=>{var J,K;a.every(M=>V[M]||V.code===M)&&(E(!0),(J=ee.current)==null||J.focus()),V.code==="Escape"&&(document.activeElement===ee.current||(K=ee.current)!=null&&K.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[a]),se.useEffect(()=>{if(ee.current)return()=>{k.current&&(k.current.focus({preventScroll:!0}),k.current=null,D.current=!1)}},[ee.current]),se.createElement("section",{ref:t,"aria-label":`${N} ${C}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((P,V)=>{var J;let[K,M]=P.split("-");return y.length?se.createElement("ol",{key:P,dir:v==="auto"?Oy():v,tabIndex:-1,ref:ee,className:l,"data-sonner-toaster":!0,"data-theme":R,"data-y-position":K,"data-lifted":H&&y.length>1&&!i,"data-x-position":M,style:{"--front-toast-height":`${((J=I[0])==null?void 0:J.height)||0}px`,"--width":`${VM}px`,"--gap":`${b}px`,...p,...GM(c,d)},onBlur:U=>{D.current&&!U.currentTarget.contains(U.relatedTarget)&&(D.current=!1,k.current&&(k.current.focus({preventScroll:!0}),k.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||D.current||(D.current=!0,k.current=U.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{L||E(!1)},onDragEnd:()=>E(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},y.filter(U=>!U.position&&V===0||U.position===P).map((U,W)=>{var Q,B;return se.createElement(KM,{key:U.id,icons:w,index:W,toast:U,defaultRichColors:m,duration:(Q=f==null?void 0:f.duration)!=null?Q:x,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:s,visibleToasts:j,closeButton:(B=f==null?void 0:f.closeButton)!=null?B:o,interacting:L,position:P,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:T,toasts:y.filter(te=>te.position==U.position),heights:I.filter(te=>te.position==U.position),setHeights:F,expandByDefault:i,gap:b,loadingIcon:g,expanded:H,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const QM=()=>{var ee,C;const e=re(k=>k.authentication_state.auth_token),t=dr(),[s,n]=h.useState(!1),[a,i]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState({name:"",photo_url:"",specialties:"",is_working_today:!0,is_active:!0,display_order:0}),[x,p]=h.useState(!1),[j,f]=h.useState(null),{data:v,isLoading:b,error:g}=ve({queryKey:["admin-barbers"],queryFn:async()=>{var k;try{const D=await Y.get("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/barbers",{headers:{Authorization:`Bearer ${e}`}});return console.log("[Barbers] Fetched successfully:",D.data),D.data}catch(D){throw console.error("[Barbers] Fetch error:",((k=D.response)==null?void 0:k.data)||D.message),D}}}),w=ye({mutationFn:async k=>{const D=k.specialties.split(",").map(P=>P.trim()).filter(P=>P.length>0);return(await Y.post("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/barbers",{name:k.name,photo_url:k.photo_url||null,specialties:D.length>0?D:null,is_working_today:k.is_working_today,is_active:k.is_active,display_order:k.display_order},{headers:{Authorization:`Bearer ${e}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-barbers"]}),_r.success("Barber added successfully"),n(!1),y()},onError:k=>{var D,T;_r.error(((T=(D=k.response)==null?void 0:D.data)==null?void 0:T.message)||"Failed to add barber")}}),N=ye({mutationFn:async k=>{const D={...k.updates};if(D.specialties!==void 0){const P=D.specialties.split(",").map(V=>V.trim()).filter(V=>V.length>0);D.specialties=P.length>0?P:null}return(await Y.patch(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/barbers/${k.barber_id}`,D,{headers:{Authorization:`Bearer ${e}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-barbers"]}),_r.success("Barber updated successfully"),i(!1),d(null),y()},onError:k=>{var D,T;_r.error(((T=(D=k.response)==null?void 0:D.data)==null?void 0:T.message)||"Failed to update barber")}}),_=ye({mutationFn:async k=>(await Y.delete(`https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/barbers/${k}`,{headers:{Authorization:`Bearer ${e}`}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin-barbers"]}),_r.success("Barber deleted successfully"),l(!1),d(null)},onError:k=>{var D,T;_r.error(((T=(D=k.response)==null?void 0:D.data)==null?void 0:T.message)||"Failed to delete barber")}}),y=()=>{m({name:"",photo_url:"",specialties:"",is_working_today:!0,is_active:!0,display_order:0}),f(null),p(!1)},S=async k=>{var V,J,K;const D=(V=k.target.files)==null?void 0:V[0];if(!D)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(D.type)){_r.error("Invalid file type. Only JPEG, PNG, GIF, and WebP images are allowed.");return}if(D.size>5*1024*1024){_r.error("File size must be less than 5MB.");return}const P=new FileReader;P.onloadend=()=>{f(P.result)},P.readAsDataURL(D),p(!0);try{const M=new FormData;M.append("photo",D);const U=await Y.post("https://123barber-booking-app-with-ticket-system.launchpulse.ai/api/admin/upload/barber-photo",M,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}});U.data.photoUrl&&(m(W=>({...W,photo_url:U.data.photoUrl})),_r.success("Photo uploaded successfully"))}catch(M){console.error("Photo upload error:",M),_r.error(((K=(J=M.response)==null?void 0:J.data)==null?void 0:K.message)||"Failed to upload photo"),f(null)}finally{p(!1)}},A=()=>{m(k=>({...k,photo_url:""})),f(null)},I=()=>{n(!0),y()},F=k=>{d(k),m({name:k.name,photo_url:k.photo_url||"",specialties:k.specialties?k.specialties.join(", "):"",is_working_today:k.is_working_today,is_active:k.is_active,display_order:k.display_order}),f(null),i(!0)},H=k=>{d(k),l(!0)},E=async k=>{try{await N.mutateAsync({barber_id:k.barber_id,updates:{is_working_today:!k.is_working_today}})}catch{}},L=async k=>{try{await N.mutateAsync({barber_id:k.barber_id,updates:{is_active:!k.is_active}})}catch{}},O=()=>{if(!u.name.trim()){_r.error("Please enter a barber name");return}w.mutate(u)},R=()=>{if(!u.name.trim()){_r.error("Please enter a barber name");return}c&&N.mutate({barber_id:c.barber_id,updates:u})},z=()=>{c&&_.mutate(c.barber_id)};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#600000] via-[#730000] to-[#8b0000]",children:[r.jsx("div",{className:"bg-gradient-to-r from-[#730000] to-[#8b0000] text-master-text-primary-dark shadow-master-elevated border-b border-white/15",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2 text-master-text-primary-dark",children:"Barber Management"}),r.jsx("p",{className:"text-master-text-secondary-dark",children:"Manage your barbers and their availability"})]}),r.jsxs(jt,{onClick:I,className:"flex items-center gap-2 bg-white text-master-text-primary-light hover:bg-gray-100 font-semibold shadow-lg",children:[r.jsx(vd,{className:"h-5 w-5"}),"Add Barber"]})]})})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:b?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading barbers..."})]}):g?r.jsx(fl,{className:"glass-card-light border-white/25",children:r.jsxs(gl,{className:"text-center py-12",children:[r.jsx("div",{className:"text-red-500 mb-4",children:r.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-2",children:"Error loading barbers"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-4",children:((C=(ee=g==null?void 0:g.response)==null?void 0:ee.data)==null?void 0:C.message)||(g==null?void 0:g.message)||"Please try again."}),r.jsx(jt,{onClick:()=>window.location.reload(),className:"bg-white text-master-text-primary-light hover:bg-gray-100 font-semibold",children:"Retry"})]})}):v!=null&&v.barbers&&v.barbers.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(cr,{className:"h-16 w-16 text-master-text-secondary-dark mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-master-text-primary-dark mb-2",children:"No barbers added yet"}),r.jsx("p",{className:"text-master-text-secondary-dark mb-4",children:"Click 'Add Barber' to create your first barber."}),r.jsxs(jt,{onClick:I,className:"bg-white text-master-text-primary-light hover:bg-gray-100 font-semibold",children:[r.jsx(vd,{className:"h-5 w-5 mr-2"}),"Add Barber"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v==null?void 0:v.barbers.map(k=>r.jsxs(fl,{className:"glass-card-light hover:shadow-master-elevated transition-shadow border-white/25",children:[r.jsx(Ld,{className:"border-b border-white/15",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[k.photo_url?r.jsx("img",{src:k.photo_url,alt:k.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white/20"}):r.jsx("div",{className:"w-16 h-16 rounded-full bg-[#6B2020] border-2 border-white/20 flex items-center justify-center",children:r.jsx(cr,{className:"h-8 w-8 text-master-text-primary-dark"})}),r.jsxs("div",{children:[r.jsx(Od,{className:"text-xl text-master-text-primary-dark",children:k.name}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx(Sp,{variant:k.is_active?"default":"secondary",className:k.is_active?"bg-blue-600 text-master-text-primary-dark border-blue-500":"bg-gray-700 text-master-text-secondary-dark border-gray-600",children:k.is_active?"Active":"Inactive"}),k.is_working_today&&k.is_active&&r.jsx(Sp,{variant:"outline",className:"bg-green-600/20 text-green-200 border-green-500/50 font-semibold",children:"Working Today"})]})]})]})})}),r.jsxs(gl,{className:"pt-4",children:[k.specialties&&k.specialties.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-master-text-secondary-dark font-semibold mb-2",children:"Specialties:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:k.specialties.map((D,T)=>r.jsx("span",{className:"text-xs bg-[#6B2020] text-master-text-primary-dark px-2 py-1 rounded border border-white/10",children:D},T))})]}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-white/15",children:[r.jsx("span",{className:"text-sm text-master-text-primary-dark font-medium",children:"Working Today"}),r.jsx(Yn,{checked:k.is_working_today,onCheckedChange:()=>E(k),disabled:!k.is_active})]}),r.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-white/15",children:[r.jsx("span",{className:"text-sm text-master-text-primary-dark font-medium",children:"Active Status"}),r.jsx(Yn,{checked:k.is_active,onCheckedChange:()=>L(k)})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(jt,{variant:"outline",size:"sm",onClick:()=>F(k),className:"flex-1 bg-white/10 text-master-text-primary-dark border-white/25 hover:bg-white/20 hover:text-master-text-primary-dark font-medium",children:[r.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Edit"]}),r.jsx(jt,{variant:"outline",size:"sm",onClick:()=>H(k),className:"text-red-300 border-red-500/50 bg-red-600/20 hover:text-red-200 hover:bg-red-600/30 hover:border-red-500/70 font-medium",children:r.jsx(tp,{className:"h-4 w-4"})})]})]})]},k.barber_id))})}),r.jsx(Rm,{open:s,onOpenChange:n,children:r.jsxs(Ic,{className:"sm:max-w-[500px]",children:[r.jsxs(zc,{children:[r.jsx(Uc,{children:"Add New Barber"}),r.jsx(Wc,{children:"Add a new barber to your team. Fill in their details below."})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"name",children:"Name *"}),r.jsx(mr,{id:"name",value:u.name,onChange:k=>m({...u,name:k.target.value}),placeholder:"e.g., Ahmed, Samir, Mo"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{children:"Photo (optional)"}),r.jsxs("div",{className:"space-y-3",children:[j||u.photo_url?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:j||u.photo_url,alt:"Photo preview",className:"w-32 h-32 rounded-lg object-cover border-2 border-gray-200"}),r.jsx(jt,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:A,children:r.jsx(X,{className:"h-4 w-4"})})]}):null,r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(mr,{type:"file",accept:"image/*",onChange:S,disabled:x,className:"cursor-pointer"})}),x&&r.jsxs("div",{className:"flex items-center text-sm text-master-text-muted-dark",children:[r.jsx(Po,{className:"h-4 w-4 animate-spin mr-2"}),"Uploading..."]})]}),r.jsx("div",{className:"text-xs text-master-text-muted-dark",children:"Or paste a photo URL below"}),r.jsx(mr,{id:"photo_url",value:u.photo_url,onChange:k=>m({...u,photo_url:k.target.value}),placeholder:"https://example.com/photo.jpg"})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"specialties",children:"Specialties (comma-separated, optional)"}),r.jsx(mr,{id:"specialties",value:u.specialties,onChange:k=>m({...u,specialties:k.target.value}),placeholder:"Fade, Beard Trim, Classic Cuts"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"display_order",children:"Display Order"}),r.jsx(mr,{id:"display_order",type:"number",value:u.display_order,onChange:k=>m({...u,display_order:parseInt(k.target.value)||0})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx(Mt,{htmlFor:"is_working_today",children:"Working Today"}),r.jsx(Yn,{id:"is_working_today",checked:u.is_working_today,onCheckedChange:k=>m({...u,is_working_today:k})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx(Mt,{htmlFor:"is_active",children:"Active"}),r.jsx(Yn,{id:"is_active",checked:u.is_active,onCheckedChange:k=>m({...u,is_active:k})})]})]}),r.jsxs(Vc,{children:[r.jsx(jt,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),r.jsx(jt,{onClick:O,disabled:w.isPending,children:w.isPending?"Adding...":"Add Barber"})]})]})}),r.jsx(Rm,{open:a,onOpenChange:i,children:r.jsxs(Ic,{className:"sm:max-w-[500px]",children:[r.jsxs(zc,{children:[r.jsx(Uc,{children:"Edit Barber"}),r.jsx(Wc,{children:"Update barber details and settings."})]}),r.jsxs("div",{className:"grid gap-4 py-4",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"edit_name",children:"Name *"}),r.jsx(mr,{id:"edit_name",value:u.name,onChange:k=>m({...u,name:k.target.value})})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{children:"Photo (optional)"}),r.jsxs("div",{className:"space-y-3",children:[j||u.photo_url?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:j||u.photo_url,alt:"Photo preview",className:"w-32 h-32 rounded-lg object-cover border-2 border-gray-200"}),r.jsx(jt,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2",onClick:A,children:r.jsx(X,{className:"h-4 w-4"})})]}):null,r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(mr,{type:"file",accept:"image/*",onChange:S,disabled:x,className:"cursor-pointer"})}),x&&r.jsxs("div",{className:"flex items-center text-sm text-master-text-muted-dark",children:[r.jsx(Po,{className:"h-4 w-4 animate-spin mr-2"}),"Uploading..."]})]}),r.jsx("div",{className:"text-xs text-master-text-muted-dark",children:"Or paste a photo URL below"}),r.jsx(mr,{id:"edit_photo_url",value:u.photo_url,onChange:k=>m({...u,photo_url:k.target.value}),placeholder:"https://example.com/photo.jpg"})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"edit_specialties",children:"Specialties (comma-separated, optional)"}),r.jsx(mr,{id:"edit_specialties",value:u.specialties,onChange:k=>m({...u,specialties:k.target.value}),placeholder:"Fade, Beard Trim, Classic Cuts"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(Mt,{htmlFor:"edit_display_order",children:"Display Order"}),r.jsx(mr,{id:"edit_display_order",type:"number",value:u.display_order,onChange:k=>m({...u,display_order:parseInt(k.target.value)||0})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx(Mt,{htmlFor:"edit_is_working_today",children:"Working Today"}),r.jsx(Yn,{id:"edit_is_working_today",checked:u.is_working_today,onCheckedChange:k=>m({...u,is_working_today:k})})]}),r.jsxs("div",{className:"flex items-center justify-between py-2",children:[r.jsx(Mt,{htmlFor:"edit_is_active",children:"Active"}),r.jsx(Yn,{id:"edit_is_active",checked:u.is_active,onCheckedChange:k=>m({...u,is_active:k})})]})]}),r.jsxs(Vc,{children:[r.jsx(jt,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),r.jsx(jt,{onClick:R,disabled:N.isPending,children:N.isPending?"Saving...":"Save Changes"})]})]})}),r.jsx(Rm,{open:o,onOpenChange:l,children:r.jsxs(Ic,{children:[r.jsxs(zc,{children:[r.jsx(Uc,{children:"Delete Barber"}),r.jsxs(Wc,{children:["Are you sure you want to delete ",c==null?void 0:c.name,"? This action cannot be undone. All associated bookings will have their barber assignment removed."]})]}),r.jsxs(Vc,{children:[r.jsx(jt,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),r.jsx(jt,{variant:"destructive",onClick:z,disabled:_.isPending,children:_.isPending?"Deleting...":"Delete"})]})]})})]})},YM=()=>{var Xi,fs,$l;const e=re(q=>q.authentication_state.auth_token),t=re(q=>q.update_app_settings),[s,n]=xt(),a=s.get("section"),[i,o]=h.useState(a&&["shop","booking","notifications","services"].includes(a)?a:"shop"),[l,c]=h.useState(null),[d,u]=h.useState({shop_name:"",shop_address:"",shop_phone:"",shop_email:"",operating_hours:"",capacity_mon_wed:2,capacity_thu_sun:3,booking_window_days:90,same_day_cutoff_hours:2,reminder_hours_before:2,email_confirmation_enabled:!0,email_reminder_enabled:!0,sms_enabled:!1,email_sender_name:"",email_sender_address:"",sms_sender_name:"",cancellation_policy_text:""}),[m,x]=h.useState([]),[p,j]=h.useState({service_id:null,name:"",description:"",image_url:null,duration:40,price:null,is_active:!0,display_order:0}),[f,v]=h.useState(!1),[b,g]=h.useState("add"),[w,N]=h.useState(null),[_,y]=h.useState(null),[S,A]=h.useState(null),[I,F]=h.useState(!1),[H,E]=h.useState("upload"),[L,O]=h.useState(!1),[R,z]=h.useState({}),[ee,C]=h.useState(null),[k,D]=h.useState(null),[T,P]=h.useState(null),[V,J]=h.useState(""),[K,M]=h.useState(""),U=dr(),W="https://123barber-booking-app-with-ticket-system.launchpulse.ai",{data:Q,isLoading:B,error:te}=ve({queryKey:["admin-settings"],queryFn:async()=>{var q,xe,Pe;try{console.log("[Settings] Fetching from:",`${W}/api/admin/settings`),console.log("[Settings] Auth token:",e?"Present":"Missing");const je=await Y.get(`${W}/api/admin/settings`,{headers:{Authorization:`Bearer ${e}`}});return console.log("[Settings] Fetched successfully:",je.data),je.data}catch(je){throw console.error("[Settings] Fetch error:",{status:(q=je.response)==null?void 0:q.status,statusText:(xe=je.response)==null?void 0:xe.statusText,data:(Pe=je.response)==null?void 0:Pe.data,message:je.message}),je}},enabled:!!e,staleTime:6e4});h.useEffect(()=>{Q&&(c(Q),u({...Q}),O(!1))},[Q]);const{data:pe,isLoading:we}=ve({queryKey:["admin-services"],queryFn:async()=>(await Y.get(`${W}/api/services`,{params:{sort_by:"display_order",sort_order:"asc"},headers:{Authorization:`Bearer ${e}`}})).data.services||[],enabled:!!e&&i==="services",staleTime:6e4});h.useEffect(()=>{pe&&x(pe)},[pe]);const vt=ye({mutationFn:async q=>(await Y.patch(`${W}/api/admin/settings`,q,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,onSuccess:q=>{c(q),u({...q}),O(!1),C("Settings saved successfully!"),D(null),t({shop_name:q.shop_name,shop_address:q.shop_address,shop_phone:q.shop_phone,shop_email:q.shop_email,operating_hours:q.operating_hours,capacity_mon_wed:q.capacity_mon_wed,capacity_thu_sun:q.capacity_thu_sun,booking_window_days:q.booking_window_days,same_day_cutoff_hours:q.same_day_cutoff_hours,reminder_hours_before:q.reminder_hours_before}),U.invalidateQueries({queryKey:["admin-settings"]}),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to save settings";D(xe),setTimeout(()=>D(null),5e3)}}),Jr=ye({mutationFn:async q=>(await Y.post(`${W}/api/admin/services`,q,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,onSuccess:q=>{x([...m,q]),v(!1),C("Service created successfully!"),U.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to create service";D(xe),setTimeout(()=>D(null),5e3)}}),es=ye({mutationFn:async q=>{const{service_id:xe,...Pe}=q;return(await Y.patch(`${W}/api/admin/services/${xe}`,Pe,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data},onSuccess:q=>{x(m.map(xe=>xe.service_id===q.service_id?q:xe)),v(!1),C("Service updated successfully!"),U.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to update service";D(xe),setTimeout(()=>D(null),5e3)}}),Us=ye({mutationFn:async q=>(await Y.delete(`${W}/api/admin/services/${q}`,{headers:{Authorization:`Bearer ${e}`}}),q),onSuccess:q=>{x(m.filter(xe=>xe.service_id!==q)),P(null),C("Service deleted successfully!"),U.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to delete service";D(xe),setTimeout(()=>D(null),5e3)}}),ne=ye({mutationFn:async q=>{await Y.post(`${W}/api/admin/notifications/test`,{type:"email",recipient:q},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})},onSuccess:()=>{C("Test email sent successfully!"),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to send test email";D(xe),setTimeout(()=>D(null),5e3)}}),Oe=ye({mutationFn:async q=>{await Y.post(`${W}/api/admin/notifications/test`,{type:"sms",recipient:q},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})},onSuccess:()=>{C("Test SMS sent successfully!"),setTimeout(()=>C(null),3e3)},onError:q=>{var Pe,je,ze;const xe=((ze=(je=(Pe=q.response)==null?void 0:Pe.data)==null?void 0:je.error)==null?void 0:ze.message)||"Failed to send test SMS";D(xe),setTimeout(()=>D(null),5e3)}}),Je=h.useCallback(q=>{o(q),n({section:q})},[n]),Ue=h.useCallback((q,xe)=>{u(Pe=>({...Pe,[q]:xe})),O(!0),z(Pe=>{const je={...Pe};return delete je[q],je})},[]),kr=h.useCallback(()=>{const q={};if((!d.shop_name||d.shop_name.trim().length===0)&&(q.shop_name="Shop name is required"),(!d.shop_email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.shop_email))&&(q.shop_email="Valid email is required"),d.capacity_mon_wed<0&&(q.capacity_mon_wed="Capacity cannot be negative"),d.capacity_thu_sun<0&&(q.capacity_thu_sun="Capacity cannot be negative"),d.booking_window_days<1&&(q.booking_window_days="Booking window must be at least 1 day"),d.same_day_cutoff_hours<0&&(q.same_day_cutoff_hours="Cutoff hours cannot be negative"),(d.reminder_hours_before<1||d.reminder_hours_before>24)&&(q.reminder_hours_before="Reminder hours must be between 1 and 24"),Object.keys(q).length>0){z(q),D("Please fix validation errors before saving"),setTimeout(()=>D(null),5e3);return}z({}),vt.mutate(d)},[d,vt]),zt=h.useCallback(()=>{l&&(u({...l}),O(!1),z({}))},[l]),Yi=h.useCallback((q,xe)=>{g(q),y(null),A(null),E("upload"),q==="add"?j({service_id:null,name:"",description:"",image_url:null,duration:40,price:null,is_active:!0,display_order:m.length,is_callout:!1}):xe&&(j({service_id:xe.service_id,name:xe.name,description:xe.description,image_url:xe.image_url,duration:xe.duration,price:xe.price,is_active:xe.is_active,display_order:xe.display_order,is_callout:xe.is_callout}),xe.image_url&&A(xe.image_url)),v(!0)},[m.length]),ku=h.useCallback(()=>{const q={};if((!p.name||p.name.trim().length===0)&&(q.name="Service name is required"),(!p.description||p.description.trim().length<10)&&(q.description="Description must be at least 10 characters"),p.description&&p.description.length>500&&(q.description="Description must not exceed 500 characters"),p.duration<1&&(q.duration="Duration must be positive"),p.price!==null&&p.price<0&&(q.price="Price cannot be negative"),Object.keys(q).length>0){z(q);return}if(z({}),b==="add"){const{service_id:xe,display_order:Pe,...je}=p;Jr.mutate(je)}else es.mutate(p)},[p,b,Jr,es]),Xt=h.useCallback(async q=>{var ze,Me,Pa;const xe=(ze=q.target.files)==null?void 0:ze[0];if(!xe)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(xe.type)){D("Invalid file type. Only JPEG, PNG, GIF, and WebP images are allowed."),setTimeout(()=>D(null),5e3);return}if(xe.size>5*1024*1024){D("File size must be less than 5MB."),setTimeout(()=>D(null),5e3);return}y(xe);const je=new FileReader;je.onloadend=()=>{A(je.result)},je.readAsDataURL(xe),F(!0);try{const ge=new FormData;ge.append("image",xe);const Re=await Y.post(`${W}/api/admin/upload/service-image`,ge,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}});Re.data.imageUrl&&(j({...p,image_url:Re.data.imageUrl}),C("Image uploaded successfully!"),setTimeout(()=>C(null),3e3))}catch(ge){console.error("Image upload error:",ge),D(((Pa=(Me=ge.response)==null?void 0:Me.data)==null?void 0:Pa.message)||"Failed to upload image"),setTimeout(()=>D(null),5e3),y(null),A(null)}finally{F(!1)}},[e,W,p]),Ws=h.useCallback(()=>{y(null),A(null),j({...p,image_url:null})},[p]),Nu=h.useCallback(q=>{P(q)},[]),_u=h.useCallback(()=>{T&&Us.mutate(T.service_id)},[T,Us]),Ta=h.useCallback(q=>{N(q)},[]),Cu=h.useCallback((q,xe)=>{if(q.preventDefault(),!w||w===xe)return;const Pe=m.findIndex(ge=>ge.service_id===w),je=m.findIndex(ge=>ge.service_id===xe);if(Pe===-1||je===-1)return;const ze=[...m],[Me]=ze.splice(Pe,1);ze.splice(je,0,Me);const Pa=ze.map((ge,Re)=>({...ge,display_order:Re}));x(Pa)},[w,m]),Ol=h.useCallback(()=>{N(null)},[]),Zi=h.useCallback(()=>{const q=V||d.email_sender_address;if(!q){D("Please enter a recipient email address"),setTimeout(()=>D(null),3e3);return}ne.mutate(q)},[V,d.email_sender_address,ne]),qs=h.useCallback(()=>{if(!K){D("Please enter a recipient phone number"),setTimeout(()=>D(null),3e3);return}Oe.mutate(K)},[K,Oe]);return h.useEffect(()=>{const q=xe=>{L&&(xe.preventDefault(),xe.returnValue="")};return window.addEventListener("beforeunload",q),()=>window.removeEventListener("beforeunload",q)},[L]),B?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark text-lg",children:"Loading settings..."})]})})}):te?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-4",children:r.jsx("div",{className:"max-w-md w-full bg-[#2D0808] rounded-lg shadow-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h2",{className:"mt-4 text-xl font-semibold text-master-text-primary-dark",children:"Failed to Load Settings"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:((fs=(Xi=te==null?void 0:te.response)==null?void 0:Xi.data)==null?void 0:fs.message)||(te==null?void 0:te.message)||"An error occurred while loading settings"}),(($l=te==null?void 0:te.response)==null?void 0:$l.status)===403&&r.jsx("p",{className:"mt-2 text-sm text-master-text-muted-dark",children:"You may not have permission to access settings. Please check your admin credentials."}),r.jsx("button",{onClick:()=>U.invalidateQueries({queryKey:["admin-settings"]}),className:"mt-6 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Retry"})]})})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx("div",{className:"bg-[#2D0808] border-b border-white/10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark",children:"Settings"}),r.jsx("p",{className:"mt-1 text-sm text-master-text-secondary-dark",children:"Manage your shop information, booking rules, and preferences"})]}),r.jsxs(Z,{to:"/admin",className:"inline-flex items-center px-4 py-2 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]})})}),ee&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-green-400 font-medium",children:ee})]})})}),k&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-red-400 font-medium",children:k})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("nav",{className:"space-y-1 bg-[#2D0808] rounded-lg shadow-sm border border-white/10 p-2 sticky top-4",children:[r.jsxs("button",{onClick:()=>Je("shop"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="shop"?"bg-[#2D0808] text-blue-700 border-l-4 border-red-600":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Shop Information"]}),r.jsxs("button",{onClick:()=>Je("booking"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="booking"?"bg-[#2D0808] text-blue-700 border-l-4 border-red-600":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Booking Settings"]}),r.jsxs("button",{onClick:()=>Je("notifications"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="notifications"?"bg-[#2D0808] text-blue-700 border-l-4 border-red-600":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Notification Settings"]}),r.jsxs("button",{onClick:()=>Je("services"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="services"?"bg-[#2D0808] text-blue-700 border-l-4 border-red-600":"text-master-text-secondary-dark hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:[r.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Services"]})]}),L&&i!=="services"&&r.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-amber-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"You have unsaved changes"})]})})]}),r.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-9",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg shadow-sm border border-white/10 p-6 lg:p-8",children:[i==="shop"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Shop Information"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"shop_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Shop Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"shop_name",value:d.shop_name,onChange:q=>Ue("shop_name",q.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.shop_name?"border-red-500":"border-white/20"}`,placeholder:"BarberSlot Premium Cuts"}),R.shop_name&&r.jsx("p",{className:"mt-1 form-error-text",children:R.shop_name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"shop_address",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Address"}),r.jsx("textarea",{id:"shop_address",rows:3,value:d.shop_address,onChange:q=>Ue("shop_address",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"123 Main St, City, State 12345"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"shop_phone",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"shop_phone",value:d.shop_phone,onChange:q=>Ue("shop_phone",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"+1 (555) 123-4567"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"shop_email",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"shop_email",value:d.shop_email,onChange:q=>Ue("shop_email",q.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.shop_email?"border-red-500":"border-white/20"}`,placeholder:"info@barberslot.com"}),R.shop_email&&r.jsx("p",{className:"mt-1 form-error-text",children:R.shop_email})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"operating_hours",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Operating Hours"}),r.jsx("textarea",{id:"operating_hours",rows:3,value:d.operating_hours,onChange:q=>Ue("operating_hours",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:`Monday - Friday: 9:00 AM - 7:00 PM
Saturday: 10:00 AM - 6:00 PM
Sunday: Closed`}),r.jsx("p",{className:"mt-1 text-xs text-master-text-muted-dark",children:"Display information only, not enforced by booking system"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-white/10",children:[r.jsx("button",{onClick:zt,disabled:!L,className:"px-6 py-3 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),r.jsx("button",{onClick:kr,disabled:!L||vt.isPending,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:vt.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="booking"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Booking Settings"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"Capacity Rules"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"capacity_mon_wed",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Monday - Wednesday Capacity"}),r.jsx("input",{type:"number",id:"capacity_mon_wed",min:"0",value:d.capacity_mon_wed,onChange:q=>Ue("capacity_mon_wed",parseInt(q.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.capacity_mon_wed?"border-red-500":"border-white/20"}`}),R.capacity_mon_wed&&r.jsx("p",{className:"mt-1 form-error-text",children:R.capacity_mon_wed})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"capacity_thu_sun",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Thursday - Sunday Capacity"}),r.jsx("input",{type:"number",id:"capacity_thu_sun",min:"0",value:d.capacity_thu_sun,onChange:q=>Ue("capacity_thu_sun",parseInt(q.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.capacity_thu_sun?"border-red-500":"border-white/20"}`}),R.capacity_thu_sun&&r.jsx("p",{className:"mt-1 form-error-text",children:R.capacity_thu_sun})]})]}),r.jsx("p",{className:"mt-2 text-xs text-master-text-secondary-dark",children:"Maximum number of customers per time slot"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"booking_window_days",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Booking Window (days in advance)"}),r.jsx("input",{type:"number",id:"booking_window_days",min:"1",value:d.booking_window_days,onChange:q=>Ue("booking_window_days",parseInt(q.target.value)||1),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.booking_window_days?"border-red-500":"border-white/20"}`}),R.booking_window_days&&r.jsx("p",{className:"mt-1 form-error-text",children:R.booking_window_days}),r.jsx("p",{className:"mt-1 text-xs text-master-text-secondary-dark",children:"Customers can book up to this many days in advance"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"same_day_cutoff_hours",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Same-Day Booking Cutoff (hours)"}),r.jsx("input",{type:"number",id:"same_day_cutoff_hours",min:"0",value:d.same_day_cutoff_hours,onChange:q=>Ue("same_day_cutoff_hours",parseInt(q.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.same_day_cutoff_hours?"border-red-500":"border-white/20"}`}),R.same_day_cutoff_hours&&r.jsx("p",{className:"mt-1 form-error-text",children:R.same_day_cutoff_hours}),r.jsx("p",{className:"mt-1 text-xs text-master-text-secondary-dark",children:"Bookings must be made at least this many hours before the appointment"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cancellation_policy_text",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Cancellation Policy"}),r.jsx("textarea",{id:"cancellation_policy_text",rows:4,value:d.cancellation_policy_text,onChange:q=>Ue("cancellation_policy_text",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"You can cancel up to 2 hours before your appointment without penalty."}),r.jsx("p",{className:"mt-1 text-xs text-master-text-secondary-dark",children:"Displayed to customers during booking and in confirmation"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-white/10",children:[r.jsx("button",{onClick:zt,disabled:!L,className:"px-6 py-3 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),r.jsx("button",{onClick:kr,disabled:!L||vt.isPending,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:vt.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="notifications"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark mb-6",children:"Notification Settings"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"Email Notifications"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Enable booking confirmation email"}),r.jsx("button",{onClick:()=>Ue("email_confirmation_enabled",!d.email_confirmation_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.email_confirmation_enabled?"bg-gradient-to-r from-red-600 to-red-700":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-[#2D0808] transition-transform ${d.email_confirmation_enabled?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Enable booking reminder email"}),r.jsx("button",{onClick:()=>Ue("email_reminder_enabled",!d.email_reminder_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.email_reminder_enabled?"bg-gradient-to-r from-red-600 to-red-700":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-[#2D0808] transition-transform ${d.email_reminder_enabled?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email_sender_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Sender Name"}),r.jsx("input",{type:"text",id:"email_sender_name",value:d.email_sender_name,onChange:q=>Ue("email_sender_name",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"BarberSlot"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email_sender_address",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Sender Email"}),r.jsx("input",{type:"email",id:"email_sender_address",value:d.email_sender_address,onChange:q=>Ue("email_sender_address",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"noreply@barberslot.com"})]})]}),r.jsxs("div",{className:"flex items-end space-x-3 mt-4 pt-4 border-t border-white/10",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"test_email_recipient",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Test Recipient"}),r.jsx("input",{type:"email",id:"test_email_recipient",value:V,onChange:q=>J(q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:d.email_sender_address||"recipient@example.com"})]}),r.jsx("button",{onClick:Zi,disabled:ne.isPending,className:"px-6 py-3 bg-gray-600 text-master-text-primary-dark rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:ne.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Test Email"})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-master-text-primary-dark mb-4",children:"SMS Notifications"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Enable SMS notifications"}),r.jsx("button",{onClick:()=>Ue("sms_enabled",!d.sms_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.sms_enabled?"bg-gradient-to-r from-red-600 to-red-700":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-[#2D0808] transition-transform ${d.sms_enabled?"translate-x-6":"translate-x-1"}`})})]}),d.sms_enabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"sms_sender_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"SMS Sender Name"}),r.jsx("input",{type:"text",id:"sms_sender_name",value:d.sms_sender_name,onChange:q=>Ue("sms_sender_name",q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"BarberSlot"})]}),r.jsxs("div",{className:"flex items-end space-x-3 mt-4 pt-4 border-t border-white/10",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"test_sms_recipient",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Test Recipient Phone"}),r.jsx("input",{type:"tel",id:"test_sms_recipient",value:K,onChange:q=>M(q.target.value),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"+1 (555) 123-4567"})]}),r.jsx("button",{onClick:qs,disabled:Oe.isPending,className:"px-6 py-3 bg-gray-600 text-master-text-primary-dark rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:Oe.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Test SMS"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"reminder_hours_before",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Send reminder (hours before appointment)"}),r.jsx("input",{type:"number",id:"reminder_hours_before",min:"1",max:"24",value:d.reminder_hours_before,onChange:q=>Ue("reminder_hours_before",parseInt(q.target.value)||2),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.reminder_hours_before?"border-red-500":"border-white/20"}`}),R.reminder_hours_before&&r.jsx("p",{className:"mt-1 form-error-text",children:R.reminder_hours_before}),r.jsx("p",{className:"mt-1 text-xs text-master-text-secondary-dark",children:"Reminder will be sent this many hours before the appointment (1-24)"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-white/10",children:[r.jsx("button",{onClick:zt,disabled:!L,className:"px-6 py-3 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),r.jsx("button",{onClick:kr,disabled:!L||vt.isPending,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:vt.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="services"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-master-text-primary-dark",children:"Services"}),r.jsxs("button",{onClick:()=>Yi("add"),className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 transition-colors inline-flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Service"]})]}),we?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-master-text-secondary-dark",children:"Loading services..."})]}):m.length===0?r.jsxs("div",{className:"text-center py-12 bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg border-2 border-dashed border-white/20",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-master-text-muted-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-master-text-primary-dark",children:"No services yet"}),r.jsx("p",{className:"mt-2 text-master-text-secondary-dark",children:"Get started by creating your first service"}),r.jsx("button",{onClick:()=>Yi("add"),className:"mt-4 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 transition-colors",children:"Create First Service"})]}):r.jsx("div",{className:"space-y-3",children:m.map(q=>r.jsx("div",{draggable:!0,onDragStart:()=>Ta(q.service_id),onDragOver:xe=>Cu(xe,q.service_id),onDragEnd:Ol,className:"bg-[#2D0808] border border-white/10 rounded-lg p-4 hover:shadow-md transition-shadow cursor-move",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 mr-4 text-master-text-muted-dark cursor-grab active:cursor-grabbing",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})}),(()=>{const Pe=((je,ze)=>{if(ze)return ze;const Me=je.toLowerCase();return Me.includes("fade")||Me.includes("taper")?"https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=200&h=200&fit=crop":Me.includes("beard")||Me.includes("shave")?"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=200&h=200&fit=crop":Me.includes("buzz")||Me.includes("crew")?"https://images.unsplash.com/photo-1605497788044-5a32c7078486?w=200&h=200&fit=crop":Me.includes("kid")||Me.includes("child")?"https://images.unsplash.com/photo-1503342217505-b0a15ec3261c?w=200&h=200&fit=crop":Me.includes("design")||Me.includes("pattern")||Me.includes("line")?"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=200&h=200&fit=crop":Me.includes("wash")||Me.includes("treatment")||Me.includes("scalp")?"https://images.unsplash.com/photo-1560869713-7d0a29430803?w=200&h=200&fit=crop":Me.includes("color")||Me.includes("dye")?"https://images.unsplash.com/photo-1562004760-aceed7bb0fe3?w=200&h=200&fit=crop":Me.includes("styling")||Me.includes("style")?"https://images.unsplash.com/photo-1534620808146-d33bb39128b2?w=200&h=200&fit=crop":Me.includes("trim")||Me.includes("cut")?"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=200&h=200&fit=crop":"https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=200&h=200&fit=crop"})(q.name,q.image_url);return r.jsx("img",{src:Pe,alt:q.name,className:"w-16 h-16 rounded-lg object-cover mr-4"})})(),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-lg font-semibold text-master-text-primary-dark",children:q.name}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark line-clamp-2",children:q.description}),r.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-sm text-master-text-muted-dark",children:[r.jsxs("span",{children:[q.duration," min"]}),q.price!==null&&r.jsxs("span",{children:["$",typeof q.price=="number"?q.price.toFixed(2):parseFloat(String(q.price)).toFixed(2)]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Active"}),r.jsx("div",{className:`w-10 h-6 rounded-full transition-colors ${q.is_active?"bg-green-500":"bg-gray-300"}`,children:r.jsx("div",{className:`w-4 h-4 mt-1 rounded-full bg-[#2D0808] transition-transform ${q.is_active?"ml-5":"ml-1"}`})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>Yi("edit",q),className:"p-2 text-amber-400 hover:bg-[#2D0808] rounded-lg transition-colors",title:"Edit",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>Nu(q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},q.service_id))})]})]})})]})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:b==="add"?"Add New Service":"Edit Service"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"service_name",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Service Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"service_name",value:p.name,onChange:q=>j({...p,name:q.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.name?"border-red-500":"border-white/20"}`,placeholder:"Haircut"}),R.name&&r.jsx("p",{className:"mt-1 form-error-text",children:R.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"service_description",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"service_description",rows:4,value:p.description,onChange:q=>j({...p,description:q.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors ${R.description?"border-red-500":"border-white/20"}`,placeholder:"Professional haircut service..."}),r.jsxs("p",{className:"mt-1 text-xs text-master-text-muted-dark",children:[p.description.length,"/500 characters"]}),R.description&&r.jsx("p",{className:"mt-1 form-error-text",children:R.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service_duration",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Duration (minutes)"}),r.jsx("input",{type:"number",id:"service_duration",min:"1",value:p.duration,onChange:q=>j({...p,duration:parseInt(q.target.value)||40}),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service_price",className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Price (optional)"}),r.jsx("input",{type:"number",id:"service_price",min:"0",step:"0.01",value:p.price||"",onChange:q=>j({...p,price:q.target.value?parseFloat(q.target.value):null}),className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"25.00"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark",children:"Service Image (optional)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>E("upload"),className:`text-xs px-3 py-1 rounded ${H==="upload"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"bg-gray-200 text-master-text-secondary-dark hover:bg-gray-300"}`,children:"Upload"}),r.jsx("button",{type:"button",onClick:()=>E("url"),className:`text-xs px-3 py-1 rounded ${H==="url"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark":"bg-gray-200 text-master-text-secondary-dark hover:bg-gray-300"}`,children:"URL"})]})]}),H==="upload"?r.jsxs("div",{children:[S&&r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("img",{src:S.startsWith("/")?`${W}${S}`:S,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-white/20"}),r.jsx("button",{type:"button",onClick:Ws,className:"absolute top-2 right-2 bg-red-600 text-master-text-primary-dark p-2 rounded-full hover:bg-red-700 transition-colors",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!S&&r.jsxs("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[r.jsx("input",{type:"file",id:"service_image_file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:Xt,className:"hidden",disabled:I}),r.jsx("label",{htmlFor:"service_image_file",className:"cursor-pointer flex flex-col items-center",children:I?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-10 w-10 text-amber-400 mb-3",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:"Uploading..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-10 h-10 text-master-text-muted-dark mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark mb-1",children:"Click to upload or drag and drop"}),r.jsx("span",{className:"text-xs text-master-text-muted-dark",children:"JPEG, PNG, GIF, WebP (max 5MB)"})]})})]})]}):r.jsx("input",{type:"url",id:"service_image_url",value:p.image_url||"",onChange:q=>{j({...p,image_url:q.target.value||null}),A(q.target.value||null)},className:"w-full px-4 py-3 border border-white/20 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-blue-500 transition-colors",placeholder:"https://example.com/image.jpg"})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-white/10",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Service is active"}),r.jsx("button",{onClick:()=>j({...p,is_active:!p.is_active}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p.is_active?"bg-gradient-to-r from-red-600 to-red-700":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-[#2D0808] transition-transform ${p.is_active?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-white/10",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-medium text-master-text-secondary-dark",children:"Call-Out Service (Premium)"}),r.jsxs("div",{className:"group relative",children:[r.jsx("svg",{className:"w-4 h-4 text-master-text-muted-dark cursor-help",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-64 p-2 bg-gray-900 text-master-text-primary-dark text-xs rounded shadow-lg z-10",children:"Enable this for mobile/at-home services where the barber travels to the customer's location"})]})]}),r.jsx("button",{onClick:()=>j({...p,is_callout:!p.is_callout}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p.is_callout?"bg-orange-600":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-[#2D0808] transition-transform ${p.is_callout?"translate-x-6":"translate-x-1"}`})})]})]}),r.jsxs("div",{className:"p-6 border-t border-white/10 flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>{v(!1),z({}),y(null),A(null)},className:"px-6 py-3 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:"Cancel"}),r.jsx("button",{onClick:ku,disabled:Jr.isPending||es.isPending,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg text-sm font-medium hover:from-red-700 hover:to-red-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:Jr.isPending||es.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Service"})]})]})}),T&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-lg shadow-xl max-w-md w-full",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"ml-4 text-xl font-bold text-master-text-primary-dark",children:"Delete Service?"})]}),r.jsxs("p",{className:"text-master-text-secondary-dark mb-2",children:["Are you sure you want to delete ",r.jsx("strong",{children:T.name}),"?"]}),r.jsx("p",{className:"text-sm text-master-text-muted-dark",children:"Existing bookings will retain this service for records."})]}),r.jsxs("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] px-6 py-4 flex justify-end space-x-3 rounded-b-lg",children:[r.jsx("button",{onClick:()=>P(null),className:"px-6 py-2 border border-white/20 rounded-lg text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors",children:"Cancel"}),r.jsx("button",{onClick:_u,disabled:Us.isPending,className:"px-6 py-2 bg-red-600 text-master-text-primary-dark rounded-lg text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:Us.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})})},ns=e=>e.toISOString().split("T")[0],$y=e=>{const t=new Date;switch(e){case"today":return{start_date:ns(t),end_date:ns(t)};case"this_week":{const s=new Date(t);return s.setDate(t.getDate()-t.getDay()),{start_date:ns(s),end_date:ns(t)}}case"this_month":{const s=new Date(t.getFullYear(),t.getMonth(),1);return{start_date:ns(s),end_date:ns(t)}}default:return{start_date:ns(t),end_date:ns(t)}}},ZM=(e,t)=>{const s=new Date(e),n=new Date(t),a=Math.abs(n.getTime()-s.getTime());return Math.ceil(a/(1e3*60*60*24))+1},XM=()=>{const[e]=xt(),t=re(P=>P.authentication_state.auth_token),s=re(P=>P.app_settings.shop_name),n="https://123barber-booking-app-with-ticket-system.launchpulse.ai",a=e.get("preset"),i=e.get("start_date"),o=e.get("end_date"),l=e.get("group_by")||"service",c=h.useMemo(()=>{if(i&&o)return{start_date:i,end_date:o,preset:"custom"};const P=a||"today";return{...$y(P),preset:P}},[i,o,a]),[d,u]=h.useState(c),[m,x]=h.useState(c.start_date),[p,j]=h.useState(c.end_date),[f]=h.useState(l),[v]=h.useState(""),[b]=h.useState(""),[g,w]=h.useState(!1),[N,_]=h.useState({include_fields:["ticket_number","customer_name","appointment_date","appointment_time","service_name","status","special_request"],date_range:{start_date:d.start_date,end_date:d.end_date}});h.useEffect(()=>{_(P=>({...P,date_range:{start_date:d.start_date,end_date:d.end_date}}))},[d]);const{data:y,isLoading:S,error:A,refetch:I}=ve({queryKey:["admin-reports",d.start_date,d.end_date,f,v,b],queryFn:async()=>{const P=new URLSearchParams({start_date:d.start_date,end_date:d.end_date,group_by:f});return v&&P.append("service_id",v),b&&P.append("status",b),(await Y.get(`${n}/api/admin/reports/bookings?${P}`,{headers:{Authorization:`Bearer ${t}`}})).data},enabled:!!t&&!!d.start_date&&!!d.end_date,staleTime:5*60*1e3,retry:1}),F=h.useMemo(()=>{if(!y)return{total_bookings:0,completed:0,cancelled:0,no_shows:0,show_up_rate:0,cancellation_rate:0,total_revenue:null};const P=y.total_bookings||0,V=y.completed||0,J=y.cancelled||0,K=y.no_shows||0,M=V+K>0?V/(V+K)*100:0,U=P>0?J/P*100:0;return{total_bookings:P,completed:V,cancelled:J,no_shows:K,show_up_rate:M,cancellation_rate:U,total_revenue:y.total_revenue||null}},[y]),H=h.useMemo(()=>!(y!=null&&y.by_service)||F.total_bookings===0?[]:y.by_service.map(P=>({service_name:P.service_name,count:P.count,percentage:P.count/F.total_bookings*100})),[y,F.total_bookings]),E=h.useMemo(()=>{if(!(y!=null&&y.by_day_of_week))return[];const P=ZM(d.start_date,d.end_date);return y.by_day_of_week.map(V=>({day:V.day,count:V.count,average:P>0?V.count/Math.ceil(P/7):0}))},[y,d]),L=h.useMemo(()=>y!=null&&y.by_time_slot?y.by_time_slot.map(P=>({time:P.time,count:P.count,utilization:P.total_capacity&&P.total_capacity>0?P.count/P.total_capacity*100:0})):[],[y]),O=h.useMemo(()=>!y||F.total_bookings===0?[]:[{status:"Completed",count:F.completed,percentage:F.completed/F.total_bookings*100},{status:"Cancelled",count:F.cancelled,percentage:F.cancelled/F.total_bookings*100},{status:"No-show",count:F.no_shows,percentage:F.no_shows/F.total_bookings*100}].filter(P=>P.count>0),[y,F]),R=ye({mutationFn:async P=>{const V=new URLSearchParams({start_date:P.date_range.start_date,end_date:P.date_range.end_date,fields:P.include_fields.join(","),format:"csv"}),J=await Y.get(`${n}/api/admin/reports/export?${V}`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),K=new Blob([J.data],{type:"text/csv"}),M=window.URL.createObjectURL(K),U=document.createElement("a");U.href=M,U.download=`bookings_report_${P.date_range.start_date}_${P.date_range.end_date}.csv`,document.body.appendChild(U),U.click(),document.body.removeChild(U),window.URL.revokeObjectURL(M)}}),z=P=>{if(P==="custom")u({start_date:m,end_date:p,preset:"custom"});else{const V=$y(P);u({...V,preset:P}),x(V.start_date),j(V.end_date)}},ee=()=>{m&&p&&u({start_date:m,end_date:p,preset:"custom"})},C=()=>{I()},k=()=>{R.mutate(N),w(!1)},D=P=>{_(V=>({...V,include_fields:V.include_fields.includes(P)?V.include_fields.filter(J=>J!==P):[...V.include_fields,P]}))},T=[{value:"ticket_number",label:"Ticket Number"},{value:"customer_name",label:"Customer Name"},{value:"customer_email",label:"Customer Email"},{value:"customer_phone",label:"Customer Phone"},{value:"appointment_date",label:"Date"},{value:"appointment_time",label:"Time"},{value:"service_name",label:"Service"},{value:"status",label:"Status"},{value:"special_request",label:"Special Request"},{value:"admin_notes",label:"Admin Notes"}];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-master-text-primary-dark leading-tight",children:"Reports and Analytics"}),r.jsxs("p",{className:"mt-2 text-sm text-master-text-secondary-dark",children:["Business intelligence and booking insights for ",s]})]}),r.jsx(Z,{to:"/admin",className:"px-4 py-2 text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] border border-white/20 rounded-lg hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors duration-200",children:" Back to Dashboard"})]})}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Date Range"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>z("today"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="today"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark border-red-600 shadow-md":"bg-[#2D0808] text-master-text-secondary-dark border-white/20 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:"Today"}),r.jsx("button",{onClick:()=>z("this_week"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="this_week"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark border-red-600 shadow-md":"bg-[#2D0808] text-master-text-secondary-dark border-white/20 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:"This Week"}),r.jsx("button",{onClick:()=>z("this_month"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="this_month"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark border-red-600 shadow-md":"bg-[#2D0808] text-master-text-secondary-dark border-white/20 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:"This Month"}),r.jsx("button",{onClick:()=>z("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="custom"?"bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark border-red-600 shadow-md":"bg-[#2D0808] text-master-text-secondary-dark border-white/20 hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]"}`,children:"Custom Range"})]})]}),d.preset==="custom"&&r.jsxs("div",{className:"flex items-end gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"From"}),r.jsx("input",{type:"date",value:m,onChange:P=>x(P.target.value),max:ns(new Date),className:"px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-1",children:"To"}),r.jsx("input",{type:"date",value:p,onChange:P=>j(P.target.value),max:ns(new Date),className:"px-3 py-2 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-blue-500"})]}),r.jsx("button",{onClick:ee,className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors duration-200 font-medium",children:"Apply"})]}),r.jsx("div",{className:"ml-auto",children:r.jsx("button",{onClick:C,disabled:S,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-all duration-200 font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:S?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Generate Report"})})]})})}),A&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-6 w-6 text-red-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-400",children:"Failed to load report"}),r.jsx("p",{className:"text-sm text-red-300 mt-1",children:A instanceof Error?A.message:"An error occurred while fetching the report data."})]})]})}),S&&r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-12 mb-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-amber-400 mb-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-master-text-secondary-dark font-medium",children:"Loading report data..."})]})}),!S&&!A&&F.total_bookings===0&&r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-12 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-master-text-muted-dark mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"text-lg font-medium text-master-text-primary-dark mb-2",children:"No bookings in selected date range"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mb-4",children:"Try expanding your date range or adjusting your filters to see data."}),r.jsx("button",{onClick:()=>z("this_month"),className:"px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 text-master-text-primary-dark rounded-lg hover:from-red-700 hover:to-red-800 transition-colors duration-200",children:"View This Month"})]})}),!S&&!A&&F.total_bookings>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Total Bookings"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),r.jsx("p",{className:"text-4xl font-bold",children:F.total_bookings})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Completed"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),r.jsx("p",{className:"text-4xl font-bold",children:F.completed}),r.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[F.total_bookings>0?(F.completed/F.total_bookings*100).toFixed(1):0,"% of total"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Cancelled"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),r.jsx("p",{className:"text-4xl font-bold",children:F.cancelled}),r.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[F.cancellation_rate.toFixed(1),"% cancellation rate"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"No-shows"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),r.jsx("p",{className:"text-4xl font-bold",children:F.no_shows}),r.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[F.total_bookings>0?(F.no_shows/F.total_bookings*100).toFixed(1):0,"% of total"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Show-up Rate"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),r.jsxs("p",{className:"text-4xl font-bold",children:[F.show_up_rate.toFixed(1),"%"]}),r.jsx("p",{className:"text-sm opacity-90 mt-1",children:"of scheduled appointments"})]}),F.total_revenue!==null&&r.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl shadow-lg p-6 text-master-text-primary-dark",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Total Revenue"}),r.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),r.jsxs("p",{className:"text-4xl font-bold",children:["$",F.total_revenue.toFixed(2)]}),r.jsx("p",{className:"text-sm opacity-90 mt-1",children:"from completed bookings"})]})]}),H.length>0&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"Breakdown by Service"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Service Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Count"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Percentage"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Visual"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:H.map((P,V)=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors duration-150",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-master-text-primary-dark",children:P.service_name||"No Service"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:P.count}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:[P.percentage.toFixed(1),"%"]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"w-full max-w-xs bg-gray-200 rounded-full h-4 overflow-hidden",children:r.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 h-4 rounded-full transition-all duration-500",style:{width:`${Math.min(P.percentage,100)}%`}})})})})]},V))})]})})]}),E.length>0&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"Breakdown by Day of Week"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Day"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Count"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Average per Week"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:E.map((P,V)=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors duration-150",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-master-text-primary-dark",children:P.day}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:P.count}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:P.average.toFixed(1)})]},V))})]})})]}),L.length>0&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"Breakdown by Time Slot"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Time"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Count"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Utilization"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-master-text-muted-dark uppercase tracking-wider",children:"Visual"})]})}),r.jsx("tbody",{className:"bg-[#2D0808] divide-y divide-gray-200",children:L.map((P,V)=>r.jsxs("tr",{className:"hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors duration-150",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-master-text-primary-dark",children:P.time}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:P.count}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-master-text-secondary-dark",children:[P.utilization.toFixed(1),"%"]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"w-full max-w-xs bg-gray-200 rounded-full h-4 overflow-hidden",children:r.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${P.utilization>=80?"bg-red-500":P.utilization>=50?"bg-orange-500":"bg-green-500"}`,style:{width:`${Math.min(P.utilization,100)}%`}})})})})]},V))})]})})]}),O.length>0&&r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"Breakdown by Status"}),r.jsx("div",{className:"space-y-4",children:O.map((P,V)=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 w-32 text-sm font-medium text-master-text-primary-dark",children:P.status}),r.jsx("div",{className:"flex-1 ml-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 overflow-hidden",children:r.jsx("div",{className:`h-8 rounded-full flex items-center justify-end pr-3 text-master-text-primary-dark text-sm font-medium transition-all duration-500 ${P.status==="Completed"?"bg-green-600":P.status==="Cancelled"?"bg-red-600":"bg-orange-600"}`,style:{width:`${Math.min(P.percentage,100)}%`},children:P.percentage>10&&`${P.percentage.toFixed(1)}%`})}),r.jsxs("div",{className:"ml-3 text-sm font-medium text-master-text-primary-dark whitespace-nowrap",children:[P.count," (",P.percentage.toFixed(1),"%)"]})]})})]},V))})]}),r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark mb-4",children:"Booking Trend"}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-200 p-12 text-center",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),r.jsx("p",{className:"text-master-text-secondary-dark font-medium mb-2",children:"Trend Chart Coming Soon"}),r.jsxs("p",{className:"text-sm text-master-text-muted-dark",children:["The time series trend endpoint is currently being implemented.",r.jsx("br",{}),"This will show booking trends over the selected date range."]})]})]}),r.jsx("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-lg border border-white/10 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-master-text-primary-dark",children:"Export Data"}),r.jsx("p",{className:"text-sm text-master-text-secondary-dark mt-1",children:"Download your report data as a CSV file"})]}),r.jsx("button",{onClick:()=>w(!0),className:"px-6 py-3 bg-green-600 text-master-text-primary-dark rounded-lg hover:bg-green-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Export to CSV"})]})})]})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"backdrop-blur-xl bg-white/10 border border-white/20 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-master-text-primary-dark",children:"Export to CSV"}),r.jsx("button",{onClick:()=>w(!1),className:"text-master-text-muted-dark hover:text-master-text-secondary-dark transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-2",children:"Date Range"}),r.jsx("div",{className:"bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] rounded-lg p-3 border border-white/10",children:r.jsxs("p",{className:"text-sm text-master-text-primary-dark",children:[N.date_range.start_date," to ",N.date_range.end_date]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-master-text-secondary-dark mb-3",children:"Include Fields"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map(P=>r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:N.include_fields.includes(P.value),onChange:()=>D(P.value),className:"h-4 w-4 text-amber-400 focus:ring-red-500 border-white/20 rounded"}),r.jsx("span",{className:"text-sm text-master-text-secondary-dark",children:P.label})]},P.value))})]})]}),r.jsxs("div",{className:"p-6 border-t border-white/10 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-master-text-secondary-dark bg-[#2D0808] border border-white/20 rounded-lg hover:bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B] transition-colors duration-200",children:"Cancel"}),r.jsx("button",{onClick:k,disabled:R.isPending||N.include_fields.length===0,className:"px-6 py-2 text-sm font-medium text-master-text-primary-dark bg-green-600 rounded-lg hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-master-text-primary-dark",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):"Export CSV"})]})]})})]})},JM=({isActive:e,onComplete:t})=>r.jsx(xS,{children:e&&r.jsxs(he.div,{className:"fixed inset-0 z-[9999] pointer-events-none flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[r.jsx(he.div,{className:"absolute inset-0 bg-gradient-to-br from-red-950 via-red-900 to-black",initial:{opacity:0},animate:{opacity:.95},exit:{opacity:0},transition:{duration:.3}}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs(he.svg,{width:"120",height:"120",viewBox:"0 0 120 120",className:"absolute top-1/2 left-1/2",style:{originX:"100%",originY:"50%"},initial:{x:"-50%",y:"-50%",rotate:-45},animate:{x:"-50%",y:"-50%",rotate:-15,scale:[1,1.1,1]},transition:{duration:.5,ease:"easeInOut",times:[0,.5,1]},children:[r.jsxs("defs",{children:[r.jsxs("filter",{id:"glow-left",children:[r.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),r.jsxs("linearGradient",{id:"metallic-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#f0f0f0"}),r.jsx("stop",{offset:"50%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#d0d0d0"})]})]}),r.jsx("circle",{cx:"25",cy:"25",r:"10",fill:"url(#metallic-left)",stroke:"#c0c0c0",strokeWidth:"2",filter:"url(#glow-left)",opacity:"0.95"}),r.jsx(he.path,{d:"M 30 25 L 90 60 L 95 55 L 35 20 Z",fill:"url(#metallic-left)",stroke:"#a0a0a0",strokeWidth:"1.5",filter:"url(#glow-left)",initial:{opacity:.9},animate:{opacity:[.9,1,.9]},transition:{duration:.5,repeat:0}}),r.jsx(he.line,{x1:"30",y1:"25",x2:"90",y2:"60",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4}})]}),r.jsxs(he.svg,{width:"120",height:"120",viewBox:"0 0 120 120",className:"absolute top-1/2 left-1/2",style:{originX:"0%",originY:"50%"},initial:{x:"-50%",y:"-50%",rotate:45,scaleX:-1},animate:{x:"-50%",y:"-50%",rotate:15,scaleX:-1,scale:[1,1.1,1]},transition:{duration:.5,ease:"easeInOut",times:[0,.5,1]},children:[r.jsxs("defs",{children:[r.jsxs("filter",{id:"glow-right",children:[r.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),r.jsxs("linearGradient",{id:"metallic-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#f0f0f0"}),r.jsx("stop",{offset:"50%",stopColor:"#ffffff"}),r.jsx("stop",{offset:"100%",stopColor:"#d0d0d0"})]})]}),r.jsx("circle",{cx:"25",cy:"25",r:"10",fill:"url(#metallic-right)",stroke:"#c0c0c0",strokeWidth:"2",filter:"url(#glow-right)",opacity:"0.95"}),r.jsx(he.path,{d:"M 30 25 L 90 60 L 95 55 L 35 20 Z",fill:"url(#metallic-right)",stroke:"#a0a0a0",strokeWidth:"1.5",filter:"url(#glow-right)",initial:{opacity:.9},animate:{opacity:[.9,1,.9]},transition:{duration:.5,repeat:0}}),r.jsx(he.line,{x1:"30",y1:"25",x2:"90",y2:"60",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4}})]}),r.jsx(he.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",initial:{scale:0,opacity:0},animate:{scale:[0,1.5,0],opacity:[0,1,0]},transition:{duration:.6,delay:.3,times:[0,.5,1],ease:"easeOut"},children:r.jsx("div",{className:"w-[200vw] h-1 bg-gradient-to-r from-transparent via-white to-transparent blur-sm"})}),[...Array(8)].map((s,n)=>r.jsx(he.div,{className:"absolute top-1/2 left-1/2 w-2 h-2 bg-white rounded-full shadow-lg shadow-white/50",initial:{x:"-50%",y:"-50%",scale:0,opacity:0},animate:{x:`calc(-50% + ${Math.cos(n*45*Math.PI/180)*60}px)`,y:`calc(-50% + ${Math.sin(n*45*Math.PI/180)*60}px)`,scale:[0,1,0],opacity:[0,1,0]},transition:{duration:.6,delay:.35+n*.02,ease:"easeOut"}},n))]}),r.jsx(he.div,{className:"absolute inset-0 top-0 h-1/2 bg-gradient-to-b from-red-950 to-red-900 shadow-2xl",initial:{y:0},animate:{y:"-100%"},transition:{duration:.4,delay:.5,ease:"easeInOut"},onAnimationComplete:()=>{t&&setTimeout(t,100)}}),r.jsx(he.div,{className:"absolute inset-0 bottom-0 h-1/2 bg-gradient-to-t from-red-950 to-red-900 shadow-2xl",initial:{y:0},animate:{y:"100%"},transition:{duration:.4,delay:.5,ease:"easeInOut"}}),r.jsx(he.div,{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:r.jsx("div",{className:"flex gap-1",children:[0,1,2].map(s=>r.jsx(he.div,{className:"w-2 h-2 bg-red-300 rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:.8,delay:s*.1,repeat:1/0,ease:"easeInOut"}},s))})})]})}),e7=new V3({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),Tf=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-300 text-lg",children:"Loading..."})]})}),Iy=({children:e})=>{const t=re(a=>a.authentication_state.authentication_status.is_authenticated),s=re(a=>a.authentication_state.authentication_status.is_loading),n=re(a=>a.authentication_state.authentication_status.user_type);return s?r.jsx(Tf,{}):!t||n!=="user"?r.jsx(Dx,{to:"/login",replace:!0}):r.jsx(r.Fragment,{children:e})},Vt=({children:e})=>{const t=re(a=>a.authentication_state.authentication_status.is_authenticated),s=re(a=>a.authentication_state.authentication_status.is_loading),n=re(a=>a.authentication_state.authentication_status.user_type);return s?r.jsx(Tf,{}):!t||n!=="admin"?r.jsx(Dx,{to:"/admin/login",replace:!0}):r.jsx(r.Fragment,{children:e})},t7=()=>{const e=re(n=>n.authentication_state.authentication_status.is_loading),t=re(n=>n.initialize_auth),s=re(n=>n.fetch_app_settings);return h.useEffect(()=>{(async()=>{await t(),await s()})()},[t,s]),e?r.jsx(Tf,{}):r.jsx(f3,{children:r.jsx(U3,{client:e7,children:r.jsx(nS,{children:r.jsx(r7,{})})})})},r7=()=>{const{isTransitioning:e}=du();return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"App min-h-screen flex flex-col bg-gradient-to-br from-[#2A0A0A] via-[#3D0F0F] to-[#5C1B1B]",children:[r.jsx(aS,{}),r.jsx(oS,{}),r.jsx("main",{className:"flex-1",children:r.jsxs(l3,{children:[r.jsx(Se,{path:"/",element:r.jsx(OE,{})}),r.jsx(Se,{path:"/book/service",element:r.jsx($E,{})}),r.jsx(Se,{path:"/book/date",element:r.jsx(WE,{})}),r.jsx(Se,{path:"/book/time",element:r.jsx(qE,{})}),r.jsx(Se,{path:"/book/details",element:r.jsx(bT,{})}),r.jsx(Se,{path:"/book/review",element:r.jsx(kT,{})}),r.jsx(Se,{path:"/callout/book",element:r.jsx(RT,{})}),r.jsx(Se,{path:"/callout/confirmation",element:r.jsx(BT,{})}),r.jsx(Se,{path:"/queue/join",element:r.jsx(OT,{})}),r.jsx(Se,{path:"/queue/status",element:r.jsx($T,{})}),r.jsx(Se,{path:"/booking/confirmation",element:r.jsx(ET,{})}),r.jsx(Se,{path:"/booking/:ticket_number",element:r.jsx(FT,{})}),r.jsx(Se,{path:"/search",element:r.jsx(DT,{})}),r.jsx(Se,{path:"/gallery",element:r.jsx(IT,{})}),r.jsx(Se,{path:"/register",element:r.jsx(zT,{})}),r.jsx(Se,{path:"/login",element:r.jsx(VT,{})}),r.jsx(Se,{path:"/verify-email",element:r.jsx(UT,{})}),r.jsx(Se,{path:"/verify-email/success",element:r.jsx(WT,{})}),r.jsx(Se,{path:"/reset-password",element:r.jsx(KT,{})}),r.jsx(Se,{path:"/reset-password/confirm",element:r.jsx(YT,{})}),r.jsx(Se,{path:"/reset-password/success",element:r.jsx(ZT,{})}),r.jsx(Se,{path:"/admin/login",element:r.jsx(ZP,{})}),r.jsx(Se,{path:"/dashboard",element:r.jsx(Iy,{children:r.jsx(tP,{})})}),r.jsx(Se,{path:"/profile",element:r.jsx(Iy,{children:r.jsx(YP,{})})}),r.jsx(Se,{path:"/admin",element:r.jsx(Vt,{children:r.jsx(JP,{})})}),r.jsx(Se,{path:"/admin/queue",element:r.jsx(Vt,{children:r.jsx(eD,{})})}),r.jsx(Se,{path:"/admin/bookings/calendar",element:r.jsx(Vt,{children:r.jsx(lD,{})})}),r.jsx(Se,{path:"/admin/bookings",element:r.jsx(Vt,{children:r.jsx(mD,{})})}),r.jsx(Se,{path:"/admin/bookings/new",element:r.jsx(Vt,{children:r.jsx(xD,{})})}),r.jsx(Se,{path:"/admin/bookings/:ticket_number",element:r.jsx(Vt,{children:r.jsx(hD,{})})}),r.jsx(Se,{path:"/admin/capacity",element:r.jsx(Vt,{children:r.jsx(fD,{})})}),r.jsx(Se,{path:"/admin/blocking",element:r.jsx(Vt,{children:r.jsx(yD,{})})}),r.jsx(Se,{path:"/admin/gallery",element:r.jsx(Vt,{children:r.jsx(vD,{})})}),r.jsx(Se,{path:"/admin/gallery/upload",element:r.jsx(Vt,{children:r.jsx(wD,{})})}),r.jsx(Se,{path:"/admin/customers",element:r.jsx(Vt,{children:r.jsx(ND,{})})}),r.jsx(Se,{path:"/admin/customers/:customer_id",element:r.jsx(Vt,{children:r.jsx(AD,{})})}),r.jsx(Se,{path:"/admin/barbers",element:r.jsx(Vt,{children:r.jsx(QM,{})})}),r.jsx(Se,{path:"/admin/settings",element:r.jsx(Vt,{children:r.jsx(YM,{})})}),r.jsx(Se,{path:"/admin/reports",element:r.jsx(Vt,{children:r.jsx(XM,{})})}),r.jsx(Se,{path:"*",element:r.jsx(Dx,{to:"/",replace:!0})})]})}),r.jsx(iS,{}),r.jsx(rS,{}),r.jsx(cS,{}),r.jsx(dS,{})]}),r.jsx(JM,{isActive:e})]})},s7=()=>r.jsx(r.Fragment,{children:r.jsx(t7,{})});mw(document.getElementById("root")).render(r.jsx(s7,{}));
