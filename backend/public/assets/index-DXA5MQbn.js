var q0=e=>{throw TypeError(e)};var nd=(e,t,r)=>t.has(e)||q0("Cannot "+r);var L=(e,t,r)=>(nd(e,t,"read from private field"),r?r.call(e):t.get(e)),ue=(e,t,r)=>t.has(e)?q0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ae=(e,t,r,n)=>(nd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),be=(e,t,r)=>(nd(e,t,"access private method"),r);var Uo=(e,t,r,n)=>({set _(a){ae(e,t,a,r)},get _(){return L(e,t,n)}});function d2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function u2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ey={exports:{}},Sc={},ty={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=Symbol.for("react.element"),m2=Symbol.for("react.portal"),h2=Symbol.for("react.fragment"),f2=Symbol.for("react.strict_mode"),p2=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),g2=Symbol.for("react.context"),y2=Symbol.for("react.forward_ref"),b2=Symbol.for("react.suspense"),v2=Symbol.for("react.memo"),w2=Symbol.for("react.lazy"),H0=Symbol.iterator;function j2(e){return e===null||typeof e!="object"?null:(e=H0&&e[H0]||e["@@iterator"],typeof e=="function"?e:null)}var sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ry=Object.assign,ny={};function Xa(e,t,r){this.props=e,this.context=t,this.refs=ny,this.updater=r||sy}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ay(){}ay.prototype=Xa.prototype;function Xm(e,t,r){this.props=e,this.context=t,this.refs=ny,this.updater=r||sy}var Jm=Xm.prototype=new ay;Jm.constructor=Xm;ry(Jm,Xa.prototype);Jm.isPureReactComponent=!0;var K0=Array.isArray,iy=Object.prototype.hasOwnProperty,eh={current:null},oy={key:!0,ref:!0,__self:!0,__source:!0};function ly(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)iy.call(t,n)&&!oy.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Po,type:e,key:i,ref:o,props:a,_owner:eh.current}}function N2(e,t){return{$$typeof:Po,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function th(e){return typeof e=="object"&&e!==null&&e.$$typeof===Po}function _2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var G0=/\/+/g;function ad(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_2(""+e.key):t.toString(36)}function pl(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Po:case m2:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+ad(o,0):n,K0(a)?(r="",e!=null&&(r=e.replace(G0,"$&/")+"/"),pl(a,t,r,"",function(d){return d})):a!=null&&(th(a)&&(a=N2(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(G0,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",K0(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ad(i,l);o+=pl(i,t,r,c,a)}else if(c=j2(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ad(i,l++),o+=pl(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Wo(e,t,r){if(e==null)return e;var n=[],a=0;return pl(e,n,"","",function(i){return t.call(r,i,a++)}),n}function k2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},xl={transition:null},C2={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:xl,ReactCurrentOwner:eh};function cy(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Wo,forEach:function(e,t,r){Wo(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Wo(e,function(){t++}),t},toArray:function(e){return Wo(e,function(t){return t})||[]},only:function(e){if(!th(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Xa;Ne.Fragment=h2;Ne.Profiler=p2;Ne.PureComponent=Xm;Ne.StrictMode=f2;Ne.Suspense=b2;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C2;Ne.act=cy;Ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ry({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=eh.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)iy.call(t,c)&&!oy.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Po,type:e.type,key:a,ref:i,props:n,_owner:o}};Ne.createContext=function(e){return e={$$typeof:g2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x2,_context:e},e.Consumer=e};Ne.createElement=ly;Ne.createFactory=function(e){var t=ly.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:y2,render:e}};Ne.isValidElement=th;Ne.lazy=function(e){return{$$typeof:w2,_payload:{_status:-1,_result:e},_init:k2}};Ne.memo=function(e,t){return{$$typeof:v2,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=xl.transition;xl.transition={};try{e()}finally{xl.transition=t}};Ne.unstable_act=cy;Ne.useCallback=function(e,t){return Rt.current.useCallback(e,t)};Ne.useContext=function(e){return Rt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Rt.current.useEffect(e,t)};Ne.useId=function(){return Rt.current.useId()};Ne.useImperativeHandle=function(e,t,r){return Rt.current.useImperativeHandle(e,t,r)};Ne.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Rt.current.useMemo(e,t)};Ne.useReducer=function(e,t,r){return Rt.current.useReducer(e,t,r)};Ne.useRef=function(e){return Rt.current.useRef(e)};Ne.useState=function(e){return Rt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,r){return Rt.current.useSyncExternalStore(e,t,r)};Ne.useTransition=function(){return Rt.current.useTransition()};Ne.version="18.3.1";ty.exports=Ne;var f=ty.exports;const ft=u2(f),dy=d2({__proto__:null,default:ft},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2=f,T2=Symbol.for("react.element"),E2=Symbol.for("react.fragment"),P2=Object.prototype.hasOwnProperty,A2=S2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M2={key:!0,ref:!0,__self:!0,__source:!0};function uy(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)P2.call(t,n)&&!M2.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:T2,type:e,key:i,ref:o,props:a,_owner:A2.current}}Sc.Fragment=E2;Sc.jsx=uy;Sc.jsxs=uy;ey.exports=Sc;var s=ey.exports,my={exports:{}},ts={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,C){var B=S.length;S.push(C);e:for(;0<B;){var P=B-1>>>1,A=S[P];if(0<a(A,C))S[P]=C,S[B]=A,B=P;else break e}}function r(S){return S.length===0?null:S[0]}function n(S){if(S.length===0)return null;var C=S[0],B=S.pop();if(B!==C){S[0]=B;e:for(var P=0,A=S.length,Y=A>>>1;P<Y;){var V=2*(P+1)-1,O=S[V],R=V+1,Z=S[R];if(0>a(O,B))R<A&&0>a(Z,O)?(S[P]=Z,S[R]=B,P=R):(S[P]=O,S[V]=B,P=V);else if(R<A&&0>a(Z,B))S[P]=Z,S[R]=B,P=R;else break e}}return C}function a(S,C){var B=S.sortIndex-C.sortIndex;return B!==0?B:S.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,y=!1,v=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(S){for(var C=r(d);C!==null;){if(C.callback===null)n(d);else if(C.startTime<=S)n(d),C.sortIndex=C.expirationTime,t(c,C);else break;C=r(d)}}function j(S){if(p=!1,b(S),!v)if(r(c)!==null)v=!0,q(N);else{var C=r(d);C!==null&&I(j,C.startTime-S)}}function N(S,C){v=!1,p&&(p=!1,g(E),E=-1),y=!0;var B=h;try{for(b(C),m=r(c);m!==null&&(!(m.expirationTime>C)||S&&!G());){var P=m.callback;if(typeof P=="function"){m.callback=null,h=m.priorityLevel;var A=P(m.expirationTime<=C);C=e.unstable_now(),typeof A=="function"?m.callback=A:m===r(c)&&n(c),b(C)}else n(c);m=r(c)}if(m!==null)var Y=!0;else{var V=r(d);V!==null&&I(j,V.startTime-C),Y=!1}return Y}finally{m=null,h=B,y=!1}}var _=!1,T=null,E=-1,z=5,k=-1;function G(){return!(e.unstable_now()-k<z)}function M(){if(T!==null){var S=e.unstable_now();k=S;var C=!0;try{C=T(!0,S)}finally{C?F():(_=!1,T=null)}}else _=!1}var F;if(typeof x=="function")F=function(){x(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$=D.port2;D.port1.onmessage=M,F=function(){$.postMessage(null)}}else F=function(){w(M,0)};function q(S){T=S,_||(_=!0,F())}function I(S,C){E=w(function(){S(e.unstable_now())},C)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,q(N))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(S){switch(h){case 1:case 2:case 3:var C=3;break;default:C=h}var B=h;h=C;try{return S()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,C){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var B=h;h=S;try{return C()}finally{h=B}},e.unstable_scheduleCallback=function(S,C,B){var P=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?P+B:P):B=P,S){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=B+A,S={id:u++,callback:C,priorityLevel:S,startTime:B,expirationTime:A,sortIndex:-1},B>P?(S.sortIndex=B,t(d,S),r(c)===null&&S===r(d)&&(p?(g(E),E=-1):p=!0,I(j,B-P))):(S.sortIndex=A,t(c,S),v||y||(v=!0,q(N))),S},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(S){var C=h;return function(){var B=h;h=C;try{return S.apply(this,arguments)}finally{h=B}}}})(fy);hy.exports=fy;var R2=hy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2=f,Zt=R2;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var py=new Set,Qi={};function Kn(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(Qi[e]=t,e=0;e<t.length;e++)py.add(t[e])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=Object.prototype.hasOwnProperty,L2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q0={},Y0={};function F2(e){return au.call(Y0,e)?!0:au.call(Q0,e)?!1:L2.test(e)?Y0[e]=!0:(Q0[e]=!0,!1)}function O2(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B2(e,t,r,n){if(t===null||typeof t>"u"||O2(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dt(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var sh=/[\-:]([a-z])/g;function rh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sh,rh);xt[t]=new Dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sh,rh);xt[t]=new Dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sh,rh);xt[t]=new Dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function nh(e,t,r,n){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B2(t,r,a,n)&&(r=null),n||a===null?F2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var cr=D2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qo=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),ah=Symbol.for("react.strict_mode"),iu=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),gy=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),ou=Symbol.for("react.suspense"),lu=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),yy=Symbol.for("react.offscreen"),Z0=Symbol.iterator;function ui(e){return e===null||typeof e!="object"?null:(e=Z0&&e[Z0]||e["@@iterator"],typeof e=="function"?e:null)}var He=Object.assign,id;function ki(e){if(id===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);id=t&&t[1]||""}return`
`+id+e}var od=!1;function ld(e,t){if(!e||od)return"";od=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{od=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ki(e):""}function $2(e){switch(e.tag){case 5:return ki(e.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 2:case 15:return e=ld(e.type,!1),e;case 11:return e=ld(e.type.render,!1),e;case 1:return e=ld(e.type,!0),e;default:return""}}function cu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ea:return"Fragment";case Jn:return"Portal";case iu:return"Profiler";case ah:return"StrictMode";case ou:return"Suspense";case lu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gy:return(e.displayName||"Context")+".Consumer";case xy:return(e._context.displayName||"Context")+".Provider";case ih:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oh:return t=e.displayName||null,t!==null?t:cu(e.type)||"Memo";case yr:t=e._payload,e=e._init;try{return cu(e(t))}catch{}}return null}function I2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cu(t);case 8:return t===ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function by(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function z2(e){var t=by(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ho(e){e._valueTracker||(e._valueTracker=z2(e))}function vy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=by(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ll(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function du(e,t){var r=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function X0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wy(e,t){t=t.checked,t!=null&&nh(e,"checked",t,!1)}function uu(e,t){wy(e,t);var r=Gr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mu(e,t.type,r):t.hasOwnProperty("defaultValue")&&mu(e,t.type,Gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function J0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function mu(e,t,r){(t!=="number"||Ll(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ci=Array.isArray;function ga(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function hu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ef(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(te(92));if(Ci(r)){if(1<r.length)throw Error(te(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gr(r)}}function jy(e,t){var r=Gr(t.value),n=Gr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ny(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ny(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ko,_y=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ko.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V2=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(e){V2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Li[t]=Li[e]})});function ky(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Li.hasOwnProperty(e)&&Li[e]?(""+t).trim():t+"px"}function Cy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=ky(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var U2=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pu(e,t){if(t){if(U2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function xu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=null;function lh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yu=null,ya=null,ba=null;function sf(e){if(e=Ro(e)){if(typeof yu!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Mc(t),yu(e.stateNode,e.type,t))}}function Sy(e){ya?ba?ba.push(e):ba=[e]:ya=e}function Ty(){if(ya){var e=ya,t=ba;if(ba=ya=null,sf(e),t)for(e=0;e<t.length;e++)sf(t[e])}}function Ey(e,t){return e(t)}function Py(){}var cd=!1;function Ay(e,t,r){if(cd)return e(t,r);cd=!0;try{return Ey(e,t,r)}finally{cd=!1,(ya!==null||ba!==null)&&(Py(),Ty())}}function Zi(e,t){var r=e.stateNode;if(r===null)return null;var n=Mc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(te(231,t,typeof r));return r}var bu=!1;if(nr)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){bu=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{bu=!1}function W2(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Fi=!1,Fl=null,Ol=!1,vu=null,q2={onError:function(e){Fi=!0,Fl=e}};function H2(e,t,r,n,a,i,o,l,c){Fi=!1,Fl=null,W2.apply(q2,arguments)}function K2(e,t,r,n,a,i,o,l,c){if(H2.apply(this,arguments),Fi){if(Fi){var d=Fl;Fi=!1,Fl=null}else throw Error(te(198));Ol||(Ol=!0,vu=d)}}function Gn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function My(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rf(e){if(Gn(e)!==e)throw Error(te(188))}function G2(e){var t=e.alternate;if(!t){if(t=Gn(e),t===null)throw Error(te(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return rf(a),e;if(i===n)return rf(a),t;i=i.sibling}throw Error(te(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?e:t}function Ry(e){return e=G2(e),e!==null?Dy(e):null}function Dy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Dy(e);if(t!==null)return t;e=e.sibling}return null}var Ly=Zt.unstable_scheduleCallback,nf=Zt.unstable_cancelCallback,Q2=Zt.unstable_shouldYield,Y2=Zt.unstable_requestPaint,Xe=Zt.unstable_now,Z2=Zt.unstable_getCurrentPriorityLevel,ch=Zt.unstable_ImmediatePriority,Fy=Zt.unstable_UserBlockingPriority,Bl=Zt.unstable_NormalPriority,X2=Zt.unstable_LowPriority,Oy=Zt.unstable_IdlePriority,Tc=null,Fs=null;function J2(e){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(Tc,e,void 0,(e.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:sj,ej=Math.log,tj=Math.LN2;function sj(e){return e>>>=0,e===0?32:31-(ej(e)/tj|0)|0}var Go=64,Qo=4194304;function Si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $l(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Si(l):(i&=o,i!==0&&(n=Si(i)))}else o=r&~a,o!==0?n=Si(o):i!==0&&(n=Si(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-_s(t),a=1<<r,n|=e[r],t&=~a;return n}function rj(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nj(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-_s(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=rj(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function wu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function By(){var e=Go;return Go<<=1,!(Go&4194240)&&(Go=64),e}function dd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ao(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_s(t),e[t]=r}function aj(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-_s(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function dh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-_s(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ae=0;function $y(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Iy,uh,zy,Vy,Uy,ju=!1,Yo=[],Or=null,Br=null,$r=null,Xi=new Map,Ji=new Map,wr=[],ij="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function af(e,t){switch(e){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ji.delete(t.pointerId)}}function hi(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ro(t),t!==null&&uh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function oj(e,t,r,n,a){switch(t){case"focusin":return Or=hi(Or,e,t,r,n,a),!0;case"dragenter":return Br=hi(Br,e,t,r,n,a),!0;case"mouseover":return $r=hi($r,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Xi.set(i,hi(Xi.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Ji.set(i,hi(Ji.get(i)||null,e,t,r,n,a)),!0}return!1}function Wy(e){var t=gn(e.target);if(t!==null){var r=Gn(t);if(r!==null){if(t=r.tag,t===13){if(t=My(r),t!==null){e.blockedOn=t,Uy(e.priority,function(){zy(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Nu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);gu=n,r.target.dispatchEvent(n),gu=null}else return t=Ro(r),t!==null&&uh(t),e.blockedOn=r,!1;t.shift()}return!0}function of(e,t,r){gl(e)&&r.delete(t)}function lj(){ju=!1,Or!==null&&gl(Or)&&(Or=null),Br!==null&&gl(Br)&&(Br=null),$r!==null&&gl($r)&&($r=null),Xi.forEach(of),Ji.forEach(of)}function fi(e,t){e.blockedOn===t&&(e.blockedOn=null,ju||(ju=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,lj)))}function eo(e){function t(a){return fi(a,e)}if(0<Yo.length){fi(Yo[0],e);for(var r=1;r<Yo.length;r++){var n=Yo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Or!==null&&fi(Or,e),Br!==null&&fi(Br,e),$r!==null&&fi($r,e),Xi.forEach(t),Ji.forEach(t),r=0;r<wr.length;r++)n=wr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wr.length&&(r=wr[0],r.blockedOn===null);)Wy(r),r.blockedOn===null&&wr.shift()}var va=cr.ReactCurrentBatchConfig,Il=!0;function cj(e,t,r,n){var a=Ae,i=va.transition;va.transition=null;try{Ae=1,mh(e,t,r,n)}finally{Ae=a,va.transition=i}}function dj(e,t,r,n){var a=Ae,i=va.transition;va.transition=null;try{Ae=4,mh(e,t,r,n)}finally{Ae=a,va.transition=i}}function mh(e,t,r,n){if(Il){var a=Nu(e,t,r,n);if(a===null)vd(e,t,n,zl,r),af(e,n);else if(oj(a,e,t,r,n))n.stopPropagation();else if(af(e,n),t&4&&-1<ij.indexOf(e)){for(;a!==null;){var i=Ro(a);if(i!==null&&Iy(i),i=Nu(e,t,r,n),i===null&&vd(e,t,n,zl,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else vd(e,t,n,null,r)}}var zl=null;function Nu(e,t,r,n){if(zl=null,e=lh(n),e=gn(e),e!==null)if(t=Gn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=My(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zl=e,null}function qy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z2()){case ch:return 1;case Fy:return 4;case Bl:case X2:return 16;case Oy:return 536870912;default:return 16}default:return 16}}var Mr=null,hh=null,yl=null;function Hy(){if(yl)return yl;var e,t=hh,r=t.length,n,a="value"in Mr?Mr.value:Mr.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return yl=a.slice(e,1<n?1-n:void 0)}function bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zo(){return!0}function lf(){return!1}function ss(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zo:lf,this.isPropagationStopped=lf,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),t}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fh=ss(Ja),Mo=He({},Ja,{view:0,detail:0}),uj=ss(Mo),ud,md,pi,Ec=He({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ph,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pi&&(pi&&e.type==="mousemove"?(ud=e.screenX-pi.screenX,md=e.screenY-pi.screenY):md=ud=0,pi=e),ud)},movementY:function(e){return"movementY"in e?e.movementY:md}}),cf=ss(Ec),mj=He({},Ec,{dataTransfer:0}),hj=ss(mj),fj=He({},Mo,{relatedTarget:0}),hd=ss(fj),pj=He({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),xj=ss(pj),gj=He({},Ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yj=ss(gj),bj=He({},Ja,{data:0}),df=ss(bj),vj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nj(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jj[e])?!!t[e]:!1}function ph(){return Nj}var _j=He({},Mo,{key:function(e){if(e.key){var t=vj[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wj[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ph,charCode:function(e){return e.type==="keypress"?bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kj=ss(_j),Cj=He({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uf=ss(Cj),Sj=He({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ph}),Tj=ss(Sj),Ej=He({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pj=ss(Ej),Aj=He({},Ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mj=ss(Aj),Rj=[9,13,27,32],xh=nr&&"CompositionEvent"in window,Oi=null;nr&&"documentMode"in document&&(Oi=document.documentMode);var Dj=nr&&"TextEvent"in window&&!Oi,Ky=nr&&(!xh||Oi&&8<Oi&&11>=Oi),mf=" ",hf=!1;function Gy(e,t){switch(e){case"keyup":return Rj.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ta=!1;function Lj(e,t){switch(e){case"compositionend":return Qy(t);case"keypress":return t.which!==32?null:(hf=!0,mf);case"textInput":return e=t.data,e===mf&&hf?null:e;default:return null}}function Fj(e,t){if(ta)return e==="compositionend"||!xh&&Gy(e,t)?(e=Hy(),yl=hh=Mr=null,ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ky&&t.locale!=="ko"?null:t.data;default:return null}}var Oj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Oj[e.type]:t==="textarea"}function Yy(e,t,r,n){Sy(n),t=Vl(t,"onChange"),0<t.length&&(r=new fh("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Bi=null,to=null;function Bj(e){ob(e,0)}function Pc(e){var t=na(e);if(vy(t))return e}function $j(e,t){if(e==="change")return t}var Zy=!1;if(nr){var fd;if(nr){var pd="oninput"in document;if(!pd){var pf=document.createElement("div");pf.setAttribute("oninput","return;"),pd=typeof pf.oninput=="function"}fd=pd}else fd=!1;Zy=fd&&(!document.documentMode||9<document.documentMode)}function xf(){Bi&&(Bi.detachEvent("onpropertychange",Xy),to=Bi=null)}function Xy(e){if(e.propertyName==="value"&&Pc(to)){var t=[];Yy(t,to,e,lh(e)),Ay(Bj,t)}}function Ij(e,t,r){e==="focusin"?(xf(),Bi=t,to=r,Bi.attachEvent("onpropertychange",Xy)):e==="focusout"&&xf()}function zj(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pc(to)}function Vj(e,t){if(e==="click")return Pc(t)}function Uj(e,t){if(e==="input"||e==="change")return Pc(t)}function Wj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:Wj;function so(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!au.call(t,a)||!Cs(e[a],t[a]))return!1}return!0}function gf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yf(e,t){var r=gf(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gf(r)}}function Jy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eb(){for(var e=window,t=Ll();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ll(e.document)}return t}function gh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qj(e){var t=eb(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Jy(r.ownerDocument.documentElement,r)){if(n!==null&&gh(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=yf(r,i);var o=yf(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hj=nr&&"documentMode"in document&&11>=document.documentMode,sa=null,_u=null,$i=null,ku=!1;function bf(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ku||sa==null||sa!==Ll(n)||(n=sa,"selectionStart"in n&&gh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$i&&so($i,n)||($i=n,n=Vl(_u,"onSelect"),0<n.length&&(t=new fh("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=sa)))}function Xo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ra={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},xd={},tb={};nr&&(tb=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Ac(e){if(xd[e])return xd[e];if(!ra[e])return e;var t=ra[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tb)return xd[e]=t[r];return e}var sb=Ac("animationend"),rb=Ac("animationiteration"),nb=Ac("animationstart"),ab=Ac("transitionend"),ib=new Map,vf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(e,t){ib.set(e,t),Kn(t,[e])}for(var gd=0;gd<vf.length;gd++){var yd=vf[gd],Kj=yd.toLowerCase(),Gj=yd[0].toUpperCase()+yd.slice(1);tn(Kj,"on"+Gj)}tn(sb,"onAnimationEnd");tn(rb,"onAnimationIteration");tn(nb,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(ab,"onTransitionEnd");Fa("onMouseEnter",["mouseout","mouseover"]);Fa("onMouseLeave",["mouseout","mouseover"]);Fa("onPointerEnter",["pointerout","pointerover"]);Fa("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function wf(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,K2(n,t,void 0,e),e.currentTarget=null}function ob(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;wf(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;wf(a,l,d),i=c}}}if(Ol)throw e=vu,Ol=!1,vu=null,e}function Be(e,t){var r=t[Pu];r===void 0&&(r=t[Pu]=new Set);var n=e+"__bubble";r.has(n)||(lb(t,e,2,!1),r.add(n))}function bd(e,t,r){var n=0;t&&(n|=4),lb(r,e,n,t)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function ro(e){if(!e[Jo]){e[Jo]=!0,py.forEach(function(r){r!=="selectionchange"&&(Qj.has(r)||bd(r,!1,e),bd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jo]||(t[Jo]=!0,bd("selectionchange",!1,t))}}function lb(e,t,r,n){switch(qy(t)){case 1:var a=cj;break;case 4:a=dj;break;default:a=mh}r=a.bind(null,t,r,e),a=void 0,!bu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function vd(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=gn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Ay(function(){var d=i,u=lh(r),m=[];e:{var h=ib.get(e);if(h!==void 0){var y=fh,v=e;switch(e){case"keypress":if(bl(r)===0)break e;case"keydown":case"keyup":y=kj;break;case"focusin":v="focus",y=hd;break;case"focusout":v="blur",y=hd;break;case"beforeblur":case"afterblur":y=hd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=hj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Tj;break;case sb:case rb:case nb:y=xj;break;case ab:y=Pj;break;case"scroll":y=uj;break;case"wheel":y=Mj;break;case"copy":case"cut":case"paste":y=yj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=uf}var p=(t&4)!==0,w=!p&&e==="scroll",g=p?h!==null?h+"Capture":null:h;p=[];for(var x=d,b;x!==null;){b=x;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,g!==null&&(j=Zi(x,g),j!=null&&p.push(no(x,j,b)))),w)break;x=x.return}0<p.length&&(h=new y(h,v,null,r,u),m.push({event:h,listeners:p}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",h&&r!==gu&&(v=r.relatedTarget||r.fromElement)&&(gn(v)||v[ar]))break e;if((y||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=d,v=v?gn(v):null,v!==null&&(w=Gn(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=d),y!==v)){if(p=cf,j="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(p=uf,j="onPointerLeave",g="onPointerEnter",x="pointer"),w=y==null?h:na(y),b=v==null?h:na(v),h=new p(j,x+"leave",y,r,u),h.target=w,h.relatedTarget=b,j=null,gn(u)===d&&(p=new p(g,x+"enter",v,r,u),p.target=b,p.relatedTarget=w,j=p),w=j,y&&v)t:{for(p=y,g=v,x=0,b=p;b;b=Zn(b))x++;for(b=0,j=g;j;j=Zn(j))b++;for(;0<x-b;)p=Zn(p),x--;for(;0<b-x;)g=Zn(g),b--;for(;x--;){if(p===g||g!==null&&p===g.alternate)break t;p=Zn(p),g=Zn(g)}p=null}else p=null;y!==null&&jf(m,h,y,p,!1),v!==null&&w!==null&&jf(m,w,v,p,!0)}}e:{if(h=d?na(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var N=$j;else if(ff(h))if(Zy)N=Uj;else{N=zj;var _=Ij}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Vj);if(N&&(N=N(e,d))){Yy(m,N,r,u);break e}_&&_(e,h,d),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&mu(h,"number",h.value)}switch(_=d?na(d):window,e){case"focusin":(ff(_)||_.contentEditable==="true")&&(sa=_,_u=d,$i=null);break;case"focusout":$i=_u=sa=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,bf(m,r,u);break;case"selectionchange":if(Hj)break;case"keydown":case"keyup":bf(m,r,u)}var T;if(xh)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ta?Gy(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Ky&&r.locale!=="ko"&&(ta||E!=="onCompositionStart"?E==="onCompositionEnd"&&ta&&(T=Hy()):(Mr=u,hh="value"in Mr?Mr.value:Mr.textContent,ta=!0)),_=Vl(d,E),0<_.length&&(E=new df(E,e,null,r,u),m.push({event:E,listeners:_}),T?E.data=T:(T=Qy(r),T!==null&&(E.data=T)))),(T=Dj?Lj(e,r):Fj(e,r))&&(d=Vl(d,"onBeforeInput"),0<d.length&&(u=new df("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=T))}ob(m,t)})}function no(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vl(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Zi(e,r),i!=null&&n.unshift(no(e,i,a)),i=Zi(e,t),i!=null&&n.push(no(e,i,a))),e=e.return}return n}function Zn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jf(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Zi(r,i),c!=null&&o.unshift(no(r,c,l))):a||(c=Zi(r,i),c!=null&&o.push(no(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Yj=/\r\n?/g,Zj=/\u0000|\uFFFD/g;function Nf(e){return(typeof e=="string"?e:""+e).replace(Yj,`
`).replace(Zj,"")}function el(e,t,r){if(t=Nf(t),Nf(e)!==t&&r)throw Error(te(425))}function Ul(){}var Cu=null,Su=null;function Tu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eu=typeof setTimeout=="function"?setTimeout:void 0,Xj=typeof clearTimeout=="function"?clearTimeout:void 0,_f=typeof Promise=="function"?Promise:void 0,Jj=typeof queueMicrotask=="function"?queueMicrotask:typeof _f<"u"?function(e){return _f.resolve(null).then(e).catch(eN)}:Eu;function eN(e){setTimeout(function(){throw e})}function wd(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),eo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);eo(t)}function Ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ei=Math.random().toString(36).slice(2),Ls="__reactFiber$"+ei,ao="__reactProps$"+ei,ar="__reactContainer$"+ei,Pu="__reactEvents$"+ei,tN="__reactListeners$"+ei,sN="__reactHandles$"+ei;function gn(e){var t=e[Ls];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ar]||r[Ls]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kf(e);e!==null;){if(r=e[Ls])return r;e=kf(e)}return t}e=r,r=e.parentNode}return null}function Ro(e){return e=e[Ls]||e[ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function na(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Mc(e){return e[ao]||null}var Au=[],aa=-1;function sn(e){return{current:e}}function $e(e){0>aa||(e.current=Au[aa],Au[aa]=null,aa--)}function Fe(e,t){aa++,Au[aa]=e.current,e.current=t}var Qr={},kt=sn(Qr),$t=sn(!1),On=Qr;function Oa(e,t){var r=e.type.contextTypes;if(!r)return Qr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function It(e){return e=e.childContextTypes,e!=null}function Wl(){$e($t),$e(kt)}function Cf(e,t,r){if(kt.current!==Qr)throw Error(te(168));Fe(kt,t),Fe($t,r)}function cb(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(te(108,I2(e)||"Unknown",a));return He({},r,n)}function ql(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qr,On=kt.current,Fe(kt,e),Fe($t,$t.current),!0}function Sf(e,t,r){var n=e.stateNode;if(!n)throw Error(te(169));r?(e=cb(e,t,On),n.__reactInternalMemoizedMergedChildContext=e,$e($t),$e(kt),Fe(kt,e)):$e($t),Fe($t,r)}var Ks=null,Rc=!1,jd=!1;function db(e){Ks===null?Ks=[e]:Ks.push(e)}function rN(e){Rc=!0,db(e)}function rn(){if(!jd&&Ks!==null){jd=!0;var e=0,t=Ae;try{var r=Ks;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ks=null,Rc=!1}catch(a){throw Ks!==null&&(Ks=Ks.slice(e+1)),Ly(ch,rn),a}finally{Ae=t,jd=!1}}return null}var ia=[],oa=0,Hl=null,Kl=0,os=[],ls=0,Bn=null,Xs=1,Js="";function hn(e,t){ia[oa++]=Kl,ia[oa++]=Hl,Hl=e,Kl=t}function ub(e,t,r){os[ls++]=Xs,os[ls++]=Js,os[ls++]=Bn,Bn=e;var n=Xs;e=Js;var a=32-_s(n)-1;n&=~(1<<a),r+=1;var i=32-_s(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Xs=1<<32-_s(t)+a|r<<a|n,Js=i+e}else Xs=1<<i|r<<a|n,Js=e}function yh(e){e.return!==null&&(hn(e,1),ub(e,1,0))}function bh(e){for(;e===Hl;)Hl=ia[--oa],ia[oa]=null,Kl=ia[--oa],ia[oa]=null;for(;e===Bn;)Bn=os[--ls],os[ls]=null,Js=os[--ls],os[ls]=null,Xs=os[--ls],os[ls]=null}var Qt=null,Gt=null,ze=!1,js=null;function mb(e,t){var r=cs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Gt=Ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bn!==null?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=cs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qt=e,Gt=null,!0):!1;default:return!1}}function Mu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ru(e){if(ze){var t=Gt;if(t){var r=t;if(!Tf(e,t)){if(Mu(e))throw Error(te(418));t=Ir(r.nextSibling);var n=Qt;t&&Tf(e,t)?mb(n,r):(e.flags=e.flags&-4097|2,ze=!1,Qt=e)}}else{if(Mu(e))throw Error(te(418));e.flags=e.flags&-4097|2,ze=!1,Qt=e}}}function Ef(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function tl(e){if(e!==Qt)return!1;if(!ze)return Ef(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tu(e.type,e.memoizedProps)),t&&(t=Gt)){if(Mu(e))throw hb(),Error(te(418));for(;t;)mb(e,t),t=Ir(t.nextSibling)}if(Ef(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Gt=Ir(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Qt?Ir(e.stateNode.nextSibling):null;return!0}function hb(){for(var e=Gt;e;)e=Ir(e.nextSibling)}function Ba(){Gt=Qt=null,ze=!1}function vh(e){js===null?js=[e]:js.push(e)}var nN=cr.ReactCurrentBatchConfig;function xi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,e))}return e}function sl(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pf(e){var t=e._init;return t(e._payload)}function fb(e){function t(g,x){if(e){var b=g.deletions;b===null?(g.deletions=[x],g.flags|=16):b.push(x)}}function r(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function a(g,x){return g=Wr(g,x),g.index=0,g.sibling=null,g}function i(g,x,b){return g.index=b,e?(b=g.alternate,b!==null?(b=b.index,b<x?(g.flags|=2,x):b):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,x,b,j){return x===null||x.tag!==6?(x=Ed(b,g.mode,j),x.return=g,x):(x=a(x,b),x.return=g,x)}function c(g,x,b,j){var N=b.type;return N===ea?u(g,x,b.props.children,j,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yr&&Pf(N)===x.type)?(j=a(x,b.props),j.ref=xi(g,x,b),j.return=g,j):(j=Cl(b.type,b.key,b.props,null,g.mode,j),j.ref=xi(g,x,b),j.return=g,j)}function d(g,x,b,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Pd(b,g.mode,j),x.return=g,x):(x=a(x,b.children||[]),x.return=g,x)}function u(g,x,b,j,N){return x===null||x.tag!==7?(x=Rn(b,g.mode,j,N),x.return=g,x):(x=a(x,b),x.return=g,x)}function m(g,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ed(""+x,g.mode,b),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qo:return b=Cl(x.type,x.key,x.props,null,g.mode,b),b.ref=xi(g,null,x),b.return=g,b;case Jn:return x=Pd(x,g.mode,b),x.return=g,x;case yr:var j=x._init;return m(g,j(x._payload),b)}if(Ci(x)||ui(x))return x=Rn(x,g.mode,b,null),x.return=g,x;sl(g,x)}return null}function h(g,x,b,j){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:l(g,x,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:return b.key===N?c(g,x,b,j):null;case Jn:return b.key===N?d(g,x,b,j):null;case yr:return N=b._init,h(g,x,N(b._payload),j)}if(Ci(b)||ui(b))return N!==null?null:u(g,x,b,j,null);sl(g,b)}return null}function y(g,x,b,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(b)||null,l(x,g,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case qo:return g=g.get(j.key===null?b:j.key)||null,c(x,g,j,N);case Jn:return g=g.get(j.key===null?b:j.key)||null,d(x,g,j,N);case yr:var _=j._init;return y(g,x,b,_(j._payload),N)}if(Ci(j)||ui(j))return g=g.get(b)||null,u(x,g,j,N,null);sl(x,j)}return null}function v(g,x,b,j){for(var N=null,_=null,T=x,E=x=0,z=null;T!==null&&E<b.length;E++){T.index>E?(z=T,T=null):z=T.sibling;var k=h(g,T,b[E],j);if(k===null){T===null&&(T=z);break}e&&T&&k.alternate===null&&t(g,T),x=i(k,x,E),_===null?N=k:_.sibling=k,_=k,T=z}if(E===b.length)return r(g,T),ze&&hn(g,E),N;if(T===null){for(;E<b.length;E++)T=m(g,b[E],j),T!==null&&(x=i(T,x,E),_===null?N=T:_.sibling=T,_=T);return ze&&hn(g,E),N}for(T=n(g,T);E<b.length;E++)z=y(T,g,E,b[E],j),z!==null&&(e&&z.alternate!==null&&T.delete(z.key===null?E:z.key),x=i(z,x,E),_===null?N=z:_.sibling=z,_=z);return e&&T.forEach(function(G){return t(g,G)}),ze&&hn(g,E),N}function p(g,x,b,j){var N=ui(b);if(typeof N!="function")throw Error(te(150));if(b=N.call(b),b==null)throw Error(te(151));for(var _=N=null,T=x,E=x=0,z=null,k=b.next();T!==null&&!k.done;E++,k=b.next()){T.index>E?(z=T,T=null):z=T.sibling;var G=h(g,T,k.value,j);if(G===null){T===null&&(T=z);break}e&&T&&G.alternate===null&&t(g,T),x=i(G,x,E),_===null?N=G:_.sibling=G,_=G,T=z}if(k.done)return r(g,T),ze&&hn(g,E),N;if(T===null){for(;!k.done;E++,k=b.next())k=m(g,k.value,j),k!==null&&(x=i(k,x,E),_===null?N=k:_.sibling=k,_=k);return ze&&hn(g,E),N}for(T=n(g,T);!k.done;E++,k=b.next())k=y(T,g,E,k.value,j),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?E:k.key),x=i(k,x,E),_===null?N=k:_.sibling=k,_=k);return e&&T.forEach(function(M){return t(g,M)}),ze&&hn(g,E),N}function w(g,x,b,j){if(typeof b=="object"&&b!==null&&b.type===ea&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case qo:e:{for(var N=b.key,_=x;_!==null;){if(_.key===N){if(N=b.type,N===ea){if(_.tag===7){r(g,_.sibling),x=a(_,b.props.children),x.return=g,g=x;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===yr&&Pf(N)===_.type){r(g,_.sibling),x=a(_,b.props),x.ref=xi(g,_,b),x.return=g,g=x;break e}r(g,_);break}else t(g,_);_=_.sibling}b.type===ea?(x=Rn(b.props.children,g.mode,j,b.key),x.return=g,g=x):(j=Cl(b.type,b.key,b.props,null,g.mode,j),j.ref=xi(g,x,b),j.return=g,g=j)}return o(g);case Jn:e:{for(_=b.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(g,x.sibling),x=a(x,b.children||[]),x.return=g,g=x;break e}else{r(g,x);break}else t(g,x);x=x.sibling}x=Pd(b,g.mode,j),x.return=g,g=x}return o(g);case yr:return _=b._init,w(g,x,_(b._payload),j)}if(Ci(b))return v(g,x,b,j);if(ui(b))return p(g,x,b,j);sl(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(g,x.sibling),x=a(x,b),x.return=g,g=x):(r(g,x),x=Ed(b,g.mode,j),x.return=g,g=x),o(g)):r(g,x)}return w}var $a=fb(!0),pb=fb(!1),Gl=sn(null),Ql=null,la=null,wh=null;function jh(){wh=la=Ql=null}function Nh(e){var t=Gl.current;$e(Gl),e._currentValue=t}function Du(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wa(e,t){Ql=e,wh=la=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bt=!0),e.firstContext=null)}function ms(e){var t=e._currentValue;if(wh!==e)if(e={context:e,memoizedValue:t,next:null},la===null){if(Ql===null)throw Error(te(308));la=e,Ql.dependencies={lanes:0,firstContext:e}}else la=la.next=e;return t}var yn=null;function _h(e){yn===null?yn=[e]:yn.push(e)}function xb(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,_h(t)):(r.next=a.next,a.next=r),t.interleaved=r,ir(e,n)}function ir(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var br=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function er(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Se&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ir(e,r)}return a=n.interleaved,a===null?(t.next=t,_h(n)):(t.next=a.next,a.next=t),n.interleaved=t,ir(e,r)}function vl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dh(e,r)}}function Af(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Yl(e,t,r,n){var a=e.updateQueue;br=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,y=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,p=l;switch(h=t,y=r,p.tag){case 1:if(v=p.payload,typeof v=="function"){m=v.call(y,m,h);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(y,m,h):v,h==null)break e;m=He({},m,h);break e;case 2:br=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else y={eventTime:y,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=y,c=m):u=u.next=y,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);In|=o,e.lanes=o,e.memoizedState=m}}function Mf(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(te(191,a));a.call(n)}}}var Do={},Os=sn(Do),io=sn(Do),oo=sn(Do);function bn(e){if(e===Do)throw Error(te(174));return e}function Ch(e,t){switch(Fe(oo,t),Fe(io,e),Fe(Os,Do),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fu(t,e)}$e(Os),Fe(Os,t)}function Ia(){$e(Os),$e(io),$e(oo)}function yb(e){bn(oo.current);var t=bn(Os.current),r=fu(t,e.type);t!==r&&(Fe(io,e),Fe(Os,r))}function Sh(e){io.current===e&&($e(Os),$e(io))}var Ve=sn(0);function Zl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nd=[];function Th(){for(var e=0;e<Nd.length;e++)Nd[e]._workInProgressVersionPrimary=null;Nd.length=0}var wl=cr.ReactCurrentDispatcher,_d=cr.ReactCurrentBatchConfig,$n=0,qe=null,rt=null,ot=null,Xl=!1,Ii=!1,lo=0,aN=0;function gt(){throw Error(te(321))}function Eh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Cs(e[r],t[r]))return!1;return!0}function Ph(e,t,r,n,a,i){if($n=i,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wl.current=e===null||e.memoizedState===null?cN:dN,e=r(n,a),Ii){i=0;do{if(Ii=!1,lo=0,25<=i)throw Error(te(301));i+=1,ot=rt=null,t.updateQueue=null,wl.current=uN,e=r(n,a)}while(Ii)}if(wl.current=Jl,t=rt!==null&&rt.next!==null,$n=0,ot=rt=qe=null,Xl=!1,t)throw Error(te(300));return e}function Ah(){var e=lo!==0;return lo=0,e}function Ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?qe.memoizedState=ot=e:ot=ot.next=e,ot}function hs(){if(rt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=ot===null?qe.memoizedState:ot.next;if(t!==null)ot=t,rt=e;else{if(e===null)throw Error(te(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ot===null?qe.memoizedState=ot=e:ot=ot.next=e}return ot}function co(e,t){return typeof t=="function"?t(e):t}function kd(e){var t=hs(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var n=rt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if(($n&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,qe.lanes|=u,In|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Cs(n,t.memoizedState)||(Bt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,qe.lanes|=i,In|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cd(e){var t=hs(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Cs(i,t.memoizedState)||(Bt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function bb(){}function vb(e,t){var r=qe,n=hs(),a=t(),i=!Cs(n.memoizedState,a);if(i&&(n.memoizedState=a,Bt=!0),n=n.queue,Mh(Nb.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,uo(9,jb.bind(null,r,n,a,t),void 0,null),ct===null)throw Error(te(349));$n&30||wb(r,t,a)}return a}function wb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jb(e,t,r,n){t.value=r,t.getSnapshot=n,_b(t)&&kb(e)}function Nb(e,t,r){return r(function(){_b(t)&&kb(e)})}function _b(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cs(e,r)}catch{return!0}}function kb(e){var t=ir(e,1);t!==null&&ks(t,e,1,-1)}function Rf(e){var t=Ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:e},t.queue=e,e=e.dispatch=lN.bind(null,qe,e),[t.memoizedState,e]}function uo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Cb(){return hs().memoizedState}function jl(e,t,r,n){var a=Ps();qe.flags|=e,a.memoizedState=uo(1|t,r,void 0,n===void 0?null:n)}function Dc(e,t,r,n){var a=hs();n=n===void 0?null:n;var i=void 0;if(rt!==null){var o=rt.memoizedState;if(i=o.destroy,n!==null&&Eh(n,o.deps)){a.memoizedState=uo(t,r,i,n);return}}qe.flags|=e,a.memoizedState=uo(1|t,r,i,n)}function Df(e,t){return jl(8390656,8,e,t)}function Mh(e,t){return Dc(2048,8,e,t)}function Sb(e,t){return Dc(4,2,e,t)}function Tb(e,t){return Dc(4,4,e,t)}function Eb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pb(e,t,r){return r=r!=null?r.concat([e]):null,Dc(4,4,Eb.bind(null,t,e),r)}function Rh(){}function Ab(e,t){var r=hs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Eh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Mb(e,t){var r=hs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Eh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Rb(e,t,r){return $n&21?(Cs(r,t)||(r=By(),qe.lanes|=r,In|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=r)}function iN(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=_d.transition;_d.transition={};try{e(!1),t()}finally{Ae=r,_d.transition=n}}function Db(){return hs().memoizedState}function oN(e,t,r){var n=Ur(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Lb(e))Fb(t,r);else if(r=xb(e,t,r,n),r!==null){var a=At();ks(r,e,n,a),Ob(r,t,n)}}function lN(e,t,r){var n=Ur(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lb(e))Fb(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Cs(l,o)){var c=t.interleaved;c===null?(a.next=a,_h(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=xb(e,t,a,n),r!==null&&(a=At(),ks(r,e,n,a),Ob(r,t,n))}}function Lb(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function Fb(e,t){Ii=Xl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ob(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dh(e,r)}}var Jl={readContext:ms,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},cN={readContext:ms,useCallback:function(e,t){return Ps().memoizedState=[e,t===void 0?null:t],e},useContext:ms,useEffect:Df,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,jl(4194308,4,Eb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return jl(4194308,4,e,t)},useInsertionEffect:function(e,t){return jl(4,2,e,t)},useMemo:function(e,t){var r=Ps();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ps();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=oN.bind(null,qe,e),[n.memoizedState,e]},useRef:function(e){var t=Ps();return e={current:e},t.memoizedState=e},useState:Rf,useDebugValue:Rh,useDeferredValue:function(e){return Ps().memoizedState=e},useTransition:function(){var e=Rf(!1),t=e[0];return e=iN.bind(null,e[1]),Ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=qe,a=Ps();if(ze){if(r===void 0)throw Error(te(407));r=r()}else{if(r=t(),ct===null)throw Error(te(349));$n&30||wb(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Df(Nb.bind(null,n,i,e),[e]),n.flags|=2048,uo(9,jb.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ps(),t=ct.identifierPrefix;if(ze){var r=Js,n=Xs;r=(n&~(1<<32-_s(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dN={readContext:ms,useCallback:Ab,useContext:ms,useEffect:Mh,useImperativeHandle:Pb,useInsertionEffect:Sb,useLayoutEffect:Tb,useMemo:Mb,useReducer:kd,useRef:Cb,useState:function(){return kd(co)},useDebugValue:Rh,useDeferredValue:function(e){var t=hs();return Rb(t,rt.memoizedState,e)},useTransition:function(){var e=kd(co)[0],t=hs().memoizedState;return[e,t]},useMutableSource:bb,useSyncExternalStore:vb,useId:Db,unstable_isNewReconciler:!1},uN={readContext:ms,useCallback:Ab,useContext:ms,useEffect:Mh,useImperativeHandle:Pb,useInsertionEffect:Sb,useLayoutEffect:Tb,useMemo:Mb,useReducer:Cd,useRef:Cb,useState:function(){return Cd(co)},useDebugValue:Rh,useDeferredValue:function(e){var t=hs();return rt===null?t.memoizedState=e:Rb(t,rt.memoizedState,e)},useTransition:function(){var e=Cd(co)[0],t=hs().memoizedState;return[e,t]},useMutableSource:bb,useSyncExternalStore:vb,useId:Db,unstable_isNewReconciler:!1};function ys(e,t){if(e&&e.defaultProps){t=He({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Lu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:He({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lc={isMounted:function(e){return(e=e._reactInternals)?Gn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=At(),a=Ur(e),i=er(n,a);i.payload=t,r!=null&&(i.callback=r),t=zr(e,i,a),t!==null&&(ks(t,e,a,n),vl(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=At(),a=Ur(e),i=er(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=zr(e,i,a),t!==null&&(ks(t,e,a,n),vl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=At(),n=Ur(e),a=er(r,n);a.tag=2,t!=null&&(a.callback=t),t=zr(e,a,n),t!==null&&(ks(t,e,n,r),vl(t,e,n))}};function Lf(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!so(r,n)||!so(a,i):!0}function Bb(e,t,r){var n=!1,a=Qr,i=t.contextType;return typeof i=="object"&&i!==null?i=ms(i):(a=It(t)?On:kt.current,n=t.contextTypes,i=(n=n!=null)?Oa(e,a):Qr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ff(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lc.enqueueReplaceState(t,t.state,null)}function Fu(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},kh(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ms(i):(i=It(t)?On:kt.current,a.context=Oa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Lu(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lc.enqueueReplaceState(a,a.state,null),Yl(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function za(e,t){try{var r="",n=t;do r+=$2(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Sd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ou(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mN=typeof WeakMap=="function"?WeakMap:Map;function $b(e,t,r){r=er(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){tc||(tc=!0,Ku=n),Ou(e,t)},r}function Ib(e,t,r){r=er(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ou(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ou(e,t),typeof n!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Of(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new mN;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=CN.bind(null,e,t,r),t.then(e,e))}function Bf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $f(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=er(-1,1),t.tag=2,zr(r,t,1))),r.lanes|=1),e)}var hN=cr.ReactCurrentOwner,Bt=!1;function Tt(e,t,r,n){t.child=e===null?pb(t,null,r,n):$a(t,e.child,r,n)}function If(e,t,r,n,a){r=r.render;var i=t.ref;return wa(t,a),n=Ph(e,t,r,n,i,a),r=Ah(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,or(e,t,a)):(ze&&r&&yh(t),t.flags|=1,Tt(e,t,n,a),t.child)}function zf(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!zh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,zb(e,t,i,n,a)):(e=Cl(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:so,r(o,n)&&e.ref===t.ref)return or(e,t,a)}return t.flags|=1,e=Wr(i,n),e.ref=t.ref,e.return=t,t.child=e}function zb(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(so(i,n)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Bt=!0);else return t.lanes=e.lanes,or(e,t,a)}return Bu(e,t,r,n,a)}function Vb(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(da,Kt),Kt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(da,Kt),Kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Fe(da,Kt),Kt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Fe(da,Kt),Kt|=n;return Tt(e,t,a,r),t.child}function Ub(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Bu(e,t,r,n,a){var i=It(r)?On:kt.current;return i=Oa(t,i),wa(t,a),r=Ph(e,t,r,n,i,a),n=Ah(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,or(e,t,a)):(ze&&n&&yh(t),t.flags|=1,Tt(e,t,r,a),t.child)}function Vf(e,t,r,n,a){if(It(r)){var i=!0;ql(t)}else i=!1;if(wa(t,a),t.stateNode===null)Nl(e,t),Bb(t,r,n),Fu(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ms(d):(d=It(r)?On:kt.current,d=Oa(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Ff(t,o,n,d),br=!1;var h=t.memoizedState;o.state=h,Yl(t,n,o,a),c=t.memoizedState,l!==n||h!==c||$t.current||br?(typeof u=="function"&&(Lu(t,r,u,n),c=t.memoizedState),(l=br||Lf(t,r,l,n,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,gb(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ys(t.type,l),o.props=d,m=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ms(c):(c=It(r)?On:kt.current,c=Oa(t,c));var y=r.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&Ff(t,o,n,c),br=!1,h=t.memoizedState,o.state=h,Yl(t,n,o,a);var v=t.memoizedState;l!==m||h!==v||$t.current||br?(typeof y=="function"&&(Lu(t,r,y,n),v=t.memoizedState),(d=br||Lf(t,r,d,n,h,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return $u(e,t,r,n,i,a)}function $u(e,t,r,n,a,i){Ub(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Sf(t,r,!1),or(e,t,i);n=t.stateNode,hN.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$a(t,e.child,null,i),t.child=$a(t,null,l,i)):Tt(e,t,l,i),t.memoizedState=n.state,a&&Sf(t,r,!0),t.child}function Wb(e){var t=e.stateNode;t.pendingContext?Cf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cf(e,t.context,!1),Ch(e,t.containerInfo)}function Uf(e,t,r,n,a){return Ba(),vh(a),t.flags|=256,Tt(e,t,r,n),t.child}var Iu={dehydrated:null,treeContext:null,retryLane:0};function zu(e){return{baseLanes:e,cachePool:null,transitions:null}}function qb(e,t,r){var n=t.pendingProps,a=Ve.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Fe(Ve,a&1),e===null)return Ru(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Bc(o,n,0,null),e=Rn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=zu(r),t.memoizedState=Iu,e):Dh(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return fN(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Wr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Wr(l,i):(i=Rn(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?zu(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Iu,n}return i=e.child,e=i.sibling,n=Wr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Dh(e,t){return t=Bc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rl(e,t,r,n){return n!==null&&vh(n),$a(t,e.child,null,r),e=Dh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fN(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Sd(Error(te(422))),rl(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Bc({mode:"visible",children:n.children},a,0,null),i=Rn(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&$a(t,e.child,null,o),t.child.memoizedState=zu(o),t.memoizedState=Iu,i);if(!(t.mode&1))return rl(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(te(419)),n=Sd(i,n,void 0),rl(e,t,o,n)}if(l=(o&e.childLanes)!==0,Bt||l){if(n=ct,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ir(e,a),ks(n,e,a,-1))}return Ih(),n=Sd(Error(te(421))),rl(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=SN.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Gt=Ir(a.nextSibling),Qt=t,ze=!0,js=null,e!==null&&(os[ls++]=Xs,os[ls++]=Js,os[ls++]=Bn,Xs=e.id,Js=e.overflow,Bn=t),t=Dh(t,n.children),t.flags|=4096,t)}function Wf(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Du(e.return,t,r)}function Td(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Hb(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Tt(e,t,n.children,r),n=Ve.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wf(e,r,t);else if(e.tag===19)Wf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Fe(Ve,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Zl(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Td(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Zl(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Td(t,!0,r,null,i);break;case"together":Td(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),In|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,r=Wr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pN(e,t,r){switch(t.tag){case 3:Wb(t),Ba();break;case 5:yb(t);break;case 1:It(t.type)&&ql(t);break;case 4:Ch(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Fe(Gl,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Fe(Ve,Ve.current&1),t.flags|=128,null):r&t.child.childLanes?qb(e,t,r):(Fe(Ve,Ve.current&1),e=or(e,t,r),e!==null?e.sibling:null);Fe(Ve,Ve.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Hb(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Fe(Ve,Ve.current),n)break;return null;case 22:case 23:return t.lanes=0,Vb(e,t,r)}return or(e,t,r)}var Kb,Vu,Gb,Qb;Kb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vu=function(){};Gb=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,bn(Os.current);var i=null;switch(r){case"input":a=du(e,a),n=du(e,n),i=[];break;case"select":a=He({},a,{value:void 0}),n=He({},n,{value:void 0}),i=[];break;case"textarea":a=hu(e,a),n=hu(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ul)}pu(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Be("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Qb=function(e,t,r,n){r!==n&&(t.flags|=4)};function gi(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function xN(e,t,r){var n=t.pendingProps;switch(bh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return It(t.type)&&Wl(),yt(t),null;case 3:return n=t.stateNode,Ia(),$e($t),$e(kt),Th(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,js!==null&&(Yu(js),js=null))),Vu(e,t),yt(t),null;case 5:Sh(t);var a=bn(oo.current);if(r=t.type,e!==null&&t.stateNode!=null)Gb(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(te(166));return yt(t),null}if(e=bn(Os.current),tl(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Ls]=t,n[ao]=i,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(a=0;a<Ti.length;a++)Be(Ti[a],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":X0(n,i),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Be("invalid",n);break;case"textarea":ef(n,i),Be("invalid",n)}pu(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&el(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&el(n.textContent,l,e),a=["children",""+l]):Qi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Be("scroll",n)}switch(r){case"input":Ho(n),J0(n,i,!0);break;case"textarea":Ho(n),tf(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ul)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ny(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ls]=t,e[ao]=n,Kb(e,t,!1,!1),t.stateNode=e;e:{switch(o=xu(r,n),r){case"dialog":Be("cancel",e),Be("close",e),a=n;break;case"iframe":case"object":case"embed":Be("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ti.length;a++)Be(Ti[a],e);a=n;break;case"source":Be("error",e),a=n;break;case"img":case"image":case"link":Be("error",e),Be("load",e),a=n;break;case"details":Be("toggle",e),a=n;break;case"input":X0(e,n),a=du(e,n),Be("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=He({},n,{value:void 0}),Be("invalid",e);break;case"textarea":ef(e,n),a=hu(e,n),Be("invalid",e);break;default:a=n}pu(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Cy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_y(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yi(e,c):typeof c=="number"&&Yi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",e):c!=null&&nh(e,i,c,o))}switch(r){case"input":Ho(e),J0(e,n,!1);break;case"textarea":Ho(e),tf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ga(e,!!n.multiple,i,!1):n.defaultValue!=null&&ga(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ul)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)Qb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(te(166));if(r=bn(oo.current),bn(Os.current),tl(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ls]=t,(i=n.nodeValue!==r)&&(e=Qt,e!==null))switch(e.tag){case 3:el(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&el(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ls]=t,t.stateNode=n}return yt(t),null;case 13:if($e(Ve),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Gt!==null&&t.mode&1&&!(t.flags&128))hb(),Ba(),t.flags|=98560,i=!1;else if(i=tl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(te(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[Ls]=t}else Ba(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yt(t),i=!1}else js!==null&&(Yu(js),js=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?at===0&&(at=3):Ih())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return Ia(),Vu(e,t),e===null&&ro(t.stateNode.containerInfo),yt(t),null;case 10:return Nh(t.type._context),yt(t),null;case 17:return It(t.type)&&Wl(),yt(t),null;case 19:if($e(Ve),i=t.memoizedState,i===null)return yt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)gi(i,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Zl(e),o!==null){for(t.flags|=128,gi(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Fe(Ve,Ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xe()>Va&&(t.flags|=128,n=!0,gi(i,!1),t.lanes=4194304)}else{if(!n)if(e=Zl(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),gi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return yt(t),null}else 2*Xe()-i.renderingStartTime>Va&&r!==1073741824&&(t.flags|=128,n=!0,gi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,r=Ve.current,Fe(Ve,n?r&1|2:r&1),t):(yt(t),null);case 22:case 23:return $h(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kt&1073741824&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function gN(e,t){switch(bh(t),t.tag){case 1:return It(t.type)&&Wl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ia(),$e($t),$e(kt),Th(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sh(t),null;case 13:if($e(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Ba()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Ve),null;case 4:return Ia(),null;case 10:return Nh(t.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var nl=!1,wt=!1,yN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ca(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qe(e,t,n)}else r.current=null}function Uu(e,t,r){try{r()}catch(n){Qe(e,t,n)}}var qf=!1;function bN(e,t){if(Cu=Il,e=eb(),gh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var y;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)h=m,m=y;for(;;){if(m===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++u===n&&(c=o),(y=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Su={focusedElem:e,selectionRange:r},Il=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,w=v.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:ys(t.type,p),w);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(j){Qe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return v=qf,qf=!1,v}function zi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Uu(t,r,i)}a=a.next}while(a!==n)}}function Fc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Wu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yb(e){var t=e.alternate;t!==null&&(e.alternate=null,Yb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ls],delete t[ao],delete t[Pu],delete t[tN],delete t[sN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zb(e){return e.tag===5||e.tag===3||e.tag===4}function Hf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ul));else if(n!==4&&(e=e.child,e!==null))for(qu(e,t,r),e=e.sibling;e!==null;)qu(e,t,r),e=e.sibling}function Hu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Hu(e,t,r),e=e.sibling;e!==null;)Hu(e,t,r),e=e.sibling}var mt=null,ws=!1;function hr(e,t,r){for(r=r.child;r!==null;)Xb(e,t,r),r=r.sibling}function Xb(e,t,r){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(Tc,r)}catch{}switch(r.tag){case 5:wt||ca(r,t);case 6:var n=mt,a=ws;mt=null,hr(e,t,r),mt=n,ws=a,mt!==null&&(ws?(e=mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):mt.removeChild(r.stateNode));break;case 18:mt!==null&&(ws?(e=mt,r=r.stateNode,e.nodeType===8?wd(e.parentNode,r):e.nodeType===1&&wd(e,r),eo(e)):wd(mt,r.stateNode));break;case 4:n=mt,a=ws,mt=r.stateNode.containerInfo,ws=!0,hr(e,t,r),mt=n,ws=a;break;case 0:case 11:case 14:case 15:if(!wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uu(r,t,o),a=a.next}while(a!==n)}hr(e,t,r);break;case 1:if(!wt&&(ca(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Qe(r,t,l)}hr(e,t,r);break;case 21:hr(e,t,r);break;case 22:r.mode&1?(wt=(n=wt)||r.memoizedState!==null,hr(e,t,r),wt=n):hr(e,t,r);break;default:hr(e,t,r)}}function Kf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new yN),t.forEach(function(n){var a=TN.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function xs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,ws=!1;break e;case 3:mt=l.stateNode.containerInfo,ws=!0;break e;case 4:mt=l.stateNode.containerInfo,ws=!0;break e}l=l.return}if(mt===null)throw Error(te(160));Xb(i,o,a),mt=null,ws=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Qe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jb(t,e),t=t.sibling}function Jb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xs(t,e),Ts(e),n&4){try{zi(3,e,e.return),Fc(3,e)}catch(p){Qe(e,e.return,p)}try{zi(5,e,e.return)}catch(p){Qe(e,e.return,p)}}break;case 1:xs(t,e),Ts(e),n&512&&r!==null&&ca(r,r.return);break;case 5:if(xs(t,e),Ts(e),n&512&&r!==null&&ca(r,r.return),e.flags&32){var a=e.stateNode;try{Yi(a,"")}catch(p){Qe(e,e.return,p)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wy(a,i),xu(l,o);var d=xu(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Cy(a,m):u==="dangerouslySetInnerHTML"?_y(a,m):u==="children"?Yi(a,m):nh(a,u,m,d)}switch(l){case"input":uu(a,i);break;case"textarea":jy(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ga(a,!!i.multiple,y,!1):h!==!!i.multiple&&(i.defaultValue!=null?ga(a,!!i.multiple,i.defaultValue,!0):ga(a,!!i.multiple,i.multiple?[]:"",!1))}a[ao]=i}catch(p){Qe(e,e.return,p)}}break;case 6:if(xs(t,e),Ts(e),n&4){if(e.stateNode===null)throw Error(te(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){Qe(e,e.return,p)}}break;case 3:if(xs(t,e),Ts(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{eo(t.containerInfo)}catch(p){Qe(e,e.return,p)}break;case 4:xs(t,e),Ts(e);break;case 13:xs(t,e),Ts(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Oh=Xe())),n&4&&Kf(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(wt=(d=wt)||u,xs(t,e),wt=d):xs(t,e),Ts(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(oe=e,u=e.child;u!==null;){for(m=oe=u;oe!==null;){switch(h=oe,y=h.child,h.tag){case 0:case 11:case 14:case 15:zi(4,h,h.return);break;case 1:ca(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){Qe(n,r,p)}}break;case 5:ca(h,h.return);break;case 22:if(h.memoizedState!==null){Qf(m);continue}}y!==null?(y.return=h,oe=y):Qf(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ky("display",o))}catch(p){Qe(e,e.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){Qe(e,e.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xs(t,e),Ts(e),n&4&&Kf(e);break;case 21:break;default:xs(t,e),Ts(e)}}function Ts(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zb(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Yi(a,""),n.flags&=-33);var i=Hf(e);Hu(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Hf(e);qu(e,l,o);break;default:throw Error(te(161))}}catch(c){Qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vN(e,t,r){oe=e,ev(e)}function ev(e,t,r){for(var n=(e.mode&1)!==0;oe!==null;){var a=oe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||nl;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||wt;l=nl;var d=wt;if(nl=o,(wt=c)&&!d)for(oe=a;oe!==null;)o=oe,c=o.child,o.tag===22&&o.memoizedState!==null?Yf(a):c!==null?(c.return=o,oe=c):Yf(a);for(;i!==null;)oe=i,ev(i),i=i.sibling;oe=a,nl=l,wt=d}Gf(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,oe=i):Gf(e)}}function Gf(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||Fc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!wt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ys(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Mf(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Mf(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&eo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}wt||t.flags&512&&Wu(t)}catch(h){Qe(t,t.return,h)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Qf(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Yf(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fc(4,t)}catch(c){Qe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Qe(t,a,c)}}var i=t.return;try{Wu(t)}catch(c){Qe(t,i,c)}break;case 5:var o=t.return;try{Wu(t)}catch(c){Qe(t,o,c)}}}catch(c){Qe(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var wN=Math.ceil,ec=cr.ReactCurrentDispatcher,Lh=cr.ReactCurrentOwner,us=cr.ReactCurrentBatchConfig,Se=0,ct=null,st=null,pt=0,Kt=0,da=sn(0),at=0,mo=null,In=0,Oc=0,Fh=0,Vi=null,Ot=null,Oh=0,Va=1/0,Hs=null,tc=!1,Ku=null,Vr=null,al=!1,Rr=null,sc=0,Ui=0,Gu=null,_l=-1,kl=0;function At(){return Se&6?Xe():_l!==-1?_l:_l=Xe()}function Ur(e){return e.mode&1?Se&2&&pt!==0?pt&-pt:nN.transition!==null?(kl===0&&(kl=By()),kl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:qy(e.type)),e):1}function ks(e,t,r,n){if(50<Ui)throw Ui=0,Gu=null,Error(te(185));Ao(e,r,n),(!(Se&2)||e!==ct)&&(e===ct&&(!(Se&2)&&(Oc|=r),at===4&&jr(e,pt)),zt(e,n),r===1&&Se===0&&!(t.mode&1)&&(Va=Xe()+500,Rc&&rn()))}function zt(e,t){var r=e.callbackNode;nj(e,t);var n=$l(e,e===ct?pt:0);if(n===0)r!==null&&nf(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nf(r),t===1)e.tag===0?rN(Zf.bind(null,e)):db(Zf.bind(null,e)),Jj(function(){!(Se&6)&&rn()}),r=null;else{switch($y(n)){case 1:r=ch;break;case 4:r=Fy;break;case 16:r=Bl;break;case 536870912:r=Oy;break;default:r=Bl}r=lv(r,tv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function tv(e,t){if(_l=-1,kl=0,Se&6)throw Error(te(327));var r=e.callbackNode;if(ja()&&e.callbackNode!==r)return null;var n=$l(e,e===ct?pt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=rc(e,n);else{t=n;var a=Se;Se|=2;var i=rv();(ct!==e||pt!==t)&&(Hs=null,Va=Xe()+500,Mn(e,t));do try{_N();break}catch(l){sv(e,l)}while(!0);jh(),ec.current=i,Se=a,st!==null?t=0:(ct=null,pt=0,t=at)}if(t!==0){if(t===2&&(a=wu(e),a!==0&&(n=a,t=Qu(e,a))),t===1)throw r=mo,Mn(e,0),jr(e,n),zt(e,Xe()),r;if(t===6)jr(e,n);else{if(a=e.current.alternate,!(n&30)&&!jN(a)&&(t=rc(e,n),t===2&&(i=wu(e),i!==0&&(n=i,t=Qu(e,i))),t===1))throw r=mo,Mn(e,0),jr(e,n),zt(e,Xe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(te(345));case 2:fn(e,Ot,Hs);break;case 3:if(jr(e,n),(n&130023424)===n&&(t=Oh+500-Xe(),10<t)){if($l(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){At(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Eu(fn.bind(null,e,Ot,Hs),t);break}fn(e,Ot,Hs);break;case 4:if(jr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-_s(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wN(n/1960))-n,10<n){e.timeoutHandle=Eu(fn.bind(null,e,Ot,Hs),n);break}fn(e,Ot,Hs);break;case 5:fn(e,Ot,Hs);break;default:throw Error(te(329))}}}return zt(e,Xe()),e.callbackNode===r?tv.bind(null,e):null}function Qu(e,t){var r=Vi;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=rc(e,t),e!==2&&(t=Ot,Ot=r,t!==null&&Yu(t)),e}function Yu(e){Ot===null?Ot=e:Ot.push.apply(Ot,e)}function jN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Cs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jr(e,t){for(t&=~Fh,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_s(t),n=1<<r;e[r]=-1,t&=~n}}function Zf(e){if(Se&6)throw Error(te(327));ja();var t=$l(e,0);if(!(t&1))return zt(e,Xe()),null;var r=rc(e,t);if(e.tag!==0&&r===2){var n=wu(e);n!==0&&(t=n,r=Qu(e,n))}if(r===1)throw r=mo,Mn(e,0),jr(e,t),zt(e,Xe()),r;if(r===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fn(e,Ot,Hs),zt(e,Xe()),null}function Bh(e,t){var r=Se;Se|=1;try{return e(t)}finally{Se=r,Se===0&&(Va=Xe()+500,Rc&&rn())}}function zn(e){Rr!==null&&Rr.tag===0&&!(Se&6)&&ja();var t=Se;Se|=1;var r=us.transition,n=Ae;try{if(us.transition=null,Ae=1,e)return e()}finally{Ae=n,us.transition=r,Se=t,!(Se&6)&&rn()}}function $h(){Kt=da.current,$e(da)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xj(r)),st!==null)for(r=st.return;r!==null;){var n=r;switch(bh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Wl();break;case 3:Ia(),$e($t),$e(kt),Th();break;case 5:Sh(n);break;case 4:Ia();break;case 13:$e(Ve);break;case 19:$e(Ve);break;case 10:Nh(n.type._context);break;case 22:case 23:$h()}r=r.return}if(ct=e,st=e=Wr(e.current,null),pt=Kt=t,at=0,mo=null,Fh=Oc=In=0,Ot=Vi=null,yn!==null){for(t=0;t<yn.length;t++)if(r=yn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}yn=null}return e}function sv(e,t){do{var r=st;try{if(jh(),wl.current=Jl,Xl){for(var n=qe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Xl=!1}if($n=0,ot=rt=qe=null,Ii=!1,lo=0,Lh.current=null,r===null||r.return===null){at=1,mo=t,st=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=Bf(o);if(y!==null){y.flags&=-257,$f(y,o,l,i,t),y.mode&1&&Of(i,d,t),t=y,c=d;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){Of(i,d,t),Ih();break e}c=Error(te(426))}}else if(ze&&l.mode&1){var w=Bf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$f(w,o,l,i,t),vh(za(c,l));break e}}i=c=za(c,l),at!==4&&(at=2),Vi===null?Vi=[i]:Vi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=$b(i,c,t);Af(i,g);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vr===null||!Vr.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Ib(i,l,t);Af(i,j);break e}}i=i.return}while(i!==null)}av(r)}catch(N){t=N,st===r&&r!==null&&(st=r=r.return);continue}break}while(!0)}function rv(){var e=ec.current;return ec.current=Jl,e===null?Jl:e}function Ih(){(at===0||at===3||at===2)&&(at=4),ct===null||!(In&268435455)&&!(Oc&268435455)||jr(ct,pt)}function rc(e,t){var r=Se;Se|=2;var n=rv();(ct!==e||pt!==t)&&(Hs=null,Mn(e,t));do try{NN();break}catch(a){sv(e,a)}while(!0);if(jh(),Se=r,ec.current=n,st!==null)throw Error(te(261));return ct=null,pt=0,at}function NN(){for(;st!==null;)nv(st)}function _N(){for(;st!==null&&!Q2();)nv(st)}function nv(e){var t=ov(e.alternate,e,Kt);e.memoizedProps=e.pendingProps,t===null?av(e):st=t,Lh.current=null}function av(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gN(r,t),r!==null){r.flags&=32767,st=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,st=null;return}}else if(r=xN(r,t,Kt),r!==null){st=r;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);at===0&&(at=5)}function fn(e,t,r){var n=Ae,a=us.transition;try{us.transition=null,Ae=1,kN(e,t,r,n)}finally{us.transition=a,Ae=n}return null}function kN(e,t,r,n){do ja();while(Rr!==null);if(Se&6)throw Error(te(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(aj(e,i),e===ct&&(st=ct=null,pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||al||(al=!0,lv(Bl,function(){return ja(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=us.transition,us.transition=null;var o=Ae;Ae=1;var l=Se;Se|=4,Lh.current=null,bN(e,r),Jb(r,e),qj(Su),Il=!!Cu,Su=Cu=null,e.current=r,vN(r),Y2(),Se=l,Ae=o,us.transition=i}else e.current=r;if(al&&(al=!1,Rr=e,sc=a),i=e.pendingLanes,i===0&&(Vr=null),J2(r.stateNode),zt(e,Xe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(tc)throw tc=!1,e=Ku,Ku=null,e;return sc&1&&e.tag!==0&&ja(),i=e.pendingLanes,i&1?e===Gu?Ui++:(Ui=0,Gu=e):Ui=0,rn(),null}function ja(){if(Rr!==null){var e=$y(sc),t=us.transition,r=Ae;try{if(us.transition=null,Ae=16>e?16:e,Rr===null)var n=!1;else{if(e=Rr,Rr=null,sc=0,Se&6)throw Error(te(331));var a=Se;for(Se|=4,oe=e.current;oe!==null;){var i=oe,o=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(oe=d;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:zi(8,u,i)}var m=u.child;if(m!==null)m.return=u,oe=m;else for(;oe!==null;){u=oe;var h=u.sibling,y=u.return;if(Yb(u),u===d){oe=null;break}if(h!==null){h.return=y,oe=h;break}oe=y}}}var v=i.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var w=p.sibling;p.sibling=null,p=w}while(p!==null)}}oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,oe=o;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zi(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,oe=g;break e}oe=i.return}}var x=e.current;for(oe=x;oe!==null;){o=oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,oe=b;else e:for(o=x;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fc(9,l)}}catch(N){Qe(l,l.return,N)}if(l===o){oe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,oe=j;break e}oe=l.return}}if(Se=a,rn(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(Tc,e)}catch{}n=!0}return n}finally{Ae=r,us.transition=t}}return!1}function Xf(e,t,r){t=za(r,t),t=$b(e,t,1),e=zr(e,t,1),t=At(),e!==null&&(Ao(e,1,t),zt(e,t))}function Qe(e,t,r){if(e.tag===3)Xf(e,e,r);else for(;t!==null;){if(t.tag===3){Xf(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vr===null||!Vr.has(n))){e=za(r,e),e=Ib(t,e,1),t=zr(t,e,1),e=At(),t!==null&&(Ao(t,1,e),zt(t,e));break}}t=t.return}}function CN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=At(),e.pingedLanes|=e.suspendedLanes&r,ct===e&&(pt&r)===r&&(at===4||at===3&&(pt&130023424)===pt&&500>Xe()-Oh?Mn(e,0):Fh|=r),zt(e,t)}function iv(e,t){t===0&&(e.mode&1?(t=Qo,Qo<<=1,!(Qo&130023424)&&(Qo=4194304)):t=1);var r=At();e=ir(e,t),e!==null&&(Ao(e,t,r),zt(e,r))}function SN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),iv(e,r)}function TN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(t),iv(e,r)}var ov;ov=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$t.current)Bt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Bt=!1,pN(e,t,r);Bt=!!(e.flags&131072)}else Bt=!1,ze&&t.flags&1048576&&ub(t,Kl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Nl(e,t),e=t.pendingProps;var a=Oa(t,kt.current);wa(t,r),a=Ph(null,t,n,e,a,r);var i=Ah();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(n)?(i=!0,ql(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(t),a.updater=Lc,t.stateNode=a,a._reactInternals=t,Fu(t,n,e,r),t=$u(null,t,n,!0,i,r)):(t.tag=0,ze&&i&&yh(t),Tt(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Nl(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=PN(n),e=ys(n,e),a){case 0:t=Bu(null,t,n,e,r);break e;case 1:t=Vf(null,t,n,e,r);break e;case 11:t=If(null,t,n,e,r);break e;case 14:t=zf(null,t,n,ys(n.type,e),r);break e}throw Error(te(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ys(n,a),Bu(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ys(n,a),Vf(e,t,n,a,r);case 3:e:{if(Wb(t),e===null)throw Error(te(387));n=t.pendingProps,i=t.memoizedState,a=i.element,gb(e,t),Yl(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=za(Error(te(423)),t),t=Uf(e,t,n,r,a);break e}else if(n!==a){a=za(Error(te(424)),t),t=Uf(e,t,n,r,a);break e}else for(Gt=Ir(t.stateNode.containerInfo.firstChild),Qt=t,ze=!0,js=null,r=pb(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ba(),n===a){t=or(e,t,r);break e}Tt(e,t,n,r)}t=t.child}return t;case 5:return yb(t),e===null&&Ru(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Tu(n,a)?o=null:i!==null&&Tu(n,i)&&(t.flags|=32),Ub(e,t),Tt(e,t,o,r),t.child;case 6:return e===null&&Ru(t),null;case 13:return qb(e,t,r);case 4:return Ch(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$a(t,null,n,r):Tt(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ys(n,a),If(e,t,n,a,r);case 7:return Tt(e,t,t.pendingProps,r),t.child;case 8:return Tt(e,t,t.pendingProps.children,r),t.child;case 12:return Tt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Fe(Gl,n._currentValue),n._currentValue=o,i!==null)if(Cs(i.value,o)){if(i.children===a.children&&!$t.current){t=or(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=er(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Du(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Du(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,wa(t,r),a=ms(a),n=n(a),t.flags|=1,Tt(e,t,n,r),t.child;case 14:return n=t.type,a=ys(n,t.pendingProps),a=ys(n.type,a),zf(e,t,n,a,r);case 15:return zb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ys(n,a),Nl(e,t),t.tag=1,It(n)?(e=!0,ql(t)):e=!1,wa(t,r),Bb(t,n,a),Fu(t,n,a,r),$u(null,t,n,!0,e,r);case 19:return Hb(e,t,r);case 22:return Vb(e,t,r)}throw Error(te(156,t.tag))};function lv(e,t){return Ly(e,t)}function EN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,r,n){return new EN(e,t,r,n)}function zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PN(e){if(typeof e=="function")return zh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ih)return 11;if(e===oh)return 14}return 2}function Wr(e,t){var r=e.alternate;return r===null?(r=cs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cl(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")zh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ea:return Rn(r.children,a,i,t);case ah:o=8,a|=8;break;case iu:return e=cs(12,r,t,a|2),e.elementType=iu,e.lanes=i,e;case ou:return e=cs(13,r,t,a),e.elementType=ou,e.lanes=i,e;case lu:return e=cs(19,r,t,a),e.elementType=lu,e.lanes=i,e;case yy:return Bc(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xy:o=10;break e;case gy:o=9;break e;case ih:o=11;break e;case oh:o=14;break e;case yr:o=16,n=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=cs(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Rn(e,t,r,n){return e=cs(7,e,n,t),e.lanes=r,e}function Bc(e,t,r,n){return e=cs(22,e,n,t),e.elementType=yy,e.lanes=r,e.stateNode={isHidden:!1},e}function Ed(e,t,r){return e=cs(6,e,null,t),e.lanes=r,e}function Pd(e,t,r){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AN(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vh(e,t,r,n,a,i,o,l,c){return e=new AN(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=cs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(i),e}function MN(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function cv(e){if(!e)return Qr;e=e._reactInternals;e:{if(Gn(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var r=e.type;if(It(r))return cb(e,r,t)}return t}function dv(e,t,r,n,a,i,o,l,c){return e=Vh(r,n,!0,e,a,i,o,l,c),e.context=cv(null),r=e.current,n=At(),a=Ur(r),i=er(n,a),i.callback=t??null,zr(r,i,a),e.current.lanes=a,Ao(e,a,n),zt(e,n),e}function $c(e,t,r,n){var a=t.current,i=At(),o=Ur(a);return r=cv(r),t.context===null?t.context=r:t.pendingContext=r,t=er(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=zr(a,t,o),e!==null&&(ks(e,a,o,i),vl(e,a,o)),o}function nc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Uh(e,t){Jf(e,t),(e=e.alternate)&&Jf(e,t)}function RN(){return null}var uv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wh(e){this._internalRoot=e}Ic.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));$c(e,t,null,null)};Ic.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zn(function(){$c(null,e,null,null)}),t[ar]=null}};function Ic(e){this._internalRoot=e}Ic.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vy();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wr.length&&t!==0&&t<wr[r].priority;r++);wr.splice(r,0,e),r===0&&Wy(e)}};function qh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ep(){}function DN(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=nc(o);i.call(d)}}var o=dv(t,n,e,0,null,!1,!1,"",ep);return e._reactRootContainer=o,e[ar]=o.current,ro(e.nodeType===8?e.parentNode:e),zn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=nc(c);l.call(d)}}var c=Vh(e,0,!1,null,null,!1,!1,"",ep);return e._reactRootContainer=c,e[ar]=c.current,ro(e.nodeType===8?e.parentNode:e),zn(function(){$c(t,c,r,n)}),c}function Vc(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=nc(o);l.call(c)}}$c(t,o,e,a)}else o=DN(r,t,e,a,n);return nc(o)}Iy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Si(t.pendingLanes);r!==0&&(dh(t,r|1),zt(t,Xe()),!(Se&6)&&(Va=Xe()+500,rn()))}break;case 13:zn(function(){var n=ir(e,1);if(n!==null){var a=At();ks(n,e,1,a)}}),Uh(e,1)}};uh=function(e){if(e.tag===13){var t=ir(e,134217728);if(t!==null){var r=At();ks(t,e,134217728,r)}Uh(e,134217728)}};zy=function(e){if(e.tag===13){var t=Ur(e),r=ir(e,t);if(r!==null){var n=At();ks(r,e,t,n)}Uh(e,t)}};Vy=function(){return Ae};Uy=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};yu=function(e,t,r){switch(t){case"input":if(uu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Mc(n);if(!a)throw Error(te(90));vy(n),uu(n,a)}}}break;case"textarea":jy(e,r);break;case"select":t=r.value,t!=null&&ga(e,!!r.multiple,t,!1)}};Ey=Bh;Py=zn;var LN={usingClientEntryPoint:!1,Events:[Ro,na,Mc,Sy,Ty,Bh]},yi={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FN={bundleType:yi.bundleType,version:yi.version,rendererPackageName:yi.rendererPackageName,rendererConfig:yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ry(e),e===null?null:e.stateNode},findFiberByHostInstance:yi.findFiberByHostInstance||RN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Tc=il.inject(FN),Fs=il}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LN;ts.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qh(t))throw Error(te(200));return MN(e,t,null,r)};ts.createRoot=function(e,t){if(!qh(e))throw Error(te(299));var r=!1,n="",a=uv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Vh(e,1,!1,null,null,r,!1,n,a),e[ar]=t.current,ro(e.nodeType===8?e.parentNode:e),new Wh(t)};ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=Ry(t),e=e===null?null:e.stateNode,e};ts.flushSync=function(e){return zn(e)};ts.hydrate=function(e,t,r){if(!zc(t))throw Error(te(200));return Vc(null,e,t,!0,r)};ts.hydrateRoot=function(e,t,r){if(!qh(e))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=uv;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=dv(t,null,e,1,r??null,a,!1,i,o),e[ar]=t.current,ro(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Ic(t)};ts.render=function(e,t,r){if(!zc(t))throw Error(te(200));return Vc(null,e,t,!1,r)};ts.unmountComponentAtNode=function(e){if(!zc(e))throw Error(te(40));return e._reactRootContainer?(zn(function(){Vc(null,null,e,!1,function(){e._reactRootContainer=null,e[ar]=null})}),!0):!1};ts.unstable_batchedUpdates=Bh;ts.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zc(r))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Vc(e,t,r,!1,n)};ts.version="18.3.1-next-f1338f8080-20240426";function mv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mv)}catch(e){console.error(e)}}mv(),my.exports=ts;var ON=my.exports,hv,tp=ON;hv=tp.createRoot,tp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ho.apply(this,arguments)}var Dr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Dr||(Dr={}));const sp="popstate";function BN(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Zu("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:ac(a)}return IN(t,r,null,e)}function et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $N(){return Math.random().toString(36).substr(2,8)}function rp(e,t){return{usr:e.state,key:e.key,idx:t}}function Zu(e,t,r,n){return r===void 0&&(r=null),ho({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ti(t):t,{state:r,key:t&&t.key||n||$N()})}function ac(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ti(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function IN(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Dr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(ho({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=Dr.Pop;let w=u(),g=w==null?null:w-d;d=w,c&&c({action:l,location:p.location,delta:g})}function h(w,g){l=Dr.Push;let x=Zu(p.location,w,g);d=u()+1;let b=rp(x,d),j=p.createHref(x);try{o.pushState(b,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(j)}i&&c&&c({action:l,location:p.location,delta:1})}function y(w,g){l=Dr.Replace;let x=Zu(p.location,w,g);d=u();let b=rp(x,d),j=p.createHref(x);o.replaceState(b,"",j),i&&c&&c({action:l,location:p.location,delta:0})}function v(w){let g=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof w=="string"?w:ac(w);return x=x.replace(/ $/,"%20"),et(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let p={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(sp,m),c=w,()=>{a.removeEventListener(sp,m),c=null}},createHref(w){return t(a,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:y,go(w){return o.go(w)}};return p}var np;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(np||(np={}));function zN(e,t,r){return r===void 0&&(r="/"),VN(e,t,r)}function VN(e,t,r,n){let a=typeof t=="string"?ti(t):t,i=Hh(a.pathname||"/",r);if(i==null)return null;let o=pv(e);UN(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=t_(i);l=XN(o[c],d)}return l}function pv(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(et(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=qr([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),pv(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:YN(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of xv(i.path))a(i,o,c)}),t}function xv(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=xv(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function UN(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ZN(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const WN=/^:[\w-]+$/,qN=3,HN=2,KN=1,GN=10,QN=-2,ap=e=>e==="*";function YN(e,t){let r=e.split("/"),n=r.length;return r.some(ap)&&(n+=QN),t&&(n+=HN),r.filter(a=>!ap(a)).reduce((a,i)=>a+(WN.test(i)?qN:i===""?KN:GN),n)}function ZN(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function XN(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=JN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:qr([i,m.pathname]),pathnameBase:a_(qr([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=qr([i,m.pathnameBase]))}return o}function JN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=e_(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:y}=u;if(h==="*"){let p=l[m]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[m];return y&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function e_(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),fv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function t_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Hh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function s_(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ti(e):e;return{pathname:r?r.startsWith("/")?r:r_(r,t):t,search:i_(n),hash:o_(a)}}function r_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ad(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function n_(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Kh(e,t){let r=n_(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Gh(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ti(e):(a=ho({},e),et(!a.pathname||!a.pathname.includes("?"),Ad("?","pathname","search",a)),et(!a.pathname||!a.pathname.includes("#"),Ad("#","pathname","hash",a)),et(!a.search||!a.search.includes("#"),Ad("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let c=s_(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const qr=e=>e.join("/").replace(/\/\/+/g,"/"),a_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),i_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function l_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gv=["post","put","patch","delete"];new Set(gv);const c_=["get",...gv];new Set(c_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fo.apply(this,arguments)}const Qh=f.createContext(null),d_=f.createContext(null),nn=f.createContext(null),Uc=f.createContext(null),dr=f.createContext({outlet:null,matches:[],isDataRoute:!1}),yv=f.createContext(null);function u_(e,t){let{relative:r}=t===void 0?{}:t;si()||et(!1);let{basename:n,navigator:a}=f.useContext(nn),{hash:i,pathname:o,search:l}=vv(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:qr([n,o])),a.createHref({pathname:c,search:l,hash:i})}function si(){return f.useContext(Uc)!=null}function ur(){return si()||et(!1),f.useContext(Uc).location}function bv(e){f.useContext(nn).static||f.useLayoutEffect(e)}function Le(){let{isDataRoute:e}=f.useContext(dr);return e?__():m_()}function m_(){si()||et(!1);let e=f.useContext(Qh),{basename:t,future:r,navigator:n}=f.useContext(nn),{matches:a}=f.useContext(dr),{pathname:i}=ur(),o=JSON.stringify(Kh(a,r.v7_relativeSplatPath)),l=f.useRef(!1);return bv(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Gh(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:qr([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}function Yh(){let{matches:e}=f.useContext(dr),t=e[e.length-1];return t?t.params:{}}function vv(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=f.useContext(nn),{matches:a}=f.useContext(dr),{pathname:i}=ur(),o=JSON.stringify(Kh(a,n.v7_relativeSplatPath));return f.useMemo(()=>Gh(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function h_(e,t){return f_(e,t)}function f_(e,t,r,n){si()||et(!1);let{navigator:a}=f.useContext(nn),{matches:i}=f.useContext(dr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=ur(),u;if(t){var m;let w=typeof t=="string"?ti(t):t;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||et(!1),u=w}else u=d;let h=u.pathname||"/",y=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=zN(e,{pathname:y}),p=b_(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:qr([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:qr([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&p?f.createElement(Uc.Provider,{value:{location:fo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Dr.Pop}},p):p}function p_(){let e=N_(),t=l_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:a},r):null,null)}const x_=f.createElement(p_,null);class g_ extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?f.createElement(dr.Provider,{value:this.props.routeContext},f.createElement(yv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y_(e){let{routeContext:t,match:r,children:n}=e,a=f.useContext(Qh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(dr.Provider,{value:t},n)}function b_(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||et(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:y}=r,v=m.route.loader&&h[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||v){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let y,v=!1,p=null,w=null;r&&(y=l&&m.route.id?l[m.route.id]:void 0,p=m.route.errorElement||x_,c&&(d<0&&h===0?(k_("route-fallback"),v=!0,w=null):d===h&&(v=!0,w=m.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,h+1)),x=()=>{let b;return y?b=p:v?b=w:m.route.Component?b=f.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=u,f.createElement(y_,{match:m,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:b})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(g_,{location:r.location,revalidation:r.revalidation,component:p,error:y,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var wv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(wv||{}),jv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jv||{});function v_(e){let t=f.useContext(Qh);return t||et(!1),t}function w_(e){let t=f.useContext(d_);return t||et(!1),t}function j_(e){let t=f.useContext(dr);return t||et(!1),t}function Nv(e){let t=j_(),r=t.matches[t.matches.length-1];return r.route.id||et(!1),r.route.id}function N_(){var e;let t=f.useContext(yv),r=w_(),n=Nv();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function __(){let{router:e}=v_(wv.UseNavigateStable),t=Nv(jv.UseNavigateStable),r=f.useRef(!1);return bv(()=>{r.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,fo({fromRouteId:t},i)))},[e,t])}const ip={};function k_(e,t,r){ip[e]||(ip[e]=!0)}function C_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Zh(e){let{to:t,replace:r,state:n,relative:a}=e;si()||et(!1);let{future:i,static:o}=f.useContext(nn),{matches:l}=f.useContext(dr),{pathname:c}=ur(),d=Le(),u=Gh(t,Kh(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function ke(e){et(!1)}function S_(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Dr.Pop,navigator:i,static:o=!1,future:l}=e;si()&&et(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:fo({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=ti(n));let{pathname:u="/",search:m="",hash:h="",state:y=null,key:v="default"}=n,p=f.useMemo(()=>{let w=Hh(u,c);return w==null?null:{location:{pathname:w,search:m,hash:h,state:y,key:v},navigationType:a}},[c,u,m,h,y,v,a]);return p==null?null:f.createElement(nn.Provider,{value:d},f.createElement(Uc.Provider,{children:r,value:p}))}function T_(e){let{children:t,location:r}=e;return h_(Xu(t),r)}new Promise(()=>{});function Xu(e,t){t===void 0&&(t=[]);let r=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...t,a];if(n.type===f.Fragment){r.push.apply(r,Xu(n.props.children,i));return}n.type!==ke&&et(!1),!n.props.index||!n.props.children||et(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Xu(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ju.apply(this,arguments)}function E_(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function P_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function A_(e,t){return e.button===0&&(!t||t==="_self")&&!P_(e)}function em(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function M_(e,t){let r=em(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const R_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],D_="6";try{window.__reactRouterVersion=D_}catch{}const L_="startTransition",op=dy[L_];function F_(e){let{basename:t,children:r,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=BN({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(m=>{d&&op?op(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>C_(n),[n]),f.createElement(S_,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const O_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q=f.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=E_(t,R_),{basename:y}=f.useContext(nn),v,p=!1;if(typeof d=="string"&&B_.test(d)&&(v=d,O_))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),N=Hh(j.pathname,y);j.origin===b.origin&&N!=null?d=N+j.search+j.hash:p=!0}catch{}let w=u_(d,{relative:a}),g=$_(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function x(b){n&&n(b),b.defaultPrevented||g(b)}return f.createElement("a",Ju({},h,{href:v||w,onClick:p||i?n:x,ref:r,target:c}))});var lp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lp||(lp={}));var cp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cp||(cp={}));function $_(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Le(),d=ur(),u=vv(e,{relative:o});return f.useCallback(m=>{if(A_(m,r)){m.preventDefault();let h=n!==void 0?n:ac(d)===ac(u);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function dt(e){let t=f.useRef(em(e)),r=f.useRef(!1),n=ur(),a=f.useMemo(()=>M_(n.search,r.current?null:t.current),[n.search]),i=Le(),o=f.useCallback((l,c)=>{const d=em(typeof l=="function"?l(a):l);r.current=!0,i("?"+d,c)},[i,a]);return[a,o]}var ri=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},I_={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Nr,Zm,Ug,z_=(Ug=class{constructor(){ue(this,Nr,I_);ue(this,Zm,!1)}setTimeoutProvider(e){ae(this,Nr,e)}setTimeout(e,t){return L(this,Nr).setTimeout(e,t)}clearTimeout(e){L(this,Nr).clearTimeout(e)}setInterval(e,t){return L(this,Nr).setInterval(e,t)}clearInterval(e){L(this,Nr).clearInterval(e)}},Nr=new WeakMap,Zm=new WeakMap,Ug),vn=new z_;function V_(e){setTimeout(e,0)}var Vn=typeof window>"u"||"Deno"in globalThis;function Et(){}function U_(e,t){return typeof e=="function"?e(t):e}function tm(e){return typeof e=="number"&&e>=0&&e!==1/0}function _v(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Hr(e,t){return typeof e=="function"?e(t):e}function is(e,t){return typeof e=="function"?e(t):e}function dp(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Xh(o,t.options))return!1}else if(!po(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function up(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Un(t.options.mutationKey)!==Un(i))return!1}else if(!po(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Xh(e,t){return((t==null?void 0:t.queryKeyHashFn)||Un)(e)}function Un(e){return JSON.stringify(e,(t,r)=>sm(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function po(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>po(e[r],t[r])):!1}var W_=Object.prototype.hasOwnProperty;function kv(e,t){if(e===t)return e;const r=mp(e)&&mp(t);if(!r&&!(sm(e)&&sm(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d],m=e[u],h=t[u];if(m===h){l[u]=m,(r?d<a:W_.call(e,u))&&c++;continue}if(m===null||h===null||typeof m!="object"||typeof h!="object"){l[u]=h;continue}const y=kv(m,h);l[u]=y,y===m&&c++}return a===o&&c===a?e:l}function ic(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function mp(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sm(e){if(!hp(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hp(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hp(e){return Object.prototype.toString.call(e)==="[object Object]"}function q_(e){return new Promise(t=>{vn.setTimeout(t,e)})}function rm(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?kv(e,t):t}function H_(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function K_(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Jh=Symbol();function Cv(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Jh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Sv(e,t){return typeof e=="function"?e(...t):!!e}var Nn,_r,_a,Wg,G_=(Wg=class extends ri{constructor(){super();ue(this,Nn);ue(this,_r);ue(this,_a);ae(this,_a,t=>{if(!Vn&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){L(this,_r)||this.setEventListener(L(this,_a))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,_r))==null||t.call(this),ae(this,_r,void 0))}setEventListener(t){var r;ae(this,_a,t),(r=L(this,_r))==null||r.call(this),ae(this,_r,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){L(this,Nn)!==t&&(ae(this,Nn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof L(this,Nn)=="boolean"?L(this,Nn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Nn=new WeakMap,_r=new WeakMap,_a=new WeakMap,Wg),e0=new G_;function nm(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var Q_=V_;function Y_(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=Q_;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var nt=Y_(),ka,kr,Ca,qg,Z_=(qg=class extends ri{constructor(){super();ue(this,ka,!0);ue(this,kr);ue(this,Ca);ae(this,Ca,t=>{if(!Vn&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){L(this,kr)||this.setEventListener(L(this,Ca))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,kr))==null||t.call(this),ae(this,kr,void 0))}setEventListener(t){var r;ae(this,Ca,t),(r=L(this,kr))==null||r.call(this),ae(this,kr,t(this.setOnline.bind(this)))}setOnline(t){L(this,ka)!==t&&(ae(this,ka,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return L(this,ka)}},ka=new WeakMap,kr=new WeakMap,Ca=new WeakMap,qg),oc=new Z_;function X_(e){return Math.min(1e3*2**e,3e4)}function Tv(e){return(e??"online")==="online"?oc.isOnline():!0}var am=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Ev(e){let t=!1,r=0,n;const a=nm(),i=()=>a.status!=="pending",o=p=>{var w;if(!i()){const g=new am(p);h(g),(w=e.onCancel)==null||w.call(e,g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>e0.isFocused()&&(e.networkMode==="always"||oc.isOnline())&&e.canRun(),u=()=>Tv(e.networkMode)&&e.canRun(),m=p=>{i()||(n==null||n(),a.resolve(p))},h=p=>{i()||(n==null||n(),a.reject(p))},y=()=>new Promise(p=>{var w;n=g=>{(i()||d())&&p(g)},(w=e.onPause)==null||w.call(e)}).then(()=>{var p;n=void 0,i()||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(i())return;let p;const w=r===0?e.initialPromise:void 0;try{p=w??e.fn()}catch(g){p=Promise.reject(g)}Promise.resolve(p).then(m).catch(g=>{var _;if(i())return;const x=e.retry??(Vn?0:3),b=e.retryDelay??X_,j=typeof b=="function"?b(r,g):b,N=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,g);if(t||!N){h(g);return}r++,(_=e.onFail)==null||_.call(e,r,g),q_(j).then(()=>d()?void 0:y()).then(()=>{t?h(g):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():y().then(v),a)}}var _n,Hg,Pv=(Hg=class{constructor(){ue(this,_n)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tm(this.gcTime)&&ae(this,_n,vn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vn?1/0:5*60*1e3))}clearGcTimeout(){L(this,_n)&&(vn.clearTimeout(L(this,_n)),ae(this,_n,void 0))}},_n=new WeakMap,Hg),kn,Sa,as,Cn,it,ko,Sn,bs,qs,Kg,J_=(Kg=class extends Pv{constructor(t){super();ue(this,bs);ue(this,kn);ue(this,Sa);ue(this,as);ue(this,Cn);ue(this,it);ue(this,ko);ue(this,Sn);ae(this,Sn,!1),ae(this,ko,t.defaultOptions),this.setOptions(t.options),this.observers=[],ae(this,Cn,t.client),ae(this,as,L(this,Cn).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ae(this,kn,pp(this.options)),this.state=t.state??L(this,kn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,it))==null?void 0:t.promise}setOptions(t){if(this.options={...L(this,ko),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=pp(this.options);r.data!==void 0&&(this.setState(fp(r.data,r.dataUpdatedAt)),ae(this,kn,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,as).remove(this)}setData(t,r){const n=rm(this.state.data,t,this.options);return be(this,bs,qs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){be(this,bs,qs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=L(this,it))==null?void 0:n.promise;return(a=L(this,it))==null||a.cancel(t),r?r.then(Et).catch(Et):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,kn))}isActive(){return this.observers.some(t=>is(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Jh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Hr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!_v(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,it))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=L(this,it))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,as).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(L(this,it)&&(L(this,Sn)?L(this,it).cancel({revert:!0}):L(this,it).cancelRetry()),this.scheduleGc()),L(this,as).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,bs,qs).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,u,m,h,y,v,p,w,g,x,b;if(this.state.fetchStatus!=="idle"&&((c=L(this,it))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,it))return L(this,it).continueRetry(),L(this,it).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(N=>N.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,a=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(ae(this,Sn,!0),n.signal)})},i=()=>{const j=Cv(this.options,r),_=(()=>{const T={client:L(this,Cn),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return ae(this,Sn,!1),this.options.persister?this.options.persister(j,_,this):j(_)},l=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,Cn),state:this.state,fetchFn:i};return a(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),ae(this,Sa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&be(this,bs,qs).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),ae(this,it,Ev({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof am&&j.revert&&this.setState({...L(this,Sa),fetchStatus:"idle"}),n.abort()},onFail:(j,N)=>{be(this,bs,qs).call(this,{type:"failed",failureCount:j,error:N})},onPause:()=>{be(this,bs,qs).call(this,{type:"pause"})},onContinue:()=>{be(this,bs,qs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await L(this,it).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(y=(h=L(this,as).config).onSuccess)==null||y.call(h,j,this),(p=(v=L(this,as).config).onSettled)==null||p.call(v,j,this.state.error,this),j}catch(j){if(j instanceof am){if(j.silent)return L(this,it).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw be(this,bs,qs).call(this,{type:"error",error:j}),(g=(w=L(this,as).config).onError)==null||g.call(w,j,this),(b=(x=L(this,as).config).onSettled)==null||b.call(x,this.state.data,j,this),j}finally{this.scheduleGc()}}},kn=new WeakMap,Sa=new WeakMap,as=new WeakMap,Cn=new WeakMap,it=new WeakMap,ko=new WeakMap,Sn=new WeakMap,bs=new WeakSet,qs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Av(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...fp(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ae(this,Sa,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),nt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),L(this,as).notify({query:this,type:"updated",action:t})})},Kg);function Av(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tv(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fp(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function pp(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Lt,Ce,Co,Ct,Tn,Ta,Gs,Cr,So,Ea,Pa,En,Pn,Sr,Aa,Pe,Ei,im,om,lm,cm,dm,um,mm,Mv,Gg,ek=(Gg=class extends ri{constructor(t,r){super();ue(this,Pe);ue(this,Lt);ue(this,Ce);ue(this,Co);ue(this,Ct);ue(this,Tn);ue(this,Ta);ue(this,Gs);ue(this,Cr);ue(this,So);ue(this,Ea);ue(this,Pa);ue(this,En);ue(this,Pn);ue(this,Sr);ue(this,Aa,new Set);this.options=r,ae(this,Lt,t),ae(this,Cr,null),ae(this,Gs,nm()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,Ce).addObserver(this),xp(L(this,Ce),this.options)?be(this,Pe,Ei).call(this):this.updateResult(),be(this,Pe,cm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hm(L(this,Ce),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hm(L(this,Ce),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,Pe,dm).call(this),be(this,Pe,um).call(this),L(this,Ce).removeObserver(this)}setOptions(t){const r=this.options,n=L(this,Ce);if(this.options=L(this,Lt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof is(this.options.enabled,L(this,Ce))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,Pe,mm).call(this),L(this,Ce).setOptions(this.options),r._defaulted&&!ic(this.options,r)&&L(this,Lt).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,Ce),observer:this});const a=this.hasListeners();a&&gp(L(this,Ce),n,this.options,r)&&be(this,Pe,Ei).call(this),this.updateResult(),a&&(L(this,Ce)!==n||is(this.options.enabled,L(this,Ce))!==is(r.enabled,L(this,Ce))||Hr(this.options.staleTime,L(this,Ce))!==Hr(r.staleTime,L(this,Ce)))&&be(this,Pe,im).call(this);const i=be(this,Pe,om).call(this);a&&(L(this,Ce)!==n||is(this.options.enabled,L(this,Ce))!==is(r.enabled,L(this,Ce))||i!==L(this,Sr))&&be(this,Pe,lm).call(this,i)}getOptimisticResult(t){const r=L(this,Lt).getQueryCache().build(L(this,Lt),t),n=this.createResult(r,t);return sk(this,n)&&(ae(this,Ct,n),ae(this,Ta,this.options),ae(this,Tn,L(this,Ce).state)),n}getCurrentResult(){return L(this,Ct)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&L(this,Gs).status==="pending"&&L(this,Gs).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){L(this,Aa).add(t)}getCurrentQuery(){return L(this,Ce)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=L(this,Lt).defaultQueryOptions(t),n=L(this,Lt).getQueryCache().build(L(this,Lt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return be(this,Pe,Ei).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,Ct)))}createResult(t,r){var z;const n=L(this,Ce),a=this.options,i=L(this,Ct),o=L(this,Tn),l=L(this,Ta),d=t!==n?t.state:L(this,Co),{state:u}=t;let m={...u},h=!1,y;if(r._optimisticResults){const k=this.hasListeners(),G=!k&&xp(t,r),M=k&&gp(t,n,r,a);(G||M)&&(m={...m,...Av(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:w}=m;y=m.data;let g=!1;if(r.placeholderData!==void 0&&y===void 0&&w==="pending"){let k;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(k=i.data,g=!0):k=typeof r.placeholderData=="function"?r.placeholderData((z=L(this,Pa))==null?void 0:z.state.data,L(this,Pa)):r.placeholderData,k!==void 0&&(w="success",y=rm(i==null?void 0:i.data,k,r),h=!0)}if(r.select&&y!==void 0&&!g)if(i&&y===(o==null?void 0:o.data)&&r.select===L(this,So))y=L(this,Ea);else try{ae(this,So,r.select),y=r.select(y),y=rm(i==null?void 0:i.data,y,r),ae(this,Ea,y),ae(this,Cr,null)}catch(k){ae(this,Cr,k)}L(this,Cr)&&(v=L(this,Cr),y=L(this,Ea),p=Date.now(),w="error");const x=m.fetchStatus==="fetching",b=w==="pending",j=w==="error",N=b&&x,_=y!==void 0,E={status:w,fetchStatus:m.fetchStatus,isPending:b,isSuccess:w==="success",isError:j,isInitialLoading:N,isLoading:N,data:y,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:j&&!_,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&_,isStale:t0(t,r),refetch:this.refetch,promise:L(this,Gs),isEnabled:is(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const k=F=>{E.status==="error"?F.reject(E.error):E.data!==void 0&&F.resolve(E.data)},G=()=>{const F=ae(this,Gs,E.promise=nm());k(F)},M=L(this,Gs);switch(M.status){case"pending":t.queryHash===n.queryHash&&k(M);break;case"fulfilled":(E.status==="error"||E.data!==M.value)&&G();break;case"rejected":(E.status!=="error"||E.error!==M.reason)&&G();break}}return E}updateResult(){const t=L(this,Ct),r=this.createResult(L(this,Ce),this.options);if(ae(this,Tn,L(this,Ce).state),ae(this,Ta,this.options),L(this,Tn).data!==void 0&&ae(this,Pa,L(this,Ce)),ic(r,t))return;ae(this,Ct,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!L(this,Aa).size)return!0;const o=new Set(i??L(this,Aa));return this.options.throwOnError&&o.add("error"),Object.keys(L(this,Ct)).some(l=>{const c=l;return L(this,Ct)[c]!==t[c]&&o.has(c)})};be(this,Pe,Mv).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,Pe,cm).call(this)}},Lt=new WeakMap,Ce=new WeakMap,Co=new WeakMap,Ct=new WeakMap,Tn=new WeakMap,Ta=new WeakMap,Gs=new WeakMap,Cr=new WeakMap,So=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,En=new WeakMap,Pn=new WeakMap,Sr=new WeakMap,Aa=new WeakMap,Pe=new WeakSet,Ei=function(t){be(this,Pe,mm).call(this);let r=L(this,Ce).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Et)),r},im=function(){be(this,Pe,dm).call(this);const t=Hr(this.options.staleTime,L(this,Ce));if(Vn||L(this,Ct).isStale||!tm(t))return;const n=_v(L(this,Ct).dataUpdatedAt,t)+1;ae(this,En,vn.setTimeout(()=>{L(this,Ct).isStale||this.updateResult()},n))},om=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,Ce)):this.options.refetchInterval)??!1},lm=function(t){be(this,Pe,um).call(this),ae(this,Sr,t),!(Vn||is(this.options.enabled,L(this,Ce))===!1||!tm(L(this,Sr))||L(this,Sr)===0)&&ae(this,Pn,vn.setInterval(()=>{(this.options.refetchIntervalInBackground||e0.isFocused())&&be(this,Pe,Ei).call(this)},L(this,Sr)))},cm=function(){be(this,Pe,im).call(this),be(this,Pe,lm).call(this,be(this,Pe,om).call(this))},dm=function(){L(this,En)&&(vn.clearTimeout(L(this,En)),ae(this,En,void 0))},um=function(){L(this,Pn)&&(vn.clearInterval(L(this,Pn)),ae(this,Pn,void 0))},mm=function(){const t=L(this,Lt).getQueryCache().build(L(this,Lt),this.options);if(t===L(this,Ce))return;const r=L(this,Ce);ae(this,Ce,t),ae(this,Co,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Mv=function(t){nt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(L(this,Ct))}),L(this,Lt).getQueryCache().notify({query:L(this,Ce),type:"observerResultsUpdated"})})},Gg);function tk(e,t){return is(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function xp(e,t){return tk(e,t)||e.state.data!==void 0&&hm(e,t,t.refetchOnMount)}function hm(e,t,r){if(is(t.enabled,e)!==!1&&Hr(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&t0(e,t)}return!1}function gp(e,t,r,n){return(e!==t||is(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&t0(e,r)}function t0(e,t){return is(t.enabled,e)!==!1&&e.isStaleByTime(Hr(t.staleTime,e))}function sk(e,t){return!ic(e.getCurrentResult(),t)}function yp(e){return{onFetch:(t,r)=>{var u,m,h,y,v;const n=t.options,a=(h=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},g=Cv(t.options,t.fetchOptions),x=async(b,j,N)=>{if(p)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const T=(()=>{const G={client:t.client,queryKey:t.queryKey,pageParam:j,direction:N?"backward":"forward",meta:t.options.meta};return w(G),G})(),E=await g(T),{maxPages:z}=t.options,k=N?K_:H_;return{pages:k(b.pages,E,z),pageParams:k(b.pageParams,j,z)}};if(a&&i.length){const b=a==="backward",j=b?rk:bp,N={pages:i,pageParams:o},_=j(n,N);l=await x(N,_,b)}else{const b=e??i.length;do{const j=c===0?o[0]??n.initialPageParam:bp(n,l);if(c>0&&j==null)break;l=await x(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var p,w;return(w=(p=t.options).persister)==null?void 0:w.call(p,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function bp(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function rk(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var To,Ms,St,An,Rs,xr,Qg,nk=(Qg=class extends Pv{constructor(t){super();ue(this,Rs);ue(this,To);ue(this,Ms);ue(this,St);ue(this,An);ae(this,To,t.client),this.mutationId=t.mutationId,ae(this,St,t.mutationCache),ae(this,Ms,[]),this.state=t.state||Rv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,Ms).includes(t)||(L(this,Ms).push(t),this.clearGcTimeout(),L(this,St).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ae(this,Ms,L(this,Ms).filter(r=>r!==t)),this.scheduleGc(),L(this,St).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,Ms).length||(this.state.status==="pending"?this.scheduleGc():L(this,St).remove(this))}continue(){var t;return((t=L(this,An))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,u,m,h,y,v,p,w,g,x,b,j,N,_,T,E,z;const r=()=>{be(this,Rs,xr).call(this,{type:"continue"})},n={client:L(this,To),meta:this.options.meta,mutationKey:this.options.mutationKey};ae(this,An,Ev({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(k,G)=>{be(this,Rs,xr).call(this,{type:"failed",failureCount:k,error:G})},onPause:()=>{be(this,Rs,xr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,St).canRun(this)}));const a=this.state.status==="pending",i=!L(this,An).canStart();try{if(a)r();else{be(this,Rs,xr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=L(this,St).config).onMutate)==null?void 0:l.call(o,t,this,n));const G=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));G!==this.state.context&&be(this,Rs,xr).call(this,{type:"pending",context:G,variables:t,isPaused:i})}const k=await L(this,An).start();return await((m=(u=L(this,St).config).onSuccess)==null?void 0:m.call(u,k,t,this.state.context,this,n)),await((y=(h=this.options).onSuccess)==null?void 0:y.call(h,k,t,this.state.context,n)),await((p=(v=L(this,St).config).onSettled)==null?void 0:p.call(v,k,null,this.state.variables,this.state.context,this,n)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,k,null,t,this.state.context,n)),be(this,Rs,xr).call(this,{type:"success",data:k}),k}catch(k){try{throw await((b=(x=L(this,St).config).onError)==null?void 0:b.call(x,k,t,this.state.context,this,n)),await((N=(j=this.options).onError)==null?void 0:N.call(j,k,t,this.state.context,n)),await((T=(_=L(this,St).config).onSettled)==null?void 0:T.call(_,void 0,k,this.state.variables,this.state.context,this,n)),await((z=(E=this.options).onSettled)==null?void 0:z.call(E,void 0,k,t,this.state.context,n)),k}finally{be(this,Rs,xr).call(this,{type:"error",error:k})}}finally{L(this,St).runNext(this)}}},To=new WeakMap,Ms=new WeakMap,St=new WeakMap,An=new WeakMap,Rs=new WeakSet,xr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),nt.batch(()=>{L(this,Ms).forEach(n=>{n.onMutationUpdate(t)}),L(this,St).notify({mutation:this,type:"updated",action:t})})},Qg);function Rv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qs,vs,Eo,Yg,ak=(Yg=class extends ri{constructor(t={}){super();ue(this,Qs);ue(this,vs);ue(this,Eo);this.config=t,ae(this,Qs,new Set),ae(this,vs,new Map),ae(this,Eo,0)}build(t,r,n){const a=new nk({client:t,mutationCache:this,mutationId:++Uo(this,Eo)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){L(this,Qs).add(t);const r=ol(t);if(typeof r=="string"){const n=L(this,vs).get(r);n?n.push(t):L(this,vs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(L(this,Qs).delete(t)){const r=ol(t);if(typeof r=="string"){const n=L(this,vs).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&L(this,vs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ol(t);if(typeof r=="string"){const n=L(this,vs).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=ol(t);if(typeof r=="string"){const a=(n=L(this,vs).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nt.batch(()=>{L(this,Qs).forEach(t=>{this.notify({type:"removed",mutation:t})}),L(this,Qs).clear(),L(this,vs).clear()})}getAll(){return Array.from(L(this,Qs))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>up(r,n))}findAll(t={}){return this.getAll().filter(r=>up(t,r))}notify(t){nt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return nt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Et))))}},Qs=new WeakMap,vs=new WeakMap,Eo=new WeakMap,Yg);function ol(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ys,Tr,Ft,Zs,rr,Sl,fm,Zg,ik=(Zg=class extends ri{constructor(r,n){super();ue(this,rr);ue(this,Ys);ue(this,Tr);ue(this,Ft);ue(this,Zs);ae(this,Ys,r),this.setOptions(n),this.bindMethods(),be(this,rr,Sl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=L(this,Ys).defaultMutationOptions(r),ic(this.options,n)||L(this,Ys).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Ft),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Un(n.mutationKey)!==Un(this.options.mutationKey)?this.reset():((a=L(this,Ft))==null?void 0:a.state.status)==="pending"&&L(this,Ft).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=L(this,Ft))==null||r.removeObserver(this)}onMutationUpdate(r){be(this,rr,Sl).call(this),be(this,rr,fm).call(this,r)}getCurrentResult(){return L(this,Tr)}reset(){var r;(r=L(this,Ft))==null||r.removeObserver(this),ae(this,Ft,void 0),be(this,rr,Sl).call(this),be(this,rr,fm).call(this)}mutate(r,n){var a;return ae(this,Zs,n),(a=L(this,Ft))==null||a.removeObserver(this),ae(this,Ft,L(this,Ys).getMutationCache().build(L(this,Ys),this.options)),L(this,Ft).addObserver(this),L(this,Ft).execute(r)}},Ys=new WeakMap,Tr=new WeakMap,Ft=new WeakMap,Zs=new WeakMap,rr=new WeakSet,Sl=function(){var n;const r=((n=L(this,Ft))==null?void 0:n.state)??Rv();ae(this,Tr,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},fm=function(r){nt.batch(()=>{var n,a,i,o,l,c,d,u;if(L(this,Zs)&&this.hasListeners()){const m=L(this,Tr).variables,h=L(this,Tr).context,y={client:L(this,Ys),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=L(this,Zs)).onSuccess)==null||a.call(n,r.data,m,h,y),(o=(i=L(this,Zs)).onSettled)==null||o.call(i,r.data,null,m,h,y)):(r==null?void 0:r.type)==="error"&&((c=(l=L(this,Zs)).onError)==null||c.call(l,r.error,m,h,y),(u=(d=L(this,Zs)).onSettled)==null||u.call(d,void 0,r.error,m,h,y))}this.listeners.forEach(m=>{m(L(this,Tr))})})},Zg),Ds,Xg,ok=(Xg=class extends ri{constructor(t={}){super();ue(this,Ds);this.config=t,ae(this,Ds,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??Xh(a,r);let o=this.get(i);return o||(o=new J_({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){L(this,Ds).has(t.queryHash)||(L(this,Ds).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=L(this,Ds).get(t.queryHash);r&&(t.destroy(),r===t&&L(this,Ds).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){nt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return L(this,Ds).get(t)}getAll(){return[...L(this,Ds).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>dp(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>dp(t,n)):r}notify(t){nt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ds=new WeakMap,Xg),Ke,Er,Pr,Ma,Ra,Ar,Da,La,Jg,lk=(Jg=class{constructor(e={}){ue(this,Ke);ue(this,Er);ue(this,Pr);ue(this,Ma);ue(this,Ra);ue(this,Ar);ue(this,Da);ue(this,La);ae(this,Ke,e.queryCache||new ok),ae(this,Er,e.mutationCache||new ak),ae(this,Pr,e.defaultOptions||{}),ae(this,Ma,new Map),ae(this,Ra,new Map),ae(this,Ar,0)}mount(){Uo(this,Ar)._++,L(this,Ar)===1&&(ae(this,Da,e0.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Ke).onFocus())})),ae(this,La,oc.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,Ke).onOnline())})))}unmount(){var e,t;Uo(this,Ar)._--,L(this,Ar)===0&&((e=L(this,Da))==null||e.call(this),ae(this,Da,void 0),(t=L(this,La))==null||t.call(this),ae(this,La,void 0))}isFetching(e){return L(this,Ke).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return L(this,Er).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Ke).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=L(this,Ke).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Hr(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return L(this,Ke).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=L(this,Ke).get(n.queryHash),i=a==null?void 0:a.state.data,o=U_(t,i);if(o!==void 0)return L(this,Ke).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return nt.batch(()=>L(this,Ke).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=L(this,Ke).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=L(this,Ke);nt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=L(this,Ke);return nt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=nt.batch(()=>L(this,Ke).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Et).catch(Et)}invalidateQueries(e,t={}){return nt.batch(()=>(L(this,Ke).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=nt.batch(()=>L(this,Ke).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Et)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Et)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=L(this,Ke).build(this,t);return r.isStaleByTime(Hr(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Et).catch(Et)}fetchInfiniteQuery(e){return e.behavior=yp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Et).catch(Et)}ensureInfiniteQueryData(e){return e.behavior=yp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return oc.isOnline()?L(this,Er).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,Ke)}getMutationCache(){return L(this,Er)}getDefaultOptions(){return L(this,Pr)}setDefaultOptions(e){ae(this,Pr,e)}setQueryDefaults(e,t){L(this,Ma).set(Un(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...L(this,Ma).values()],r={};return t.forEach(n=>{po(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){L(this,Ra).set(Un(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...L(this,Ra).values()],r={};return t.forEach(n=>{po(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...L(this,Pr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Xh(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Jh&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...L(this,Pr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){L(this,Ke).clear(),L(this,Er).clear()}},Ke=new WeakMap,Er=new WeakMap,Pr=new WeakMap,Ma=new WeakMap,Ra=new WeakMap,Ar=new WeakMap,Da=new WeakMap,La=new WeakMap,Jg),Dv=f.createContext(void 0),zs=e=>{const t=f.useContext(Dv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ck=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Dv.Provider,{value:e,children:t})),Lv=f.createContext(!1),dk=()=>f.useContext(Lv);Lv.Provider;function uk(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mk=f.createContext(uk()),hk=()=>f.useContext(mk),fk=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},pk=e=>{f.useEffect(()=>{e.clearReset()},[e])},xk=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Sv(r,[e.error,n])),gk=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yk=(e,t)=>e.isLoading&&e.isFetching&&!t,bk=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,vp=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function vk(e,t,r){var m,h,y,v,p;const n=dk(),a=hk(),i=zs(),o=i.defaultQueryOptions(e);(h=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,o),o._optimisticResults=n?"isRestoring":"optimistic",gk(o),fk(o,a),pk(a);const l=!i.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(i,o)),d=c.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(w=>{const g=u?c.subscribe(nt.batchCalls(w)):Et;return c.updateResult(),g},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o)},[o,c]),bk(o,d))throw vp(o,c,a);if(xk({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((v=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||v.call(y,o,d),o.experimental_prefetchInRender&&!Vn&&yk(d,n)){const w=l?vp(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;w==null||w.catch(Et).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function we(e,t){return vk(e,ek)}function ve(e,t){const r=zs(),[n]=f.useState(()=>new ik(r,e));f.useEffect(()=>{n.setOptions(e)},[n,e]);const a=f.useSyncExternalStore(f.useCallback(o=>n.subscribe(nt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=f.useCallback((o,l)=>{n.mutate(o,l).catch(Et)},[n]);if(a.error&&Sv(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const wp=e=>{let t;const r=new Set,n=(d,u)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const h=t;t=u??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(y=>y(t,h))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=t=e(n,a,l);return l},wk=e=>e?wp(e):wp,jk=e=>e;function Nk(e,t=jk){const r=ft.useSyncExternalStore(e.subscribe,ft.useCallback(()=>t(e.getState()),[e,t]),ft.useCallback(()=>t(e.getInitialState()),[e,t]));return ft.useDebugValue(r),r}const _k=e=>{const t=wk(e),r=n=>Nk(t,n);return Object.assign(r,t),r},kk=e=>_k;function Ck(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=r.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const pm=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return pm(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return pm(n)(r)}}}},Sk=(e,t)=>(r,n,a)=>{let i={storage:Ck(()=>localStorage),partialize:p=>p,version:0,merge:(p,w)=>({...w,...p}),...t},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return e((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...p)},n,a);const u=()=>{const p=i.partialize({...n()});return d.setItem(i.name,{state:p,version:i.version})},m=a.setState;a.setState=(p,w)=>(m(p,w),u());const h=e((...p)=>(r(...p),u()),n,a);a.getInitialState=()=>h;let y;const v=()=>{var p,w;if(!d)return;o=!1,l.forEach(x=>{var b;return x((b=n())!=null?b:h)});const g=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(p=n())!=null?p:h))||void 0;return pm(d.getItem.bind(d))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate){const b=i.migrate(x.state,x.version);return b instanceof Promise?b.then(j=>[!0,j]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[j,N]=x;if(y=i.merge(N,(b=n())!=null?b:h),r(y,!0),j)return u()}).then(()=>{g==null||g(y,void 0),y=n(),o=!0,c.forEach(x=>x(y))}).catch(x=>{g==null||g(void 0,x)})};return a.persist={setOptions:p=>{i={...i,...p},p.storage&&(d=p.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},i.skipHydration||v(),y||h},Tk=Sk;function Fv(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ek}=Object.prototype,{getPrototypeOf:s0}=Object,{iterator:Wc,toStringTag:Ov}=Symbol,qc=(e=>t=>{const r=Ek.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ss=e=>(e=e.toLowerCase(),t=>qc(t)===e),Hc=e=>t=>typeof t===e,{isArray:ni}=Array,Ua=Hc("undefined");function Lo(e){return e!==null&&!Ua(e)&&e.constructor!==null&&!Ua(e.constructor)&&Vt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Bv=Ss("ArrayBuffer");function Pk(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bv(e.buffer),t}const Ak=Hc("string"),Vt=Hc("function"),$v=Hc("number"),Fo=e=>e!==null&&typeof e=="object",Mk=e=>e===!0||e===!1,Tl=e=>{if(qc(e)!=="object")return!1;const t=s0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ov in e)&&!(Wc in e)},Rk=e=>{if(!Fo(e)||Lo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Dk=Ss("Date"),Lk=Ss("File"),Fk=Ss("Blob"),Ok=Ss("FileList"),Bk=e=>Fo(e)&&Vt(e.pipe),$k=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vt(e.append)&&((t=qc(e))==="formdata"||t==="object"&&Vt(e.toString)&&e.toString()==="[object FormData]"))},Ik=Ss("URLSearchParams"),[zk,Vk,Uk,Wk]=["ReadableStream","Request","Response","Headers"].map(Ss),qk=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Oo(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ni(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Lo(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function Iv(e,t){if(Lo(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const wn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zv=e=>!Ua(e)&&e!==wn;function xm(){const{caseless:e,skipUndefined:t}=zv(this)&&this||{},r={},n=(a,i)=>{const o=e&&Iv(r,i)||i;Tl(r[o])&&Tl(a)?r[o]=xm(r[o],a):Tl(a)?r[o]=xm({},a):ni(a)?r[o]=a.slice():(!t||!Ua(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Oo(arguments[a],n);return r}const Hk=(e,t,r,{allOwnKeys:n}={})=>(Oo(t,(a,i)=>{r&&Vt(a)?e[i]=Fv(a,r):e[i]=a},{allOwnKeys:n}),e),Kk=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Gk=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Qk=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&s0(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Yk=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Zk=e=>{if(!e)return null;if(ni(e))return e;let t=e.length;if(!$v(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Xk=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&s0(Uint8Array)),Jk=(e,t)=>{const n=(e&&e[Wc]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},e4=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},t4=Ss("HTMLFormElement"),s4=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),jp=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),r4=Ss("RegExp"),Vv=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Oo(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},n4=e=>{Vv(e,(t,r)=>{if(Vt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Vt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},a4=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return ni(e)?n(e):n(String(e).split(t)),r},i4=()=>{},o4=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function l4(e){return!!(e&&Vt(e.append)&&e[Ov]==="FormData"&&e[Wc])}const c4=e=>{const t=new Array(10),r=(n,a)=>{if(Fo(n)){if(t.indexOf(n)>=0)return;if(Lo(n))return n;if(!("toJSON"in n)){t[a]=n;const i=ni(n)?[]:{};return Oo(n,(o,l)=>{const c=r(o,a+1);!Ua(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(e,0)},d4=Ss("AsyncFunction"),u4=e=>e&&(Fo(e)||Vt(e))&&Vt(e.then)&&Vt(e.catch),Uv=((e,t)=>e?setImmediate:t?((r,n)=>(wn.addEventListener("message",({source:a,data:i})=>{a===wn&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),wn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vt(wn.postMessage)),m4=typeof queueMicrotask<"u"?queueMicrotask.bind(wn):typeof process<"u"&&process.nextTick||Uv,h4=e=>e!=null&&Vt(e[Wc]),H={isArray:ni,isArrayBuffer:Bv,isBuffer:Lo,isFormData:$k,isArrayBufferView:Pk,isString:Ak,isNumber:$v,isBoolean:Mk,isObject:Fo,isPlainObject:Tl,isEmptyObject:Rk,isReadableStream:zk,isRequest:Vk,isResponse:Uk,isHeaders:Wk,isUndefined:Ua,isDate:Dk,isFile:Lk,isBlob:Fk,isRegExp:r4,isFunction:Vt,isStream:Bk,isURLSearchParams:Ik,isTypedArray:Xk,isFileList:Ok,forEach:Oo,merge:xm,extend:Hk,trim:qk,stripBOM:Kk,inherits:Gk,toFlatObject:Qk,kindOf:qc,kindOfTest:Ss,endsWith:Yk,toArray:Zk,forEachEntry:Jk,matchAll:e4,isHTMLForm:t4,hasOwnProperty:jp,hasOwnProp:jp,reduceDescriptors:Vv,freezeMethods:n4,toObjectSet:a4,toCamelCase:s4,noop:i4,toFiniteNumber:o4,findKey:Iv,global:wn,isContextDefined:zv,isSpecCompliantForm:l4,toJSONObject:c4,isAsyncFn:d4,isThenable:u4,setImmediate:Uv,asap:m4,isIterable:h4};function xe(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}H.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const Wv=xe.prototype,qv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qv[e]={value:e}});Object.defineProperties(xe,qv);Object.defineProperty(Wv,"isAxiosError",{value:!0});xe.from=(e,t,r,n,a,i)=>{const o=Object.create(Wv);H.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return xe.call(o,l,c,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const f4=null;function gm(e){return H.isPlainObject(e)||H.isArray(e)}function Hv(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function Np(e,t,r){return e?e.concat(t).map(function(a,i){return a=Hv(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function p4(e){return H.isArray(e)&&!e.some(gm)}const x4=H.toFlatObject(H,{},null,function(t){return/^is[A-Z]/.test(t)});function Kc(e,t,r){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=H.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,w){return!H.isUndefined(w[p])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(H.isDate(v))return v.toISOString();if(H.isBoolean(v))return v.toString();if(!c&&H.isBlob(v))throw new xe("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(v)||H.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,p,w){let g=v;if(v&&!w&&typeof v=="object"){if(H.endsWith(p,"{}"))p=n?p:p.slice(0,-2),v=JSON.stringify(v);else if(H.isArray(v)&&p4(v)||(H.isFileList(v)||H.endsWith(p,"[]"))&&(g=H.toArray(v)))return p=Hv(p),g.forEach(function(b,j){!(H.isUndefined(b)||b===null)&&t.append(o===!0?Np([p],j,i):o===null?p:p+"[]",d(b))}),!1}return gm(v)?!0:(t.append(Np(w,p,i),d(v)),!1)}const m=[],h=Object.assign(x4,{defaultVisitor:u,convertValue:d,isVisitable:gm});function y(v,p){if(!H.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(v),H.forEach(v,function(g,x){(!(H.isUndefined(g)||g===null)&&a.call(t,g,H.isString(x)?x.trim():x,p,h))===!0&&y(g,p?p.concat(x):[x])}),m.pop()}}if(!H.isObject(e))throw new TypeError("data must be an object");return y(e),t}function _p(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function r0(e,t){this._pairs=[],e&&Kc(e,this,t)}const Kv=r0.prototype;Kv.append=function(t,r){this._pairs.push([t,r])};Kv.toString=function(t){const r=t?function(n){return t.call(this,n,_p)}:_p;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function g4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gv(e,t,r){if(!t)return e;const n=r&&r.encode||g4;H.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=H.isURLSearchParams(t)?t.toString():new r0(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class kp{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){H.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Qv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},y4=typeof URLSearchParams<"u"?URLSearchParams:r0,b4=typeof FormData<"u"?FormData:null,v4=typeof Blob<"u"?Blob:null,w4={isBrowser:!0,classes:{URLSearchParams:y4,FormData:b4,Blob:v4},protocols:["http","https","file","blob","url","data"]},n0=typeof window<"u"&&typeof document<"u",ym=typeof navigator=="object"&&navigator||void 0,j4=n0&&(!ym||["ReactNative","NativeScript","NS"].indexOf(ym.product)<0),N4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_4=n0&&window.location.href||"http://localhost",k4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:n0,hasStandardBrowserEnv:j4,hasStandardBrowserWebWorkerEnv:N4,navigator:ym,origin:_4},Symbol.toStringTag,{value:"Module"})),jt={...k4,...w4};function C4(e,t){return Kc(e,new jt.classes.URLSearchParams,{visitor:function(r,n,a,i){return jt.isNode&&H.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function S4(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function T4(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function Yv(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&H.isArray(a)?a.length:o,c?(H.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!H.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&H.isArray(a[o])&&(a[o]=T4(a[o])),!l)}if(H.isFormData(e)&&H.isFunction(e.entries)){const r={};return H.forEachEntry(e,(n,a)=>{t(S4(n),a,r,0)}),r}return null}function E4(e,t,r){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Bo={transitional:Qv,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=H.isObject(t);if(i&&H.isHTMLForm(t)&&(t=new FormData(t)),H.isFormData(t))return a?JSON.stringify(Yv(t)):t;if(H.isArrayBuffer(t)||H.isBuffer(t)||H.isStream(t)||H.isFile(t)||H.isBlob(t)||H.isReadableStream(t))return t;if(H.isArrayBufferView(t))return t.buffer;if(H.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return C4(t,this.formSerializer).toString();if((l=H.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Kc(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),E4(t)):t}],transformResponse:[function(t){const r=this.transitional||Bo.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(H.isResponse(t)||H.isReadableStream(t))return t;if(t&&H.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?xe.from(l,xe.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jt.classes.FormData,Blob:jt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],e=>{Bo.headers[e]={}});const P4=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),A4=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&P4[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Cp=Symbol("internals");function bi(e){return e&&String(e).trim().toLowerCase()}function El(e){return e===!1||e==null?e:H.isArray(e)?e.map(El):String(e)}function M4(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const R4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Md(e,t,r,n,a){if(H.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!H.isString(t)){if(H.isString(n))return t.indexOf(n)!==-1;if(H.isRegExp(n))return n.test(t)}}function D4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function L4(e,t){const r=H.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Ut=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=bi(c);if(!u)throw new Error("header name must be a non-empty string");const m=H.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=El(l))}const o=(l,c)=>H.forEach(l,(d,u)=>i(d,u,c));if(H.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(H.isString(t)&&(t=t.trim())&&!R4(t))o(A4(t),r);else if(H.isObject(t)&&H.isIterable(t)){let l={},c,d;for(const u of t){if(!H.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?H.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=bi(t),t){const n=H.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return M4(a);if(H.isFunction(r))return r.call(this,a,n);if(H.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=bi(t),t){const n=H.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Md(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=bi(o),o){const l=H.findKey(n,o);l&&(!r||Md(n,n[l],l,r))&&(delete n[l],a=!0)}}return H.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Md(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return H.forEach(this,(a,i)=>{const o=H.findKey(n,i);if(o){r[o]=El(a),delete r[i];return}const l=t?D4(i):String(i).trim();l!==i&&delete r[i],r[l]=El(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return H.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&H.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Cp]=this[Cp]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=bi(o);n[l]||(L4(a,o),n[l]=!0)}return H.isArray(t)?t.forEach(i):i(t),this}};Ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(Ut.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});H.freezeMethods(Ut);function Rd(e,t){const r=this||Bo,n=t||r,a=Ut.from(n.headers);let i=n.data;return H.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Zv(e){return!!(e&&e.__CANCEL__)}function ai(e,t,r){xe.call(this,e??"canceled",xe.ERR_CANCELED,t,r),this.name="CanceledError"}H.inherits(ai,xe,{__CANCEL__:!0});function Xv(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new xe("Request failed with status code "+r.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function F4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function O4(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let m=i,h=0;for(;m!==a;)h+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const y=u&&d-u;return y?Math.round(h*1e3/y):void 0}}function B4(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const lc=(e,t,r=3)=>{let n=0;const a=O4(50,250);return B4(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},r)},Sp=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Tp=e=>(...t)=>H.asap(()=>e(...t)),$4=jt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,jt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(jt.origin),jt.navigator&&/(msie|trident)/i.test(jt.navigator.userAgent)):()=>!0,I4=jt.hasStandardBrowserEnv?{write(e,t,r,n,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];H.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),H.isString(n)&&l.push(`path=${n}`),H.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),H.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function z4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function V4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Jv(e,t,r){let n=!z4(t);return e&&(n||r==!1)?V4(e,t):t}const Ep=e=>e instanceof Ut?{...e}:e;function Wn(e,t){t=t||{};const r={};function n(d,u,m,h){return H.isPlainObject(d)&&H.isPlainObject(u)?H.merge.call({caseless:h},d,u):H.isPlainObject(u)?H.merge({},u):H.isArray(u)?u.slice():u}function a(d,u,m,h){if(H.isUndefined(u)){if(!H.isUndefined(d))return n(void 0,d,m,h)}else return n(d,u,m,h)}function i(d,u){if(!H.isUndefined(u))return n(void 0,u)}function o(d,u){if(H.isUndefined(u)){if(!H.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>a(Ep(d),Ep(u),m,!0)};return H.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||a,h=m(e[u],t[u],u);H.isUndefined(h)&&m!==l||(r[u]=h)}),r}const e1=e=>{const t=Wn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Ut.from(o),t.url=Gv(Jv(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),H.isFormData(r)){if(jt.hasStandardBrowserEnv||jt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(H.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,m])=>{d.includes(u.toLowerCase())&&o.set(u,m)})}}if(jt.hasStandardBrowserEnv&&(n&&H.isFunction(n)&&(n=n(t)),n||n!==!1&&$4(t.url))){const c=a&&i&&I4.read(i);c&&o.set(a,c)}return t},U4=typeof XMLHttpRequest<"u",W4=U4&&function(e){return new Promise(function(r,n){const a=e1(e);let i=a.data;const o=Ut.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,h,y,v;function p(){y&&y(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function g(){if(!w)return;const b=Ut.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:b,config:e,request:w};Xv(function(T){r(T),p()},function(T){n(T),p()},N),w=null}"onloadend"in w?w.onloadend=g:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(g)},w.onabort=function(){w&&(n(new xe("Request aborted",xe.ECONNABORTED,e,w)),w=null)},w.onerror=function(j){const N=j&&j.message?j.message:"Network Error",_=new xe(N,xe.ERR_NETWORK,e,w);_.event=j||null,n(_),w=null},w.ontimeout=function(){let j=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||Qv;a.timeoutErrorMessage&&(j=a.timeoutErrorMessage),n(new xe(j,N.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&H.forEach(o.toJSON(),function(j,N){w.setRequestHeader(N,j)}),H.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),d&&([h,v]=lc(d,!0),w.addEventListener("progress",h)),c&&w.upload&&([m,y]=lc(c),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(u=b=>{w&&(n(!b||b.type?new ai(null,e,w):b),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const x=F4(a.url);if(x&&jt.protocols.indexOf(x)===-1){n(new xe("Unsupported protocol "+x+":",xe.ERR_BAD_REQUEST,e));return}w.send(i||null)})},q4=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof xe?u:new ai(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new xe(`timeout ${t} of ms exceeded`,xe.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>H.asap(l),c}},H4=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},K4=async function*(e,t){for await(const r of G4(e))yield*H4(r,t)},G4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Pp=(e,t,r,n)=>{const a=K4(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(r){let h=i+=m;r(h)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Ap=64*1024,{isFunction:ll}=H,Q4=(({Request:e,Response:t})=>({Request:e,Response:t}))(H.global),{ReadableStream:Mp,TextEncoder:Rp}=H.global,Dp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Y4=e=>{e=H.merge.call({skipUndefined:!0},Q4,e);const{fetch:t,Request:r,Response:n}=e,a=t?ll(t):typeof fetch=="function",i=ll(r),o=ll(n);if(!a)return!1;const l=a&&ll(Mp),c=a&&(typeof Rp=="function"?(v=>p=>v.encode(p))(new Rp):async v=>new Uint8Array(await new r(v).arrayBuffer())),d=i&&l&&Dp(()=>{let v=!1;const p=new r(jt.origin,{body:new Mp,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!p}),u=o&&l&&Dp(()=>H.isReadableStream(new n("").body)),m={stream:u&&(v=>v.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!m[v]&&(m[v]=(p,w)=>{let g=p&&p[v];if(g)return g.call(p);throw new xe(`Response type '${v}' is not supported`,xe.ERR_NOT_SUPPORT,w)})});const h=async v=>{if(v==null)return 0;if(H.isBlob(v))return v.size;if(H.isSpecCompliantForm(v))return(await new r(jt.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(H.isArrayBufferView(v)||H.isArrayBuffer(v))return v.byteLength;if(H.isURLSearchParams(v)&&(v=v+""),H.isString(v))return(await c(v)).byteLength},y=async(v,p)=>{const w=H.toFiniteNumber(v.getContentLength());return w??h(p)};return async v=>{let{url:p,method:w,data:g,signal:x,cancelToken:b,timeout:j,onDownloadProgress:N,onUploadProgress:_,responseType:T,headers:E,withCredentials:z="same-origin",fetchOptions:k}=e1(v),G=t||fetch;T=T?(T+"").toLowerCase():"text";let M=q4([x,b&&b.toAbortSignal()],j),F=null;const D=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let $;try{if(_&&d&&w!=="get"&&w!=="head"&&($=await y(E,g))!==0){let P=new r(p,{method:"POST",body:g,duplex:"half"}),A;if(H.isFormData(g)&&(A=P.headers.get("content-type"))&&E.setContentType(A),P.body){const[Y,V]=Sp($,lc(Tp(_)));g=Pp(P.body,Ap,Y,V)}}H.isString(z)||(z=z?"include":"omit");const q=i&&"credentials"in r.prototype,I={...k,signal:M,method:w.toUpperCase(),headers:E.normalize().toJSON(),body:g,duplex:"half",credentials:q?z:void 0};F=i&&new r(p,I);let S=await(i?G(F,k):G(p,I));const C=u&&(T==="stream"||T==="response");if(u&&(N||C&&D)){const P={};["status","statusText","headers"].forEach(O=>{P[O]=S[O]});const A=H.toFiniteNumber(S.headers.get("content-length")),[Y,V]=N&&Sp(A,lc(Tp(N),!0))||[];S=new n(Pp(S.body,Ap,Y,()=>{V&&V(),D&&D()}),P)}T=T||"text";let B=await m[H.findKey(m,T)||"text"](S,v);return!C&&D&&D(),await new Promise((P,A)=>{Xv(P,A,{data:B,headers:Ut.from(S.headers),status:S.status,statusText:S.statusText,config:v,request:F})})}catch(q){throw D&&D(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,v,F),{cause:q.cause||q}):xe.from(q,q&&q.code,v,F)}}},Z4=new Map,t1=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,l=o,c,d,u=Z4;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:Y4(t)),u=d;return d};t1();const a0={http:f4,xhr:W4,fetch:{get:t1}};H.forEach(a0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Lp=e=>`- ${e}`,X4=e=>H.isFunction(e)||e===null||e===!1;function J4(e,t){e=H.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let l;if(a=n,!X4(n)&&(a=a0[(l=String(n)).toLowerCase()],a===void 0))throw new xe(`Unknown adapter '${l}'`);if(a&&(H.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Lp).join(`
`):" "+Lp(o[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const s1={getAdapter:J4,adapters:a0};function Dd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ai(null,e)}function Fp(e){return Dd(e),e.headers=Ut.from(e.headers),e.data=Rd.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),s1.getAdapter(e.adapter||Bo.adapter,e)(e).then(function(n){return Dd(e),n.data=Rd.call(e,e.transformResponse,n),n.headers=Ut.from(n.headers),n},function(n){return Zv(n)||(Dd(e),n&&n.response&&(n.response.data=Rd.call(e,e.transformResponse,n.response),n.response.headers=Ut.from(n.response.headers))),Promise.reject(n)})}const r1="1.13.1",Gc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Gc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Op={};Gc.transitional=function(t,r,n){function a(i,o){return"[Axios v"+r1+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new xe(a(o," has been removed"+(r?" in "+r:"")),xe.ERR_DEPRECATED);return r&&!Op[o]&&(Op[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Gc.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function e5(e,t,r){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new xe("option "+i+" must be "+c,xe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new xe("Unknown option "+i,xe.ERR_BAD_OPTION)}}const Pl={assertOptions:e5,validators:Gc},Es=Pl.validators;let Dn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kp,response:new kp}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Wn(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Pl.assertOptions(n,{silentJSONParsing:Es.transitional(Es.boolean),forcedJSONParsing:Es.transitional(Es.boolean),clarifyTimeoutError:Es.transitional(Es.boolean)},!1),a!=null&&(H.isFunction(a)?r.paramsSerializer={serialize:a}:Pl.assertOptions(a,{encode:Es.function,serialize:Es.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Pl.assertOptions(r,{baseUrl:Es.spelling("baseURL"),withXsrfToken:Es.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&H.merge(i.common,i[r.method]);i&&H.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=Ut.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,m=0,h;if(!c){const v=[Fp.bind(this),void 0];for(v.unshift(...l),v.push(...d),h=v.length,u=Promise.resolve(r);m<h;)u=u.then(v[m++],v[m++]);return u}h=l.length;let y=r;for(;m<h;){const v=l[m++],p=l[m++];try{y=v(y)}catch(w){p.call(this,w);break}}try{u=Fp.call(this,y)}catch(v){return Promise.reject(v)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Wn(this.defaults,t);const r=Jv(t.baseURL,t.url,t.allowAbsoluteUrls);return Gv(r,t.params,t.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(t){Dn.prototype[t]=function(r,n){return this.request(Wn(n||{},{method:t,url:r,data:(n||{}).data}))}});H.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Wn(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Dn.prototype[t]=r(),Dn.prototype[t+"Form"]=r(!0)});let t5=class n1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new ai(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new n1(function(a){t=a}),cancel:t}}};function s5(e){return function(r){return e.apply(null,r)}}function r5(e){return H.isObject(e)&&e.isAxiosError===!0}const bm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(bm).forEach(([e,t])=>{bm[t]=e});function a1(e){const t=new Dn(e),r=Fv(Dn.prototype.request,t);return H.extend(r,Dn.prototype,t,{allOwnKeys:!0}),H.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return a1(Wn(e,a))},r}const J=a1(Bo);J.Axios=Dn;J.CanceledError=ai;J.CancelToken=t5;J.isCancel=Zv;J.VERSION=r1;J.toFormData=Kc;J.AxiosError=xe;J.Cancel=J.CanceledError;J.all=function(t){return Promise.all(t)};J.spread=s5;J.isAxiosError=r5;J.mergeConfig=Wn;J.AxiosHeaders=Ut;J.formToJSON=e=>Yv(H.isHTMLForm(e)?new FormData(e):e);J.getAdapter=s1.getAdapter;J.HttpStatusCode=bm;J.default=J;const{Axios:tP,AxiosError:sP,CanceledError:rP,isCancel:nP,CancelToken:aP,VERSION:iP,all:oP,Cancel:lP,isAxiosError:cP,spread:dP,toFormData:uP,AxiosHeaders:mP,HttpStatusCode:hP,formToJSON:fP,getAdapter:pP,mergeConfig:xP}=J,n5={current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0,user_type:null},error_message:null},Bp={service_id:null,service_name:null,selected_date:null,selected_time:null,customer_name:null,customer_email:null,customer_phone:null,booking_for_name:null,special_request:null,inspiration_photos:null,step_completed:0},qt={shop_name:"Master Fade",shop_address:"13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5",shop_phone:"+353833276229",shop_email:"info@masterfade.ie",operating_hours:"10:00 AM - 3:00 PM",capacity_mon_wed:2,capacity_thu_sun:3,booking_window_days:90,same_day_cutoff_hours:2,reminder_hours_before:2,services_enabled:!0,gallery_enabled:!0},dn=()=>"http://localhost:3000",Ld=e=>({id:e.user_id,email:e.email,name:e.name,phone:e.phone,is_verified:e.is_verified,created_at:e.created_at}),ee=kk()(Tk((e,t)=>({authentication_state:n5,booking_context:Bp,app_settings:qt,login_user:async(r,n)=>{var a,i;e(o=>({authentication_state:{...o.authentication_state,authentication_status:{...o.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const o=await J.post(`${dn()}/api/auth/login`,{email:r,password:n},{headers:{"Content-Type":"application/json"}}),{user:l,token:c}=o.data,d=Ld(l);e(()=>({authentication_state:{current_user:d,auth_token:c,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}}))}catch(o){const l=((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||o.message||"Login failed";throw e(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:l}})),new Error(l)}},login_admin:async(r,n,a)=>{var i,o;e(l=>({authentication_state:{...l.authentication_state,authentication_status:{...l.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const l={email:r,password:n};a&&(l.two_factor_code=a);const c=await J.post(`${dn()}/api/admin/login`,l,{headers:{"Content-Type":"application/json"}});if(c.data.requires_2fa)return e(h=>({authentication_state:{...h.authentication_state,authentication_status:{...h.authentication_state.authentication_status,is_loading:!1},error_message:"Two-factor authentication required"}})),{requires_2fa:!0};const{admin:d,token:u}=c.data,m={id:d.admin_id,email:d.email,name:d.name||"Admin",phone:d.phone||"",is_verified:!0,created_at:d.created_at||new Date().toISOString()};return e(()=>({authentication_state:{current_user:m,auth_token:u,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"admin"},error_message:null}})),{requires_2fa:!1}}catch(l){const c=((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||l.message||"Admin login failed";throw e(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:c}})),new Error(c)}},register_user:async(r,n,a,i)=>{var o,l;e(c=>({authentication_state:{...c.authentication_state,authentication_status:{...c.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const c=await J.post(`${dn()}/api/auth/register`,{email:r,password:n,name:a,phone:i},{headers:{"Content-Type":"application/json"}}),{user:d,token:u}=c.data,m=Ld(d);e(()=>({authentication_state:{current_user:m,auth_token:u,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}}))}catch(c){const d=((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||c.message||"Registration failed";throw e(u=>({authentication_state:{...u.authentication_state,authentication_status:{...u.authentication_state.authentication_status,is_loading:!1},error_message:d}})),new Error(d)}},logout:()=>{const{authentication_state:r}=t(),n=r.auth_token;n&&J.post(`${dn()}/api/auth/logout`,{},{headers:{Authorization:`Bearer ${n}`}}).catch(()=>{}),e({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null}})},initialize_auth:async()=>{const{authentication_state:r}=t(),n=r.auth_token,a=r.authentication_status.user_type;if(!n){e(i=>({authentication_state:{...i.authentication_state,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null}}}));return}try{if(a==="admin"){const i=r.current_user;if(i){e(()=>({authentication_state:{current_user:i,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"admin"},error_message:null}}));return}else throw new Error("Admin user data not found")}else{const i=await J.get(`${dn()}/api/auth/me`,{headers:{Authorization:`Bearer ${n}`}}),{user:o}=i.data,l=Ld(o);e(()=>({authentication_state:{current_user:l,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null}}));return}}catch{e({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1,user_type:null},error_message:null}})}},clear_auth_error:()=>{e(r=>({authentication_state:{...r.authentication_state,error_message:null}}))},update_current_user:r=>{e(n=>({authentication_state:{...n.authentication_state,current_user:n.authentication_state.current_user?{...n.authentication_state.current_user,...r}:null}}))},update_booking_context:r=>{e(n=>{const a={...n.booking_context,...r};return console.log("[Booking Context Update]",{previous:n.booking_context,updates:r,result:a}),{booking_context:a}})},clear_booking_context:()=>{e({booking_context:Bp})},set_booking_step:r=>{e(n=>({booking_context:{...n.booking_context,step_completed:r}}))},populate_booking_from_user:()=>{const{authentication_state:r}=t(),n=r.current_user;n&&e(a=>({booking_context:{...a.booking_context,customer_name:n.name,customer_email:n.email,customer_phone:n.phone}}))},fetch_app_settings:async()=>{try{const{authentication_state:r}=t(),n=r.authentication_status.user_type==="admin",a=r.auth_token;let i;n&&a?i=await J.get(`${dn()}/api/admin/settings`,{headers:{Authorization:`Bearer ${a}`}}):i=await J.get(`${dn()}/api/settings`);const o=i.data;e({app_settings:{shop_name:o.shop_name||qt.shop_name,shop_address:o.shop_address||qt.shop_address,shop_phone:o.shop_phone||qt.shop_phone,shop_email:o.shop_email||qt.shop_email,operating_hours:o.operating_hours||qt.operating_hours,capacity_mon_wed:o.capacity_mon_wed??qt.capacity_mon_wed,capacity_thu_sun:o.capacity_thu_sun??qt.capacity_thu_sun,booking_window_days:o.booking_window_days??qt.booking_window_days,same_day_cutoff_hours:o.same_day_cutoff_hours??qt.same_day_cutoff_hours,reminder_hours_before:o.reminder_hours_before??qt.reminder_hours_before,services_enabled:o.services_enabled??qt.services_enabled,gallery_enabled:o.gallery_enabled??qt.gallery_enabled}})}catch(r){console.error("Failed to fetch app settings:",r)}},update_app_settings:r=>{e(n=>({app_settings:{...n.app_settings,...r}}))}}),{name:"barberslot-storage",partialize:e=>({authentication_state:{current_user:e.authentication_state.current_user,auth_token:e.authentication_state.auth_token,authentication_status:{is_authenticated:e.authentication_state.authentication_status.is_authenticated,is_loading:!1,user_type:e.authentication_state.authentication_status.user_type},error_message:null},booking_context:e.booking_context})}));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i1=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...i5,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:i1("lucide",a),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(e,t)=>{const r=f.forwardRef(({className:n,...a},i)=>f.createElement(o5,{ref:i,iconNode:t,className:i1(`lucide-${a5(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=de("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=de("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=de("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=de("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=de("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=de("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=de("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=de("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=de("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=de("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=de("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=de("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=de("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=de("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=de("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=de("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=de("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=de("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=de("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=de("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=de("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_5=()=>{const[e,t]=f.useState(!1),[r,n]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(!1),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),m=Le(),h=ur(),y=ee(D=>D.authentication_state.authentication_status.is_authenticated),v=ee(D=>D.authentication_state.authentication_status.user_type),p=ee(D=>D.authentication_state.current_user),w=ee(D=>D.app_settings.shop_name),g=ee(D=>D.app_settings.services_enabled),x=ee(D=>D.logout),b=()=>{x(),m(v==="admin"?"/admin/login":"/"),n(!1),i(!1)},j=()=>{n(!r),i(!1),l(!1)},N=()=>{i(!a),n(!1),l(!1)},_=()=>{l(!o),n(!1),i(!1)},T=()=>{t(!e)},E=()=>g?"/book/service":"/book/date",z=()=>y&&v==="admin"?"/admin":"/",k=D=>h.pathname===D;f.useEffect(()=>{const D=$=>{c.current&&!c.current.contains($.target)&&n(!1),d.current&&!d.current.contains($.target)&&i(!1),u.current&&!u.current.contains($.target)&&l(!1)};return(r||a||o)&&document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[r,a,o]),f.useEffect(()=>{const D=$=>{$.key==="Escape"&&(n(!1),i(!1),l(!1),t(!1))};return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[]),f.useEffect(()=>{const D=()=>{window.innerWidth>=768&&e&&t(!1)};return window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}},[e]);const G=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[s.jsx(Q,{to:E(),className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k(E())?"text-blue-600 font-semibold":""}`,children:"Book Now"}),s.jsx(Q,{to:"/gallery",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/gallery")?"text-blue-600 font-semibold":""}`,children:"Our Work"}),s.jsx(Q,{to:"/search",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/search")?"text-blue-600 font-semibold":""}`,children:"Find My Booking"})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[s.jsx(Q,{to:"/login",className:"text-gray-700 hover:text-gray-900 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Log In"}),s.jsx(Q,{to:"/register",className:"bg-blue-600 text-white hover:bg-blue-700 px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Sign Up"})]})]}),M=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[s.jsx(Q,{to:E(),className:"bg-blue-600 text-white hover:bg-blue-700 px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Book Appointment"}),s.jsx(Q,{to:"/dashboard",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/dashboard")?"text-blue-600 font-semibold":""}`,children:"My Bookings"}),s.jsx(Q,{to:"/gallery",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/gallery")?"text-blue-600 font-semibold":""}`,children:"Gallery"})]}),s.jsxs("div",{className:"hidden md:block relative",ref:c,children:[s.jsxs("button",{onClick:j,onKeyDown:D=>D.key==="Enter"&&j(),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors","aria-label":"User menu","aria-expanded":r,"aria-haspopup":"true",children:[s.jsx(qn,{size:20}),s.jsx("span",{className:"max-w-32 truncate",children:(p==null?void 0:p.name)||(p==null?void 0:p.email)}),s.jsx(Ln,{size:16,className:`transition-transform ${r?"rotate-180":""}`})]}),r&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[s.jsx(Q,{to:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>n(!1),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($p,{size:16}),s.jsx("span",{children:"Dashboard"})]})}),s.jsx(Q,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>n(!1),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(g5,{size:16}),s.jsx("span",{children:"Profile Settings"})]})}),s.jsx("hr",{className:"my-1 border-gray-200"}),s.jsx("button",{onClick:b,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ip,{size:16}),s.jsx("span",{children:"Logout"})]})})]})]})]}),F=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[s.jsx(Q,{to:"/admin",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/admin")?"text-blue-600 font-semibold":""}`,children:"Dashboard"}),s.jsxs("div",{className:"relative",ref:u,children:[s.jsxs("button",{onClick:_,onKeyDown:D=>D.key==="Enter"&&_(),className:`flex items-center space-x-1 text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${h.pathname.startsWith("/admin/bookings")?"text-blue-600 font-semibold":""}`,"aria-label":"Bookings menu","aria-expanded":o,"aria-haspopup":"true",children:[s.jsx("span",{children:"Bookings"}),s.jsx(Ln,{size:16,className:`transition-transform ${o?"rotate-180":""}`})]}),o&&s.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[s.jsx(Q,{to:"/admin/bookings/calendar",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Je,{size:16}),s.jsx("span",{children:"Calendar View"})]})}),s.jsx(Q,{to:"/admin/bookings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>l(!1),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Je,{size:16}),s.jsx("span",{children:"List View"})]})})]})]}),s.jsx(Q,{to:"/admin/customers",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/admin/customers")?"text-blue-600 font-semibold":""}`,children:"Customers"}),s.jsx(Q,{to:"/admin/gallery",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/admin/gallery")?"text-blue-600 font-semibold":""}`,children:"Gallery"}),s.jsx(Q,{to:"/admin/settings",className:`text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors ${k("/admin/settings")?"text-blue-600 font-semibold":""}`,children:"Settings"})]}),s.jsxs("div",{className:"hidden md:block relative",ref:d,children:[s.jsxs("button",{onClick:N,onKeyDown:D=>D.key==="Enter"&&N(),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors","aria-label":"Admin menu","aria-expanded":a,"aria-haspopup":"true",children:[s.jsx("div",{className:"bg-blue-600 text-white rounded-full p-1",children:s.jsx(qn,{size:16})}),s.jsx("span",{className:"max-w-32 truncate",children:(p==null?void 0:p.name)||"Admin"}),s.jsx(Ln,{size:16,className:`transition-transform ${a?"rotate-180":""}`})]}),a&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200",children:[s.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>i(!1),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($p,{size:16}),s.jsx("span",{children:"View Public Site"})]})}),s.jsx("hr",{className:"my-1 border-gray-200"}),s.jsx("button",{onClick:b,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ip,{size:16}),s.jsx("span",{children:"Logout"})]})})]})]})]});return s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-md z-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Skip to main content"}),s.jsxs("nav",{className:"bg-white shadow-sm sticky top-0 z-40",role:"navigation","aria-label":"Main navigation",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx(Q,{to:z(),className:"text-xl font-bold text-gray-900 hover:text-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md px-2 py-1",children:w})}),s.jsxs("div",{className:"flex items-center space-x-8",children:[!y&&G(),y&&v==="user"&&M(),y&&v==="admin"&&F()]}),s.jsx("div",{className:"md:hidden",children:s.jsx("button",{onClick:T,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 transition-colors","aria-label":"Toggle mobile menu","aria-expanded":e,"data-testid":"mobile-menu-button",children:e?s.jsx(Nt,{size:24,"data-testid":"close-icon"}):s.jsx(x5,{size:24,"data-testid":"menu-icon"})})})]})}),e&&s.jsx("div",{className:"md:hidden border-t border-gray-200 bg-white","data-testid":"mobile-menu-panel",children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[!y&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:E(),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Book Now"}),s.jsx(Q,{to:"/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Our Work"}),s.jsx(Q,{to:"/search",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Find My Booking"}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[s.jsx(Q,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Log In"}),s.jsx(Q,{to:"/register",className:"block px-3 py-2 rounded-md text-base font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors text-center",onClick:()=>t(!1),children:"Sign Up"})]})]}),y&&v==="user"&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:E(),className:"block px-3 py-2 rounded-md text-base font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors text-center",onClick:()=>t(!1),children:"Book Appointment"}),s.jsx(Q,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"My Bookings"}),s.jsx(Q,{to:"/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Gallery"}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[s.jsx(Q,{to:"/profile",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Profile Settings"}),s.jsx("button",{onClick:()=>{b(),t(!1)},className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]}),y&&v==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/admin",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Dashboard"}),s.jsx(Q,{to:"/admin/bookings/calendar",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Calendar View"}),s.jsx(Q,{to:"/admin/bookings",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Bookings List"}),s.jsx(Q,{to:"/admin/customers",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Customers"}),s.jsx(Q,{to:"/admin/gallery",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Gallery"}),s.jsx(Q,{to:"/admin/settings",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"Settings"}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[s.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:"View Public Site"}),s.jsx("button",{onClick:()=>{b(),t(!1)},className:"w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 transition-colors",children:"Logout"})]})]})]})})]})]})},k5=()=>{const e=ee(_=>_.app_settings.shop_name),t=ee(_=>_.app_settings.shop_address),r=ee(_=>_.app_settings.shop_phone),n=ee(_=>_.app_settings.shop_email),a=ee(_=>_.app_settings.operating_hours),i=ee(_=>_.app_settings.social_facebook),o=ee(_=>_.app_settings.social_instagram),l=ee(_=>_.app_settings.social_twitter),c=ee(_=>_.authentication_state.authentication_status.user_type),[d,u]=f.useState(!1),[m,h]=f.useState(!1),[y,v]=f.useState(!1),p=c!=="admin",w=new Date().getFullYear(),g=t?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`:"#",x=()=>{u(!0),h(!1),v(!1)},b=()=>{h(!0),u(!1),v(!1)},j=()=>{v(!0),u(!1),h(!1)},N=()=>{u(!1),h(!1),v(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("footer",{className:"bg-gray-900 text-gray-300 border-t border-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:e}),t&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsxs("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors text-sm leading-relaxed",children:t})]}),r&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("a",{href:`tel:${r}`,className:"text-gray-300 hover:text-white transition-colors text-sm",children:r})]}),n&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("a",{href:`mailto:${n}`,className:"text-gray-300 hover:text-white transition-colors text-sm",children:n})]}),a&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:a})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Quick Links"}),s.jsxs("nav",{className:"flex flex-col space-y-3",children:[s.jsx(Q,{to:"/book/service",className:"text-gray-300 hover:text-white transition-colors text-sm py-1 inline-block",children:"Book Appointment"}),s.jsx(Q,{to:"/search",className:"text-gray-300 hover:text-white transition-colors text-sm py-1 inline-block",children:"Find Booking"}),s.jsx(Q,{to:"/gallery",className:"text-gray-300 hover:text-white transition-colors text-sm py-1 inline-block",children:"Gallery"}),s.jsx(Q,{to:"/#about",className:"text-gray-300 hover:text-white transition-colors text-sm py-1 inline-block",children:"About"}),p&&s.jsx(Q,{to:"/admin/login",className:"text-gray-400 hover:text-gray-300 transition-colors text-xs py-1 inline-block",children:"Admin Login"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Legal"}),s.jsxs("nav",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:x,className:"text-gray-300 hover:text-white transition-colors text-sm py-1 text-left",children:"Terms of Service"}),s.jsx("button",{onClick:b,className:"text-gray-300 hover:text-white transition-colors text-sm py-1 text-left",children:"Privacy Policy"}),s.jsx("button",{onClick:j,className:"text-gray-300 hover:text-white transition-colors text-sm py-1 text-left",children:"Cancellation Policy"}),s.jsx("a",{href:`mailto:${n||"info@barberslot.com"}`,className:"text-gray-300 hover:text-white transition-colors text-sm py-1 inline-block",children:"Contact Us"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Follow Us"}),s.jsxs("div",{className:"flex space-x-4",children:[i&&s.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Facebook",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),o&&s.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Instagram",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-pink-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),l&&s.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer","aria-label":"Follow us on Twitter",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-blue-400 transition-colors",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})})]})]})]}),s.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-800 text-center text-sm text-gray-400",children:[s.jsxs("p",{children:[" ",w," ",e||"Master Fade",". All rights reserved."]}),s.jsxs("p",{className:"mt-2 text-xs",children:["13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5 | ",r||"+353833276229"]})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:N,children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),s.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Terms of Service"}),s.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"prose prose-sm max-w-none text-gray-700 max-h-96 overflow-y-auto",children:[s.jsxs("p",{className:"mb-4",children:["Welcome to ",e,". By accessing and using our services, you agree to be bound by these Terms of Service."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Booking & Appointments"}),s.jsxs("p",{className:"mb-4",children:["- All bookings must be made through our online system or by phone.",s.jsx("br",{}),"- Cancellations must be made at least 2 hours before your scheduled appointment.",s.jsx("br",{}),"- No-shows may result in restrictions on future bookings."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"2. Services"}),s.jsxs("p",{className:"mb-4",children:["- Services are provided by licensed professionals.",s.jsx("br",{}),"- Service duration and pricing are subject to change.",s.jsx("br",{}),"- Special requests are accommodated when possible but not guaranteed."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Customer Conduct"}),s.jsxs("p",{className:"mb-4",children:["- Respectful behavior is required at all times.",s.jsx("br",{}),"- The shop reserves the right to refuse service.",s.jsx("br",{}),"- Damage to property will result in charges."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Liability"}),s.jsxs("p",{className:"mb-4",children:["- ",e," is not liable for personal items lost or stolen.",s.jsx("br",{}),"- We are not responsible for allergic reactions to products.",s.jsx("br",{}),"- Service results may vary based on individual hair type and condition."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Changes to Terms"}),s.jsx("p",{className:"mb-4",children:"We reserve the right to modify these terms at any time. Continued use of our services constitutes acceptance of updated terms."}),s.jsxs("p",{className:"mt-6 text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:N,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Close"})})]})]})}),m&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:N,children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),s.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Privacy Policy"}),s.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"prose prose-sm max-w-none text-gray-700 max-h-96 overflow-y-auto",children:[s.jsxs("p",{className:"mb-4",children:["At ",e,", we are committed to protecting your privacy. This policy explains how we collect, use, and safeguard your personal information."]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"1. Information We Collect"}),s.jsxs("p",{className:"mb-4",children:["- Name, email address, and phone number for bookings",s.jsx("br",{}),"- Appointment preferences and special requests",s.jsx("br",{}),"- Payment information (processed securely by third-party providers)",s.jsx("br",{}),"- Usage data and cookies for website functionality"]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"2. How We Use Your Information"}),s.jsxs("p",{className:"mb-4",children:["- To process and confirm your bookings",s.jsx("br",{}),"- To send appointment reminders and notifications",s.jsx("br",{}),"- To improve our services and customer experience",s.jsx("br",{}),"- To comply with legal obligations"]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"3. Information Sharing"}),s.jsxs("p",{className:"mb-4",children:["- We do not sell your personal information to third parties",s.jsx("br",{}),"- Information is shared only with service providers necessary for operations",s.jsx("br",{}),"- We may disclose information if required by law"]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"4. Data Security"}),s.jsxs("p",{className:"mb-4",children:["- We use industry-standard encryption to protect your data",s.jsx("br",{}),"- Access to personal information is restricted to authorized personnel",s.jsx("br",{}),"- Regular security audits are conducted"]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"5. Your Rights"}),s.jsxs("p",{className:"mb-4",children:["- You can access, update, or delete your personal information",s.jsx("br",{}),"- You can opt-out of marketing communications",s.jsx("br",{}),"- You can request a copy of your data"]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"6. Cookies"}),s.jsx("p",{className:"mb-4",children:"Our website uses cookies to enhance user experience. You can disable cookies in your browser settings, though this may affect functionality."}),s.jsxs("p",{className:"mt-6 text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:N,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Close"})})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:N,children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900 bg-opacity-75","aria-hidden":"true"}),s.jsxs("div",{className:"inline-block w-full max-w-3xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cancellation Policy"}),s.jsx("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1","aria-label":"Close modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"prose prose-sm max-w-none text-gray-700 max-h-96 overflow-y-auto",children:[s.jsx("p",{className:"mb-4",children:"We understand that plans can change. Please review our cancellation policy below."}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Cancellation Window"}),s.jsxs("p",{className:"mb-4",children:["You can cancel your appointment ",s.jsx("strong",{children:"up to 2 hours before"})," your scheduled time without any penalty. Cancellations can be made through:"]}),s.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[s.jsx("li",{children:"Your booking confirmation email"}),s.jsx("li",{children:"Our website using your ticket number"}),s.jsxs("li",{children:["Calling us at ",r||"(555) 123-4567"]})]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Late Cancellations"}),s.jsxs("p",{className:"mb-4",children:["Cancellations made ",s.jsx("strong",{children:"less than 2 hours before"})," your appointment time cannot be processed online. Please contact us directly:"]}),s.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[s.jsxs("li",{children:["Phone: ",r||"(555) 123-4567"]}),s.jsxs("li",{children:["Email: ",n||"info@barberslot.com"]})]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"No-Show Policy"}),s.jsx("p",{className:"mb-4",children:"If you miss your appointment without cancelling:"}),s.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[s.jsx("li",{children:"Your booking will be marked as a no-show"}),s.jsx("li",{children:"Repeated no-shows may result in booking restrictions"}),s.jsx("li",{children:"We appreciate your understanding as this helps us serve all customers better"})]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Rescheduling"}),s.jsx("p",{className:"mb-4",children:"To reschedule your appointment:"}),s.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[s.jsx("li",{children:"Cancel your existing booking (following the 2-hour rule)"}),s.jsx("li",{children:"Create a new booking for your preferred date and time"}),s.jsx("li",{children:"Your service preferences will be saved for convenience"})]}),s.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Emergency Situations"}),s.jsx("p",{className:"mb-4",children:"We understand emergencies happen. If you need to cancel due to an emergency, please contact us as soon as possible. We'll do our best to accommodate your situation."}),s.jsxs("p",{className:"mt-6 text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:N,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Close"})})]})]})})]})},C5=()=>{const[e,t]=f.useState(!1),[r,n]=f.useState(new Set),[a,i]=f.useState(window.innerWidth<1024),o=f.useRef(null),l=f.useRef(null),c=f.useRef(null),d=f.useRef(null),u=ur(),m=Le(),h=ee(N=>N.authentication_state.authentication_status.is_authenticated),y=ee(N=>N.authentication_state.authentication_status.user_type),v=ee(N=>N.authentication_state.current_user),p=ee(N=>N.logout),w=f.useCallback(()=>{t(!1),n(new Set)},[]),g=f.useCallback(()=>{w()},[w]),x=f.useCallback(N=>{n(_=>{const T=new Set(_);return T.has(N)?T.delete(N):T.add(N),T})},[]),b=f.useCallback(()=>{p(),w(),m("/")},[p,m,w]),j=f.useCallback(N=>u.pathname===N,[u.pathname]);return f.useEffect(()=>{t(!1),n(new Set)},[u.pathname]),f.useEffect(()=>{const N=_=>{_.key==="Escape"&&e&&w()};if(e)return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[e,w]),f.useEffect(()=>{if(!e||!o.current)return;d.current=document.activeElement;const _=o.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),T=_[0],E=_[_.length-1],z=k=>{k.key==="Tab"&&(k.shiftKey?document.activeElement===T&&(k.preventDefault(),E==null||E.focus()):document.activeElement===E&&(k.preventDefault(),T==null||T.focus()))};return document.addEventListener("keydown",z),setTimeout(()=>{var k;return(k=c.current)==null?void 0:k.focus()},100),()=>{document.removeEventListener("keydown",z),d.current&&d.current.focus()}},[e]),f.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]),f.useEffect(()=>{const N=()=>t(_=>!_);return window.addEventListener("toggleMobileNav",N),()=>window.removeEventListener("toggleMobileNav",N)},[]),f.useEffect(()=>{const N=()=>{const _=window.innerWidth<1024;i(_),!_&&e&&w()};return window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[e,w]),!a&&!e?null:s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{ref:l,className:"fixed inset-0 bg-black bg-opacity-50 z-[9998] transition-opacity duration-300",onClick:g,"aria-hidden":"true"}),s.jsxs("div",{ref:o,className:`fixed top-0 left-0 h-full w-4/5 max-w-sm bg-white z-[9999] transform transition-transform duration-300 ease-in-out overflow-y-auto shadow-2xl ${e?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-label":"Mobile Navigation Menu",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),s.jsx("button",{ref:c,onClick:w,className:"p-2 rounded-md hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Close menu",children:s.jsx(Nt,{className:"h-6 w-6 text-gray-700"})})]}),h&&v&&s.jsxs("div",{className:"p-4 bg-blue-50 border-b border-blue-100",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.name}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:v.email})]}),s.jsxs("nav",{className:"py-4",role:"navigation",children:[!h&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/")?"page":void 0,children:"Home"}),s.jsx(Q,{to:"/book/service",className:"block px-6 py-3 text-base font-semibold bg-blue-600 text-white hover:bg-blue-700 transition-colors mx-4 my-2 rounded-lg text-center shadow-md",children:"Book Appointment"}),s.jsx(Q,{to:"/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/gallery")?"page":void 0,children:"Our Work"}),s.jsx(Q,{to:"/search",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/search")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/search")?"page":void 0,children:"Find My Booking"}),s.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),s.jsx(Q,{to:"/register",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/register")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/register")?"page":void 0,children:"Sign Up"}),s.jsx(Q,{to:"/login",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/login")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/login")?"page":void 0,children:"Log In"})]}),h&&y==="user"&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/dashboard",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/dashboard")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/dashboard")?"page":void 0,children:"Dashboard"}),s.jsx(Q,{to:"/book/service",className:"block px-6 py-3 text-base font-semibold bg-blue-600 text-white hover:bg-blue-700 transition-colors mx-4 my-2 rounded-lg text-center shadow-md",children:"Book Appointment"}),s.jsx(Q,{to:"/dashboard?tab=upcoming",className:`block px-6 py-3 text-base font-medium transition-colors ${u.pathname==="/dashboard"?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"My Bookings"}),s.jsx(Q,{to:"/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/gallery")?"page":void 0,children:"Gallery"}),s.jsx(Q,{to:"/profile",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/profile")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/profile")?"page":void 0,children:"Profile Settings"}),s.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),s.jsx("button",{onClick:b,className:"block w-full text-left px-6 py-3 text-base font-medium text-red-600 hover:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]}),h&&y==="admin"&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/admin",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/admin")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/admin")?"page":void 0,children:"Dashboard"}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>x("bookings"),className:"flex items-center justify-between w-full px-6 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":r.has("bookings"),"aria-controls":"bookings-submenu",children:[s.jsx("span",{children:"Bookings"}),r.has("bookings")?s.jsx(Ln,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"}):s.jsx(ds,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"})]}),r.has("bookings")&&s.jsxs("div",{id:"bookings-submenu",className:"bg-gray-50",children:[s.jsx(Q,{to:"/admin/bookings/calendar",className:`block pl-12 pr-6 py-3 text-sm font-medium transition-colors ${j("/admin/bookings/calendar")?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-100"}`,"aria-current":j("/admin/bookings/calendar")?"page":void 0,children:"Calendar View"}),s.jsx(Q,{to:"/admin/bookings",className:`block pl-12 pr-6 py-3 text-sm font-medium transition-colors ${j("/admin/bookings")?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-100"}`,"aria-current":j("/admin/bookings")?"page":void 0,children:"List View"})]})]}),s.jsx(Q,{to:"/admin/customers",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/admin/customers")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/admin/customers")?"page":void 0,children:"Customers"}),s.jsx(Q,{to:"/admin/gallery",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/admin/gallery")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/admin/gallery")?"page":void 0,children:"Gallery"}),s.jsx(Q,{to:"/admin/reports",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/admin/reports")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/admin/reports")?"page":void 0,children:"Reports"}),s.jsx(Q,{to:"/admin/settings",className:`block px-6 py-3 text-base font-medium transition-colors ${j("/admin/settings")?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,"aria-current":j("/admin/settings")?"page":void 0,children:"Settings"}),s.jsx("div",{className:"border-t border-gray-200 my-4",role:"separator"}),s.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"View Public Site"}),s.jsx("button",{onClick:b,className:"block w-full text-left px-6 py-3 text-base font-medium text-red-600 hover:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500",children:"Logout"})]})]})]})]})},ua="show-toast-notification",Up={success:(e,t,r)=>{window.dispatchEvent(new CustomEvent(ua,{detail:{type:"success",message:e,duration:t,action:r}}))},error:(e,t,r)=>{window.dispatchEvent(new CustomEvent(ua,{detail:{type:"error",message:e,duration:t,action:r}}))},warning:(e,t,r)=>{window.dispatchEvent(new CustomEvent(ua,{detail:{type:"warning",message:e,duration:t,action:r}}))},info:(e,t,r)=>{window.dispatchEvent(new CustomEvent(ua,{detail:{type:"info",message:e,duration:t,action:r}}))}},Wp={success:4e3,error:6e3,warning:6e3,info:4e3},qp={success:{bg:"bg-green-600",text:"text-white",icon:Mt},error:{bg:"bg-red-600",text:"text-white",icon:Pt},warning:{bg:"bg-amber-600",text:"text-white",icon:mc},info:{bg:"bg-blue-600",text:"text-white",icon:c1}},Hp={success:{live:"polite",role:"status"},error:{live:"assertive",role:"alert"},warning:{live:"assertive",role:"alert"},info:{live:"polite",role:"status"}},S5=()=>{const[e,t]=f.useState([]),r=f.useRef(new Map),n=f.useCallback(l=>{t(d=>d.filter(u=>u.id!==l));const c=r.current.get(l);c&&(clearTimeout(c),r.current.delete(l))},[]),a=f.useCallback(l=>{t(d=>d.map(u=>u.id===l?{...u,isPaused:!0}:u));const c=r.current.get(l);c&&(clearTimeout(c),r.current.delete(l))},[]),i=f.useCallback(l=>{t(d=>d.map(u=>u.id===l?{...u,isPaused:!1}:u));const c=e.find(d=>d.id===l);if(c){const d=c.duration||Wp[c.type],u=setTimeout(()=>{n(l)},d);r.current.set(l,u)}},[e,n]),o=f.useCallback(l=>{const c=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:c,type:l.type,message:l.message,duration:l.duration,action:l.action,isPaused:!1};t(h=>[d,...h]);const u=l.duration||Wp[l.type],m=setTimeout(()=>{n(c)},u);r.current.set(c,m)},[n]);return f.useEffect(()=>{const l=d=>{o(d.detail)};window.addEventListener(ua,l);const c=r.current;return()=>{window.removeEventListener(ua,l),c.forEach(d=>clearTimeout(d)),c.clear()}},[o]),e.length===0?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block fixed top-4 right-4 z-[10000] space-y-3 pointer-events-none",children:e.map(l=>{const c=qp[l.type],d=Hp[l.type],u=c.icon;return s.jsx("div",{className:"pointer-events-auto animate-slideInRight",role:d.role,"aria-live":d.live,"aria-atomic":"true",onMouseEnter:()=>a(l.id),onMouseLeave:()=>i(l.id),onFocus:()=>a(l.id),onBlur:()=>i(l.id),tabIndex:0,children:s.jsxs("div",{className:`
                  ${c.bg} ${c.text}
                  w-80 rounded-lg shadow-xl
                  flex items-start gap-3 p-4
                  transition-all duration-200
                  hover:shadow-2xl
                `,children:[s.jsx(u,{className:"w-6 h-6 flex-shrink-0 mt-0.5","aria-hidden":"true"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium leading-relaxed break-words",children:l.message}),l.action&&s.jsx("button",{onClick:l.action.onClick,className:"mt-2 text-xs font-semibold underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded",children:l.action.label})]}),s.jsx("button",{onClick:()=>n(l.id),className:"flex-shrink-0 p-1 rounded hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white transition-colors","aria-label":"Close notification",children:s.jsx(Nt,{className:"w-4 h-4","aria-hidden":"true"})})]})},l.id)})}),s.jsx("div",{className:"md:hidden fixed bottom-4 left-4 right-4 z-[10000] flex flex-col items-center space-y-3 pointer-events-none",children:e.map(l=>{const c=qp[l.type],d=Hp[l.type],u=c.icon;return s.jsx("div",{className:"pointer-events-auto w-full max-w-md animate-slideInUp",role:d.role,"aria-live":d.live,"aria-atomic":"true",onTouchStart:()=>a(l.id),onTouchEnd:()=>i(l.id),onFocus:()=>a(l.id),onBlur:()=>i(l.id),tabIndex:0,children:s.jsxs("div",{className:`
                  ${c.bg} ${c.text}
                  rounded-lg shadow-xl
                  flex items-start gap-3 p-4
                  transition-all duration-200
                `,children:[s.jsx(u,{className:"w-6 h-6 flex-shrink-0 mt-0.5","aria-hidden":"true"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium leading-relaxed break-words",children:l.message}),l.action&&s.jsx("button",{onClick:l.action.onClick,className:"mt-2 text-xs font-semibold underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-transparent rounded",children:l.action.label})]}),s.jsx("button",{onClick:()=>n(l.id),className:"flex-shrink-0 p-2 rounded hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close notification",children:s.jsx(Nt,{className:"w-5 h-5","aria-hidden":"true"})})]})},l.id)})}),s.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        @keyframes slideInUp {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .animate-slideInRight {
          animation: slideInRight 300ms ease-out;
        }

        .animate-slideInUp {
          animation: slideInUp 300ms ease-out;
        }
      `})]})},T5=f.createContext(void 0),E5=()=>{const e=ee(l=>l.authentication_state.authentication_status.is_loading),t=f.useContext(T5),r=e,n=(t==null?void 0:t.isLoading)||!1,a=r||n,i=(t==null?void 0:t.message)||"Loading...",o=(t==null?void 0:t.type)||"fullscreen";return f.useEffect(()=>{if(a&&o==="fullscreen"){const l=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=l}}},[a,o]),f.useEffect(()=>{if(!a)return;const l=c=>{c.key==="Escape"&&t&&!r&&t.hideLoading()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[a,t,r]),a?s.jsxs(s.Fragment,{children:[o==="fullscreen"?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[9999]",role:"status","aria-live":"polite","aria-busy":"true","aria-label":i,onClick:l=>l.stopPropagation(),children:s.jsxs("div",{className:"flex flex-col items-center space-y-4 px-6",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600",style:{animation:"spin 1.5s linear infinite"}}),s.jsx("p",{className:"text-white text-lg font-medium text-center max-w-md leading-relaxed",children:i}),t&&!r&&s.jsx("p",{className:"text-gray-300 text-xs text-center mt-2",children:"Press ESC to cancel"})]})}):s.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg",role:"status","aria-live":"polite","aria-busy":"true","aria-label":i,onClick:l=>l.stopPropagation(),children:s.jsxs("div",{className:"flex flex-col items-center space-y-3 px-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-4 border-b-4 border-blue-600",style:{animation:"spin 1.5s linear infinite"}}),s.jsx("p",{className:"text-gray-700 text-sm font-medium text-center max-w-sm",children:i})]})}),s.jsx("style",{children:`
        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }
      `})]}):null};let hc=null;const un=()=>{hc&&hc()},P5=()=>{const e=Le(),[t,r]=f.useState(null),[n,a]=f.useState(!1),i=f.useRef(null),o=f.useRef(null),l=f.useRef(null);f.useEffect(()=>(hc=()=>{a(!1),setTimeout(()=>r(null),200)},()=>{hc=null}),[]);const c=()=>{const N="w-16 h-16";switch(v){case"network":return s.jsx(N5,{className:`${N} text-red-500`,"aria-hidden":"true"});case"auth":return s.jsx(Qc,{className:`${N} text-red-500`,"aria-hidden":"true"});case"validation":return s.jsx(Ue,{className:`${N} text-amber-500`,"aria-hidden":"true"});case"server":return s.jsx(mc,{className:`${N} text-red-500`,"aria-hidden":"true"});case"not_found":return s.jsx(u5,{className:`${N} text-red-500`,"aria-hidden":"true"});case"permission":return s.jsx(y5,{className:`${N} text-red-500`,"aria-hidden":"true"});default:return s.jsx(Ue,{className:`${N} text-red-500`,"aria-hidden":"true"})}},d=ft.useCallback(()=>{if(!t)return"Error";const{type:N}=t;switch(N){case"network":return"Connection Error";case"auth":return"Authentication Required";case"validation":return"Validation Error";case"server":return"Server Error";case"not_found":return"Page Not Found";case"permission":return"Access Denied";default:return"Error"}},[t]),u=ft.useCallback(()=>{if(!t)return"OK";const{type:N,onRetry:_}=t;switch(N){case"network":return"Try Again";case"auth":return"Log In";case"validation":return"OK";case"server":return _?"Try Again":"Dismiss";case"not_found":return"Go Home";case"permission":return"Go Back";default:return"OK"}},[t]),m=ft.useCallback(()=>{if(!t){un();return}const{type:N,onRetry:_}=t;N==="auth"?(e("/login"),un()):N==="not_found"?(e("/"),un()):N==="permission"?(e(-1),un()):(_&&_(),un())},[t,e]),h=ft.useCallback(()=>{t!=null&&t.onDismiss&&t.onDismiss(),un()},[t]),y=ft.useCallback(N=>{N.target===N.currentTarget&&!(t!=null&&t.criticalError)&&h()},[t,h]);if(f.useEffect(()=>{if(!n||!t)return;const N=_=>{_.key==="Escape"&&!t.criticalError&&h()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[n,t,h]),f.useEffect(()=>{if(!n||!t)return;const N=i.current;if(!N)return;const _=N.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),T=_[0],E=_[_.length-1],z=k=>{k.key==="Tab"&&(k.shiftKey?document.activeElement===T&&(k.preventDefault(),E==null||E.focus()):document.activeElement===E&&(k.preventDefault(),T==null||T.focus()))};return N.addEventListener("keydown",z),o.current&&o.current.focus(),()=>N.removeEventListener("keydown",z)},[n,t]),f.useEffect(()=>{if(!n||!t)return;const N=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=N}},[n,t]),f.useEffect(()=>{if(!n||!t)return;const _=`${t.title||d()}: ${t.message}`,T=document.createElement("div");return T.setAttribute("role","alert"),T.setAttribute("aria-live","assertive"),T.setAttribute("aria-atomic","true"),T.className="sr-only",T.textContent=_,document.body.appendChild(T),()=>{document.body.contains(T)&&document.body.removeChild(T)}},[n,t,d]),!t||!n)return null;const{type:v,title:p,message:w,details:g,showContactSupport:x,criticalError:b}=t,j=p||d();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-[10000]",onClick:y,"aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[10000] px-4 py-6",role:"dialog","aria-modal":"true","aria-labelledby":"error-modal-title","aria-describedby":"error-modal-description",children:s.jsxs("div",{ref:i,className:"bg-white rounded-xl shadow-2xl border border-gray-200 w-full max-w-[90vw] sm:max-w-md mx-auto transform transition-all",children:[s.jsxs("div",{className:"p-6 sm:p-8 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:c()}),s.jsx("h2",{id:"error-modal-title",className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-3 leading-tight",children:j}),s.jsx("p",{id:"error-modal-description",className:"text-base sm:text-lg text-gray-700 leading-relaxed",children:w}),g&&s.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200 text-left",children:s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:g})})]}),s.jsxs("div",{className:"px-6 sm:px-8 pb-6 sm:pb-8 flex flex-col sm:flex-row gap-3 sm:justify-center",children:[s.jsx("button",{ref:o,onClick:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl text-base order-1",children:u()}),!b&&s.jsx("button",{ref:l,onClick:h,className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 border border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200 text-base order-2",children:"Dismiss"})]}),x&&s.jsxs("div",{className:"px-6 sm:px-8 pb-6 sm:pb-8 pt-0 text-center border-t border-gray-200 mt-0",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2 mt-4",children:"If this problem persists, please contact support:"}),s.jsx("a",{href:`mailto:support@barberslot.com?subject=Error Report: ${encodeURIComponent(j)}&body=${encodeURIComponent(w+(g?`

Details: `+g:""))}`,className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium focus:outline-none focus:ring-4 focus:ring-blue-100 rounded-lg px-4 py-2 transition-all duration-200 text-sm",children:"Contact Support"})]})]})})]})},p1=f.createContext({});function A5(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const o0=f.createContext(null),x1=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function M5(e=!0){const t=f.useContext(o0);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,i=f.useId();f.useEffect(()=>{e&&a(i)},[e]);const o=f.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const l0=typeof window<"u",R5=l0?f.useLayoutEffect:f.useEffect,Yt=e=>e;let g1=Yt;function c0(e){let t;return()=>(t===void 0&&(t=e()),t)}const qa=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},tr=e=>e*1e3,sr=e=>e/1e3,D5={useManualTiming:!1};function L5(e){let t=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,u=!1,m=!1)=>{const y=m&&n?t:r;return u&&i.add(d),y.has(d)||y.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(o=d,n){a=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,a&&(a=!1,c.process(d))}};return c}const cl=["read","resolveKeyframes","update","preRender","render","postRender"],F5=40;function y1(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=cl.reduce((g,x)=>(g[x]=L5(i),g),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:m,postRender:h}=o,y=()=>{const g=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(g-a.timestamp,F5),1),a.timestamp=g,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),m.process(a),h.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,a.isProcessing||e(y)};return{schedule:cl.reduce((g,x)=>{const b=o[x];return g[x]=(j,N=!1,_=!1)=>(r||v(),b.schedule(j,N,_)),g},{}),cancel:g=>{for(let x=0;x<cl.length;x++)o[cl[x]].cancel(g)},state:a,steps:o}}const{schedule:Ie,cancel:Zr,state:ht,steps:$d}=y1(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yt,!0),b1=f.createContext({strict:!1}),Kp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ha={};for(const e in Kp)Ha[e]={isEnabled:t=>Kp[e].some(r=>!!t[r])};function O5(e){for(const t in e)Ha[t]={...Ha[t],...e[t]}}const B5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||B5.has(e)}let v1=e=>!fc(e);function $5(e){e&&(v1=t=>t.startsWith("on")?!fc(t):e(t))}try{$5(require("@emotion/is-prop-valid").default)}catch{}function I5(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(v1(a)||r===!0&&fc(a)||!t&&!fc(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function z5(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const Zc=f.createContext({});function go(e){return typeof e=="string"||Array.isArray(e)}function Xc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const d0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],u0=["initial",...d0];function Jc(e){return Xc(e.animate)||u0.some(t=>go(e[t]))}function w1(e){return!!(Jc(e)||e.variants)}function V5(e,t){if(Jc(e)){const{initial:r,animate:n}=e;return{initial:r===!1||go(r)?r:void 0,animate:go(n)?n:void 0}}return e.inherit!==!1?t:{}}function U5(e){const{initial:t,animate:r}=V5(e,f.useContext(Zc));return f.useMemo(()=>({initial:t,animate:r}),[Gp(t),Gp(r)])}function Gp(e){return Array.isArray(e)?e.join(" "):e}const W5=Symbol.for("motionComponentSymbol");function ma(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function q5(e,t,r){return f.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):ma(r)&&(r.current=n))},[t])}const m0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H5="framerAppearId",j1="data-"+m0(H5),{schedule:h0}=y1(queueMicrotask,!1),N1=f.createContext({});function K5(e,t,r,n,a){var i,o;const{visualElement:l}=f.useContext(Zc),c=f.useContext(b1),d=f.useContext(o0),u=f.useContext(x1).reducedMotion,m=f.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const h=m.current,y=f.useContext(N1);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&G5(m.current,r,a,y);const v=f.useRef(!1);f.useInsertionEffect(()=>{h&&v.current&&h.update(r,d)});const p=r[j1],w=f.useRef(!!p&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,p))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,p)));return R5(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h0.render(h.render),w.current&&h.animationState&&h.animationState.animateChanges())}),f.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,p)}),w.current=!1))}),h}function G5(e,t,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:_1(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&ma(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function _1(e){if(e)return e.options.allowProjection!==!1?e.projection:_1(e.parent)}function Q5({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){var i,o;e&&O5(e);function l(d,u){let m;const h={...f.useContext(x1),...d,layoutId:Y5(d)},{isStatic:y}=h,v=U5(d),p=n(d,y);if(!y&&l0){Z5();const w=X5(h);m=w.MeasureLayout,v.visualElement=K5(a,p,h,t,w.ProjectionNode)}return s.jsxs(Zc.Provider,{value:v,children:[m&&v.visualElement?s.jsx(m,{visualElement:v.visualElement,...h}):null,r(a,d,q5(p,v.visualElement,u),p,y,v.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&o!==void 0?o:""})`}`;const c=f.forwardRef(l);return c[W5]=a,c}function Y5({layoutId:e}){const t=f.useContext(p1).id;return t&&e!==void 0?t+"-"+e:e}function Z5(e,t){f.useContext(b1).strict}function X5(e){const{drag:t,layout:r}=Ha;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const J5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function f0(e){return typeof e!="string"||e.includes("-")?!1:!!(J5.indexOf(e)>-1||/[A-Z]/u.test(e))}function Qp(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function p0(e,t,r,n){if(typeof t=="function"){const[a,i]=Qp(n);t=t(r!==void 0?r:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=Qp(n);t=t(r!==void 0?r:e.custom,a,i)}return t}const jm=e=>Array.isArray(e),e6=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),t6=e=>jm(e)?e[e.length-1]||0:e,_t=e=>!!(e&&e.getVelocity);function Al(e){const t=_t(e)?e.get():e;return e6(t)?t.toValue():t}function s6({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,a,i){const o={latestValues:r6(n,a,i,e),renderState:t()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const k1=e=>(t,r)=>{const n=f.useContext(Zc),a=f.useContext(o0),i=()=>s6(e,t,n,a);return r?i():A5(i)};function r6(e,t,r,n){const a={},i=n(e,{});for(const h in i)a[h]=Al(i[h]);let{initial:o,animate:l}=e;const c=Jc(e),d=w1(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const m=u?l:o;if(m&&typeof m!="boolean"&&!Xc(m)){const h=Array.isArray(m)?m:[m];for(let y=0;y<h.length;y++){const v=p0(e,h[y]);if(v){const{transitionEnd:p,transition:w,...g}=v;for(const x in g){let b=g[x];if(Array.isArray(b)){const j=u?b.length-1:0;b=b[j]}b!==null&&(a[x]=b)}for(const x in p)a[x]=p[x]}}}return a}const ii=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qn=new Set(ii),C1=e=>t=>typeof t=="string"&&t.startsWith(e),S1=C1("--"),n6=C1("var(--"),x0=e=>n6(e)?a6.test(e.split("/*")[0].trim()):!1,a6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,T1=(e,t)=>t&&typeof e=="number"?t.transform(e):e,lr=(e,t,r)=>r>t?t:r<e?e:r,oi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yo={...oi,transform:e=>lr(0,1,e)},dl={...oi,default:1},$o=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),gr=$o("deg"),Bs=$o("%"),me=$o("px"),i6=$o("vh"),o6=$o("vw"),Yp={...Bs,parse:e=>Bs.parse(e)/100,transform:e=>Bs.transform(e*100)},l6={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,backgroundPositionX:me,backgroundPositionY:me},c6={rotate:gr,rotateX:gr,rotateY:gr,rotateZ:gr,scale:dl,scaleX:dl,scaleY:dl,scaleZ:dl,skew:gr,skewX:gr,skewY:gr,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:yo,originX:Yp,originY:Yp,originZ:me},Zp={...oi,transform:Math.round},g0={...l6,...c6,zIndex:Zp,size:me,fillOpacity:yo,strokeOpacity:yo,numOctaves:Zp},d6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u6=ii.length;function m6(e,t,r){let n="",a=!0;for(let i=0;i<u6;i++){const o=ii[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=T1(l,g0[o]);if(!c){a=!1;const u=d6[o]||o;n+=`${u}(${d}) `}r&&(t[o]=d)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function y0(e,t,r){const{style:n,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Qn.has(c)){o=!0;continue}else if(S1(c)){a[c]=d;continue}else{const u=T1(d,g0[c]);c.startsWith("origin")?(l=!0,i[c]=u):n[c]=u}}if(t.transform||(o||r?n.transform=m6(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${d} ${u}`}}const h6={offset:"stroke-dashoffset",array:"stroke-dasharray"},f6={offset:"strokeDashoffset",array:"strokeDasharray"};function p6(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?h6:f6;e[i.offset]=me.transform(-n);const o=me.transform(t),l=me.transform(r);e[i.array]=`${o} ${l}`}function Xp(e,t,r){return typeof e=="string"?e:me.transform(t+r*e)}function x6(e,t,r){const n=Xp(t,e.x,e.width),a=Xp(r,e.y,e.height);return`${n} ${a}`}function b0(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,m){if(y0(e,d,m),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:y,dimensions:v}=e;h.transform&&(v&&(y.transform=h.transform),delete h.transform),v&&(a!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=x6(v,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),o!==void 0&&p6(h,o,l,c,!1)}const v0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),E1=()=>({...v0(),attrs:{}}),w0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function P1(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const A1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function M1(e,t,r,n){P1(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(A1.has(a)?a:m0(a),t.attrs[a])}const pc={};function g6(e){Object.assign(pc,e)}function R1(e,{layout:t,layoutId:r}){return Qn.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!pc[e]||e==="opacity")}function j0(e,t,r){var n;const{style:a}=e,i={};for(const o in a)(_t(a[o])||t.style&&_t(t.style[o])||R1(o,e)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function D1(e,t,r){const n=j0(e,t,r);for(const a in e)if(_t(e[a])||_t(t[a])){const i=ii.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=e[a]}return n}function y6(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Jp=["x","y","width","height","cx","cy","r"],b6={useVisualState:k1({scrapeMotionValuesFromProps:D1,createRenderState:E1,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:a})=>{if(!r)return;let i=!!e.drag;if(!i){for(const l in a)if(Qn.has(l)){i=!0;break}}if(!i)return;let o=!t;if(t)for(let l=0;l<Jp.length;l++){const c=Jp[l];e[c]!==t[c]&&(o=!0)}o&&Ie.read(()=>{y6(r,n),Ie.render(()=>{b0(n,a,w0(r.tagName),e.transformTemplate),M1(r,n)})})}})},v6={useVisualState:k1({scrapeMotionValuesFromProps:j0,createRenderState:v0})};function L1(e,t,r){for(const n in t)!_t(t[n])&&!R1(n,r)&&(e[n]=t[n])}function w6({transformTemplate:e},t){return f.useMemo(()=>{const r=v0();return y0(r,t,e),Object.assign({},r.vars,r.style)},[t])}function j6(e,t){const r=e.style||{},n={};return L1(n,r,e),Object.assign(n,w6(e,t)),n}function N6(e,t){const r={},n=j6(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function _6(e,t,r,n){const a=f.useMemo(()=>{const i=E1();return b0(i,t,w0(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};L1(i,e.style,e),a.style={...i,...a.style}}return a}function k6(e=!1){return(r,n,a,{latestValues:i},o)=>{const c=(f0(r)?_6:N6)(n,i,o,r),d=I5(n,typeof r=="string",e),u=r!==f.Fragment?{...d,...c,ref:a}:{},{children:m}=n,h=f.useMemo(()=>_t(m)?m.get():m,[m]);return f.createElement(r,{...u,children:h})}}function C6(e,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...f0(n)?b6:v6,preloadedFeatures:e,useRender:k6(a),createVisualElement:t,Component:n};return Q5(o)}}function F1(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ed(e,t,r){const n=e.getProps();return p0(n,t,r!==void 0?r:n.custom,e)}const S6=c0(()=>window.ScrollTimeline!==void 0);class T6{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(a=>{if(S6()&&a.attachTimeline)return a.attachTimeline(t);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class E6 extends T6{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function N0(e,t){return e?e[t]||e.default||e:void 0}const Nm=2e4;function O1(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Nm;)t+=r,n=e.next(t);return t>=Nm?1/0:t}function _0(e){return typeof e=="function"}function ex(e,t){e.timeline=t,e.onfinish=null}const k0=e=>Array.isArray(e)&&typeof e[0]=="number",P6={linearEasing:void 0};function A6(e,t){const r=c0(e);return()=>{var n;return(n=P6[t])!==null&&n!==void 0?n:r()}}const xc=A6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),B1=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)n+=e(qa(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function $1(e){return!!(typeof e=="function"&&xc()||!e||typeof e=="string"&&(e in _m||xc())||k0(e)||Array.isArray(e)&&e.every($1))}const Pi=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,_m={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pi([0,.65,.55,1]),circOut:Pi([.55,0,1,.45]),backIn:Pi([.31,.01,.66,-.59]),backOut:Pi([.33,1.53,.69,.99])};function I1(e,t){if(e)return typeof e=="function"&&xc()?B1(e,t):k0(e)?Pi(e):Array.isArray(e)?e.map(r=>I1(r,t)||_m.easeOut):_m[e]}const gs={x:!1,y:!1};function z1(){return gs.x||gs.y}function M6(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function V1(e,t){const r=M6(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function tx(e){return t=>{t.pointerType==="touch"||z1()||e(t)}}function R6(e,t,r={}){const[n,a,i]=V1(e,r),o=tx(l=>{const{target:c}=l,d=t(l);if(typeof d!="function"||!c)return;const u=tx(m=>{d(m),c.removeEventListener("pointerleave",u)});c.addEventListener("pointerleave",u,a)});return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const U1=(e,t)=>t?e===t?!0:U1(e,t.parentElement):!1,C0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,D6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function L6(e){return D6.has(e.tagName)||e.tabIndex!==-1}const Ai=new WeakSet;function sx(e){return t=>{t.key==="Enter"&&e(t)}}function Id(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const F6=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=sx(()=>{if(Ai.has(r))return;Id(r,"down");const a=sx(()=>{Id(r,"up")}),i=()=>Id(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function rx(e){return C0(e)&&!z1()}function O6(e,t,r={}){const[n,a,i]=V1(e,r),o=l=>{const c=l.currentTarget;if(!rx(l)||Ai.has(c))return;Ai.add(c);const d=t(l),u=(y,v)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),!(!rx(y)||!Ai.has(c))&&(Ai.delete(c),typeof d=="function"&&d(y,{success:v}))},m=y=>{u(y,r.useGlobalTarget||U1(c,y.target))},h=y=>{u(y,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",h,a)};return n.forEach(l=>{!L6(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",d=>F6(d,a),a)}),i}function B6(e){return e==="x"||e==="y"?gs[e]?null:(gs[e]=!0,()=>{gs[e]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1})}const W1=new Set(["width","height","top","left","right","bottom",...ii]);let Ml;function $6(){Ml=void 0}const $s={now:()=>(Ml===void 0&&$s.set(ht.isProcessing||D5.useManualTiming?ht.timestamp:performance.now()),Ml),set:e=>{Ml=e,queueMicrotask($6)}};function S0(e,t){e.indexOf(t)===-1&&e.push(t)}function T0(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class E0{constructor(){this.subscriptions=[]}add(t){return S0(this.subscriptions,t),()=>T0(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function q1(e,t){return t?e*(1e3/t):0}const nx=30,I6=e=>!isNaN(parseFloat(e));class z6{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=$s.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=$s.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=I6(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new E0);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=$s.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>nx)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,nx);return q1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(e,t){return new z6(e,t)}function V6(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,bo(r))}function U6(e,t){const r=ed(e,t);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const l=t6(i[o]);V6(e,o,l)}}function W6(e){return!!(_t(e)&&e.add)}function km(e,t){const r=e.getValue("willChange");if(W6(r))return r.add(t)}function H1(e){return e.props[j1]}const K1=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,q6=1e-7,H6=12;function K6(e,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=K1(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>q6&&++l<H6);return o}function Io(e,t,r,n){if(e===t&&r===n)return Yt;const a=i=>K6(i,0,1,e,r);return i=>i===0||i===1?i:K1(a(i),t,n)}const G1=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Q1=e=>t=>1-e(1-t),Y1=Io(.33,1.53,.69,.99),P0=Q1(Y1),Z1=G1(P0),X1=e=>(e*=2)<1?.5*P0(e):.5*(2-Math.pow(2,-10*(e-1))),A0=e=>1-Math.sin(Math.acos(e)),J1=Q1(A0),ew=G1(A0),tw=e=>/^0[^.\s]+$/u.test(e);function G6(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tw(e):!0}const qi=e=>Math.round(e*1e5)/1e5,M0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Q6(e){return e==null}const Y6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,R0=(e,t)=>r=>!!(typeof r=="string"&&Y6.test(r)&&r.startsWith(e)||t&&!Q6(r)&&Object.prototype.hasOwnProperty.call(r,t)),sw=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(M0);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Z6=e=>lr(0,255,e),zd={...oi,transform:e=>Math.round(Z6(e))},jn={test:R0("rgb","red"),parse:sw("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+zd.transform(e)+", "+zd.transform(t)+", "+zd.transform(r)+", "+qi(yo.transform(n))+")"};function X6(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Cm={test:R0("#"),parse:X6,transform:jn.transform},ha={test:R0("hsl","hue"),parse:sw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Bs.transform(qi(t))+", "+Bs.transform(qi(r))+", "+qi(yo.transform(n))+")"},vt={test:e=>jn.test(e)||Cm.test(e)||ha.test(e),parse:e=>jn.test(e)?jn.parse(e):ha.test(e)?ha.parse(e):Cm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?jn.transform(e):ha.transform(e)},J6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function e3(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(M0))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(J6))===null||r===void 0?void 0:r.length)||0)>0}const rw="number",nw="color",t3="var",s3="var(",ax="${}",r3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vo(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(r3,c=>(vt.test(c)?(n.color.push(i),a.push(nw),r.push(vt.parse(c))):c.startsWith(s3)?(n.var.push(i),a.push(t3),r.push(c)):(n.number.push(i),a.push(rw),r.push(parseFloat(c))),++i,ax)).split(ax);return{values:r,split:l,indexes:n,types:a}}function aw(e){return vo(e).values}function iw(e){const{split:t,types:r}=vo(e),n=t.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],a[o]!==void 0){const l=r[o];l===rw?i+=qi(a[o]):l===nw?i+=vt.transform(a[o]):i+=a[o]}return i}}const n3=e=>typeof e=="number"?0:e;function a3(e){const t=aw(e);return iw(e)(t.map(n3))}const Xr={test:e3,parse:aw,createTransformer:iw,getAnimatableNone:a3},i3=new Set(["brightness","contrast","saturate","opacity"]);function o3(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(M0)||[];if(!n)return e;const a=r.replace(n,"");let i=i3.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const l3=/\b([a-z-]*)\(.*?\)/gu,Sm={...Xr,getAnimatableNone:e=>{const t=e.match(l3);return t?t.map(o3).join(" "):e}},c3={...g0,color:vt,backgroundColor:vt,outlineColor:vt,fill:vt,stroke:vt,borderColor:vt,borderTopColor:vt,borderRightColor:vt,borderBottomColor:vt,borderLeftColor:vt,filter:Sm,WebkitFilter:Sm},D0=e=>c3[e];function ow(e,t){let r=D0(e);return r!==Sm&&(r=Xr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const d3=new Set(["auto","none","0"]);function u3(e,t,r){let n=0,a;for(;n<e.length&&!a;){const i=e[n];typeof i=="string"&&!d3.has(i)&&vo(i).values.length&&(a=e[n]),n++}if(a&&r)for(const i of t)e[i]=ow(r,a)}const ix=e=>e===oi||e===me,ox=(e,t)=>parseFloat(e.split(", ")[t]),lx=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return ox(a[1],t);{const i=n.match(/^matrix\((.+)\)$/u);return i?ox(i[1],e):0}},m3=new Set(["x","y","z"]),h3=ii.filter(e=>!m3.has(e));function f3(e){const t=[];return h3.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Ka={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:lx(4,13),y:lx(5,14)};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const Fn=new Set;let Tm=!1,Em=!1;function lw(){if(Em){const e=Array.from(Fn).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=f3(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Em=!1,Tm=!1,Fn.forEach(e=>e.complete()),Fn.clear()}function cw(){Fn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Em=!0)})}function p3(){cw(),lw()}class L0{constructor(t,r,n,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fn.add(this),Tm||(Tm=!0,Ie.read(cw),Ie.resolveKeyframes(lw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const c=n.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dw=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),x3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g3(e){const t=x3.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function uw(e,t,r=1){const[n,a]=g3(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return dw(o)?parseFloat(o):o}return x0(a)?uw(a,t,r+1):a}const mw=e=>t=>t.test(e),y3={test:e=>e==="auto",parse:e=>e},hw=[oi,me,Bs,gr,o6,i6,y3],cx=e=>hw.find(mw(e));class fw extends L0{constructor(t,r,n,a,i){super(t,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),x0(d))){const u=uw(d,r.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!W1.has(n)||t.length!==2)return;const[a,i]=t,o=cx(a),l=cx(i);if(o!==l)if(ix(o)&&ix(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)G6(t[a])&&n.push(a);n.length&&u3(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ka[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=Ka[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const dx=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xr.test(e)||e==="0")&&!e.startsWith("url("));function b3(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function v3(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=dx(a,t),l=dx(i,t);return!o||!l?!1:b3(e)||(r==="spring"||_0(r))&&n}const w3=e=>e!==null;function td(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(w3),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const j3=40;class pw{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$s.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>j3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&p3(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=$s.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!v3(t,n,a,i))if(o)this.options.duration=0;else{c&&c(td(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,r);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const We=(e,t,r)=>e+(t-e)*r;function Vd(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function N3({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=Vd(c,l,e+1/3),i=Vd(c,l,e),o=Vd(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function gc(e,t){return r=>r>0?t:e}const Ud=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},_3=[Cm,jn,ha],k3=e=>_3.find(t=>t.test(e));function ux(e){const t=k3(e);if(!t)return!1;let r=t.parse(e);return t===ha&&(r=N3(r)),r}const mx=(e,t)=>{const r=ux(e),n=ux(t);if(!r||!n)return gc(e,t);const a={...r};return i=>(a.red=Ud(r.red,n.red,i),a.green=Ud(r.green,n.green,i),a.blue=Ud(r.blue,n.blue,i),a.alpha=We(r.alpha,n.alpha,i),jn.transform(a))},C3=(e,t)=>r=>t(e(r)),zo=(...e)=>e.reduce(C3),Pm=new Set(["none","hidden"]);function S3(e,t){return Pm.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function T3(e,t){return r=>We(e,t,r)}function F0(e){return typeof e=="number"?T3:typeof e=="string"?x0(e)?gc:vt.test(e)?mx:A3:Array.isArray(e)?xw:typeof e=="object"?vt.test(e)?mx:E3:gc}function xw(e,t){const r=[...e],n=r.length,a=e.map((i,o)=>F0(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function E3(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=F0(e[a])(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function P3(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;n[i]=c,a[o]++}return n}const A3=(e,t)=>{const r=Xr.createTransformer(t),n=vo(e),a=vo(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Pm.has(e)&&!a.values.length||Pm.has(t)&&!n.values.length?S3(e,t):zo(xw(P3(n,a),a.values),r):gc(e,t)};function gw(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?We(e,t,r):F0(e)(e,t)}const M3=5;function yw(e,t,r){const n=Math.max(t-M3,0);return q1(r-e(n),t-n)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wd=.001;function R3({duration:e=Ge.duration,bounce:t=Ge.bounce,velocity:r=Ge.velocity,mass:n=Ge.mass}){let a,i,o=1-t;o=lr(Ge.minDamping,Ge.maxDamping,o),e=lr(Ge.minDuration,Ge.maxDuration,sr(e)),o<1?(a=d=>{const u=d*o,m=u*e,h=u-r,y=Am(d,o),v=Math.exp(-m);return Wd-h/y*v},i=d=>{const m=d*o*e,h=m*r+r,y=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-m),p=Am(Math.pow(d,2),o);return(-a(d)+Wd>0?-1:1)*((h-y)*v)/p}):(a=d=>{const u=Math.exp(-d*e),m=(d-r)*e+1;return-Wd+u*m},i=d=>{const u=Math.exp(-d*e),m=(r-d)*(e*e);return u*m});const l=5/e,c=L3(a,i,l);if(e=tr(e),isNaN(c))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:e};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:e}}}const D3=12;function L3(e,t,r){let n=r;for(let a=1;a<D3;a++)n=n-e(n)/t(n);return n}function Am(e,t){return e*Math.sqrt(1-t*t)}const F3=["duration","bounce"],O3=["stiffness","damping","mass"];function hx(e,t){return t.some(r=>e[r]!==void 0)}function B3(e){let t={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...e};if(!hx(e,O3)&&hx(e,F3))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*lr(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Ge.mass,stiffness:a,damping:i}}else{const r=R3(e);t={...t,...r,mass:Ge.mass},t.isResolvedFromDuration=!0}return t}function bw(e=Ge.visualDuration,t=Ge.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:m,velocity:h,isResolvedFromDuration:y}=B3({...r,velocity:-sr(r.velocity||0)}),v=h||0,p=d/(2*Math.sqrt(c*u)),w=o-i,g=sr(Math.sqrt(c/u)),x=Math.abs(w)<5;n||(n=x?Ge.restSpeed.granular:Ge.restSpeed.default),a||(a=x?Ge.restDelta.granular:Ge.restDelta.default);let b;if(p<1){const N=Am(g,p);b=_=>{const T=Math.exp(-p*g*_);return o-T*((v+p*g*w)/N*Math.sin(N*_)+w*Math.cos(N*_))}}else if(p===1)b=N=>o-Math.exp(-g*N)*(w+(v+g*w)*N);else{const N=g*Math.sqrt(p*p-1);b=_=>{const T=Math.exp(-p*g*_),E=Math.min(N*_,300);return o-T*((v+p*g*w)*Math.sinh(E)+N*w*Math.cosh(E))/N}}const j={calculatedDuration:y&&m||null,next:N=>{const _=b(N);if(y)l.done=N>=m;else{let T=0;p<1&&(T=N===0?tr(v):yw(b,N,_));const E=Math.abs(T)<=n,z=Math.abs(o-_)<=a;l.done=E&&z}return l.value=l.done?o:_,l},toString:()=>{const N=Math.min(O1(j),Nm),_=B1(T=>j.next(N*T).value,N,30);return N+"ms "+_}};return j}function fx({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const m=e[0],h={done:!1,value:m},y=E=>l!==void 0&&E<l||c!==void 0&&E>c,v=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let p=r*t;const w=m+p,g=o===void 0?w:o(w);g!==w&&(p=g-m);const x=E=>-p*Math.exp(-E/n),b=E=>g+x(E),j=E=>{const z=x(E),k=b(E);h.done=Math.abs(z)<=d,h.value=h.done?g:k};let N,_;const T=E=>{y(h.value)&&(N=E,_=bw({keyframes:[h.value,v(h.value)],velocity:yw(b,E,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return T(0),{calculatedDuration:null,next:E=>{let z=!1;return!_&&N===void 0&&(z=!0,j(E),T(E)),N!==void 0&&E>=N?_.next(E-N):(!z&&j(E),h)}}}const $3=Io(.42,0,1,1),I3=Io(0,0,.58,1),vw=Io(.42,0,.58,1),z3=e=>Array.isArray(e)&&typeof e[0]!="number",V3={linear:Yt,easeIn:$3,easeInOut:vw,easeOut:I3,circIn:A0,circInOut:ew,circOut:J1,backIn:P0,backInOut:Z1,backOut:Y1,anticipate:X1},px=e=>{if(k0(e)){g1(e.length===4);const[t,r,n,a]=e;return Io(t,r,n,a)}else if(typeof e=="string")return V3[e];return e};function U3(e,t,r){const n=[],a=r||gw,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Yt:t;l=zo(c,l)}n.push(l)}return n}function W3(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(g1(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=U3(t,n,a),c=l.length,d=u=>{if(o&&u<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(u<e[m+1]);m++);const h=qa(e[m],e[m+1],u);return l[m](h)};return r?u=>d(lr(e[0],e[i-1],u)):d}function q3(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=qa(0,t,n);e.push(We(r,1,a))}}function H3(e){const t=[0];return q3(t,e.length-1),t}function K3(e,t){return e.map(r=>r*t)}function G3(e,t){return e.map(()=>t||vw).splice(0,e.length-1)}function yc({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=z3(n)?n.map(px):px(n),i={done:!1,value:t[0]},o=K3(r&&r.length===t.length?r:H3(t),e),l=W3(o,t,{ease:Array.isArray(a)?a:G3(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const Q3=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Ie.update(t,!0),stop:()=>Zr(t),now:()=>ht.isProcessing?ht.timestamp:$s.now()}},Y3={decay:fx,inertia:fx,tween:yc,keyframes:yc,spring:bw},Z3=e=>e/100;class O0 extends pw{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||L0,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,l,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=_0(r)?r:Y3[r]||yc;let c,d;l!==yc&&typeof t[0]!="number"&&(c=zo(Z3,gw(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});i==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=O1(u));const{calculatedDuration:m}=u,h=m+a,y=h*(n+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:h,totalDuration:y}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:m}=n;if(this.startTime===null)return i.next(0);const{delay:h,repeat:y,repeatType:v,repeatDelay:p,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),x=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,j=i;if(y){const E=Math.min(this.currentTime,u)/m;let z=Math.floor(E),k=E%1;!k&&E>=1&&(k=1),k===1&&z--,z=Math.min(z,y+1),!!(z%2)&&(v==="reverse"?(k=1-k,p&&(k-=p/m)):v==="mirror"&&(j=o)),b=lr(0,1,k)*m}const N=x?{done:!1,value:c[0]}:j.next(b);l&&(N.value=l(N.value));let{done:_}=N;!x&&d!==null&&(_=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return T&&a!==void 0&&(N.value=td(c,this.options,a)),w&&w(N.value),T&&this.finish(),N}get duration(){const{resolved:t}=this;return t?sr(t.calculatedDuration):0}get time(){return sr(this.currentTime)}set time(t){t=tr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=sr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Q3,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const X3=new Set(["opacity","clipPath","filter","transform"]);function J3(e,t,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:r};c&&(d.offset=c);const u=I1(l,a);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const eC=c0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bc=10,tC=2e4;function sC(e){return _0(e.type)||e.type==="spring"||!$1(e.ease)}function rC(e,t){const r=new O0({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let i=0;for(;!n.done&&i<tC;)n=r.sample(i),a.push(n.value),i+=bc;return{times:void 0,keyframes:a,duration:i-bc,ease:"linear"}}const ww={anticipate:X1,backInOut:Z1,circInOut:ew};function nC(e){return e in ww}class xx extends pw{constructor(t){super(t);const{name:r,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new fw(i,(o,l)=>this.onKeyframesResolved(o,l),r,n,a),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:a,ease:i,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&xc()&&nC(i)&&(i=ww[i]),sC(this.options)){const{onComplete:m,onUpdate:h,motionValue:y,element:v,...p}=this.options,w=rC(t,p);t=w.keyframes,t.length===1&&(t[1]=t[0]),n=w.duration,a=w.times,i=w.ease,o="keyframes"}const u=J3(l.owner.current,c,t,{...this.options,duration:n,times:a,ease:i});return u.startTime=d??this.calcStartTime(),this.pendingTimeline?(ex(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:m}=this.options;l.set(td(t,this.options,r)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:a,type:o,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return sr(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return sr(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=tr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Yt;const{animation:n}=r;ex(n,t)}return Yt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:a,type:i,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:m,element:h,...y}=this.options,v=new O0({...y,keyframes:n,duration:a,type:i,ease:o,times:l,isGenerator:!0}),p=tr(this.time);d.setWithVelocity(v.sample(p-bc).value,v.sample(p).value,bc)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:a,repeatType:i,damping:o,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=r.owner.getProps();return eC()&&n&&X3.has(n)&&!c&&!d&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const aC={type:"spring",stiffness:500,damping:25,restSpeed:10},iC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),oC={type:"keyframes",duration:.8},lC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cC=(e,{keyframes:t})=>t.length>2?oC:Qn.has(e)?e.startsWith("scale")?iC(t[1]):aC:lC;function dC({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const B0=(e,t,r,n={},a,i)=>o=>{const l=N0(n,e)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-tr(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};dC(l)||(u={...u,...cC(e,u)}),u.duration&&(u.duration=tr(u.duration)),u.repeatDelay&&(u.repeatDelay=tr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(m=!0)),m&&!i&&t.get()!==void 0){const h=td(u.keyframes,l);if(h!==void 0)return Ie.update(()=>{u.onUpdate(h),u.onComplete()}),new E6([])}return!i&&xx.supports(u)?new xx(u):new O0(u)};function uC({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function jw(e,t,{delay:r=0,transitionOverride:n,type:a}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const m in c){const h=e.getValue(m,(i=e.latestValues[m])!==null&&i!==void 0?i:null),y=c[m];if(y===void 0||u&&uC(u,m))continue;const v={delay:r,...N0(o||{},m)};let p=!1;if(window.MotionHandoffAnimation){const g=H1(e);if(g){const x=window.MotionHandoffAnimation(g,m,Ie);x!==null&&(v.startTime=x,p=!0)}}km(e,m),h.start(B0(m,h,y,e.shouldReduceMotion&&W1.has(m)?{type:!1}:v,e,p));const w=h.animation;w&&d.push(w)}return l&&Promise.all(d).then(()=>{Ie.update(()=>{l&&U6(e,l)})}),d}function Mm(e,t,r={}){var n;const a=ed(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const o=a?()=>Promise.all(jw(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:m,staggerDirection:h}=i;return mC(e,t,u+d,m,h,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(r.delay)])}function mC(e,t,r=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(e.variantChildren).sort(hC).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Mm(d,t,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function hC(e,t){return e.sortNodePosition(t)}function fC(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>Mm(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=Mm(e,t,r);else{const a=typeof t=="function"?ed(e,t,r.custom):t;n=Promise.all(jw(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const pC=u0.length;function Nw(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Nw(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<pC;r++){const n=u0[r],a=e.props[n];(go(a)||a===!1)&&(t[n]=a)}return t}const xC=[...d0].reverse(),gC=d0.length;function yC(e){return t=>Promise.all(t.map(({animation:r,options:n})=>fC(e,r,n)))}function bC(e){let t=yC(e),r=gx(),n=!0;const a=c=>(d,u)=>{var m;const h=ed(e,u,c==="exit"?(m=e.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(h){const{transition:y,transitionEnd:v,...p}=h;d={...d,...p,...v}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=Nw(e.parent)||{},m=[],h=new Set;let y={},v=1/0;for(let w=0;w<gC;w++){const g=xC[w],x=r[g],b=d[g]!==void 0?d[g]:u[g],j=go(b),N=g===c?x.isActive:null;N===!1&&(v=w);let _=b===u[g]&&b!==d[g]&&j;if(_&&n&&e.manuallyAnimateOnMount&&(_=!1),x.protectedKeys={...y},!x.isActive&&N===null||!b&&!x.prevProp||Xc(b)||typeof b=="boolean")continue;const T=vC(x.prevProp,b);let E=T||g===c&&x.isActive&&!_&&j||w>v&&j,z=!1;const k=Array.isArray(b)?b:[b];let G=k.reduce(a(g),{});N===!1&&(G={});const{prevResolvedValues:M={}}=x,F={...M,...G},D=I=>{E=!0,h.has(I)&&(z=!0,h.delete(I)),x.needsAnimating[I]=!0;const S=e.getValue(I);S&&(S.liveStyle=!1)};for(const I in F){const S=G[I],C=M[I];if(y.hasOwnProperty(I))continue;let B=!1;jm(S)&&jm(C)?B=!F1(S,C):B=S!==C,B?S!=null?D(I):h.add(I):S!==void 0&&h.has(I)?D(I):x.protectedKeys[I]=!0}x.prevProp=b,x.prevResolvedValues=G,x.isActive&&(y={...y,...G}),n&&e.blockInitialAnimation&&(E=!1),E&&(!(_&&T)||z)&&m.push(...k.map(I=>({animation:I,options:{type:g}})))}if(h.size){const w={};h.forEach(g=>{const x=e.getBaseTarget(g),b=e.getValue(g);b&&(b.liveStyle=!0),w[g]=x??null}),m.push({animation:w})}let p=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(p=!1),n=!1,p?t(m):Promise.resolve()}function l(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(h=>{var y;return(y=h.animationState)===null||y===void 0?void 0:y.setActive(c,d)}),r[c].isActive=d;const m=o(c);for(const h in r)r[h].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=gx(),n=!0}}}function vC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!F1(t,e):!1}function mn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gx(){return{animate:mn(!0),whileInView:mn(),whileHover:mn(),whileTap:mn(),whileDrag:mn(),whileFocus:mn(),exit:mn()}}class an{constructor(t){this.isMounted=!1,this.node=t}update(){}}class wC extends an{constructor(t){super(t),t.animationState||(t.animationState=bC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let jC=0;class NC extends an{constructor(){super(...arguments),this.id=jC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const _C={animation:{Feature:wC},exit:{Feature:NC}};function wo(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function Vo(e){return{point:{x:e.pageX,y:e.pageY}}}const kC=e=>t=>C0(t)&&e(t,Vo(t));function Hi(e,t,r,n){return wo(e,t,kC(r),n)}const yx=(e,t)=>Math.abs(e-t);function CC(e,t){const r=yx(e.x,t.x),n=yx(e.y,t.y);return Math.sqrt(r**2+n**2)}class _w{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Hd(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,y=CC(m.offset,{x:0,y:0})>=3;if(!h&&!y)return;const{point:v}=m,{timestamp:p}=ht;this.history.push({...v,timestamp:p});const{onStart:w,onMove:g}=this.handlers;h||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=qd(h,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Hd(m.type==="pointercancel"?this.lastMoveEventInfo:qd(h,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,w),v&&v(m,w)},!C0(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=Vo(t),l=qd(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=ht;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(t,Hd(l,this.history)),this.removeListeners=zo(Hi(this.contextWindow,"pointermove",this.handlePointerMove),Hi(this.contextWindow,"pointerup",this.handlePointerUp),Hi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zr(this.updatePoint)}}function qd(e,t){return t?{point:t(e.point)}:e}function bx(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Hd({point:e},t){return{point:e,delta:bx(e,kw(t)),offset:bx(e,SC(t)),velocity:TC(t,.1)}}function SC(e){return e[0]}function kw(e){return e[e.length-1]}function TC(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=kw(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>tr(t)));)r--;if(!n)return{x:0,y:0};const i=sr(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Cw=1e-4,EC=1-Cw,PC=1+Cw,Sw=.01,AC=0-Sw,MC=0+Sw;function Xt(e){return e.max-e.min}function RC(e,t,r){return Math.abs(e-t)<=r}function vx(e,t,r,n=.5){e.origin=n,e.originPoint=We(t.min,t.max,e.origin),e.scale=Xt(r)/Xt(t),e.translate=We(r.min,r.max,e.origin)-e.originPoint,(e.scale>=EC&&e.scale<=PC||isNaN(e.scale))&&(e.scale=1),(e.translate>=AC&&e.translate<=MC||isNaN(e.translate))&&(e.translate=0)}function Ki(e,t,r,n){vx(e.x,t.x,r.x,n?n.originX:void 0),vx(e.y,t.y,r.y,n?n.originY:void 0)}function wx(e,t,r){e.min=r.min+t.min,e.max=e.min+Xt(t)}function DC(e,t,r){wx(e.x,t.x,r.x),wx(e.y,t.y,r.y)}function jx(e,t,r){e.min=t.min-r.min,e.max=e.min+Xt(t)}function Gi(e,t,r){jx(e.x,t.x,r.x),jx(e.y,t.y,r.y)}function LC(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?We(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?We(r,e,n.max):Math.min(e,r)),e}function Nx(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function FC(e,{top:t,left:r,bottom:n,right:a}){return{x:Nx(e.x,r,a),y:Nx(e.y,t,n)}}function _x(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function OC(e,t){return{x:_x(e.x,t.x),y:_x(e.y,t.y)}}function BC(e,t){let r=.5;const n=Xt(e),a=Xt(t);return a>n?r=qa(t.min,t.max-n,e.min):n>a&&(r=qa(e.min,e.max-a,t.min)),lr(0,1,r)}function $C(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Rm=.35;function IC(e=Rm){return e===!1?e=0:e===!0&&(e=Rm),{x:kx(e,"left","right"),y:kx(e,"top","bottom")}}function kx(e,t,r){return{min:Cx(e,t),max:Cx(e,r)}}function Cx(e,t){return typeof e=="number"?e:e[t]||0}const Sx=()=>({translate:0,scale:1,origin:0,originPoint:0}),fa=()=>({x:Sx(),y:Sx()}),Tx=()=>({min:0,max:0}),Ze=()=>({x:Tx(),y:Tx()});function ns(e){return[e("x"),e("y")]}function Tw({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function zC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function VC(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Kd(e){return e===void 0||e===1}function Dm({scale:e,scaleX:t,scaleY:r}){return!Kd(e)||!Kd(t)||!Kd(r)}function pn(e){return Dm(e)||Ew(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ew(e){return Ex(e.x)||Ex(e.y)}function Ex(e){return e&&e!=="0%"}function vc(e,t,r){const n=e-r,a=t*n;return r+a}function Px(e,t,r,n,a){return a!==void 0&&(e=vc(e,a,n)),vc(e,r,n)+t}function Lm(e,t=0,r=1,n,a){e.min=Px(e.min,t,r,n,a),e.max=Px(e.max,t,r,n,a)}function Pw(e,{x:t,y:r}){Lm(e.x,t.translate,t.scale,t.originPoint),Lm(e.y,r.translate,r.scale,r.originPoint)}const Ax=.999999999999,Mx=1.0000000000001;function UC(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&xa(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Pw(e,o)),n&&pn(i.latestValues)&&xa(e,i.latestValues))}t.x<Mx&&t.x>Ax&&(t.x=1),t.y<Mx&&t.y>Ax&&(t.y=1)}function pa(e,t){e.min=e.min+t,e.max=e.max+t}function Rx(e,t,r,n,a=.5){const i=We(e.min,e.max,a);Lm(e,t,r,i,n)}function xa(e,t){Rx(e.x,t.x,t.scaleX,t.scale,t.originX),Rx(e.y,t.y,t.scaleY,t.scale,t.originY)}function Aw(e,t){return Tw(VC(e.getBoundingClientRect(),t))}function WC(e,t,r){const n=Aw(e,r),{scroll:a}=t;return a&&(pa(n.x,a.offset.x),pa(n.y,a.offset.y)),n}const Mw=({current:e})=>e?e.ownerDocument.defaultView:null,qC=new WeakMap;class HC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ze(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vo(u).point)},i=(u,m)=>{const{drag:h,dragPropagation:y,onDragStart:v}=this.getProps();if(h&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B6(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ns(w=>{let g=this.getAxisMotionValue(w).get()||0;if(Bs.test(g)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(g=Xt(b)*(parseFloat(g)/100))}}this.originPoint[w]=g}),v&&Ie.postRender(()=>v(u,m)),km(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(u,m)=>{const{dragPropagation:h,dragDirectionLock:y,onDirectionLock:v,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:w}=m;if(y&&this.currentDirection===null){this.currentDirection=KC(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),p&&p(u,m)},l=(u,m)=>this.stop(u,m),c=()=>ns(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new _w(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Mw(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ie.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!ul(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=LC(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&ma(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=FC(a.layoutBox,r):this.constraints=!1,this.elastic=IC(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ns(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$C(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ma(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=WC(n,a.root,this.visualElement.getTransformPagePoint());let o=OC(a.layout.layoutBox,i);if(r){const l=r(zC(o));this.hasMutatedConstraints=!!l,l&&(o=Tw(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ns(u=>{if(!ul(u,r,this.currentDirection))return;let m=c&&c[u]||{};o&&(m={min:0,max:0});const h=a?200:1e6,y=a?40:1e7,v={type:"inertia",velocity:n?t[u]:0,bounceStiffness:h,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return km(this.visualElement,t),n.start(B0(t,n,0,r,this.visualElement,!1))}stopAnimation(){ns(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ns(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ns(r=>{const{drag:n}=this.getProps();if(!ul(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-We(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ma(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ns(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=BC({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ns(o=>{if(!ul(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(We(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;qC.set(this.visualElement,this);const t=this.visualElement.current,r=Hi(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();ma(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Ie.read(n);const o=wo(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ns(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Rm,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ul(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function KC(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class GC extends an{constructor(t){super(t),this.removeGroupControls=Yt,this.removeListeners=Yt,this.controls=new HC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Dx=e=>(t,r)=>{e&&Ie.postRender(()=>e(t,r))};class QC extends an{constructor(){super(...arguments),this.removePointerDownListener=Yt}onPointerDown(t){this.session=new _w(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Dx(t),onStart:Dx(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Ie.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Hi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Lx(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const wi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(me.test(e))e=parseFloat(e);else return e;const r=Lx(e,t.target.x),n=Lx(e,t.target.y);return`${r}% ${n}%`}},YC={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Xr.parse(e);if(a.length>5)return n;const i=Xr.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=We(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class ZC extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;g6(XC),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Rl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ie.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),h0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Rw(e){const[t,r]=M5(),n=f.useContext(p1);return s.jsx(ZC,{...e,layoutGroup:n,switchLayoutGroup:f.useContext(N1),isPresent:t,safeToRemove:r})}const XC={borderRadius:{...wi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wi,borderTopRightRadius:wi,borderBottomLeftRadius:wi,borderBottomRightRadius:wi,boxShadow:YC};function JC(e,t,r){const n=_t(e)?e:bo(e);return n.start(B0("",n,t,r)),n.animation}function eS(e){return e instanceof SVGElement&&e.tagName!=="svg"}const tS=(e,t)=>e.depth-t.depth;class sS{constructor(){this.children=[],this.isDirty=!1}add(t){S0(this.children,t),this.isDirty=!0}remove(t){T0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tS),this.isDirty=!1,this.children.forEach(t)}}function rS(e,t){const r=$s.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Zr(n),e(i-t))};return Ie.read(n,!0),()=>Zr(n)}const Dw=["TopLeft","TopRight","BottomLeft","BottomRight"],nS=Dw.length,Fx=e=>typeof e=="string"?parseFloat(e):e,Ox=e=>typeof e=="number"||me.test(e);function aS(e,t,r,n,a,i){a?(e.opacity=We(0,r.opacity!==void 0?r.opacity:1,iS(n)),e.opacityExit=We(t.opacity!==void 0?t.opacity:1,0,oS(n))):i&&(e.opacity=We(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<nS;o++){const l=`border${Dw[o]}Radius`;let c=Bx(t,l),d=Bx(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Ox(c)===Ox(d)?(e[l]=Math.max(We(Fx(c),Fx(d),n),0),(Bs.test(d)||Bs.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||r.rotate)&&(e.rotate=We(t.rotate||0,r.rotate||0,n))}function Bx(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const iS=Lw(0,.5,J1),oS=Lw(.5,.95,Yt);function Lw(e,t,r){return n=>n<e?0:n>t?1:r(qa(e,t,n))}function $x(e,t){e.min=t.min,e.max=t.max}function rs(e,t){$x(e.x,t.x),$x(e.y,t.y)}function Ix(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zx(e,t,r,n,a){return e-=t,e=vc(e,1/r,n),a!==void 0&&(e=vc(e,1/a,n)),e}function lS(e,t=0,r=1,n=.5,a,i=e,o=e){if(Bs.test(t)&&(t=parseFloat(t),t=We(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=We(i.min,i.max,n);e===i&&(l-=t),e.min=zx(e.min,t,r,l,a),e.max=zx(e.max,t,r,l,a)}function Vx(e,t,[r,n,a],i,o){lS(e,t[r],t[n],t[a],t.scale,i,o)}const cS=["x","scaleX","originX"],dS=["y","scaleY","originY"];function Ux(e,t,r,n){Vx(e.x,t,cS,r?r.x:void 0,n?n.x:void 0),Vx(e.y,t,dS,r?r.y:void 0,n?n.y:void 0)}function Wx(e){return e.translate===0&&e.scale===1}function Fw(e){return Wx(e.x)&&Wx(e.y)}function qx(e,t){return e.min===t.min&&e.max===t.max}function uS(e,t){return qx(e.x,t.x)&&qx(e.y,t.y)}function Hx(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Ow(e,t){return Hx(e.x,t.x)&&Hx(e.y,t.y)}function Kx(e){return Xt(e.x)/Xt(e.y)}function Gx(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mS{constructor(){this.members=[]}add(t){S0(this.members,t),t.scheduleRender()}remove(t){if(T0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hS(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:h,skewX:y,skewY:v}=r;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),m&&(n+=`rotateX(${m}deg) `),h&&(n+=`rotateY(${h}deg) `),y&&(n+=`skewX(${y}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const xn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Mi=typeof window<"u"&&window.MotionDebug!==void 0,Gd=["","X","Y","Z"],fS={visibility:"hidden"},Qx=1e3;let pS=0;function Qd(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Bw(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=H1(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ie,!(a||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Bw(n)}function $w({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=pS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mi&&(xn.totalNodes=xn.resolvedTargetDeltas=xn.recalculatedProjection=0),this.nodes.forEach(yS),this.nodes.forEach(NS),this.nodes.forEach(_S),this.nodes.forEach(bS),Mi&&window.MotionDebug.record(xn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new sS)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new E0),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eS(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let m;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=rS(h,250),Rl.hasAnimatedSinceResize&&(Rl.hasAnimatedSinceResize=!1,this.nodes.forEach(Zx))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||ES,{onLayoutAnimationStart:w,onLayoutAnimationComplete:g}=u.getProps(),x=!this.targetLayout||!Ow(this.targetLayout,v)||y,b=!h&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const j={...N0(p,"layout"),onPlay:w,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else h||Zx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kS),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Bw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yx);return}this.isUpdating||this.nodes.forEach(wS),this.isUpdating=!1,this.nodes.forEach(jS),this.nodes.forEach(xS),this.nodes.forEach(gS),this.clearAllSnapshots();const l=$s.now();ht.delta=lr(0,1e3/60,l-ht.timestamp),ht.timestamp=l,ht.isProcessing=!0,$d.update.process(ht),$d.preRender.process(ht),$d.render.process(ht),ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,h0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vS),this.sharedNodes.forEach(CS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Fw(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||pn(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),PS(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Ze();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(AS))){const{scroll:u}=this.root;u&&(pa(c.x,u.offset.x),pa(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=Ze();if(rs(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:m,options:h}=u;u!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&rs(c,o),pa(c.x,m.offset.x),pa(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=Ze();rs(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&xa(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),pn(u.latestValues)&&xa(c,u.latestValues)}return pn(this.latestValues)&&xa(c,this.latestValues),c}removeTransform(o){const l=Ze();rs(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!pn(d.latestValues))continue;Dm(d.latestValues)&&d.updateSnapshot();const u=Ze(),m=d.measurePageBox();rs(u,m),Ux(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return pn(this.latestValues)&&Ux(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=ht.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Gi(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),rs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ze(),this.targetWithTransforms=Ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rs(this.target,this.layout.layoutBox),Pw(this.target,this.targetDelta)):rs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ze(),this.relativeTargetOrigin=Ze(),Gi(this.relativeTargetOrigin,this.target,y.target),rs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mi&&xn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dm(this.parent.latestValues)||Ew(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ht.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;rs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,y=this.treeScale.y;UC(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ze());const{target:v}=l;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ix(this.prevProjectionDelta.x,this.projectionDelta.x),Ix(this.prevProjectionDelta.y,this.projectionDelta.y)),Ki(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==y||!Gx(this.projectionDelta.x,this.prevProjectionDelta.x)||!Gx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Mi&&xn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fa(),this.projectionDelta=fa(),this.projectionDeltaWithTransform=fa()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=fa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Ze(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,p=y!==v,w=this.getStack(),g=!w||w.members.length<=1,x=!!(p&&!g&&this.options.crossfade===!0&&!this.path.some(TS));this.animationProgress=0;let b;this.mixTargetDelta=j=>{const N=j/1e3;Xx(m.x,o.x,N),Xx(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gi(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SS(this.relativeTarget,this.relativeTargetOrigin,h,N),b&&uS(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ze()),rs(b,this.relativeTarget)),p&&(this.animationValues=u,aS(u,d,this.latestValues,N,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Rl.hasAnimatedSinceResize=!0,this.currentAnimation=JC(0,Qx,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Qx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Iw(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Ze();const m=Xt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const h=Xt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}rs(l,c),xa(l,u),Ki(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mS),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Qd("z",o,d,this.animationValues);for(let u=0;u<Gd.length;u++)Qd(`rotate${Gd[u]}`,o,d,this.animationValues),Qd(`skew${Gd[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fS;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Al(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Al(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!pn(this.latestValues)&&(p.transform=u?u({},""):"none",this.hasProjected=!1),p}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=hS(this.projectionDeltaWithTransform,this.treeScale,h),u&&(d.transform=u(h,d.transform));const{x:y,y:v}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in pc){if(h[p]===void 0)continue;const{correct:w,applyTo:g}=pc[p],x=d.transform==="none"?h[p]:w(h[p],m);if(g){const b=g.length;for(let j=0;j<b;j++)d[g[j]]=x}else d[p]=x}return this.options.layoutId&&(d.pointerEvents=m===this?Al(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Yx),this.root.sharedNodes.clear()}}}function xS(e){e.updateLayout()}function gS(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?ns(m=>{const h=o?r.measuredBox[m]:r.layoutBox[m],y=Xt(h);h.min=n[m].min,h.max=h.min+y}):Iw(i,r.layoutBox,n)&&ns(m=>{const h=o?r.measuredBox[m]:r.layoutBox[m],y=Xt(n[m]);h.max=h.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+y)});const l=fa();Ki(l,n,r.layoutBox);const c=fa();o?Ki(c,e.applyTransform(a,!0),r.measuredBox):Ki(c,n,r.layoutBox);const d=!Fw(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:y}=m;if(h&&y){const v=Ze();Gi(v,r.layoutBox,h.layoutBox);const p=Ze();Gi(p,n,y.layoutBox),Ow(v,p)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=v,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function yS(e){Mi&&xn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function bS(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function vS(e){e.clearSnapshot()}function Yx(e){e.clearMeasurements()}function wS(e){e.isLayoutDirty=!1}function jS(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Zx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function NS(e){e.resolveTargetDelta()}function _S(e){e.calcProjection()}function kS(e){e.resetSkewAndRotation()}function CS(e){e.removeLeadSnapshot()}function Xx(e,t,r){e.translate=We(t.translate,0,r),e.scale=We(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Jx(e,t,r,n){e.min=We(t.min,r.min,n),e.max=We(t.max,r.max,n)}function SS(e,t,r,n){Jx(e.x,t.x,r.x,n),Jx(e.y,t.y,r.y,n)}function TS(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ES={duration:.45,ease:[.4,0,.1,1]},eg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tg=eg("applewebkit/")&&!eg("chrome/")?Math.round:Yt;function sg(e){e.min=tg(e.min),e.max=tg(e.max)}function PS(e){sg(e.x),sg(e.y)}function Iw(e,t,r){return e==="position"||e==="preserve-aspect"&&!RC(Kx(t),Kx(r),.2)}function AS(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const MS=$w({attachResizeListener:(e,t)=>wo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yd={current:void 0},zw=$w({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yd.current){const e=new MS({});e.mount(window),e.setOptions({layoutScroll:!0}),Yd.current=e}return Yd.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),RS={pan:{Feature:QC},drag:{Feature:GC,ProjectionNode:zw,MeasureLayout:Rw}};function rg(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&Ie.postRender(()=>i(t,Vo(t)))}class DS extends an{mount(){const{current:t}=this.node;t&&(this.unmount=R6(t,r=>(rg(this.node,r,"Start"),n=>rg(this.node,n,"End"))))}unmount(){}}class LS extends an{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zo(wo(this.node.current,"focus",()=>this.onFocus()),wo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ng(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&Ie.postRender(()=>i(t,Vo(t)))}class FS extends an{mount(){const{current:t}=this.node;t&&(this.unmount=O6(t,r=>(ng(this.node,r,"Start"),(n,{success:a})=>ng(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fm=new WeakMap,Zd=new WeakMap,OS=e=>{const t=Fm.get(e.target);t&&t(e)},BS=e=>{e.forEach(OS)};function $S({root:e,...t}){const r=e||document;Zd.has(r)||Zd.set(r,{});const n=Zd.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(BS,{root:e,...t})),n[a]}function IS(e,t,r){const n=$S(t);return Fm.set(e,r),n.observe(e),()=>{Fm.delete(e),n.unobserve(e)}}const zS={some:0,all:1};class VS extends an{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:zS[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=d?u:m;h&&h(c)};return IS(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(US(t,r))&&this.startObserver()}unmount(){}}function US({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const WS={inView:{Feature:VS},tap:{Feature:FS},focus:{Feature:LS},hover:{Feature:DS}},qS={layout:{ProjectionNode:zw,MeasureLayout:Rw}},Om={current:null},Vw={current:!1};function HS(){if(Vw.current=!0,!!l0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Om.current=e.matches;e.addListener(t),t()}else Om.current=!1}const KS=[...hw,vt,Xr],GS=e=>KS.find(mw(e)),ag=new WeakMap;function QS(e,t,r){for(const n in t){const a=t[n],i=r[n];if(_t(a))e.addValue(n,a);else if(_t(i))e.addValue(n,bo(a,{owner:e}));else if(i!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,bo(o!==void 0?o:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const ig=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YS{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=L0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=$s.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ie.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:u}=o;this.onUpdate=u,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Jc(r),this.isVariantNode=w1(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const y in h){const v=h[y];c[y]!==void 0&&_t(v)&&v.set(c[y],!1)}}mount(t){this.current=t,ag.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Vw.current||HS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ag.delete(this.current),this.projection&&this.projection.unmount(),Zr(this.notifyUpdate),Zr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Qn.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ha){const r=Ha[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ze()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<ig.length;n++){const a=ig[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=QS(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=bo(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(dw(a)||tw(a))?a=parseFloat(a):!GS(a)&&Xr.test(r)&&(a=ow(t,r)),this.setBaseTarget(t,_t(a)?a.get():a)),_t(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=p0(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!_t(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new E0),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Uw extends YS{constructor(){super(...arguments),this.KeyframeResolver=fw}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;_t(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function ZS(e){return window.getComputedStyle(e)}class XS extends Uw{constructor(){super(...arguments),this.type="html",this.renderInstance=P1}readValueFromInstance(t,r){if(Qn.has(r)){const n=D0(r);return n&&n.default||0}else{const n=ZS(t),a=(S1(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Aw(t,r)}build(t,r,n){y0(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return j0(t,r,n)}}class JS extends Uw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ze}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Qn.has(r)){const n=D0(r);return n&&n.default||0}return r=A1.has(r)?r:m0(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return D1(t,r,n)}build(t,r,n){b0(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,a){M1(t,r,n,a)}mount(t){this.isSVGTag=w0(t.tagName),super.mount(t)}}const eT=(e,t)=>f0(e)?new JS(t):new XS(t,{allowProjection:e!==f.Fragment}),tT=C6({..._C,...WS,...RS,...qS},eT),bt=z5(tT),$0=()=>"http://localhost:3000",sT=async()=>{const e=await J.get(`${$0()}/api/services`,{params:{is_active:!0,sort_by:"display_order",sort_order:"asc"}});return e.data.services||e.data||[]},rT=async()=>{const e=await J.get(`${$0()}/api/gallery`,{params:{limit:6}});return e.data.images||e.data||[]},nT=async()=>{const e=await J.get(`${$0()}/api/settings`);return{shop_name:e.data.shop_name||"Master Fade",shop_address:e.data.shop_address||"13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5",shop_phone:e.data.shop_phone||"+353833276229",shop_email:e.data.shop_email||"",operating_hours:e.data.operating_hours||"10:00 AM - 3:00 PM"}},aT=()=>{const e=Le(),[t,r]=f.useState(!1);f.useEffect(()=>{r(!0)},[]);const n=ee(b=>b.authentication_state.authentication_status.is_authenticated),a=ee(b=>b.authentication_state.authentication_status.user_type),i=ee(b=>b.authentication_state.current_user),o=ee(b=>b.app_settings),l=ee(b=>b.app_settings.services_enabled),{data:c=[],isLoading:d,error:u}=we({queryKey:["services-preview"],queryFn:sT,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),{data:m=[],isLoading:h,error:y}=we({queryKey:["gallery-preview"],queryFn:rT,staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}),{data:v,error:p}=we({queryKey:["shop-settings"],queryFn:nT,staleTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,initialData:o.shop_name!=="Master Fade"?{shop_name:o.shop_name||"Master Fade",shop_address:o.shop_address||"13 Synnott Pl, Phibsborough, Dublin 7, D07 E7N5",shop_phone:o.shop_phone||"+353833276229",shop_email:o.shop_email,operating_hours:o.operating_hours}:void 0}),w=()=>{e(l?"/book/service":"/book/date")},g=()=>{e("/gallery")},x=b=>{window.location.href=`tel:${b}`};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"relative bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 overflow-hidden min-h-[90vh] flex items-center",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs(bt.div,{initial:{opacity:0,y:20},animate:{opacity:t?1:0,y:t?0:20},transition:{duration:.6},className:"text-left",children:[n&&i&&s.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mb-4",children:s.jsxs("p",{className:"text-lg text-blue-400 font-medium",children:["Welcome back, ",i.name,"!"]})}),a==="admin"&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg px-4 py-2 backdrop-blur-sm",children:s.jsxs("p",{className:"text-sm text-yellow-200 font-medium",children:[" Admin View - ",s.jsx(Q,{to:"/admin",className:"underline hover:text-yellow-100",children:"Go to Admin Dashboard"})]})})}),s.jsxs(bt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"inline-flex items-center gap-2 bg-blue-500/20 backdrop-blur-sm border border-blue-500/30 rounded-full px-4 py-2 mb-6",children:[s.jsx(Od,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{className:"text-sm font-medium text-blue-300",children:"Dublin's Premier Barbershop"})]}),s.jsxs(bt.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold leading-tight mb-6",children:[s.jsx("span",{className:"text-white",children:"Master Your"}),s.jsx("br",{}),s.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"Perfect Fade"})]}),s.jsx(bt.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-xl md:text-2xl text-gray-300 leading-relaxed mb-8 max-w-2xl",children:"Expert cuts, seamless booking. Walk in with confidence, walk out with style."}),s.jsx(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[{icon:lt,text:"Book in 2 minutes"},{icon:Je,text:"Choose your time"},{icon:vi,text:"5-star service"},{icon:Od,text:"Expert barbers"}].map((b,j)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:s.jsx(b.icon,{className:"w-5 h-5 text-blue-400"})}),s.jsx("span",{className:"text-gray-300 font-medium",children:b.text})]},j))}),s.jsxs(bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("button",{onClick:w,className:"group relative px-8 py-4 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white text-lg font-semibold rounded-xl shadow-lg shadow-blue-500/50 hover:shadow-xl hover:shadow-blue-500/60 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2",style:{minHeight:"44px",minWidth:"44px"},children:[s.jsx("span",{children:"Book Your Cut Now"}),s.jsx(ds,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),!n&&s.jsx("div",{className:"flex gap-3",children:s.jsx(Q,{to:"/login",className:"px-6 py-4 bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-medium rounded-xl border border-white/20 transition-all duration-200",style:{minHeight:"44px",minWidth:"44px"},children:"Log In"})}),n&&a==="user"&&s.jsx(Q,{to:"/dashboard",className:"px-6 py-4 bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-medium rounded-xl border border-white/20 transition-all duration-200",style:{minHeight:"44px",minWidth:"44px"},children:"My Dashboard"})]})]}),s.jsx(bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:t?1:0,scale:t?1:.95},transition:{delay:.4,duration:.6},className:"relative hidden lg:block",children:s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-xl border border-white/10 rounded-2xl p-8 shadow-2xl",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"500+"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Happy Clients"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"5.0"}),s.jsxs("div",{className:"text-sm text-gray-400 flex items-center justify-center gap-1",children:[s.jsx(vi,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),"Google Rating"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"10+"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Years Experience"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:"24/7"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Online Booking"})]})]}),s.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-blue-500/20 rounded-full blur-2xl"}),s.jsx("div",{className:"absolute -bottom-4 -left-4 w-32 h-32 bg-cyan-500/20 rounded-full blur-2xl"})]})})})]})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:s.jsx("svg",{viewBox:"0 0 1440 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M0 48h1440V0c-240 48-480 48-720 0S240 0 0 48z",fill:"white"})})})]}),s.jsx("section",{className:"py-16 lg:py-24 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:["Welcome to ",s.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent",children:(v==null?void 0:v.shop_name)||"Master Fade"})]}),s.jsx("p",{className:"text-xl text-gray-600 leading-relaxed max-w-3xl mx-auto",children:"Located in the heart of Phibsborough, Dublin 7, we're your destination for premium cuts and exceptional service."})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Od,title:"Expert Craftsmanship",description:"Our experienced barbers deliver precision cuts tailored to your style and personality."},{icon:lt,title:"Seamless Booking",description:"Book online in minutes, choose your preferred time, and skip the waiting. Your time is valuable."},{icon:vi,title:"Premium Experience",description:"From consultation to finish, we ensure every visit leaves you looking and feeling your best."}].map((b,j)=>s.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:j*.1,duration:.6},className:"group relative bg-gradient-to-br from-gray-50 to-white border border-gray-200 rounded-2xl p-8 hover:shadow-xl hover:border-blue-200 transition-all duration-300",children:[s.jsx("div",{className:"mb-6 inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(b.icon,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:b.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:b.description})]},j))})]})}),c.length>0&&s.jsx("section",{className:"py-12 lg:py-20 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Services"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Choose from our range of professional services"})]}),d?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(b=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 animate-pulse",children:[s.jsx("div",{className:"w-full h-48 bg-gray-200"}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]},b))}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(b=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl overflow-hidden border border-gray-100 transition-all duration-200 transform hover:scale-105",children:[b.image_url&&s.jsx("div",{className:"w-full h-48 overflow-hidden bg-gray-100",children:s.jsx("img",{src:b.image_url,alt:b.name,className:"w-full h-full object-cover",loading:"lazy"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:b.name}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:b.description}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[b.duration," minutes"]}),b.price!==null&&b.price!==void 0&&s.jsxs("span",{className:"text-lg font-semibold text-blue-600",children:["$",typeof b.price=="number"?b.price.toFixed(2):parseFloat(String(b.price)).toFixed(2)]})]})]})]},b.service_id))})]})}),s.jsx("section",{className:"py-12 lg:py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Our Work"}),s.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Check out our latest haircuts and styles"})]}),h?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[1,2,3,4,5,6].map(b=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},b))}):m.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:m.slice(0,6).map(b=>s.jsxs("button",{onClick:g,className:"relative aspect-square group overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",style:{minHeight:"44px",minWidth:"44px"},children:[s.jsx("img",{src:b.thumbnail_url||b.image_url,alt:b.caption||"Gallery image",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-110",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity duration-200 flex items-center justify-center",children:s.jsx("span",{className:"text-white opacity-0 group-hover:opacity-100 font-medium transition-opacity duration-200",children:"View Gallery"})}),b.caption&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:s.jsx("p",{className:"text-white text-sm font-medium truncate",children:b.caption})})]},b.image_id))}),s.jsx("div",{className:"text-center",children:s.jsx(Q,{to:"/gallery",className:"inline-block px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",style:{minHeight:"44px",minWidth:"44px"},children:"View Full Gallery"})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Gallery coming soon!"}),s.jsx("p",{className:"text-gray-500",children:"We're adding new photos regularly. Check back soon."})]})]})}),s.jsx("section",{className:"py-16 lg:py-24 bg-gradient-to-br from-gray-50 to-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Visit Us Today"}),s.jsx("p",{className:"text-xl text-gray-600",children:"We're conveniently located in Phibsborough, Dublin 7"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 mb-16",children:[s.jsxs("div",{className:"space-y-6",children:[(v==null?void 0:v.shop_address)&&s.jsx(bt.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.1,duration:.6},className:"group bg-white p-8 rounded-2xl shadow-lg border border-gray-200 hover:shadow-xl hover:border-blue-200 transition-all duration-300",children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(Yc,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-3",children:"Our Location"}),s.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:v.shop_address}),s.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v.shop_address)}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors group",children:[s.jsx("span",{children:"Get Directions"}),s.jsx(ds,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})}),(v==null?void 0:v.shop_phone)&&s.jsx(bt.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2,duration:.6},className:"group bg-white p-8 rounded-2xl shadow-lg border border-gray-200 hover:shadow-xl hover:border-blue-200 transition-all duration-300",children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(fs,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-3",children:"Call Us"}),s.jsx("p",{className:"text-gray-600 mb-4 text-lg font-medium",children:v.shop_phone}),s.jsxs("button",{onClick:()=>x(v.shop_phone),className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-semibold transition-colors group",style:{minHeight:"44px",minWidth:"44px"},children:[s.jsx("span",{children:"Call Now"}),s.jsx(ds,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})}),(v==null?void 0:v.operating_hours)&&s.jsx(bt.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.3,duration:.6},className:"group bg-white p-8 rounded-2xl shadow-lg border border-gray-200 hover:shadow-xl hover:border-blue-200 transition-all duration-300",children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:s.jsx(lt,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-xl text-gray-900 mb-3",children:"Opening Hours"}),s.jsx("p",{className:"text-gray-600 text-lg",children:v.operating_hours})]})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(bt.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2,duration:.6},className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden h-[400px]",children:s.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2380.8487556267477!2d-6.278427223704396!3d53.36294097228234!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48670e9c2baf8e6d%3A0x8e4b1c8c3e0e4b8c!2s13%20Synnott%20Pl%2C%20Phibsborough%2C%20Dublin%207%2C%20D07%20E7N5!5e0!3m2!1sen!2sie!4v1699999999999!5m2!1sen!2sie",width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Master Fade Location"})}),s.jsxs(bt.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.3,duration:.6},className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"font-bold text-2xl text-gray-900",children:"Google Reviews"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex",children:[1,2,3,4,5].map(b=>s.jsx(vi,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"},b))}),s.jsx("span",{className:"font-bold text-gray-900",children:"5.0"})]})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Our customers love us! Check out what they're saying about their experience at Master Fade."}),s.jsxs("a",{href:"https://search.google.com/local/writereview?placeid=ChIJbY6vK5wOZ0gRjEsO4Iweh44",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-semibold rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105",children:[s.jsx(vi,{className:"w-5 h-5"}),s.jsx("span",{children:"View All Reviews"})]})]})]})]})]})}),(u||y||p)&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:"Some content could not be loaded. Please refresh the page or try again later."})})]})})})]})},iT=()=>{const[e,t]=f.useState(null),r=ee(y=>y.booking_context),n=ee(y=>y.app_settings.services_enabled),a=ee(y=>y.update_booking_context),i=Le();f.useEffect(()=>{n||i("/book/date")},[n,i]),f.useEffect(()=>{r.service_id&&t(r.service_id)},[r.service_id]);const{data:o=[],isLoading:l,error:c,refetch:d}=we({queryKey:["services","active"],queryFn:async()=>{const y=await J.get("http://localhost:3000/api/services",{params:{is_active:!0,sort_by:"display_order",sort_order:"asc"}});return y.data.services||y.data},staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),u=y=>{t(y.service_id),a({service_id:y.service_id,service_name:y.name})},m=()=>{a({service_id:null,service_name:null}),i("/book/date")},h=()=>{e&&i("/book/date")};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-3 leading-tight",children:"What service do you need?"}),s.jsx("p",{className:"text-lg md:text-xl text-gray-600 leading-relaxed",children:"Choose the service that best fits your needs"})]}),s.jsx("div",{className:"mb-8 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-full px-6 py-3 shadow-lg",children:[s.jsx("span",{className:"bg-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-bold shadow-md",children:"1"}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 hidden sm:inline",children:"Service"}),s.jsx("span",{className:"text-gray-400 mx-1",children:""}),s.jsx("span",{className:"bg-gray-200 text-gray-500 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"2"}),s.jsx("span",{className:"text-sm text-gray-500 hidden sm:inline",children:"Date"}),s.jsx("span",{className:"text-gray-400 mx-1",children:""}),s.jsx("span",{className:"bg-gray-200 text-gray-500 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"3"}),s.jsx("span",{className:"text-sm text-gray-500 hidden sm:inline",children:"Time"}),s.jsx("span",{className:"text-gray-400 mx-1",children:""}),s.jsx("span",{className:"bg-gray-200 text-gray-500 rounded-full w-10 h-10 flex items-center justify-center text-sm font-medium",children:"4"}),s.jsx("span",{className:"text-sm text-gray-500 hidden sm:inline",children:"Details"})]})}),s.jsx("div",{className:"mb-8 text-center",children:s.jsx("button",{onClick:m,className:"text-blue-600 hover:text-blue-800 text-sm md:text-base font-medium underline transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1","aria-label":"Skip service selection and continue with standard haircut",children:"Skip this step (continue with standard haircut)"})}),l&&s.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Loading services..."})]}),c&&s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center shadow-lg",children:[s.jsx("svg",{className:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Failed to Load Services"}),s.jsx("p",{className:"text-red-700 mb-4",children:"We couldn't load the available services. Please try again."}),s.jsx("button",{onClick:()=>d(),className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 shadow-md hover:shadow-xl",children:"Try Again"})]})}),!l&&!c&&o.length===0&&s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center shadow-lg",children:[s.jsx("svg",{className:"w-12 h-12 text-yellow-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"No Services Available"}),s.jsx("p",{className:"text-yellow-700 mb-4",children:"No services are currently available. Please check back later."}),s.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 shadow-md hover:shadow-xl",children:"Continue Anyway"})]})}),!l&&!c&&o.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-12",children:o.map(y=>s.jsxs("button",{onClick:()=>u(y),className:`
                    relative overflow-hidden rounded-xl border-2 p-4 md:p-6 text-left 
                    transition-all duration-200 transform focus:outline-none focus:ring-4 focus:ring-blue-100
                    ${e===y.service_id?"border-blue-600 bg-blue-50 shadow-xl scale-105 ring-4 ring-blue-100":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-lg hover:scale-102"}
                  `,"aria-pressed":e===y.service_id,"aria-label":`Select ${y.name} service`,children:[e===y.service_id&&s.jsx("div",{className:"absolute top-3 right-3 bg-blue-600 rounded-full w-8 h-8 md:w-10 md:h-10 flex items-center justify-center shadow-lg animate-in zoom-in duration-200",children:s.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),y.image_url&&s.jsx("div",{className:"mb-4 aspect-video overflow-hidden rounded-lg bg-gray-100",children:s.jsx("img",{src:y.image_url,alt:`${y.name} service preview`,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",loading:"lazy"})}),s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-2 leading-tight",children:y.name}),s.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:y.description}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{className:"font-medium",children:[y.duration," min"]})]}),y.price!==null&&y.price!==void 0&&s.jsxs("div",{className:"text-xs md:text-sm font-semibold text-blue-600",children:["From $",typeof y.price=="number"?y.price.toFixed(2):parseFloat(String(y.price)).toFixed(2)]})]})]},y.service_id))}),s.jsxs("div",{className:"max-w-3xl mx-auto flex justify-between items-center gap-4 mt-8",children:[s.jsx(Q,{to:"/",className:"px-6 py-3 rounded-lg font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-gray-200",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),s.jsx("button",{onClick:h,disabled:!e,className:`
                flex-1 max-w-xs px-8 py-3 rounded-lg font-medium text-white 
                transition-all duration-200 shadow-lg focus:outline-none focus:ring-4
                ${e?"bg-blue-600 hover:bg-blue-700 hover:shadow-xl focus:ring-blue-300 cursor-pointer":"bg-gray-300 cursor-not-allowed opacity-50"}
              `,"aria-label":"Continue to date selection",children:s.jsxs("span",{className:"flex items-center justify-center",children:["Continue",s.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),!e&&!l&&o.length>0&&s.jsx("div",{className:"text-center mt-6",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Select a service to continue or skip this step"})})]})})})},Bm=e=>{const[t,r]=e.split("-").map(Number);return new Date(t,r-1,1)},ml=e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0");return`${t}-${r}`},oT=e=>Bm(e).toLocaleDateString("en-US",{month:"long",year:"numeric"}),lT=e=>new Date(e+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),cT=e=>{const[t,r]=e.split("-").map(Number),n=new Date(t,r-1,1),a=new Date(t,r,0),i=o=>{const l=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),d=String(o.getDate()).padStart(2,"0");return`${l}-${c}-${d}`};return{start_date:i(n),end_date:i(a)}},dT=(e,t)=>{const r={},n=new Date;n.setHours(0,0,0,0);const a=new Date(n);return a.setDate(n.getDate()+t),a.setHours(23,59,59,999),(e.dates||[]).forEach(i=>{const o=new Date(i.date+"T00:00:00"),l=o<n,c=o>a;r[i.date]={available_slots:i.available_slots,total_capacity:i.total_capacity,status:i.is_blocked?"blocked":l?"past":c?"blocked":i.available_slots===0?"full":i.available_slots<=1?"limited":"available"}}),r},uT=()=>{const e=Le(),t=ee(k=>k.booking_context.selected_date),r=ee(k=>k.booking_context.service_id),n=ee(k=>k.booking_context.service_name),a=ee(k=>k.app_settings.booking_window_days),i=ee(k=>k.update_booking_context),[o,l]=f.useState(()=>t?t.slice(0,7):new Date().toISOString().slice(0,7)),[c,d]=f.useState(t);f.useEffect(()=>{if(t&&t!==c){console.log("[Date Selection] Syncing date from context:",t),d(t);const k=t.slice(0,7);o!==k&&l(k)}},[t,c,o]);const{start_date:u,end_date:m}=cT(o),{data:h={},isLoading:y,error:v}=we({queryKey:["availability",o,r,a],queryFn:async()=>{const k=await J.get("http://localhost:3000/api/availability",{params:{start_date:u,end_date:m,service_id:r||void 0}});return dT(k.data,a)},staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),p=ml(new Date),w=f.useMemo(()=>{const k=new Date,G=new Date(k);return G.setDate(k.getDate()+a),ml(G)},[a]),g=o>p,x=o<w,b=()=>{if(g){const k=Bm(o);k.setMonth(k.getMonth()-1),l(ml(k))}},j=()=>{if(x){const k=Bm(o);k.setMonth(k.getMonth()+1),l(ml(k))}},N=f.useMemo(()=>{const[k,G]=o.split("-").map(Number),M=new Date(k,G-1,1).getDay(),F=new Date(k,G,0).getDate(),D=M,$=D+F,q=Math.ceil($/7),I=[];let S=1-D;for(let C=0;C<q;C++){const B=[];for(let P=0;P<7;P++){const A=S;if(S++,A<=0||A>F)B.push(null);else{const Y=`${k}-${String(G).padStart(2,"0")}-${String(A).padStart(2,"0")}`,V=h[Y]||null;B.push({date:A,dateString:Y,availability:V})}}I.push(B)}return I},[o,h]),_=k=>{if(!k.availability)return;const G=k.availability.status;if(G==="full"||G==="blocked"||G==="past")return;const M=new Date(k.dateString+"T00:00:00"),F=new Date;F.setHours(0,0,0,0);const D=new Date(F);if(D.setDate(F.getDate()+a),D.setHours(23,59,59,999),M<F||M>D)return;d(k.dateString);const $=k.dateString!==t;i({selected_date:k.dateString,...$?{selected_time:null}:{}})},T=()=>{if(!c||y)return;const k=h[c];if(!k)console.warn("No availability data for selected date, proceeding anyway");else if(k.status!=="available"&&k.status!=="limited"){alert("This date is no longer available. Please select another date."),d(null),i({selected_date:null,selected_time:null});return}const G=new Date(c+"T00:00:00"),M=new Date;M.setHours(0,0,0,0);const F=new Date(M);if(F.setDate(M.getDate()+a),F.setHours(23,59,59,999),G<M||G>F){alert("This date is outside the booking window. Please select another date."),d(null),i({selected_date:null,selected_time:null});return}i({selected_date:c}),console.log("[Date Selection] Navigating to time selection with date:",c),setTimeout(()=>{e("/book/time")},0)},E=()=>{e(r?"/book/service":"/")},z=new Date().toISOString().slice(0,10);return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Step 2 of 4"}),s.jsx("span",{className:"text-sm text-gray-500",children:"Date Selection"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"50%"}})})]}),s.jsxs("button",{onClick:E,className:"mb-6 flex items-center text-gray-600 hover:text-gray-900 transition-colors text-sm font-medium",children:[s.jsx(cc,{className:"w-4 h-4 mr-1"}),"Back"]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-8 border-b border-gray-200",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"When would you like to come?"}),n&&s.jsxs("div",{className:"mt-4 inline-flex items-center bg-blue-100 text-blue-800 px-4 py-2 rounded-full",children:[s.jsx(o1,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"font-medium",children:n}),s.jsx(Q,{to:"/book/service",className:"ml-3 text-blue-600 hover:text-blue-800 text-sm underline",children:"Change"})]})]}),s.jsxs("div",{className:"px-6 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsx("button",{onClick:b,disabled:!g||y,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Previous month",children:s.jsx(cc,{className:"w-6 h-6 text-gray-700"})}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:oT(o)}),s.jsx("button",{onClick:j,disabled:!x||y,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Next month",children:s.jsx(ds,{className:"w-6 h-6 text-gray-700"})})]}),v&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start",children:[s.jsx(Pt,{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Couldn't load availability"}),s.jsx("p",{className:"text-sm mt-1",children:"Please try again or select a different month."})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(k=>s.jsx("div",{className:"text-center text-xs font-semibold text-gray-600 uppercase",children:k},k))}),y?s.jsx("div",{className:"space-y-2",children:[...Array(5)].map((k,G)=>s.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(7)].map((M,F)=>s.jsx("div",{className:"aspect-square rounded-lg bg-gray-200 animate-pulse"},F))},G))}):s.jsx("div",{className:"space-y-2",children:N.map((k,G)=>s.jsx("div",{className:"grid grid-cols-7 gap-2",children:k.map((M,F)=>{if(!M)return s.jsx("div",{className:"aspect-square"},F);const D=M.dateString===z,$=M.dateString===c,q=M.availability,I=(q==null?void 0:q.status)||"available";let S="aspect-square rounded-lg border-2 flex flex-col items-center justify-center p-1 transition-all duration-200 ",C=!1;return $?(S+="bg-blue-600 border-blue-600 text-white shadow-lg scale-105 ",C=!0):I==="available"?(S+="bg-white border-gray-200 hover:border-blue-400 hover:shadow-md cursor-pointer ",C=!0):I==="limited"?(S+="bg-amber-50 border-amber-300 hover:border-amber-500 hover:shadow-md cursor-pointer ",C=!0):I==="full"?S+="bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed ":I==="blocked"?S+="bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(0,0,0,0.05)_10px,rgba(0,0,0,0.05)_20px)] ":I==="past"&&(S+="bg-gray-50 border-gray-100 text-gray-300 cursor-not-allowed "),D&&!$&&(S+="ring-2 ring-blue-400 "),s.jsxs("button",{onClick:()=>C&&_(M),disabled:!C,className:S,"aria-label":`${M.dateString} - ${I}`,children:[s.jsx("span",{className:`text-base font-semibold ${$?"text-white":I==="past"||I==="blocked"||I==="full"?"text-gray-400":"text-gray-900"}`,children:M.date}),D&&!$&&s.jsx("span",{className:"text-[10px] font-medium text-blue-600 mt-0.5",children:"Today"}),I==="limited"&&!$&&q&&s.jsxs("span",{className:"text-[9px] font-medium text-amber-700 mt-0.5",children:[q.available_slots," left"]}),I==="full"&&s.jsx("span",{className:"text-[9px] font-medium text-gray-500 mt-0.5",children:"Full"}),I==="blocked"&&s.jsx("span",{className:"text-[9px] font-medium text-gray-500 mt-0.5",children:"Closed"})]},F)})},G))})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Legend"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-white mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Available"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-amber-300 bg-amber-50 mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Limited"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-gray-100 mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Fully Booked"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-gray-200 bg-gray-100 bg-[repeating-linear-gradient(45deg,transparent,transparent_5px,rgba(0,0,0,0.05)_5px,rgba(0,0,0,0.05)_10px)] mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Blocked/Closed"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-blue-400 bg-white mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Today"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-6 h-6 rounded border-2 border-blue-600 bg-blue-600 mr-2"}),s.jsx("span",{className:"text-gray-700",children:"Selected"})]})]})]})]}),s.jsxs("div",{className:"px-6 py-6 bg-gray-50 border-t border-gray-200",children:[s.jsx("button",{onClick:T,disabled:!c||y,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl disabled:shadow-none",children:c?"Continue to Time Selection":"Select a date to continue"}),c&&s.jsxs("p",{className:"text-center text-sm text-gray-600 mt-3",children:["Selected: ",s.jsx("span",{className:"font-semibold text-gray-900",children:lT(c)})]})]})]})]})})})},mT=()=>{const e=Le(),t=f.useRef(!1),r=ee(j=>j.booking_context.selected_date),n=ee(j=>j.booking_context.service_id),a=ee(j=>j.booking_context.selected_time),i=ee(j=>j.update_booking_context),[o,l]=ft.useState(a);ft.useEffect(()=>{a!==o&&(console.log("[Time Selection] Syncing time from context:",a),l(a))},[a,o]),ft.useEffect(()=>{console.log("[Time Selection] Current state:",{selectedDate:r,selectedTime:o,selectedTimeFromContext:a,serviceId:n})},[r,o,a,n]);const d=(j=>j?new Date(j).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"")(r),{data:u,isLoading:m,error:h,refetch:y}=we({queryKey:["availability-slots",r,n],queryFn:async()=>{if(!r)throw new Error("No date selected");const j="http://localhost:3000",N={};return n&&(N.service_id=n),((await J.get(`${j}/api/availability/${r}`,{params:N})).data.slots||[]).map(T=>({time:T.time,available_slots:T.available_slots,total_capacity:T.total_capacity,is_available:T.is_available,status:!T.is_available||T.available_slots===0?T.available_slots===0?"full":"blocked":T.available_slots===1?"limited":"available"}))},enabled:!!r,staleTime:6e4,refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnMount:!1});f.useEffect(()=>{const j=setTimeout(()=>{!r&&!t.current&&(console.log("[Time Selection] No date selected, redirecting to date selection"),t.current=!0,e("/book/date",{replace:!0}))},100);return()=>clearTimeout(j)},[r,e]);const v=j=>{const[N,_]=j.split(":"),T=parseInt(N,10),E=T>=12?"PM":"AM";return`${T===0?12:T>12?T-12:T}:${_} ${E}`},p=j=>{!j.is_available||j.available_slots===0||(console.log("[Time Selection] Time slot selected:",j.time),l(j.time),i({selected_time:j.time}))},w=()=>{const j=o||a;if(!j){console.log("[Time Selection] No time selected, cannot continue");return}const N=u==null?void 0:u.find(_=>_.time===j);if(!N||!N.is_available||N.available_slots===0){alert("Sorry, this slot was just booked. Please choose another time."),y(),l(null),i({selected_time:null});return}console.log("[Time Selection] Continuing with time:",j),i({selected_time:j}),setTimeout(()=>{e("/book/details")},0)},g=(j,N)=>{if(N)return"bg-blue-600 border-blue-600 text-white";switch(j.status){case"available":return"bg-white border-gray-300 text-gray-900 hover:border-blue-500 hover:shadow-md";case"limited":return"bg-amber-50 border-amber-400 text-gray-900 hover:border-amber-500 hover:shadow-md";case"full":case"blocked":return"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed";default:return"bg-white border-gray-300 text-gray-900"}},x=j=>{const N=j.total_capacity-j.available_slots,_=j.available_slots;return j.is_available?j.available_slots===0?"Fully Booked":j.available_slots===1?"Last spot!":`${N}/${j.total_capacity} booked  ${_} left`:"Blocked"},b=ft.useMemo(()=>!!(o||a),[o,a]);return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs(Q,{to:"/book/date",className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Step 3 of 4"})]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2 leading-tight",children:"What time works for you?"}),s.jsx("p",{className:"text-xl text-gray-700 mb-1",children:d}),s.jsx("p",{className:"text-sm text-gray-600",children:"Each appointment is 40 minutes"}),s.jsx(Q,{to:"/book/date",className:"inline-block mt-3 text-blue-600 hover:text-blue-800 font-medium text-sm transition-colors",children:"Change Date"})]}),m&&s.jsx("div",{className:"space-y-4",children:[...Array(8)].map((j,N)=>s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"bg-white rounded-xl h-24 shadow-lg"})},N))}),h&&s.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[s.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Failed to load time slots"}),s.jsx("p",{className:"text-red-600 text-sm mb-4",children:"Please try again"}),s.jsx("button",{onClick:()=>y(),className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Retry"})]}),!m&&!h&&u&&u.length===0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center",children:[s.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No slots available for this date"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please choose another day"}),s.jsx(Q,{to:"/book/date",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-lg",children:"Change Date"})]}),!m&&!h&&u&&u.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4 mb-6",children:u.map(j=>{const N=o===j.time||a===j.time,_=!j.is_available||j.available_slots===0;return s.jsx("button",{onClick:()=>p(j),disabled:_,className:`w-full text-left rounded-xl border-2 p-6 transition-all duration-200 ${g(j,N)}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("p",{className:`text-2xl font-bold ${N?"text-white":"text-gray-900"}`,children:v(j.time)}),N&&s.jsx("svg",{className:"w-6 h-6 text-white ml-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),s.jsx("p",{className:`text-sm mt-1 ${N?"text-blue-100":j.status==="limited"?"text-amber-700 font-semibold":"text-gray-600"}`,children:x(j)})]}),!_&&!N&&s.jsx("div",{className:"ml-4",children:s.jsx("span",{className:`inline-block px-4 py-2 rounded-lg font-medium text-sm transition-colors ${j.status==="limited"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Select"})}),N&&s.jsx("div",{className:"ml-4",children:s.jsx("span",{className:"inline-block px-4 py-2 rounded-lg font-medium text-sm bg-white text-blue-600",children:"Selected "})}),_&&s.jsx("div",{className:"ml-4",children:s.jsx("span",{className:"inline-block px-4 py-2 rounded-lg font-medium text-sm bg-gray-300 text-gray-600",children:j.is_available?"Fully Booked":"Blocked"})})]})},j.time)})}),s.jsx("div",{className:"sticky bottom-0 pb-4 pt-6 bg-gradient-to-t from-blue-50 via-blue-50 to-transparent",children:s.jsx("button",{onClick:w,disabled:!b,className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg ${b?"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-xl transform hover:scale-105":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:b?"Continue to Details":"Select a time to continue"})})]})]})})})};var Ee;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Ee||(Ee={}));var og;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(og||(og={}));const le=Ee.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vr=e=>{switch(typeof e){case"undefined":return le.undefined;case"string":return le.string;case"number":return Number.isNaN(e)?le.nan:le.number;case"boolean":return le.boolean;case"function":return le.function;case"bigint":return le.bigint;case"symbol":return le.symbol;case"object":return Array.isArray(e)?le.array:e===null?le.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?le.promise:typeof Map<"u"&&e instanceof Map?le.map:typeof Set<"u"&&e instanceof Set?le.set:typeof Date<"u"&&e instanceof Date?le.date:le.object;default:return le.unknown}},se=Ee.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Jt extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),n}static assert(t){if(!(t instanceof Jt))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ee.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Jt.create=e=>new Jt(e);const $m=(e,t)=>{let r;switch(e.code){case se.invalid_type:e.received===le.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Ee.jsonStringifyReplacer)}`;break;case se.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ee.joinValues(e.keys,", ")}`;break;case se.invalid_union:r="Invalid input";break;case se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ee.joinValues(e.options)}`;break;case se.invalid_enum_value:r=`Invalid enum value. Expected ${Ee.joinValues(e.options)}, received '${e.received}'`;break;case se.invalid_arguments:r="Invalid function arguments";break;case se.invalid_return_type:r="Invalid function return type";break;case se.invalid_date:r="Invalid date";break;case se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Ee.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case se.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case se.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case se.custom:r="Invalid input";break;case se.invalid_intersection_types:r="Intersection results could not be merged";break;case se.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case se.not_finite:r="Number must be finite";break;default:r=t.defaultError,Ee.assertNever(e)}return{message:r}};let hT=$m;function fT(){return hT}const pT=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function ie(e,t){const r=fT(),n=pT({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===$m?void 0:$m].filter(a=>!!a)});e.common.issues.push(n)}class es{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return fe;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return es.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return fe;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const fe=Object.freeze({status:"aborted"}),Ri=e=>({status:"dirty",value:e}),ps=e=>({status:"valid",value:e}),lg=e=>e.status==="aborted",cg=e=>e.status==="dirty",Ga=e=>e.status==="valid",wc=e=>typeof Promise<"u"&&e instanceof Promise;var ce;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ce||(ce={}));class Jr{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dg=(e,t)=>{if(Ga(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Jt(e.common.issues);return this._error=r,this._error}}};function je(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Te{get description(){return this._def.description}_getType(t){return vr(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:vr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new es,ctx:{common:t.parent.common,data:t.data,parsedType:vr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(wc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vr(t)},a=this._parseSync({data:t,path:n.path,parent:n});return dg(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vr(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return Ga(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>Ga(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:vr(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(wc(a)?a:Promise.resolve(a));return dg(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:se.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Ya({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Kr.create(this,this._def)}nullable(){return Za.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Is.create(this)}promise(){return kc.create(this,this._def)}or(t){return Nc.create([this,t],this._def)}and(t){return _c.create(this,t,this._def)}transform(t){return new Ya({...je(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new zm({...je(this._def),innerType:this,defaultValue:r,typeName:pe.ZodDefault})}brand(){return new BT({typeName:pe.ZodBranded,type:this,...je(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Vm({...je(this._def),innerType:this,catchValue:r,typeName:pe.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return I0.create(this,t)}readonly(){return Um.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xT=/^c[^\s-]{8,}$/i,gT=/^[0-9a-z]+$/,yT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,vT=/^[a-z0-9_-]{21}$/i,wT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,NT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_T="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xd;const kT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,CT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ST=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ET=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,PT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ww="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",AT=new RegExp(`^${Ww}$`);function qw(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function MT(e){return new RegExp(`^${qw(e)}$`)}function RT(e){let t=`${Ww}T${qw(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function DT(e,t){return!!((t==="v4"||!t)&&kT.test(e)||(t==="v6"||!t)&&ST.test(e))}function LT(e,t){if(!wT.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function FT(e,t){return!!((t==="v4"||!t)&&CT.test(e)||(t==="v6"||!t)&&TT.test(e))}class Fr extends Te{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==le.string){const i=this._getOrReturnCtx(t);return ie(i,{code:se.invalid_type,expected:le.string,received:i.parsedType}),fe}const n=new es;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),ie(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),ie(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?ie(a,{code:se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&ie(a,{code:se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")NT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"email",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Xd||(Xd=new RegExp(_T,"u")),Xd.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"emoji",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")bT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"uuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")vT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"nanoid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")xT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"cuid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")gT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"cuid2",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")yT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"ulid",code:se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),ie(a,{validation:"url",code:se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"regex",code:se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?RT(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?AT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?MT(i).test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{code:se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?jT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"duration",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?DT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"ip",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?LT(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"jwt",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?FT(t.data,i.version)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"cidr",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ET.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"base64",code:se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?PT.test(t.data)||(a=this._getOrReturnCtx(t,a),ie(a,{validation:"base64url",code:se.invalid_string,message:i.message}),n.dirty()):Ee.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:se.invalid_string,...ce.errToObj(n)})}_addCheck(t){return new Fr({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ce.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ce.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ce.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ce.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ce.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ce.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ce.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ce.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ce.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ce.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ce.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ce.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ce.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ce.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ce.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ce.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...ce.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...ce.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...ce.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...ce.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...ce.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...ce.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...ce.errToObj(r)})}nonempty(t){return this.min(1,ce.errToObj(t))}trim(){return new Fr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Fr.create=e=>new Fr({checks:[],typeName:pe.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...je(e)});function OT(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class jo extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==le.number){const i=this._getOrReturnCtx(t);return ie(i,{code:se.invalid_type,expected:le.number,received:i.parsedType}),fe}let n;const a=new es;for(const i of this._def.checks)i.kind==="int"?Ee.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{code:se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?OT(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),ie(n,{code:se.not_finite,message:i.message}),a.dirty()):Ee.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,ce.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ce.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ce.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ce.toString(r))}setLimit(t,r,n,a){return new jo({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:ce.toString(a)}]})}_addCheck(t){return new jo({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ce.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ce.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:ce.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ee.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}jo.create=e=>new jo({checks:[],typeName:pe.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...je(e)});class No extends Te{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==le.bigint)return this._getInvalidInput(t);let n;const a=new es;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),ie(n,{code:se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Ee.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return ie(r,{code:se.invalid_type,expected:le.bigint,received:r.parsedType}),fe}gte(t,r){return this.setLimit("min",t,!0,ce.toString(r))}gt(t,r){return this.setLimit("min",t,!1,ce.toString(r))}lte(t,r){return this.setLimit("max",t,!0,ce.toString(r))}lt(t,r){return this.setLimit("max",t,!1,ce.toString(r))}setLimit(t,r,n,a){return new No({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:ce.toString(a)}]})}_addCheck(t){return new No({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:ce.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}No.create=e=>new No({checks:[],typeName:pe.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...je(e)});class ug extends Te{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==le.boolean){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.boolean,received:n.parsedType}),fe}return ps(t.data)}}ug.create=e=>new ug({typeName:pe.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...je(e)});class jc extends Te{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==le.date){const i=this._getOrReturnCtx(t);return ie(i,{code:se.invalid_type,expected:le.date,received:i.parsedType}),fe}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return ie(i,{code:se.invalid_date}),fe}const n=new es;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),ie(a,{code:se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),ie(a,{code:se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Ee.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new jc({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:ce.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:ce.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}jc.create=e=>new jc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:pe.ZodDate,...je(e)});class mg extends Te{_parse(t){if(this._getType(t)!==le.symbol){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.symbol,received:n.parsedType}),fe}return ps(t.data)}}mg.create=e=>new mg({typeName:pe.ZodSymbol,...je(e)});class hg extends Te{_parse(t){if(this._getType(t)!==le.undefined){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.undefined,received:n.parsedType}),fe}return ps(t.data)}}hg.create=e=>new hg({typeName:pe.ZodUndefined,...je(e)});class fg extends Te{_parse(t){if(this._getType(t)!==le.null){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.null,received:n.parsedType}),fe}return ps(t.data)}}fg.create=e=>new fg({typeName:pe.ZodNull,...je(e)});class pg extends Te{constructor(){super(...arguments),this._any=!0}_parse(t){return ps(t.data)}}pg.create=e=>new pg({typeName:pe.ZodAny,...je(e)});class xg extends Te{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ps(t.data)}}xg.create=e=>new xg({typeName:pe.ZodUnknown,...je(e)});class en extends Te{_parse(t){const r=this._getOrReturnCtx(t);return ie(r,{code:se.invalid_type,expected:le.never,received:r.parsedType}),fe}}en.create=e=>new en({typeName:pe.ZodNever,...je(e)});class gg extends Te{_parse(t){if(this._getType(t)!==le.undefined){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.void,received:n.parsedType}),fe}return ps(t.data)}}gg.create=e=>new gg({typeName:pe.ZodVoid,...je(e)});class Is extends Te{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==le.array)return ie(r,{code:se.invalid_type,expected:le.array,received:r.parsedType}),fe;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(ie(r,{code:o?se.too_big:se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(ie(r,{code:se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(ie(r,{code:se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Jr(r,o,r.path,l)))).then(o=>es.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Jr(r,o,r.path,l)));return es.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Is({...this._def,minLength:{value:t,message:ce.toString(r)}})}max(t,r){return new Is({...this._def,maxLength:{value:t,message:ce.toString(r)}})}length(t,r){return new Is({...this._def,exactLength:{value:t,message:ce.toString(r)}})}nonempty(t){return this.min(1,t)}}Is.create=(e,t)=>new Is({type:e,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...je(t)});function Xn(e){if(e instanceof tt){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Kr.create(Xn(n))}return new tt({...e._def,shape:()=>t})}else return e instanceof Is?new Is({...e._def,type:Xn(e.element)}):e instanceof Kr?Kr.create(Xn(e.unwrap())):e instanceof Za?Za.create(Xn(e.unwrap())):e instanceof Hn?Hn.create(e.items.map(t=>Xn(t))):e}class tt extends Te{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Ee.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==le.object){const d=this._getOrReturnCtx(t);return ie(d,{code:se.invalid_type,expected:le.object,received:d.parsedType}),fe}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof en&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Jr(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof en){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(ie(a,{code:se.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Jr(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>es.mergeObjectSync(n,d)):es.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return ce.errToObj,new tt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:ce.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new tt({...this._def,unknownKeys:"strip"})}passthrough(){return new tt({...this._def,unknownKeys:"passthrough"})}extend(t){return new tt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new tt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:pe.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new tt({...this._def,catchall:t})}pick(t){const r={};for(const n of Ee.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new tt({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Ee.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new tt({...this._def,shape:()=>r})}deepPartial(){return Xn(this)}partial(t){const r={};for(const n of Ee.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new tt({...this._def,shape:()=>r})}required(t){const r={};for(const n of Ee.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Kr;)i=i._def.innerType;r[n]=i}return new tt({...this._def,shape:()=>r})}keyof(){return Hw(Ee.objectKeys(this.shape))}}tt.create=(e,t)=>new tt({shape:()=>e,unknownKeys:"strip",catchall:en.create(),typeName:pe.ZodObject,...je(t)});tt.strictCreate=(e,t)=>new tt({shape:()=>e,unknownKeys:"strict",catchall:en.create(),typeName:pe.ZodObject,...je(t)});tt.lazycreate=(e,t)=>new tt({shape:e,unknownKeys:"strip",catchall:en.create(),typeName:pe.ZodObject,...je(t)});class Nc extends Te{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Jt(l.ctx.common.issues));return ie(r,{code:se.invalid_union,unionErrors:o}),fe}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Jt(c));return ie(r,{code:se.invalid_union,unionErrors:l}),fe}}get options(){return this._def.options}}Nc.create=(e,t)=>new Nc({options:e,typeName:pe.ZodUnion,...je(t)});function Im(e,t){const r=vr(e),n=vr(t);if(e===t)return{valid:!0,data:e};if(r===le.object&&n===le.object){const a=Ee.objectKeys(t),i=Ee.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=Im(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===le.array&&n===le.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=Im(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===le.date&&n===le.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class _c extends Te{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(lg(i)||lg(o))return fe;const l=Im(i.value,o.value);return l.valid?((cg(i)||cg(o))&&r.dirty(),{status:r.value,value:l.data}):(ie(n,{code:se.invalid_intersection_types}),fe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}_c.create=(e,t,r)=>new _c({left:e,right:t,typeName:pe.ZodIntersection,...je(r)});class Hn extends Te{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==le.array)return ie(n,{code:se.invalid_type,expected:le.array,received:n.parsedType}),fe;if(n.data.length<this._def.items.length)return ie(n,{code:se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fe;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Jr(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>es.mergeArray(r,o)):es.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Hn({...this._def,rest:t})}}Hn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hn({items:e,typeName:pe.ZodTuple,rest:null,...je(t)})};class yg extends Te{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==le.map)return ie(n,{code:se.invalid_type,expected:le.map,received:n.parsedType}),fe;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],d)=>({key:a._parse(new Jr(n,l,n.path,[d,"key"])),value:i._parse(new Jr(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return fe;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return fe;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}yg.create=(e,t,r)=>new yg({valueType:t,keyType:e,typeName:pe.ZodMap,...je(r)});class _o extends Te{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==le.set)return ie(n,{code:se.invalid_type,expected:le.set,received:n.parsedType}),fe;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(ie(n,{code:se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(ie(n,{code:se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return fe;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>i._parse(new Jr(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new _o({...this._def,minSize:{value:t,message:ce.toString(r)}})}max(t,r){return new _o({...this._def,maxSize:{value:t,message:ce.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}_o.create=(e,t)=>new _o({valueType:e,minSize:null,maxSize:null,typeName:pe.ZodSet,...je(t)});class bg extends Te{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}bg.create=(e,t)=>new bg({getter:e,typeName:pe.ZodLazy,...je(t)});class vg extends Te{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return ie(r,{received:r.data,code:se.invalid_literal,expected:this._def.value}),fe}return{status:"valid",value:t.data}}get value(){return this._def.value}}vg.create=(e,t)=>new vg({value:e,typeName:pe.ZodLiteral,...je(t)});function Hw(e,t){return new Qa({values:e,typeName:pe.ZodEnum,...je(t)})}class Qa extends Te{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return ie(r,{expected:Ee.joinValues(n),received:r.parsedType,code:se.invalid_type}),fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return ie(r,{received:r.data,code:se.invalid_enum_value,options:n}),fe}return ps(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Qa.create(t,{...this._def,...r})}exclude(t,r=this._def){return Qa.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Qa.create=Hw;class wg extends Te{_parse(t){const r=Ee.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==le.string&&n.parsedType!==le.number){const a=Ee.objectValues(r);return ie(n,{expected:Ee.joinValues(a),received:n.parsedType,code:se.invalid_type}),fe}if(this._cache||(this._cache=new Set(Ee.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Ee.objectValues(r);return ie(n,{received:n.data,code:se.invalid_enum_value,options:a}),fe}return ps(t.data)}get enum(){return this._def.values}}wg.create=(e,t)=>new wg({values:e,typeName:pe.ZodNativeEnum,...je(t)});class kc extends Te{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==le.promise&&r.common.async===!1)return ie(r,{code:se.invalid_type,expected:le.promise,received:r.parsedType}),fe;const n=r.parsedType===le.promise?r.data:Promise.resolve(r.data);return ps(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}kc.create=(e,t)=>new kc({type:e,typeName:pe.ZodPromise,...je(t)});class Ya extends Te{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{ie(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return fe;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?fe:c.status==="dirty"||r.value==="dirty"?Ri(c.value):c});{if(r.value==="aborted")return fe;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?fe:l.status==="dirty"||r.value==="dirty"?Ri(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?fe:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?fe:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ga(o))return fe;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Ga(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):fe);Ee.assertNever(a)}}Ya.create=(e,t,r)=>new Ya({schema:e,typeName:pe.ZodEffects,effect:t,...je(r)});Ya.createWithPreprocess=(e,t,r)=>new Ya({schema:t,effect:{type:"preprocess",transform:e},typeName:pe.ZodEffects,...je(r)});class Kr extends Te{_parse(t){return this._getType(t)===le.undefined?ps(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Kr.create=(e,t)=>new Kr({innerType:e,typeName:pe.ZodOptional,...je(t)});class Za extends Te{_parse(t){return this._getType(t)===le.null?ps(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Za.create=(e,t)=>new Za({innerType:e,typeName:pe.ZodNullable,...je(t)});class zm extends Te{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===le.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}zm.create=(e,t)=>new zm({innerType:e,typeName:pe.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...je(t)});class Vm extends Te{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return wc(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Jt(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Jt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Vm.create=(e,t)=>new Vm({innerType:e,typeName:pe.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...je(t)});class jg extends Te{_parse(t){if(this._getType(t)!==le.nan){const n=this._getOrReturnCtx(t);return ie(n,{code:se.invalid_type,expected:le.nan,received:n.parsedType}),fe}return{status:"valid",value:t.data}}}jg.create=e=>new jg({typeName:pe.ZodNaN,...je(e)});class BT extends Te{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class I0 extends Te{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?fe:i.status==="dirty"?(r.dirty(),Ri(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?fe:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new I0({in:t,out:r,typeName:pe.ZodPipeline})}}class Um extends Te{_parse(t){const r=this._def.innerType._parse(t),n=a=>(Ga(a)&&(a.value=Object.freeze(a.value)),a);return wc(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}Um.create=(e,t)=>new Um({innerType:e,typeName:pe.ZodReadonly,...je(t)});var pe;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(pe||(pe={}));const Ns=Fr.create;en.create;Is.create;const z0=tt.create;Nc.create;_c.create;Hn.create;Qa.create;kc.create;Kr.create;Za.create;const Ng=z0({customer_name:Ns().min(2,"Name must be at least 2 characters").max(100,"Name too long").regex(/^[a-zA-Z\s]+$/,"Name must contain only letters and spaces"),customer_email:Ns().email("Please enter a valid email address").max(255,"Email too long"),customer_phone:Ns().min(10,"Phone number too short").max(20,"Phone number too long").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number"),booking_for_name:Ns().max(255,"Name too long").nullable(),special_request:Ns().max(500,"Special request must be 500 characters or less").nullable()}),$T=()=>{var V;const e=Le(),t=ee(O=>O.authentication_state.authentication_status.is_authenticated),r=ee(O=>O.authentication_state.auth_token),n=ee(O=>O.booking_context),a=ee(O=>O.update_booking_context),i=ee(O=>O.update_current_user),[o,l]=f.useState({customer_name:"",customer_email:"",customer_phone:"",booking_for_name:null,special_request:null,inspiration_photos:null}),[c,d]=f.useState({}),[u,m]=f.useState(!0),[h,y]=f.useState(!1),[v,p]=f.useState(0),[w,g]=f.useState(!1),[x,b]=f.useState(!1),[j,N]=f.useState(!1),[_,T]=f.useState(""),[E,z]=f.useState(""),k=()=>"http://localhost:3000",{data:G,isLoading:M}=we({queryKey:["userProfile"],queryFn:async()=>!t||!r?null:(await J.get(`${k()}/api/auth/me`,{headers:{Authorization:`Bearer ${r}`}})).data.user,enabled:t&&!!r&&u,staleTime:6e4});f.useEffect(()=>{G&&u&&l(O=>({...O,customer_name:G.name||"",customer_email:G.email||"",customer_phone:G.phone||""}))},[G,u]);const F=ve({mutationFn:async O=>{if(!r)throw new Error("Not authenticated");return(await J.patch(`${k()}/api/auth/me`,O,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data},onSuccess:O=>{O.user&&i({name:O.user.name,email:O.user.email,phone:O.user.phone})}});f.useEffect(()=>{(n.customer_name||n.customer_email||n.customer_phone)&&(l({customer_name:n.customer_name||"",customer_email:n.customer_email||"",customer_phone:n.customer_phone||"",booking_for_name:n.booking_for_name||null,special_request:n.special_request||null,inspiration_photos:n.inspiration_photos||null}),n.special_request&&(p(n.special_request.length),b(!0)),n.booking_for_name&&g(!0),n.inspiration_photos&&n.inspiration_photos.length>0&&N(!0))},[n]);const D=f.useCallback((O,R)=>{try{const Z=Ng.shape[O];return Z&&(Z.parse(R),d(K=>{const X={...K};return delete X[O],X})),!0}catch(Z){return Z instanceof Jt?(d(K=>({...K,[O]:Z.errors[0].message})),!1):!0}},[]),$=f.useCallback(()=>{try{return Ng.parse({customer_name:o.customer_name,customer_email:o.customer_email,customer_phone:o.customer_phone,booking_for_name:o.booking_for_name,special_request:o.special_request}),d({}),!0}catch(O){if(O instanceof Jt){const R={};return O.errors.forEach(Z=>{Z.path[0]&&(R[Z.path[0]]=Z.message)}),d(R),!1}return!1}},[o]),q=(O,R)=>{l(Z=>({...Z,[O]:R})),d(Z=>{const K={...Z};return delete K[O],K}),O==="special_request"&&p(R.length)},I=O=>{const R=o[O];D(O,R)},S=()=>{if(z(""),!_.trim()){z("Please enter a URL");return}try{new URL(_)}catch{z("Please enter a valid URL");return}if(o.inspiration_photos&&o.inspiration_photos.includes(_)){z("This URL has already been added");return}if(o.inspiration_photos&&o.inspiration_photos.length>=3){z("Maximum 3 photos allowed");return}l(O=>({...O,inspiration_photos:O.inspiration_photos?[...O.inspiration_photos,_]:[_]})),T("")},C=O=>{l(R=>({...R,inspiration_photos:R.inspiration_photos?R.inspiration_photos.filter((Z,K)=>K!==O):null}))},B=async()=>{if(!$()){const R=Object.keys(c)[0];if(R){const Z=document.getElementById(R);Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})}return}if(a({customer_name:o.customer_name,customer_email:o.customer_email,customer_phone:o.customer_phone,booking_for_name:o.booking_for_name,special_request:o.special_request,inspiration_photos:o.inspiration_photos,step_completed:4}),t&&h)try{await F.mutateAsync({name:o.customer_name,email:o.customer_email,phone:o.customer_phone})}catch(R){console.error("Failed to update profile:",R)}e("/book/review")},P=o.customer_name.trim().length>0&&o.customer_email.trim().length>0&&o.customer_phone.trim().length>0&&Object.keys(c).length===0,A=n.service_id?4:3,Y=n.service_id?4:3;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Your Details"}),s.jsx("p",{className:"text-gray-600 text-lg",children:t?"We've pre-filled your information. Update if needed.":"We need your contact details to confirm your booking"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-600",children:s.jsxs("span",{children:["Step ",A," of ",Y]})}),s.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${A/Y*100}%`}})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Lr,{className:"w-5 h-5 text-green-600 mr-2"}),"Booking Summary"]}),s.jsxs("div",{className:"space-y-3",children:[n.service_name&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-gray-700",children:[s.jsx(qn,{className:"w-5 h-5 mr-2 text-gray-400"}),s.jsx("span",{children:"Service:"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:n.service_name}),s.jsx(Q,{to:"/book/service",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Edit"})]})]}),n.selected_date&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-gray-700",children:[s.jsx(Je,{className:"w-5 h-5 mr-2 text-gray-400"}),s.jsx("span",{children:"Date:"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:new Date(n.selected_date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsx(Q,{to:"/book/date",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Edit"})]})]}),n.selected_time&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-gray-700",children:[s.jsx(lt,{className:"w-5 h-5 mr-2 text-gray-400"}),s.jsx("span",{children:"Time:"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:n.selected_time}),s.jsx(Q,{to:"/book/time",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Edit"})]})]})]})]}),!t&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-blue-800 text-sm",children:[s.jsx("strong",{children:"Tip:"})," Create a free account to save your details for faster booking next time."," ",s.jsx(Q,{to:"/register",className:"underline font-medium hover:text-blue-900",children:"Sign up here"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[t&&s.jsx("div",{className:"mb-6 pb-6 border-b border-gray-200",children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:O=>m(O.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-900 font-medium",children:"Use my profile details"})]})}),M&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your profile..."})]}),!M&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Fields marked with ",s.jsx("span",{className:"text-red-600",children:"*"})," are required"]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(qn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"customer_name",type:"text",value:o.customer_name,onChange:O=>q("customer_name",O.target.value),onBlur:()=>I("customer_name"),placeholder:"John Smith",className:`block w-full pl-10 pr-3 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${c.customer_name?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`})]}),c.customer_name&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.customer_name]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"First and last name"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"customer_email",type:"email",value:o.customer_email,onChange:O=>q("customer_email",O.target.value),onBlur:()=>I("customer_email"),placeholder:"john@example.com",className:`block w-full pl-10 pr-3 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${c.customer_email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`})]}),c.customer_email&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.customer_email]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"We'll send your confirmation here"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number (WhatsApp preferred) ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(fs,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"customer_phone",type:"tel",value:o.customer_phone,onChange:O=>q("customer_phone",O.target.value),onBlur:()=>I("customer_phone"),placeholder:"+1 (555) 123-4567",className:`block w-full pl-10 pr-3 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${c.customer_phone?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`})]}),c.customer_phone&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.customer_phone]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"For confirmation and reminders"})]}),s.jsx("div",{className:"border-t border-gray-200 my-6"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Additional Information"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Optional - help us serve you better"})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>b(!x),className:"flex items-center justify-between w-full text-left text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(m5,{className:"w-5 h-5 mr-2"}),"Add special request (optional)"]}),x?s.jsx(wm,{className:"w-5 h-5"}):s.jsx(Ln,{className:"w-5 h-5"})]}),x&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("label",{htmlFor:"special_request",className:"block text-sm font-medium text-gray-700",children:"Special Request"}),s.jsx("textarea",{id:"special_request",value:o.special_request||"",onChange:O=>{O.target.value.length<=500&&q("special_request",O.target.value)},onBlur:()=>I("special_request"),placeholder:"e.g., 'low fade', 'beard only', 'sensitive skin', 'don't call, text only'",rows:4,maxLength:500,className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all resize-none"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("p",{className:"text-gray-500",children:"Tell us your preferences or requirements"}),s.jsxs("span",{className:`font-medium ${v>450?"text-red-600":"text-gray-600"}`,children:[v,"/500"]})]}),c.special_request&&s.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.special_request]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:O=>{g(O.target.checked),O.target.checked||q("booking_for_name","")},className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-900 font-medium",children:"I'm booking this appointment for someone else"})]}),w&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"booking_for_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Person's Name"}),s.jsx("input",{id:"booking_for_name",type:"text",value:o.booking_for_name||"",onChange:O=>q("booking_for_name",O.target.value),onBlur:()=>I("booking_for_name"),placeholder:"Child's name, family member, etc.",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"We'll still use your contact for confirmations"}),c.booking_for_name&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),c.booking_for_name]})]})]}),s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>N(!j),className:"flex items-center justify-between w-full text-left text-blue-600 hover:text-blue-700 font-medium transition-colors",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(p5,{className:"w-5 h-5 mr-2"}),"Add photos or style inspiration (optional)"]}),j?s.jsx(wm,{className:"w-5 h-5"}):s.jsx(Ln,{className:"w-5 h-5"})]}),j&&s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"photo_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Paste Image URL"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{id:"photo_url",type:"url",value:_,onChange:O=>{T(O.target.value),z("")},onKeyPress:O=>{O.key==="Enter"&&(O.preventDefault(),S())},placeholder:"https://example.com/image.jpg",className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all"}),s.jsx("button",{type:"button",onClick:S,disabled:!_.trim()||(((V=o.inspiration_photos)==null?void 0:V.length)||0)>=3,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Add"})]}),E&&s.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1"}),E]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum 3 images"})]}),o.inspiration_photos&&o.inspiration_photos.length>0&&s.jsx("div",{className:"grid grid-cols-3 gap-4",children:o.inspiration_photos.map((O,R)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:O,alt:`Inspiration ${R+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-gray-200",onError:Z=>{Z.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23ddd" width="100" height="100"/%3E%3Ctext fill="%23999" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3ENo Image%3C/text%3E%3C/svg%3E'}}),s.jsx("button",{type:"button",onClick:()=>C(R),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors shadow-lg",children:s.jsx(Nt,{className:"w-4 h-4"})})]},R))})]})]}),t&&s.jsx("div",{className:"pt-6 border-t border-gray-200",children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:O=>y(O.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-900",children:"Update my profile with these changes"})]})})]})]}),s.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",style:{position:"relative",zIndex:10},children:[s.jsx(Q,{to:"/book/time",className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 border border-gray-300 text-center transition-colors",children:"Back"}),s.jsx("button",{onClick:B,disabled:!P||F.isPending,"data-testid":"continue-to-review-button",id:"continue-to-review-button","aria-label":"Continue to Review","aria-disabled":!P||F.isPending,role:"button",type:"button",tabIndex:0,style:{pointerEvents:"auto"},className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all focus:outline-none focus:ring-4 focus:ring-blue-100",children:F.isPending?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Continue to Review"})]})]})})})},IT=()=>"http://localhost:3000",zT=e=>{try{const t=new Date(e),r={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",r)}catch{return e}},_g=e=>{try{const[t,r]=e.split(":").map(Number),n=t>=12?"PM":"AM";return`${t%12||12}:${r.toString().padStart(2,"0")} ${n}`}catch{return e}},VT=(e,t)=>{try{const[r,n]=e.split(":").map(Number),a=r*60+n+t,i=Math.floor(a/60)%24,o=a%60;return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}catch{return e}},UT=(e,t)=>{const r=VT(e,t);return`${_g(e)} - ${_g(r)}`},WT=()=>{const e=Le(),t=ee(N=>N.booking_context),r=ee(N=>N.authentication_state.current_user),n=ee(N=>N.authentication_state.auth_token),a=ee(N=>N.app_settings),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[d,u]=f.useState(0),m=ve({mutationFn:async N=>{const _={"Content-Type":"application/json"};return n&&(_.Authorization=`Bearer ${n}`),(await J.post(`${IT()}/api/bookings`,N,{headers:_})).data},onSuccess:N=>{e(`/booking/confirmation?ticket_number=${N.booking.ticket_number}`)}}),h=()=>{o(!i)},y=async()=>{if(!i||!t.selected_date||!t.selected_time||!t.customer_name||!t.customer_email||!t.customer_phone)return;const N={user_id:(r==null?void 0:r.id)||null,appointment_date:t.selected_date,appointment_time:t.selected_time,slot_duration:40,customer_name:t.customer_name,customer_email:t.customer_email,customer_phone:t.customer_phone,booking_for_name:t.booking_for_name,service_id:t.service_id,special_request:t.special_request,inspiration_photos:t.inspiration_photos};m.mutate(N)},v=N=>{u(N),c(!0)},p=()=>{c(!1)},w=()=>{t.inspiration_photos&&d<t.inspiration_photos.length-1&&u(d+1)},g=()=>{d>0&&u(d-1)},x=()=>{var T,E,z;if(!m.error)return"";const N=m.error,_=((z=(E=(T=N.response)==null?void 0:T.data)==null?void 0:E.error)==null?void 0:z.message)||N.message||"";return _.toLowerCase().includes("slot")&&_.toLowerCase().includes("available")?"Sorry, this time slot was just booked. Please choose another time.":_.toLowerCase().includes("invalid")||_.toLowerCase().includes("validation")?"Invalid customer information. Please review and try again.":_.toLowerCase().includes("network")||_.toLowerCase().includes("connection")?"Connection issue. Your booking hasn't been confirmed yet.":`Booking failed. Please try again or contact us at ${a.shop_phone}.`},b=()=>x().includes("time slot"),j=t.special_request||t.booking_for_name||t.inspiration_photos&&t.inspiration_photos.length>0;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 md:py-12 lg:py-16",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-6 lg:mb-8",children:s.jsx("p",{className:"text-center text-sm font-medium text-gray-600",children:"Final Step"})}),s.jsxs("div",{className:"text-center mb-8 lg:mb-12",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Review Your Booking"}),s.jsx("p",{className:"mt-2 text-base md:text-lg text-gray-600",children:"Please verify all details before confirming"})]}),m.isError&&s.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-xl p-4 shadow-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:x()}),s.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:()=>m.reset(),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors text-sm",children:"Try Again"}),b()&&s.jsx(Q,{to:"/book/time",className:"inline-flex items-center px-4 py-2 bg-white text-red-700 border-2 border-red-200 rounded-lg font-medium hover:bg-red-50 transition-colors text-sm",children:"Choose New Time"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[s.jsxs("div",{className:"p-6 lg:p-8 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Appointment Details"})]}),s.jsx(Q,{to:"/book/date",className:"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit appointment details",children:"Edit"})]}),s.jsxs("div",{className:"space-y-3",children:[t.service_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Service"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.service_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Date"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.selected_date?zT(t.selected_date):"Not selected"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Time"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.selected_time?UT(t.selected_time,40):"Not selected"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Duration"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:"40 minutes"})]})]})]}),s.jsxs("div",{className:"p-6 lg:p-8 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contact Information"})]}),s.jsx(Q,{to:"/book/details",className:"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit contact information",children:"Edit"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Full Name"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.customer_name||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Email Address"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.customer_email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Phone Number (WhatsApp preferred)"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.customer_phone||"Not provided"})]})]})]}),j&&s.jsxs("div",{className:"p-6 lg:p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Special Requests"})]}),s.jsx(Q,{to:"/book/details",className:"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors","aria-label":"Edit special requests",children:"Edit"})]}),s.jsxs("div",{className:"space-y-3",children:[t.special_request&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Your Request"}),s.jsx("p",{className:"text-base text-gray-900",children:t.special_request})]}),t.booking_for_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Booking For"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:t.booking_for_name})]}),t.inspiration_photos&&t.inspiration_photos.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Inspiration Photos"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:t.inspiration_photos.map((N,_)=>s.jsx("button",{onClick:()=>v(_),className:"aspect-square rounded-lg overflow-hidden hover:opacity-80 transition-opacity focus:outline-none focus:ring-2 focus:ring-blue-500",children:s.jsx("img",{src:N,alt:`Inspiration ${_+1}`,className:"w-full h-full object-cover"})},_))})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 lg:p-8 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Important Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsxs("svg",{className:"h-5 w-5 text-blue-600 mt-0.5 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.shop_address||"Address not available"}),s.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.shop_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 mt-1 inline-block",children:"Get Directions "})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("a",{href:`tel:${a.shop_phone}`,className:"text-sm font-medium text-gray-900 hover:text-blue-600",children:a.shop_phone||"Phone not available"})]}),s.jsxs("div",{className:"pt-3 border-t border-blue-300",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Cancellation Policy:"})," You can cancel up to 2 hours before your appointment."]}),s.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[s.jsx("strong",{children:"Reminders:"})," You'll receive a confirmation email and SMS, plus a reminder before your appointment."]})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-6",children:s.jsxs("label",{className:"flex items-start cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:h,className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-4 focus:ring-blue-100 cursor-pointer"}),s.jsxs("span",{className:"ml-3 text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>window.open("/terms","_blank"),className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"cancellation policy and terms of service"})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Q,{to:"/book/details",className:"flex-1 sm:flex-none sm:w-auto px-6 py-3 bg-gray-100 text-gray-900 border-2 border-gray-300 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 text-center",children:"Back to Edit"}),s.jsx("button",{onClick:y,disabled:!i||m.isPending,className:"flex-1 px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center",children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Confirming..."]}):"Confirm Booking"})]})]})}),l&&t.inspiration_photos&&t.inspiration_photos.length>0&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:p,children:s.jsxs("div",{className:"relative max-w-4xl w-full",onClick:N=>N.stopPropagation(),children:[s.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10","aria-label":"Close lightbox",children:s.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("img",{src:t.inspiration_photos[d],alt:`Inspiration ${d+1}`,className:"max-h-[80vh] max-w-full rounded-lg"})}),t.inspiration_photos.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:g,disabled:d===0,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Previous image",children:s.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:w,disabled:d===t.inspiration_photos.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Next image",children:s.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full",children:[d+1," / ",t.inspiration_photos.length]})]})]})})]})},kg=()=>"http://localhost:3000",qT=e=>{const t=new Date(e),r={weekday:"long",year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",r)},Kw=e=>{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},HT=(e,t)=>{const[r,n]=e.split(":").map(Number),a=r*60+n+t,i=Math.floor(a/60)%24,o=a%60,l=`${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`;return Kw(l)},KT=(e,t)=>{const r=new Date(`${e}T${t}`),n=new Date,a=new Date(n.getTime()+2*60*60*1e3);return r>a},GT=(e,t=200)=>{const r=document.createElement("canvas");r.width=t,r.height=t;const n=r.getContext("2d");return n?(n.fillStyle="#FFFFFF",n.fillRect(0,0,t,t),n.fillStyle="#000000",n.strokeStyle="#000000",n.lineWidth=2,n.strokeRect(10,10,t-20,t-20),n.font="bold 14px monospace",n.textAlign="center",n.textBaseline="middle",n.fillText(e,t/2,t/2),r.toDataURL("image/png")):""},QT=(e,t,r,n)=>{const a=new Date(`${e.appointment_date}T${e.appointment_time}`),i=new Date(a.getTime()+e.slot_duration*6e4),o=d=>d.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",l=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//BarberSlot//Booking//EN","BEGIN:VEVENT",`UID:${e.ticket_number}@barberslot.com`,`DTSTAMP:${o(new Date)}`,`DTSTART:${o(a)}`,`DTEND:${o(i)}`,`SUMMARY:Haircut at ${r}${t?` - ${t}`:""}`,`DESCRIPTION:Booking confirmation for ${e.customer_name}\\nTicket: ${e.ticket_number}${e.special_request?`\\nNotes: ${e.special_request}`:""}`,`LOCATION:${n}`,"STATUS:CONFIRMED","BEGIN:VALARM","TRIGGER:-PT2H","DESCRIPTION:Appointment reminder","ACTION:DISPLAY","END:VALARM","END:VEVENT","END:VCALENDAR"].join(`\r
`),c=new Blob([l],{type:"text/calendar;charset=utf-8"});return URL.createObjectURL(c)},YT=()=>{const e=Le(),[t]=dt(),r=ee(k=>k.authentication_state.authentication_status.is_authenticated),n=ee(k=>k.app_settings),a=ee(k=>k.clear_booking_context),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState(""),[m,h]=f.useState(!1),[y,v]=f.useState(null),p=t.get("ticket_number"),{data:w,isLoading:g,isError:x}=we({queryKey:["booking",p],queryFn:async()=>p?(await J.get(`${kg()}/api/bookings/${p}`)).data:null,enabled:!!p,staleTime:6e4,retry:2}),b=ve({mutationFn:async k=>(await J.post(`${kg()}/api/bookings/${k}/resend-confirmation`)).data,onSuccess:k=>{v(k.message||"Confirmation sent successfully!"),setTimeout(()=>v(null),5e3)},onError:()=>{v("Failed to send confirmation. Please try again."),setTimeout(()=>v(null),5e3)}});f.useEffect(()=>{w&&(o(w.booking),w.service_name&&w.booking.service_id&&c({service_id:w.booking.service_id,name:w.service_name,duration:w.service_duration||40,price:w.service_price||null}))},[w]),f.useEffect(()=>{if(i!=null&&i.ticket_number&&!d){const k=GT(i.ticket_number);u(k)}},[i,d]);const j=async()=>{if(i)try{await navigator.clipboard.writeText(i.ticket_number),h(!0),setTimeout(()=>h(!1),2e3)}catch{alert(`Your ticket number: ${i.ticket_number}`)}},N=()=>{if(!i)return;const k=QT(i,(l==null?void 0:l.name)||null,n.shop_name,n.shop_address),G=document.createElement("a");G.href=k,G.download=`barberslot-${i.ticket_number}.ics`,document.body.appendChild(G),G.click(),document.body.removeChild(G)},_=()=>{i&&b.mutate(i.ticket_number)},T=()=>{window.print()},E=()=>{a(),e("/book/service")};if(!p)return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Ticket Number"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please provide a valid ticket number."}),s.jsx(Q,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Search Your Bookings"})]})})});if(g)return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading confirmation..."})]})})});if(x||!i)return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find your booking confirmation."}),s.jsx(Q,{to:"/search",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Search Your Bookings"})]})})});const z=KT(i.appointment_date,i.appointment_time);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4 animate-scale-in",children:s.jsx(Lr,{className:"w-12 h-12 text-green-600",strokeWidth:3})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Your appointment is all set"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Ticket Number"}),s.jsx("p",{className:"text-white text-3xl font-bold tracking-wide",children:i.ticket_number})]}),s.jsx("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-all duration-200 backdrop-blur-sm","aria-label":"Copy ticket number to clipboard",children:m?s.jsxs(s.Fragment,{children:[s.jsx(Lr,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Copied!"})]}):s.jsxs(s.Fragment,{children:[s.jsx(i0,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Copy"})]})})]})}),s.jsx("div",{className:"px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"flex justify-center md:justify-start",children:s.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:d?s.jsx("img",{src:d,alt:"Booking QR Code",className:"w-32 h-32"}):s.jsx("div",{className:"w-32 h-32 bg-gray-100 animate-pulse rounded"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-semibold mb-4",children:[s.jsx("span",{className:"w-2 h-2 bg-green-600 rounded-full mr-2"}),"Upcoming"]}),s.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Save this ticket number or scan the QR code when you arrive for your appointment."})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Booking Summary"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-l-4 border-blue-600 pl-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Appointment Details"}),l&&s.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:l.name}),s.jsxs("p",{className:"text-gray-900 font-medium mb-1",children:[qT(i.appointment_date)," at ",Kw(i.appointment_time)]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:["Duration: ",i.slot_duration," minutes (ending at ",HT(i.appointment_time,i.slot_duration),")"]})]}),s.jsxs("div",{className:"border-l-4 border-indigo-600 pl-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Contact Information"}),s.jsx("p",{className:"text-gray-900 font-medium mb-1",children:i.customer_name}),s.jsx("p",{className:"text-gray-600 text-sm mb-1",children:s.jsx("a",{href:`tel:${i.customer_phone}`,className:"hover:text-blue-600 transition-colors",children:i.customer_phone})}),s.jsx("p",{className:"text-gray-600 text-sm",children:s.jsx("a",{href:`mailto:${i.customer_email}`,className:"hover:text-blue-600 transition-colors",children:i.customer_email})}),i.booking_for_name&&s.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Booking for: ",s.jsx("span",{className:"font-medium text-gray-900",children:i.booking_for_name})]})]}),i.special_request&&s.jsxs("div",{className:"border-l-4 border-purple-600 pl-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Special Request"}),s.jsx("p",{className:"text-gray-900",children:i.special_request})]}),i.inspiration_photos&&i.inspiration_photos.length>0&&s.jsxs("div",{className:"border-l-4 border-pink-600 pl-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Inspiration Photos"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:i.inspiration_photos.map((k,G)=>s.jsx("img",{src:k,alt:`Inspiration ${G+1}`,className:"w-20 h-20 object-cover rounded-lg border-2 border-gray-200"},G))})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"What happens next?"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Lr,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-900 font-medium",children:"Confirmation sent to your email and phone"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Check your inbox and messages"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(lt,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-gray-900 font-medium",children:["Reminder will be sent ",n.reminder_hours_before," hours before appointment"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"So you don't forget!"})]})]}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:s.jsx(c1,{className:"w-5 h-5 text-amber-600"})})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-gray-900 font-medium",children:["You can cancel up to ",n.same_day_cutoff_hours," hours before"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Free cancellation policy"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),y&&s.jsx("div",{className:`mb-4 p-4 rounded-lg ${y.includes("Failed")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:s.jsx("p",{className:"text-sm font-medium",children:y})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:N,className:"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 hover:shadow-lg transition-all duration-200",children:[s.jsx(Je,{className:"w-5 h-5"}),"Add to Calendar"]}),s.jsxs("button",{onClick:_,disabled:b.isPending,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(dc,{className:`w-5 h-5 ${b.isPending?"animate-spin":""}`}),b.isPending?"Sending...":"Resend Confirmation"]}),s.jsxs("button",{onClick:T,className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors border border-gray-300",children:[s.jsx(Wi,{className:"w-5 h-5"}),"Print Ticket"]}),s.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 hover:shadow-lg transition-all duration-200",children:[s.jsx(ds,{className:"w-5 h-5"}),"Book Another Appointment"]}),r?s.jsxs(Q,{to:"/dashboard",className:"flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 hover:shadow-lg transition-all duration-200 sm:col-span-2",children:["Go to My Dashboard",s.jsx(ds,{className:"w-5 h-5"})]}):s.jsxs(Q,{to:"/search",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg hover:bg-gray-200 transition-colors border border-gray-300 sm:col-span-2",children:["Search Your Bookings",s.jsx(ds,{className:"w-5 h-5"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Shop Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n.shop_name})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Yc,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-900",children:n.shop_address}),s.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(n.shop_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-1 mt-1",children:["Get Directions",s.jsx(ds,{className:"w-4 h-4"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fs,{className:"w-5 h-5 text-gray-400"}),s.jsx("a",{href:`tel:${n.shop_phone}`,className:"text-gray-900 hover:text-blue-600 transition-colors",children:n.shop_phone})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wt,{className:"w-5 h-5 text-gray-400"}),s.jsx("a",{href:`mailto:${n.shop_email}`,className:"text-gray-900 hover:text-blue-600 transition-colors",children:n.shop_email})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-1"}),s.jsx("p",{className:"text-gray-900",children:n.operating_hours})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[z&&s.jsx(Q,{to:`/booking/${i.ticket_number}`,className:"text-red-600 hover:text-red-700 font-medium transition-colors",children:"Cancel This Booking"}),s.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[s.jsx("span",{className:"text-sm",children:"Need help?"}),s.jsx("a",{href:`tel:${n.shop_phone}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact Us"})]})]})})]})}),s.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-area, .print-area * {
            visibility: visible;
          }
          .print-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          @media (prefers-reduced-motion: reduce) {
            .animate-scale-in {
              animation: none;
            }
          }
        }
        @keyframes scale-in {
          from {
            transform: scale(0);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }
        .animate-scale-in {
          animation: scale-in 0.3s ease-out;
        }
      `})]})},Jd=e=>e?e.toUpperCase().replace(/[^A-Z0-9-]/g,""):"",Cg=e=>!e||e.length<5?!1:/^TKT-\d{4,8}-\d{3}$/.test(e)?!0:/^TKT-\d+-\d+$/.test(e),Sg=e=>{if(!e||e.trim().length===0)return!1;const t=e.replace(/\D/g,"");return t.length>=7&&t.length<=15},ZT=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),XT=e=>{switch(e.toLowerCase()){case"upcoming":case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},JT=()=>{const e=Le(),[t]=dt(),r=ee(F=>F.app_settings),[n,a]=f.useState("ticket"),[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState(()=>{const F=new Date,D=F.getFullYear(),$=String(F.getMonth()+1).padStart(2,"0"),q=String(F.getDate()).padStart(2,"0");return`${D}-${$}-${q}`}),[m,h]=f.useState(!1),[y,v]=f.useState(null);f.useEffect(()=>{const F=t.get("ticket_number"),D=t.get("phone"),$=t.get("date");F?(a("ticket"),o(Jd(F))):(D||$)&&(a("phone_date"),D&&c(D),$&&u($))},[t]);const p=n==="ticket"&&Cg(i),w=n==="phone_date"&&Sg(l)&&d.length>0,g=p||w,{data:x,isLoading:b,error:j,refetch:N}=we({queryKey:["bookingSearch",n,i,l,d],queryFn:async()=>{var $,q,I,S;const F="http://localhost:3000/api/bookings/search",D={};n==="ticket"?D.ticket_number=i:(D.phone=l,D.date=d);try{const C=await J.get(F,{params:D,timeout:15e3,validateStatus:B=>B<500});if(C.status>=400){const B=(($=C.data)==null?void 0:$.message)||"Search failed. Please try again.";throw new Error(B)}return C.data}catch(C){if(console.error("Search API error:",C),C.code==="ECONNABORTED")throw new Error("Request timed out. Please try again.");if(J.isAxiosError(C)){const B=(q=C.response)==null?void 0:q.status;if(B===502)throw new Error("Service temporarily unavailable. The server is having issues. Please try again in a moment.");if(B===503)throw new Error("Database connection failed. Please try again later.");if(B===504)throw new Error("Gateway timeout. The request took too long. Please try again.");if(B&&B>=500)throw new Error("Server error occurred. Please try again later.");if((S=(I=C.response)==null?void 0:I.data)!=null&&S.message)throw new Error(C.response.data.message);if(!C.response)throw new Error("Unable to connect to server. Please check your internet connection and try again.")}throw C}},enabled:!1,retry:(F,D)=>{var $,q;return(($=D==null?void 0:D.response)==null?void 0:$.status)===502||((q=D==null?void 0:D.response)==null?void 0:q.status)===503?F<2:F<1},retryDelay:F=>Math.min(1e3*2**F,5e3),staleTime:0});f.useEffect(()=>{x&&m&&(h(!1),x.total===1&&x.bookings.length===1?e(`/booking/${x.bookings[0].ticket_number}`):x.total===0&&v("No bookings found. Please check your information and try again."))},[x,m,e]),f.useEffect(()=>{if(j){const F=j instanceof Error?j.message:"Search failed. Please try again.";v(F),h(!1)}},[j]);const _=F=>{a(F),v(null)},T=F=>{const D=F.target.value,$=Jd(D);o($),v(null)},E=F=>{c(F.target.value),v(null)},z=F=>{const D=F.target.value;D?/^\d{4}-\d{2}-\d{2}$/.test(D)?(u(D),v(null)):console.warn("Invalid date format received:",D):(u(D),v(null))},k=F=>{if(F.preventDefault(),F.stopPropagation(),!b){if(!g){n==="ticket"?i?Cg(i)||v("Invalid ticket format. Expected format: TKT-YYYYMMDD-XXX"):v("Please enter a ticket number"):l?Sg(l)?d||v("Please select a booking date"):v("Please enter a valid phone number (7-15 digits)"):v("Please enter a phone number");return}v(null),h(!0),N()}},G=()=>{o(""),c("");const F=new Date,D=F.getFullYear(),$=String(F.getMonth()+1).padStart(2,"0"),q=String(F.getDate()).padStart(2,"0");u(`${D}-${$}-${q}`),v(null),h(!1)},M=F=>{e(`/booking/${F.ticket_number}`)};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Find Your Booking"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Search for your appointment using your ticket number or phone and date"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("div",{className:"flex",children:[s.jsxs("button",{type:"button",onClick:()=>_("ticket"),className:`flex-1 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${n==="ticket"?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsx(uc,{className:"inline-block size-5 mr-2"}),"Search by Ticket Number"]}),s.jsxs("button",{type:"button",onClick:()=>_("phone_date"),className:`flex-1 px-6 py-4 text-sm font-medium border-b-2 transition-colors ${n==="phone_date"?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[s.jsx(fs,{className:"inline-block size-5 mr-2"}),"Search by Phone & Date"]})]})}),s.jsxs("form",{onSubmit:k,className:"p-6 lg:p-8 space-y-6","data-testid":"search-form",role:"search","aria-label":"Booking search form",autoComplete:"off",children:[n==="ticket"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ticket-number",className:"block text-sm font-medium text-gray-900 mb-2",children:"Ticket Number"}),s.jsx("input",{type:"text",id:"ticket-number",name:"ticket-number","data-testid":"ticket-number-input","aria-label":"Ticket number",value:i,onChange:T,onPaste:F=>{F.preventDefault();const D=F.clipboardData.getData("text"),$=Jd(D);o($)},placeholder:"TKT-20241105-003",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",inputMode:"text","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900 text-base",autoFocus:!0}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Format: TKT-YYYYMMDD-XXX (e.g., TKT-20241105-003)"})]})}),n==="phone_date"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-gray-400 pointer-events-none"}),s.jsx("input",{type:"tel",id:"phone",name:"phone","data-testid":"phone-input","aria-label":"Phone number",value:l,onChange:E,onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),k(F))},placeholder:"+1 (555) 123-4567",autoComplete:"tel","data-form-type":"other",className:"w-full pl-12 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900 text-base",autoFocus:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-900 mb-2",children:"Booking Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(Je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-gray-400 pointer-events-none"}),s.jsx("input",{type:"date",id:"date",name:"date","data-testid":"date-input","aria-label":"Booking date",value:d,onChange:z,onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),k(F))},onBlur:F=>{const D=F.target.value;D&&!/^\d{4}-\d{2}-\d{2}$/.test(D)&&v("Please enter a valid date in YYYY-MM-DD format")},autoComplete:"off","data-form-type":"other","data-lpignore":"true","data-1p-ignore":"true",min:"2020-01-01",max:"2030-12-31",pattern:"\\d{4}-\\d{2}-\\d{2}",onInvalid:F=>{F.preventDefault(),v("Please enter a valid date in YYYY-MM-DD format")},className:"w-full pl-12 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900 text-base [&::-webkit-calendar-picker-indicator]:cursor-pointer"})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter the date of your appointment (e.g., 2024-11-08)"})]})]}),y&&s.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[s.jsx(Ue,{className:"size-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-800",children:y})]}),s.jsx("button",{type:"submit",id:"search-submit-button",name:"search-submit-button","data-testid":"search-button","aria-label":b?"Searching for booking...":"Search for booking","aria-disabled":!g||b,"aria-live":"polite","aria-busy":b,disabled:!g||b,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center space-x-2 focus:outline-none focus:ring-4 focus:ring-blue-300",children:b?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin size-5",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Searching..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(uc,{className:"size-5","aria-hidden":"true"}),s.jsx("span",{children:"Search"})]})})]})]}),x&&x.total>1&&s.jsxs("div",{className:"mt-8 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[x.total," Bookings Found"]}),s.jsxs("button",{type:"button",onClick:G,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1",children:[s.jsx(Nt,{className:"size-4"}),s.jsx("span",{children:"Clear Search"})]})]}),s.jsx("div",{className:"space-y-4",children:x.bookings.map(F=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:F.ticket_number}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${XT(F.status)}`,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})]}),s.jsxs("p",{className:"text-gray-600",children:[s.jsx(Je,{className:"inline size-4 mr-1"}),ZT(F.appointment_date)," at ",F.appointment_time]}),F.service_id&&s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["Service: ",F.service_id]})]})}),s.jsx("button",{onClick:()=>M(F),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"View Details"})]},F.booking_id))})]}),x&&x.total===0&&s.jsx("div",{className:"mt-8 bg-white rounded-xl shadow-lg border border-gray-100 p-8 lg:p-12 text-center",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4",children:s.jsx(Pt,{className:"size-8 text-red-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Bookings Found"}),s.jsx("p",{className:"text-gray-600",children:"We couldn't find any bookings matching your search."})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Suggestions:"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx(Mt,{className:"size-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Check your ticket number format (TKT-YYYYMMDD-XXX)"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Mt,{className:"size-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Try a different date or phone number format"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx(Mt,{className:"size-4 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:"Contact us if you need help"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6 text-left",children:[s.jsx("p",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",s.jsx("a",{href:`tel:${r.shop_phone}`,className:"text-blue-600 hover:underline",children:r.shop_phone||"Not available"})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",s.jsx("a",{href:`mailto:${r.shop_email}`,className:"text-blue-600 hover:underline",children:r.shop_email||"Not available"})]})]})]}),s.jsx("button",{type:"button",onClick:G,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all",children:"Try Again"})]})}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:["Don't have an account yet?"," ",s.jsx(Q,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-medium hover:underline",children:"Sign up"})," ","for faster booking and history access."]}),s.jsx(Q,{to:"/",className:"text-gray-600 hover:text-gray-900 text-sm hover:underline",children:" Back to Home"})]})]})})})},eE=()=>{const{ticket_number:e}=Yh(),t=Le(),r=zs(),n=ee(O=>O.app_settings.shop_name),a=ee(O=>O.app_settings.shop_address),i=ee(O=>O.app_settings.shop_phone),o=ee(O=>O.app_settings.shop_email),l=ee(O=>O.app_settings.operating_hours),c=ee(O=>O.app_settings.same_day_cutoff_hours),d=ee(O=>O.update_booking_context),[u,m]=f.useState(!1),[h,y]=f.useState(""),[v,p]=f.useState(!1),[w,g]=f.useState(!1),[x,b]=f.useState(null),j=O=>{try{return new Date(O).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return O}},N=O=>{try{const[R,Z]=O.split(":"),K=parseInt(R,10),X=K>=12?"PM":"AM";return`${K%12||12}:${Z} ${X}`}catch{return O}},_=O=>{try{return new Date(O).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return O}},T=(O,R)=>{try{const[Z,K]=O.split(":"),U=parseInt(Z,10)*60+parseInt(K,10)+R,ne=Math.floor(U/60),_e=U%60;return N(`${ne.toString().padStart(2,"0")}:${_e.toString().padStart(2,"0")}`)}catch{return""}},E=async()=>{if(e)try{await navigator.clipboard.writeText(e),g(!0),setTimeout(()=>g(!1),2e3)}catch(O){console.error("Failed to copy:",O)}},z=()=>{if(!C)return;const O=new Date(`${C.appointment_date}T${C.appointment_time}`),R=new Date(O.getTime()+C.slot_duration*6e4),Z=_e=>_e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",K=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//BarberSlot//Booking//EN","BEGIN:VEVENT",`UID:${e}@barberslot.com`,`DTSTAMP:${Z(new Date)}`,`DTSTART:${Z(O)}`,`DTEND:${Z(R)}`,`SUMMARY:${(B==null?void 0:B.name)||"Haircut"} at ${n}`,`LOCATION:${a}`,`DESCRIPTION:Service: ${(B==null?void 0:B.name)||"Haircut"}\\nTicket: ${e}${C.special_request?`\\nSpecial Request: ${C.special_request}`:""}`,o?`ORGANIZER:mailto:${o}`:"","END:VEVENT","END:VCALENDAR"].filter(Boolean).join(`\r
`),X=new Blob([K],{type:"text/calendar"}),U=URL.createObjectURL(X),ne=document.createElement("a");ne.href=U,ne.download=`${e}.ics`,ne.click(),URL.revokeObjectURL(U)},k=()=>{window.print()},G=()=>{h.trim()&&P.mutate(h)},M=()=>{C&&(d({service_id:C.service_id,service_name:(B==null?void 0:B.name)||null,customer_name:C.customer_name,customer_email:C.customer_email,customer_phone:C.customer_phone,special_request:C.special_request,booking_for_name:C.booking_for_name}),t("/book/service"))},F=O=>{switch(O){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=O=>{switch(O){case"confirmed":return"Upcoming";case"completed":return"Completed";case"cancelled":return"Cancelled";case"pending":return"Pending";default:return O}},$=O=>{switch(O){case"created":return s.jsx(Je,{className:"w-5 h-5 text-blue-600"});case"confirmed":return s.jsx(Mt,{className:"w-5 h-5 text-green-600"});case"reminder":return s.jsx(lt,{className:"w-5 h-5 text-yellow-600"});case"completed":return s.jsx(Mt,{className:"w-5 h-5 text-green-700"});case"cancelled":return s.jsx(Pt,{className:"w-5 h-5 text-red-600"});default:return s.jsx(lt,{className:"w-5 h-5 text-gray-600"})}},{data:q,isLoading:I,error:S}=we({queryKey:["booking",e],queryFn:async()=>{if(!e||!/^TKT-\d{4,8}-\d{3}$/.test(e))throw new Error("Invalid ticket number format");return(await J.get(`http://localhost:3000/api/bookings/${e}`)).data},enabled:!!e,staleTime:6e4,retry:1,select:O=>{const R=O.booking||O;return{booking:R,service_details:R.service_id?{service_id:R.service_id,name:O.service_name||"Haircut",price:O.service_price?Number(O.service_price):null,duration:O.service_duration||R.slot_duration||40}:null}}}),C=q==null?void 0:q.booking,B=q==null?void 0:q.service_details,P=ve({mutationFn:async O=>(await J.patch(`http://localhost:3000/api/bookings/${e}/cancel`,{cancellation_reason:O,cancelled_by:"customer"})).data,onSuccess:O=>{r.setQueryData(["booking",e],{booking:O.booking||O,service_details:B}),m(!1),y("")}}),A=ve({mutationFn:async()=>(await J.post(`http://localhost:3000/api/bookings/${e}/resend-confirmation`)).data}),Y=f.useMemo(()=>{if(!C||C.status!=="confirmed")return!1;try{const O=new Date(`${C.appointment_date}T${C.appointment_time}`),R=new Date,Z=new Date(O.getTime()-c*60*60*1e3);return R<Z}catch{return!1}},[C,c]),V=f.useMemo(()=>{if(!C)return[];const O=[];return C.created_at&&O.push({type:"created",timestamp:C.created_at,label:"Booking Created",description:`Created on ${_(C.created_at)}`}),C.confirmed_at&&O.push({type:"confirmed",timestamp:C.confirmed_at,label:"Confirmation Sent",description:`Sent on ${_(C.confirmed_at)}`}),C.reminder_sent_at&&O.push({type:"reminder",timestamp:C.reminder_sent_at,label:"Reminder Sent",description:`Sent on ${_(C.reminder_sent_at)}`}),C.completed_at&&O.push({type:"completed",timestamp:C.completed_at,label:"Completed",description:`Completed on ${_(C.completed_at)}`}),C.cancelled_at&&O.push({type:"cancelled",timestamp:C.cancelled_at,label:"Cancelled",description:C.cancellation_reason?`Cancelled on ${_(C.cancelled_at)}: ${C.cancellation_reason}`:`Cancelled on ${_(C.cancelled_at)}`}),O.sort((R,Z)=>new Date(R.timestamp).getTime()-new Date(Z.timestamp).getTime())},[C]);return I?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading booking details..."})]})})}):S||!C?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx(Ue,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Not Found"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["We couldn't find a booking with ticket number: ",s.jsx("strong",{children:e})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Q,{to:"/search",className:"block w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Search for Your Booking"}),s.jsx(Q,{to:"/",className:"block w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Return to Home"})]})]})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Details"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl font-mono text-blue-600",children:e}),s.jsx("button",{onClick:E,className:"p-2 text-gray-500 hover:text-blue-600 transition-colors rounded-lg hover:bg-blue-50",title:"Copy ticket number",children:w?s.jsx(Mt,{className:"w-5 h-5 text-green-600"}):s.jsx(i0,{className:"w-5 h-5"})})]})]}),s.jsx("div",{children:s.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${F(C.status)}`,children:D(C.status)})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Appointment Details"}),s.jsxs("div",{className:"space-y-3",children:[B&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Je,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Service"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:B.name})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Je,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:j(C.appointment_date)})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Time"}),s.jsxs("p",{className:"text-base font-medium text-gray-900",children:[N(C.appointment_time)," - ",T(C.appointment_time,C.slot_duration)]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Duration"}),s.jsxs("p",{className:"text-base font-medium text-gray-900",children:[C.slot_duration," minutes"]})]})]})]})]}),s.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-5 h-5 flex items-center justify-center mt-0.5",children:s.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:C.customer_name})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("a",{href:`mailto:${C.customer_email}`,className:"text-base font-medium text-blue-600 hover:text-blue-700",children:C.customer_email})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fs,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("a",{href:`tel:${C.customer_phone}`,className:"text-base font-medium text-blue-600 hover:text-blue-700",children:C.customer_phone})]})]})]})]}),(C.special_request||C.booking_for_name||C.inspiration_photos&&C.inspiration_photos.length>0)&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Special Requests"}),s.jsxs("div",{className:"space-y-4",children:[C.special_request&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Notes"}),s.jsx("p",{className:"text-base text-gray-900",children:C.special_request})]}),C.booking_for_name&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Booking for"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:C.booking_for_name})]}),C.inspiration_photos&&C.inspiration_photos.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Inspiration Photos"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:C.inspiration_photos.map((O,R)=>s.jsx("button",{onClick:()=>b(R),className:"relative aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all",children:s.jsx("img",{src:O,alt:`Inspiration ${R+1}`,className:"w-full h-full object-cover"})},R))})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[s.jsxs("button",{onClick:()=>p(!v),className:"w-full flex items-center justify-between text-left",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Timeline"}),v?s.jsx(wm,{className:"w-5 h-5 text-gray-400"}):s.jsx(Ln,{className:"w-5 h-5 text-gray-400"})]}),v&&s.jsx("div",{className:"mt-6 space-y-4",children:V.map((O,R)=>s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:$(O.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900",children:O.label}),O.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.description})]})]},R))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Shop Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Yc,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),s.jsx("p",{className:"text-base text-gray-900",children:a}),s.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 inline-flex items-center gap-1 mt-1",children:["Get Directions",s.jsx(d5,{className:"w-3 h-3"})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fs,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("a",{href:`tel:${i}`,className:"text-base font-medium text-blue-600 hover:text-blue-700",children:i})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Operating Hours"}),s.jsx("p",{className:"text-base text-gray-900",children:l})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[C.status==="confirmed"&&Y&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>m(!0),className:"w-full bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Cancel Booking"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>A.mutate(),disabled:A.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:A.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bd,{className:"w-4 h-4"}),"Resend"]})}),s.jsxs("button",{onClick:z,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx(xo,{className:"w-4 h-4"}),"Calendar"]}),s.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx(Wi,{className:"w-4 h-4"}),"Print"]})]})]}),C.status==="confirmed"&&!Y&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-yellow-800 text-sm",children:[s.jsxs("strong",{children:["Cannot cancel within ",c," hours."]})," Please call us: "," ",s.jsx("a",{href:`tel:${i}`,className:"font-semibold underline",children:i})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>A.mutate(),disabled:A.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:A.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bd,{className:"w-4 h-4"}),"Resend"]})}),s.jsxs("button",{onClick:z,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx(xo,{className:"w-4 h-4"}),"Calendar"]}),s.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx(Wi,{className:"w-4 h-4"}),"Print"]})]})]}),C.status==="completed"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:M,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Book Again"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:k,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx(Wi,{className:"w-4 h-4"}),"Print Receipt"]}),s.jsx("button",{onClick:()=>A.mutate(),disabled:A.isPending,className:"flex items-center justify-center gap-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:A.isPending?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bd,{className:"w-4 h-4"}),"Resend"]})})]})]}),C.status==="cancelled"&&s.jsxs("div",{className:"space-y-3",children:[C.cancelled_at&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-3",children:s.jsxs("p",{className:"text-red-800 text-sm",children:[s.jsxs("strong",{children:["Cancelled on ",_(C.cancelled_at)]}),C.cancellation_reason&&s.jsx("span",{className:"block mt-1",children:C.cancellation_reason})]})}),s.jsx("button",{onClick:M,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Book Again"})]})]}),A.isSuccess&&s.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg animate-in slide-in-from-bottom",children:s.jsx("p",{className:"font-medium",children:"Confirmation resent successfully!"})}),P.isSuccess&&s.jsx("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg animate-in slide-in-from-bottom",children:s.jsx("p",{className:"font-medium",children:"Booking cancelled successfully"})})]})}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Cancel Booking?"}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Nt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-yellow-800 text-sm",children:s.jsx("strong",{children:"Are you sure you want to cancel this booking?"})}),s.jsxs("p",{className:"text-yellow-700 text-sm mt-2",children:[(B==null?void 0:B.name)||"Haircut"," on ",j(C.appointment_date)," at ",N(C.appointment_time)]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cancellation-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for cancellation (optional)"}),s.jsx("textarea",{id:"cancellation-reason",value:h,onChange:O=>y(O.target.value),placeholder:"e.g., schedule changed, emergency",rows:3,maxLength:200,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.length,"/200"]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"No, Keep Booking"}),s.jsx("button",{onClick:G,disabled:P.isPending,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:P.isPending?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Cancelling..."]}):"Yes, Cancel Booking"})]})]})}),x!==null&&C.inspiration_photos&&s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>b(null),children:[s.jsx("button",{onClick:()=>b(null),className:"absolute top-4 right-4 text-white hover:text-gray-300",children:s.jsx(Nt,{className:"w-8 h-8"})}),s.jsxs("div",{className:"max-w-4xl max-h-full",children:[s.jsx("img",{src:C.inspiration_photos[x],alt:`Inspiration ${x+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:O=>O.stopPropagation()}),s.jsxs("div",{className:"text-white text-center mt-4",children:["Photo ",x+1," of ",C.inspiration_photos.length]})]})]}),s.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-ticket, .print-ticket * {
            visibility: visible;
          }
          .print-ticket {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
        }
      `})]})},tE=()=>{const[e,t]=dt(),[r,n]=f.useState(e.get("service_filter")||null),[a,i]=f.useState("newest_first"),[o,l]=f.useState(parseInt(e.get("page")||"1",10)),[c,d]=f.useState(!1),[u,m]=f.useState(null),h=20,y=ee(D=>D.app_settings.gallery_enabled),v="http://localhost:3000",{data:p}=we({queryKey:["services","active"],queryFn:async()=>{const D=await J.get(`${v}/api/services`,{params:{is_active:!0,sort_by:"display_order",sort_order:"asc"}});return D.data.services||D.data||[]},staleTime:5*60*1e3}),{data:w,isLoading:g}=we({queryKey:["gallery",r,a,o],queryFn:async()=>{const D={sort_by:"created_at",sort_order:a==="newest_first"?"desc":"asc",limit:h,offset:(o-1)*h};r&&(D.service_id=r);const $=await J.get(`${v}/api/gallery`,{params:D});return{images:$.data.images||[],total:$.data.total||0,has_more:$.data.has_more||!1}},staleTime:2*60*1e3}),x=(w==null?void 0:w.images)||[],b=(w==null?void 0:w.total)||0;f.useEffect(()=>{const D={};r&&(D.service_filter=r),o>1&&(D.page=o.toString()),t(D,{replace:!0})},[r,o,t]);const j=f.useCallback(D=>{n(D),l(1)},[]),N=f.useCallback(D=>{i(D),l(1)},[]),_=f.useCallback(D=>{l(D),window.scrollTo({top:0,behavior:"smooth"})},[]),T=f.useCallback(D=>{m(D),d(!0)},[]),E=f.useCallback(()=>{d(!1),m(null)},[]),z=f.useCallback(D=>{u!==null&&(D==="prev"&&u>0?m(u-1):D==="next"&&u<x.length-1&&m(u+1))},[u,x.length]);f.useEffect(()=>{if(!c)return;const D=$=>{$.key==="Escape"?E():$.key==="ArrowLeft"?z("prev"):$.key==="ArrowRight"&&z("next")};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[c,E,z]);const k=f.useRef(null),G=D=>{k.current=D.touches[0].clientX},M=D=>{if(k.current===null)return;const $=D.changedTouches[0].clientX,q=k.current-$;Math.abs(q)>50&&(q>0?z("next"):z("prev")),k.current=null},F=Math.ceil(b/h);return y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight",children:"Our Work"}),s.jsx("p",{className:"mt-4 text-lg md:text-xl text-gray-600 leading-relaxed",children:"Check out our latest styles"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"service-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Service"}),s.jsxs("select",{id:"service-filter",value:r||"",onChange:D=>j(D.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[s.jsx("option",{value:"",children:"All Services"}),p==null?void 0:p.map(D=>s.jsx("option",{value:D.service_id,children:D.name},D.service_id))]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"sort-order",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),s.jsxs("select",{id:"sort-order",value:a,onChange:D=>N(D.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[s.jsx("option",{value:"newest_first",children:"Newest First"}),s.jsx("option",{value:"oldest_first",children:"Oldest First"})]})]})]})}),g&&s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((D,$)=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded-xl animate-pulse"},$))}),!g&&x.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsxs("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("h3",{className:"mt-6 text-2xl font-semibold text-gray-900",children:"Gallery coming soon!"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"We're adding new photos regularly. Check back soon."})]}),!g&&x.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:x.map((D,$)=>{const q=p==null?void 0:p.find(I=>I.service_id===D.service_id);return s.jsxs("div",{className:"group relative aspect-square rounded-xl overflow-hidden shadow-lg border border-gray-100 cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-xl",onClick:()=>T($),children:[s.jsx("img",{src:D.thumbnail_url,alt:D.caption||"Gallery image",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-110",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[D.caption&&s.jsx("p",{className:"text-white font-medium text-sm md:text-base mb-1",children:D.caption}),q&&s.jsx("span",{className:"inline-block px-2 py-1 bg-blue-600 text-white text-xs rounded-md",children:q.name})]})]},D.image_id)})}),s.jsxs("div",{className:"text-center text-gray-600 mb-6",children:["Showing ",(o-1)*h+1,"-",Math.min(o*h,b)," of ",b]}),F>1&&s.jsxs("div",{className:"flex justify-center items-center gap-2 flex-wrap",children:[s.jsx("button",{onClick:()=>_(o-1),disabled:o===1,className:"px-4 py-2 bg-white rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Previous"}),[...Array(Math.min(5,F))].map((D,$)=>{let q;return F<=5||o<=3?q=$+1:o>=F-2?q=F-4+$:q=o-2+$,s.jsx("button",{onClick:()=>_(q),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o===q?"bg-blue-600 text-white shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:q},q)}),s.jsx("button",{onClick:()=>_(o+1),disabled:o===F,className:"px-4 py-2 bg-white rounded-lg border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Next"})]})]})]})}),c&&u!==null&&x[u]&&s.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:E,onTouchStart:G,onTouchEnd:M,children:[s.jsx("button",{onClick:E,className:"absolute top-4 right-4 z-10 p-2 text-white hover:text-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Close lightbox",children:s.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 text-white text-lg font-medium bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:[u+1," / ",x.length]}),u>0&&s.jsx("button",{onClick:D=>{D.stopPropagation(),z("prev")},className:"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 text-white hover:text-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Previous image",children:s.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"max-w-7xl max-h-screen w-full flex flex-col items-center justify-center",onClick:D=>D.stopPropagation(),children:[s.jsx("img",{src:x[u].image_url,alt:x[u].caption||"Gallery image",className:"max-w-full max-h-[80vh] object-contain"}),x[u].caption&&s.jsx("p",{className:"text-white text-center mt-4 text-lg font-medium max-w-2xl",children:x[u].caption})]}),u<x.length-1&&s.jsx("button",{onClick:D=>{D.stopPropagation(),z("next")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 text-white hover:text-gray-300 transition-colors focus:outline-none focus:ring-2 focus:ring-white rounded-lg","aria-label":"Next image",children:s.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Gallery Not Available"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"The gallery is currently disabled."}),s.jsx(Q,{to:"/",className:"mt-6 inline-block px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:"Return Home"})]})})})},Tg=z0({email:Ns().email().min(1).max(255),password:Ns().min(8).max(100).regex(/^(?=.*[a-zA-Z])(?=.*\d)/,"Password must contain letters and numbers"),name:Ns().min(2).max(255).regex(/^[a-zA-Z\s]+$/,"Name must contain only letters and spaces"),phone:Ns().min(10).max(20).regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format")}),sE=()=>{const e=Le(),[t]=dt(),r=t.get("redirect_url"),[n,a]=f.useState({email:"",password:"",name:"",phone:""}),[i,o]=f.useState(""),[l,c]=f.useState(!1),[d,u]=f.useState(!1),[m,h]=f.useState(!1),[y,v]=f.useState({}),[p,w]=f.useState({score:0,label:"weak",color:"red"}),[g,x]=f.useState(!1),[b,j]=f.useState(!1),N=ee(P=>P.authentication_state.authentication_status.is_loading),_=ee(P=>P.authentication_state.error_message),T=ee(P=>P.register_user),E=ee(P=>P.clear_auth_error),z=_,k=f.useCallback(P=>{let A=0;return P.length>=8&&A++,P.length>=12&&A++,/[a-z]/.test(P)&&/[A-Z]/.test(P)&&A++,/\d/.test(P)&&A++,/[^a-zA-Z0-9]/.test(P)&&A++,A<=2?{score:A,label:"weak",color:"red"}:A<=3?{score:A,label:"medium",color:"amber"}:{score:A,label:"strong",color:"green"}},[]),G=f.useCallback(async P=>{if(!P||!Ns().email().safeParse(P).success)return!1;j(!0);try{const Y=await fetch(`http://localhost:3000/api/auth/check-email-exists?email=${encodeURIComponent(P)}`);return Y.ok&&(await Y.json()).exists||!1}catch{return console.warn("Email uniqueness check endpoint not available"),!1}finally{j(!1)}},[]);f.useEffect(()=>{if(!n.email)return;const P=setTimeout(async()=>{const A=await G(n.email);v(A?Y=>({...Y,email:"Email already registered. Log in instead?"}):Y=>{const{email:V,...O}=Y;return O})},500);return()=>clearTimeout(P)},[n.email,G]);const M=(P,A)=>{try{Tg.shape[P].parse(A);return}catch(Y){return Y instanceof Jt?Y.errors[0].message:"Invalid input"}},F=()=>{const P=n.password===i;return x(P),i&&!P?(v(A=>({...A,password_confirm:"Passwords don't match"})),!1):(v(A=>{const{password_confirm:Y,...V}=A;return V}),!0)};f.useEffect(()=>{if(n.password){const P=k(n.password);w(P)}else w({score:0,label:"weak",color:"red"})},[n.password,k]),f.useEffect(()=>{if(i&&n.password){const P=n.password===i;x(P),v(i&&!P?A=>({...A,password_confirm:"Passwords don't match"}):A=>{const{password_confirm:Y,...V}=A;return V})}},[n.password,i]),f.useEffect(()=>{E()},[E]),f.useEffect(()=>{z&&console.log("Auth error:",z)},[z]);const D=(P,A)=>{a(Y=>({...Y,[P]:A})),v(Y=>{const{[P]:V,...O}=Y;return O}),_&&E()},$=P=>{const A=n[P],Y=M(P,A);v(Y?V=>({...V,[P]:Y}):V=>{const{[P]:O,...R}=V;return R})},q=P=>{o(P),v(A=>{const{password_confirm:Y,...V}=A;return V})},I=P=>{h(P),P&&v(A=>{const{terms:Y,...V}=A;return V})},S=async P=>{P.preventDefault();const A={},Y=Tg.safeParse(n);if(Y.success||Y.error.errors.forEach(V=>{const O=V.path[0];A[O]=V.message}),i?n.password!==i&&(A.password_confirm="Passwords don't match"):A.password_confirm="Please confirm your password",m||(A.terms="You must accept the terms to continue"),Object.keys(A).length>0){v(A);return}E();try{await T(n.email,n.password,n.name,n.phone),e("/verify-email",{replace:!0,state:{email:n.email,redirect_url:r||"/dashboard"}})}catch(V){console.error("Registration error:",V)}},C=P=>{alert(`${P.charAt(0).toUpperCase()+P.slice(1)} registration is not available yet. Please use email registration.`)},B=n.email&&n.password&&n.name&&n.phone&&i&&g&&m&&Object.keys(y).length===0&&!b;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full mx-auto space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 leading-tight",children:"Create Your Account"}),s.jsx("p",{className:"mt-2 text-base text-gray-600 leading-relaxed",children:"Book faster with saved details and view your history"})]}),s.jsx("div",{className:"bg-white shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 overflow-hidden",children:s.jsxs("div",{className:"p-6 lg:p-8",children:[_&&s.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",role:"alert","aria-live":"polite",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Pt,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm font-medium text-red-800",children:_})})]})}),s.jsxs("form",{onSubmit:S,className:"space-y-6",noValidate:!0,children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-1",children:["Full Name ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:n.name,onChange:P=>D("name",P.target.value),onBlur:()=>$("name"),placeholder:"John Smith","aria-invalid":!!y.name,"aria-describedby":y.name?"name-error":"name-helper",className:`
                      w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                      ${y.name?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}
                      focus:outline-none text-gray-900 placeholder-gray-400
                    `}),y.name?s.jsxs("p",{id:"name-error",className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.name]}):s.jsx("p",{id:"name-helper",className:"mt-1 text-sm text-gray-500",children:"First and last name"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-1",children:["Email Address ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:P=>D("email",P.target.value),onBlur:()=>$("email"),placeholder:"john@example.com","aria-invalid":!!y.email,"aria-describedby":y.email?"email-error":"email-helper",className:`
                        w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                        ${y.email?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}
                        focus:outline-none text-gray-900 placeholder-gray-400
                      `}),b&&s.jsx("div",{className:"absolute right-3 top-3.5",children:s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-600 border-t-transparent rounded-full"})})]}),y.email?s.jsxs("p",{id:"email-error",className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.email]}):s.jsx("p",{id:"email-helper",className:"mt-1 text-sm text-gray-500",children:"We'll send a verification email"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-1",children:["Phone Number ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:n.phone,onChange:P=>D("phone",P.target.value),onBlur:()=>$("phone"),placeholder:"+1 (555) 123-4567","aria-invalid":!!y.phone,"aria-describedby":y.phone?"phone-error":"phone-helper",className:`
                      w-full px-4 py-3 rounded-lg border-2 transition-all duration-200
                      ${y.phone?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}
                      focus:outline-none text-gray-900 placeholder-gray-400
                    `}),y.phone?s.jsxs("p",{id:"phone-error",className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.phone]}):s.jsx("p",{id:"phone-helper",className:"mt-1 text-sm text-gray-500",children:"For confirmation and reminders"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-1",children:["Create Password ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"new-password",required:!0,value:n.password,onChange:P=>D("password",P.target.value),onBlur:()=>$("password"),placeholder:"","aria-invalid":!!y.password,"aria-describedby":y.password?"password-error":"password-helper",className:`
                        w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200
                        ${y.password?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}
                        focus:outline-none text-gray-900 placeholder-gray-400
                      `}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors","aria-label":l?"Hide password":"Show password",children:l?s.jsx(Wa,{className:"h-5 w-5"}):s.jsx(Yr,{className:"h-5 w-5"})})]}),n.password&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Password strength:"}),s.jsx("span",{className:`text-xs font-semibold ${p.color==="red"?"text-red-600":p.color==="amber"?"text-amber-600":"text-green-600"}`,children:p.label.charAt(0).toUpperCase()+p.label.slice(1)})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-300 ${p.color==="red"?"bg-red-500":p.color==="amber"?"bg-amber-500":"bg-green-500"}`,style:{width:`${p.score/5*100}%`}})})]}),y.password?s.jsxs("p",{id:"password-error",className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.password]}):s.jsx("p",{id:"password-helper",className:"mt-1 text-sm text-gray-500",children:"Minimum 8 characters, include letters and numbers"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"password_confirm",className:"block text-sm font-medium text-gray-900 mb-1",children:["Confirm Password ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password_confirm",name:"password_confirm",type:d?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:P=>q(P.target.value),onBlur:F,placeholder:"","aria-invalid":!!y.password_confirm,"aria-describedby":y.password_confirm?"password-confirm-error":"password-confirm-helper",className:`
                        w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200
                        ${y.password_confirm?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":g&&i?"border-green-300 focus:border-green-500 focus:ring-4 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}
                        focus:outline-none text-gray-900 placeholder-gray-400
                      `}),s.jsx("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors","aria-label":d?"Hide password":"Show password",children:d?s.jsx(Wa,{className:"h-5 w-5"}):s.jsx(Yr,{className:"h-5 w-5"})}),g&&i&&s.jsx("div",{className:"absolute right-12 top-3.5",children:s.jsx(Mt,{className:"h-5 w-5 text-green-600"})})]}),y.password_confirm?s.jsxs("p",{id:"password-confirm-error",className:"mt-1 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.password_confirm]}):s.jsx("p",{id:"password-confirm-helper",className:"mt-1 text-sm text-gray-500",children:"Re-enter your password"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:m,onChange:P=>I(P.target.checked),"aria-invalid":!!y.terms,"aria-describedby":y.terms?"terms-error":void 0,className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-4 focus:ring-blue-100 focus:ring-offset-0 transition-all cursor-pointer"})}),s.jsx("div",{className:"ml-3",children:s.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700 cursor-pointer",children:["I agree to the"," ",s.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-medium underline",children:"Privacy Policy"})," ",s.jsx("span",{className:"text-red-600",children:"*"})]})})]}),y.terms&&s.jsxs("p",{id:"terms-error",className:"mt-1 ml-8 text-sm text-red-600 flex items-center",children:[s.jsx(Pt,{className:"h-4 w-4 mr-1"}),y.terms]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:!B||N,className:`
                      w-full px-6 py-3 rounded-lg font-medium text-white
                      transition-all duration-200
                      ${B&&!N?"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl cursor-pointer":"bg-gray-400 cursor-not-allowed opacity-50"}
                      focus:outline-none focus:ring-4 focus:ring-blue-100
                      flex items-center justify-center
                    `,"aria-busy":N,children:N?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Creating account..."]}):"Create Account"})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or sign up with"})})]}),s.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>C("google"),className:"w-full inline-flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[s.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),s.jsxs("button",{type:"button",onClick:()=>C("facebook"),className:"w-full inline-flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[s.jsx("svg",{className:"h-5 w-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsx(Q,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium underline transition-colors",children:"Log in"})]})})]})})]})})})},rE=()=>{const[e]=dt(),t=Le(),r=e.get("redirect_url")||"/dashboard",n=ee(S=>S.authentication_state.authentication_status.is_loading),a=ee(S=>S.authentication_state.error_message),i=ee(S=>S.authentication_state.authentication_status.is_authenticated),o=ee(S=>S.login_user),l=ee(S=>S.register_user),c=ee(S=>S.clear_auth_error),[d,u]=f.useState(!0),[m,h]=f.useState({email:"",password:"",name:"",phone:""}),[y,v]=f.useState(!1),[p,w]=f.useState(!1),[g,x]=f.useState({});f.useEffect(()=>{i&&t(r,{replace:!0})},[i,t,r]);const b=S=>{if(!S)return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S))return"Please enter a valid email address"},j=S=>{if(!S)return"Password is required";if(!d&&S.length<8)return"Password must be at least 8 characters"},N=S=>{if(!S)return"Name is required";if(S.length<2)return"Name must be at least 2 characters"},_=S=>{if(!S)return"Phone is required";if(S.length<10)return"Invalid phone number"},T=()=>{const S=b(m.email);x(C=>({...C,email:S}))},E=()=>{const S=j(m.password);x(C=>({...C,password:S}))},z=()=>{const S=N(m.name);x(C=>({...C,name:S}))},k=()=>{const S=_(m.phone);x(C=>({...C,phone:S}))},G=async S=>{if(S.preventDefault(),c(),x({}),d){const C=b(m.email),B=j(m.password);if(C||B){x({email:C,password:B});return}try{await o(m.email,m.password)}catch(P){console.error("Login error:",P);const A=P instanceof Error?P.message:"Login failed";Up.error(A)}}else{const C=b(m.email),B=j(m.password),P=N(m.name),A=_(m.phone);if(C||B||P||A){x({email:C,password:B,name:P,phone:A});return}try{await l(m.email,m.password,m.name,m.phone)}catch(Y){console.error("Registration error:",Y);const V=Y instanceof Error?Y.message:"Registration failed";Up.error(V)}}},M=S=>{alert(`${S.charAt(0).toUpperCase()+S.slice(1)} login coming soon`)},F=()=>{u(!d),x({}),c(),h({email:"",password:"",name:"",phone:""})},$=(d?m.email&&m.password&&!g.email&&!g.password:m.email&&m.password&&m.name&&m.phone&&!g.email&&!g.password&&!g.name&&!g.phone)&&!n,I=(()=>{if(!a)return null;const S=a.toLowerCase();return S.includes("verified")||S.includes("verify")?{type:"warning",message:a,showResend:!0}:S.includes("locked")||S.includes("attempts")?{type:"error",message:a,showRetry:!1}:S.includes("connection")||S.includes("network")?{type:"error",message:a,showRetry:!0}:{type:"error",message:a,showRetry:!1}})();return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 leading-tight",children:d?"Welcome Back":"Create Your Account"}),s.jsx("p",{className:"mt-2 text-base text-gray-600",children:d?"Sign in to access your dashboard and bookings":"Register to book faster and view your history"})]}),I&&s.jsx("div",{className:`rounded-xl p-4 border ${I.type==="warning"?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"}`,role:"alert","aria-live":"polite",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ue,{className:`size-5 mt-0.5 mr-3 flex-shrink-0 ${I.type==="warning"?"text-amber-600":"text-red-600"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm ${I.type==="warning"?"text-amber-700":"text-red-700"}`,children:I.message}),I.showResend&&s.jsx("button",{type:"button",className:"mt-2 text-sm font-medium text-amber-700 hover:text-amber-800 underline",onClick:()=>{alert("Resend verification email - to be implemented")},children:"Resend verification link"}),I.showRetry&&s.jsx("button",{type:"button",className:"mt-2 text-sm font-medium text-red-700 hover:text-red-800 underline",onClick:()=>c(),children:"Try again"})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-8 py-8",children:[s.jsxs("form",{onSubmit:G,className:"space-y-6",noValidate:!0,children:[!d&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Full Name"}),s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:m.name,onChange:S=>{h(C=>({...C,name:S.target.value})),x(C=>({...C,name:void 0}))},onBlur:z,placeholder:"Full Name",className:`block w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${g.name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} text-gray-900 placeholder-gray-400 focus:outline-none`,"aria-invalid":g.name?"true":"false","aria-describedby":g.name?"name-error":void 0}),g.name&&s.jsx("p",{id:"name-error",className:"mt-2 text-sm text-red-600",role:"alert",children:g.name})]}),!d&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900 mb-2",children:"Phone Number"}),s.jsx("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,value:m.phone,onChange:S=>{h(C=>({...C,phone:S.target.value})),x(C=>({...C,phone:void 0}))},onBlur:k,placeholder:"Phone Number",className:`block w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${g.phone?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} text-gray-900 placeholder-gray-400 focus:outline-none`,"aria-invalid":g.phone?"true":"false","aria-describedby":g.phone?"phone-error":void 0}),g.phone&&s.jsx("p",{id:"phone-error",className:"mt-2 text-sm text-red-600",role:"alert",children:g.phone})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Wt,{className:"size-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:m.email,onChange:S=>{h(C=>({...C,email:S.target.value})),x(C=>({...C,email:void 0})),a&&!n&&c()},onBlur:T,placeholder:"Email Address",className:`block w-full pl-10 pr-4 py-3 rounded-lg border-2 transition-all duration-200 ${g.email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} text-gray-900 placeholder-gray-400 focus:outline-none`,"aria-invalid":g.email?"true":"false","aria-describedby":g.email?"email-error":void 0})]}),g.email&&s.jsx("p",{id:"email-error",className:"mt-2 text-sm text-red-600",role:"alert",children:g.email})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900",children:"Password"}),d&&s.jsx(Q,{to:"/reset-password",className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Qc,{className:"size-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:p?"text":"password",autoComplete:d?"current-password":"new-password",required:!0,value:m.password,onChange:S=>{h(C=>({...C,password:S.target.value})),x(C=>({...C,password:void 0})),a&&!n&&c()},onBlur:E,placeholder:"Password",className:`block w-full pl-10 pr-12 py-3 rounded-lg border-2 transition-all duration-200 ${g.password?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} text-gray-900 placeholder-gray-400 focus:outline-none`,"aria-invalid":g.password?"true":"false","aria-describedby":g.password?"password-error":void 0}),s.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors","aria-label":p?"Hide password":"Show password",children:p?s.jsx(Wa,{className:"size-5"}):s.jsx(Yr,{className:"size-5"})})]}),g.password&&s.jsx("p",{id:"password-error",className:"mt-2 text-sm text-red-600",role:"alert",children:g.password})]}),d&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:y,onChange:S=>v(S.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 transition-colors cursor-pointer"}),s.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Remember me for 30 days"})]}),s.jsx("button",{type:"submit",disabled:!$,className:"w-full flex justify-center items-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600 disabled:hover:shadow-lg",children:n?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Signing in...":"Creating account..."]}):d?"Sign In":"Create Account"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or log in with"})})]}),s.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>M("google"),disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Coming soon",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),s.jsxs("button",{type:"button",onClick:()=>M("facebook"),disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Coming soon",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"#1877F2",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]})]})]}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-100",children:s.jsx("div",{className:"text-center text-sm text-gray-600",children:s.jsx("button",{type:"button",onClick:F,className:"font-medium text-blue-600 hover:text-blue-700 transition-colors","aria-label":d?"Don't have an account? Sign up":"Already have an account? Sign in",children:d?"Don't have an account? Sign up":"Already have an account? Sign in"})})})]}),s.jsxs("p",{className:"text-center text-xs text-gray-500",children:["By signing in, you agree to our"," ",s.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})]})})})},Eg=()=>"http://localhost:3000",nE=()=>{var E,z,k,G,M,F,D,$,q,I,S;const t=(E=ur().state)==null?void 0:E.email,r=ee(C=>{var B;return(B=C.authentication_state.current_user)==null?void 0:B.email}),n=ee(C=>C.authentication_state.auth_token),a=ee(C=>C.update_current_user),i=r||t,[o,l]=f.useState(!1),[c,d]=f.useState(60),[u,m]=f.useState(null),[h,y]=f.useState(!1),[v,p]=f.useState(""),[w,g]=f.useState(0);f.useEffect(()=>{let C=null;return c>0&&(C=setInterval(()=>{d(B=>B<=1?(l(!0),0):B-1)},1e3)),()=>{C&&clearInterval(C)}},[c]);const x=ve({mutationFn:async C=>(await J.post(`${Eg()}/api/auth/resend-verification`,C,{headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}})).data});f.useEffect(()=>{x.isSuccess&&(d(60),l(!1),g(C=>C+1),m("Verification email sent! Check your inbox."),setTimeout(()=>{m(null)},5e3)),x.isError&&console.error("Resend verification failed:",x.error)},[x.isSuccess,x.isError,x.error]);const b=ve({mutationFn:async C=>{if(!n)throw new Error("Not authenticated");return(await J.patch(`${Eg()}/api/auth/me`,C,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}})).data}});f.useEffect(()=>{b.isSuccess&&b.data&&(a({email:b.data.user.email}),y(!1),p(""),m(`Verification email sent to new address: ${b.data.user.email}`),d(60),l(!1),g(0),setTimeout(()=>{m(null)},5e3)),b.isError&&console.error("Change email failed:",b.error)},[b.isSuccess,b.isError,b.error,b.data,a]);const j=()=>{if(!i){console.error("No user email available");return}x.mutate({email:i})},N=C=>{C.preventDefault(),!(!v||!v.trim())&&b.mutate({email:v.trim()})},_=()=>{p(i||""),y(!0)},T=()=>{y(!1),p(""),b.reset()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4",children:s.jsx(Wt,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Verify Your Email"})]}),s.jsxs("div",{className:"px-6 py-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("p",{className:"text-gray-900 text-lg font-medium mb-2",children:"We sent a verification link to"}),s.jsx("p",{className:"text-blue-600 font-semibold text-lg break-all",children:i||"your email"})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-blue-900 text-sm mb-2",children:"Click the link in the email to activate your account."}),s.jsx("p",{className:"text-blue-700 text-sm",children:"Check your spam folder if you don't see it within a few minutes."})]}),u&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-start",children:[s.jsx(Mt,{className:"w-5 h-5 text-green-600 mr-3 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-green-800 text-sm font-medium",children:u})]}),x.isError&&!u&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[s.jsx(Ue,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:((M=(G=(k=(z=x.error)==null?void 0:z.response)==null?void 0:k.data)==null?void 0:G.error)==null?void 0:M.message)||((F=x.error)==null?void 0:F.message)||"Failed to send verification email. Please try again."})})]}),b.isError&&h&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start",children:[s.jsx(Ue,{className:"w-5 h-5 text-red-600 mr-3 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-red-800 text-sm font-medium",children:((I=(q=($=(D=b.error)==null?void 0:D.response)==null?void 0:$.data)==null?void 0:q.error)==null?void 0:I.message)||((S=b.error)==null?void 0:S.message)||"Failed to update email. Please try again."})})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("p",{className:"text-gray-700 font-medium mb-4",children:"Didn't receive the email?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-gray-600 text-sm flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),"Check your spam or junk folder"]}),s.jsx("button",{onClick:j,disabled:!o||x.isPending,className:`w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-all duration-200 ${o&&!x.isPending?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:x.isPending?s.jsxs(s.Fragment,{children:[s.jsx(dc,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):o?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Resend verification email"]}):s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"You can resend in ",c,"s"]})}),w>=3&&s.jsxs("p",{className:"text-amber-700 text-sm bg-amber-50 border border-amber-200 rounded-lg p-3",children:["Still not receiving? Contact support at"," ",s.jsx("a",{href:"tel:+15551234567",className:"font-medium underline",children:"+1 (555) 123-4567"})]}),s.jsx("button",{onClick:_,className:"w-full text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors",children:"Change email address"})]})]})]})]}),s.jsx("p",{className:"text-center text-gray-600 text-sm mt-6 px-4",children:"For security reasons, please keep this page open while you check your email."})]})}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:T}),s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsx("button",{onClick:T,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:s.jsx(Nt,{className:"w-6 h-6"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Change Email Address"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"new-email",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Email Address"}),s.jsx("input",{id:"new-email",name:"new-email",type:"email",required:!0,value:v,onChange:C=>p(C.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all outline-none"}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"A new verification email will be sent to this address."})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:T,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:b.isPending||!v.trim(),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:b.isPending?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsx(dc,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Email"})]})]})]})})]})]})},aE=()=>{var b,j;const[e]=dt(),t=Le(),r=e.get("token")||"",[n,a]=f.useState(!1),[i,o]=f.useState(!1),l=ee(N=>N.booking_context),c=ee(N=>N.initialize_auth),d=()=>"http://localhost:3000",u=N=>({id:N.user_id,email:N.email,name:N.name,phone:N.phone,is_verified:N.is_verified,created_at:N.created_at}),m=(N,_)=>{const E={state:{authentication_state:{current_user:N,auth_token:_,authentication_status:{is_authenticated:!0,is_loading:!1,user_type:"user"},error_message:null},booking_context:l},version:0};try{return localStorage.setItem("barberslot-storage",JSON.stringify(E)),!0}catch(z){return console.error("Failed to update persisted auth state:",z),!1}},h=ve({mutationFn:async N=>(await J.post(`${d()}/api/auth/verify-email`,N,{headers:{"Content-Type":"application/json"}})).data,onSuccess:N=>{const _=u(N.user);N.token?m(_,N.token)&&(a(!0),setTimeout(async()=>{await c(),a(!1)},2e3)):(a(!0),setTimeout(()=>a(!1),3e3))},onError:N=>{console.error("Email verification failed:",N)}});f.useEffect(()=>{r?h.mutate({verification_token:r}):h.mutate({verification_token:"invalid"})},[r,h]);const y=l.step_completed>0,v=((b=h.data)==null?void 0:b.user.name.split(" ")[0])||"there",p=((j=h.data)==null?void 0:j.user.email)||"",w=()=>{o(!0),setTimeout(()=>{t("/dashboard")},500)},g=()=>{o(!0);const N=l.step_completed;let _="/book/service";N>=4?_="/book/review":N>=3?_="/book/details":N>=2?_="/book/time":N>=1&&(_="/book/date"),setTimeout(()=>{t(_)},500)},x=()=>{o(!0),setTimeout(()=>{t("/book/service")},500)};return h.isPending?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-6 relative",children:s.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto animate-pulse",children:s.jsx(Fd,{className:"w-12 h-12 animate-spin text-blue-600",strokeWidth:2.5})})}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3",children:"Verifying Your Email..."}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Please wait while we confirm your account"}),s.jsxs("div",{className:"mt-6 flex justify-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})}):h.isError||!r?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12",children:s.jsx("div",{className:"max-w-md w-full",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-red-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 px-8 py-10 text-center",children:[s.jsx("div",{className:"mb-4",children:s.jsx(Ue,{className:"w-16 h-16 text-white mx-auto",strokeWidth:2})}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Verification Failed"})]}),s.jsxs("div",{className:"px-8 py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-red-800 text-sm leading-relaxed",children:s.jsx("strong",{className:"font-semibold",children:"The verification link is invalid or has expired."})}),s.jsx("p",{className:"text-red-700 text-sm mt-2",children:"This can happen if:"}),s.jsxs("ul",{className:"text-red-700 text-sm mt-2 ml-4 list-disc space-y-1",children:[s.jsx("li",{children:"The link is more than 24 hours old"}),s.jsx("li",{children:"The link has already been used"}),s.jsx("li",{children:"The link was copied incorrectly"})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Q,{to:"/login",className:"block w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-center hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:"Go to Login"}),s.jsx("p",{className:"text-sm text-gray-600 text-center px-4",children:"You can request a new verification email from the login page"}),s.jsx("div",{className:"pt-3 border-t border-gray-200",children:s.jsx(Q,{to:"/",className:"block text-center text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:" Return to Home"})})]})]})]})})})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 px-4 py-12",children:s.jsxs("div",{className:"max-w-2xl w-full",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 px-8 py-12 text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white opacity-10 rounded-full -translate-x-16 -translate-y-16"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-white opacity-10 rounded-full translate-x-20 translate-y-20"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"mb-6 inline-block",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-white opacity-20 rounded-full animate-ping"}),s.jsx(Mt,{className:"w-20 h-20 text-white relative z-10 animate-bounce",strokeWidth:2.5,fill:"rgba(255,255,255,0.2)"})]})}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3 leading-tight",children:"Email Verified!"}),s.jsx("p",{className:"text-lg md:text-xl text-green-50 mb-3 leading-relaxed",children:"Your account is now active and ready to use"}),s.jsxs("p",{className:"text-xl md:text-2xl font-semibold text-white",children:["Welcome to BarberSlot, ",v,"!"]})]})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-10",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-5 text-center",children:"What you can do now:"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-5 border border-blue-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center shadow-lg",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Faster Booking"}),s.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Your details are saved for quick appointments"})]})]})}),s.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-5 border border-purple-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-purple-700 rounded-lg flex items-center justify-center shadow-lg",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Booking History"}),s.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Track all your past and upcoming visits"})]})]})}),s.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-5 border border-amber-200 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-lg flex items-center justify-center shadow-lg",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Easy Management"}),s.jsx("p",{className:"text-xs text-gray-700 leading-relaxed",children:"Cancel or reschedule appointments anytime"})]})]})})]})]}),s.jsxs("div",{className:"space-y-4",children:[y?s.jsx("button",{onClick:g,disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Fd,{className:"w-5 h-5 mr-2 animate-spin"}),"Redirecting..."]}):s.jsxs(s.Fragment,{children:["Continue Booking",s.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}):s.jsx("button",{onClick:w,disabled:i,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Fd,{className:"w-5 h-5 mr-2 animate-spin"}),"Redirecting..."]}):s.jsxs(s.Fragment,{children:["Continue to Dashboard",s.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),!y&&s.jsxs("button",{onClick:x,disabled:i,className:"w-full bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg border-2 border-blue-600 hover:bg-blue-50 transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Book Your First Appointment"]}),s.jsx("div",{className:"text-center pt-2",children:s.jsxs(Q,{to:"/",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors inline-flex items-center group",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Return to Home"]})})]})]})]}),p&&s.jsx("div",{className:"mt-6 text-center",children:s.jsx("div",{className:"bg-white bg-opacity-80 backdrop-blur-sm rounded-lg px-6 py-4 border border-gray-200 shadow-sm",children:s.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[s.jsxs("span",{className:"inline-flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1.5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"A confirmation email has been sent to"]}),s.jsx("br",{}),s.jsx("span",{className:"font-semibold text-gray-900",children:p})]})})})]})}),n&&s.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-in-right",children:s.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-4 rounded-lg shadow-2xl border border-green-500 flex items-center space-x-3 max-w-sm",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Mt,{className:"w-6 h-6",strokeWidth:2.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-sm",children:"Account verified successfully!"}),s.jsx("p",{className:"text-xs text-green-100 mt-0.5",children:"You're all set to start booking"})]})]})}),s.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})},iE=z0({email:Ns().email("Please enter a valid email address")}),oE=async e=>(await J.post("http://localhost:3000/api/auth/request-password-reset",e,{headers:{"Content-Type":"application/json"}})).data,lE=()=>{const[e,t]=f.useState(""),[r,n]=f.useState(null),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(60),[u,m]=f.useState(0),h=f.useRef(null),y=ve({mutationFn:oE,onSuccess:()=>{i(!0),b()},onError:_=>{J.isAxiosError(_)&&!_.response?n("Network error. Please check your connection and try again."):(i(!0),b())}}),v=_=>{try{return iE.parse({email:_}),n(null),!0}catch(T){return T instanceof Jt&&n(T.errors[0].message),!1}},p=_=>{const T=_.target.value;t(T),r&&n(null)},w=()=>{e.trim()&&v(e)},g=async _=>{_.preventDefault(),v(e)&&y.mutate({email:e.trim()})},x=()=>{o&&(m(_=>_+1),l(!1),d(60),y.mutate({email:e.trim()}))},b=()=>{l(!1),d(60),h.current&&clearInterval(h.current),h.current=setInterval(()=>{d(_=>_<=1?(l(!0),h.current&&(clearInterval(h.current),h.current=null),0):_-1)},1e3)};f.useEffect(()=>()=>{h.current&&clearInterval(h.current)},[]);const j=e.trim().length>0&&!r,N=y.isPending;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-6 py-8 sm:px-8 bg-gradient-to-br from-green-50 to-emerald-50 border-b border-green-100",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center animate-scale-in",children:s.jsx(o1,{className:"w-10 h-10 text-white"})})}),s.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900 leading-tight",children:"Check Your Email"}),s.jsx("p",{className:"mt-3 text-center text-base text-gray-700 leading-relaxed",children:"We sent a password reset link to"}),s.jsx("p",{className:"mt-2 text-center text-lg font-semibold text-blue-600",children:e})]}),s.jsxs("div",{className:"px-6 py-8 sm:px-8 space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-900 font-medium mb-2",children:"The link expires in 1 hour"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Click the link in the email to create your new password. If you don't see the email, check your spam folder."})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Didn't receive it?"}),s.jsxs("ul",{className:"space-y-2 mb-4",children:[s.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"Check your spam or junk folder"})]}),s.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"Make sure you entered the correct email address"})]}),s.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 bg-gray-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:"Wait a few minutes for the email to arrive"})]})]}),s.jsx("button",{type:"button",onClick:x,disabled:!o||N,className:"w-full flex items-center justify-center px-4 py-2.5 rounded-lg font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-50",children:N?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):!o&&c>0?s.jsxs(s.Fragment,{children:["Resend in ",c,"s"]}):s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Resend reset link"]})}),u>0&&s.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:u===1?"1 resend attempt":`${u} resend attempts`})]}),s.jsx("div",{className:"border-t border-gray-200 pt-6",children:s.jsxs(Q,{to:"/login",className:"w-full flex items-center justify-center px-4 py-2.5 rounded-lg font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:[s.jsx(vm,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-6 py-8 sm:px-8 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-100",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx(Wt,{className:"w-8 h-8 text-white"})})}),s.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900 leading-tight",children:"Reset Your Password"}),s.jsx("p",{className:"mt-3 text-center text-base text-gray-600 leading-relaxed",children:"Enter your email and we'll send you a reset link"})]}),s.jsx("div",{className:"px-6 py-8 sm:px-8",children:s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:["Email Address ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:p,onBlur:w,placeholder:"john@example.com",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${r?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"} text-gray-900 placeholder-gray-400 focus:outline-none`,disabled:N}),r&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx(Ue,{className:"h-5 w-5 text-red-500"})})]}),r&&s.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",role:"alert",children:[s.jsx(Ue,{className:"w-4 h-4 mr-1 flex-shrink-0"}),r]}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"We'll send a password reset link to this email address"})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:!j||N,className:"w-full flex items-center justify-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600 disabled:hover:shadow-lg",children:N?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-5 h-5 mr-2"}),"Send Reset Link"]})})}),s.jsx("div",{className:"text-center",children:s.jsxs(Q,{to:"/login",className:"inline-flex items-center text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:[s.jsx(vm,{className:"w-4 h-4 mr-1"}),"Back to Login"]})})]})})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Need help?"," ",s.jsx("a",{href:"tel:+15551234567",className:"font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"Contact support"})]})})]})}),s.jsx("style",{children:`
        @keyframes scale-in {
          0% {
            transform: scale(0);
          }
          50% {
            transform: scale(1.1);
          }
          100% {
            transform: scale(1);
          }
        }
        .animate-scale-in {
          animation: scale-in 0.5s ease-out;
        }
      `})]})},cE=e=>{if(!e)return{level:"weak",score:0,feedback:"Enter a password"};let t=0;const r=/[a-z]/.test(e),n=/[A-Z]/.test(e),a=/\d/.test(e),i=/[!@#$%^&*(),.?":{}|<>]/.test(e);return e.length>=8&&(t+=1),r&&(t+=1),n&&(t+=1),a&&(t+=1),i&&(t+=1),t<=2?{level:"weak",score:t,feedback:"Weak - Add more variety"}:t<=4?{level:"medium",score:t,feedback:"Medium - Good password"}:{level:"strong",score:t,feedback:"Strong - Excellent!"}},dE=e=>({min_length:e.length>=8,has_letters:/[a-zA-Z]/.test(e),has_numbers:/\d/.test(e)}),uE=()=>{const e=Le(),[t]=dt(),r=t.get("token")||"",[n,a]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState({new_password:!1,confirm_password:!1}),[d,u]=f.useState({}),m=f.useMemo(()=>cE(n),[n]),h=f.useMemo(()=>dE(n),[n]);f.useEffect(()=>{r||u({token:"No reset token found. Please request a new password reset link."})},[r]);const y=ve({mutationFn:async _=>(await J.post("http://localhost:3000/api/auth/reset-password",_,{headers:{"Content-Type":"application/json"}})).data,onSuccess:()=>{e("/reset-password/success")},onError:_=>{var k,G,M,F,D,$;const T=(M=(G=(k=_.response)==null?void 0:k.data)==null?void 0:G.error)==null?void 0:M.code,E=($=(D=(F=_.response)==null?void 0:F.data)==null?void 0:D.error)==null?void 0:$.message,z={};T==="INVALID_TOKEN"?z.token="Reset link is invalid or expired. Please request a new one.":T==="TOKEN_EXPIRED"?z.token="Reset link has expired. Please request a new one.":T==="TOKEN_USED"?z.token="This reset link has already been used. Please request a new one.":T==="WEAK_PASSWORD"?z.new_password=E||"Password does not meet security requirements.":z.new_password="Failed to reset password. Please try again.",u(z)}}),v=()=>{const _={};return r?(h.min_length?h.has_letters?h.has_numbers||(_.new_password="Password must contain numbers."):_.new_password="Password must contain letters.":_.new_password="Password must be at least 8 characters long.",n!==i&&(_.confirm_password="Passwords do not match."),u(_),Object.keys(_).length===0):(_.token="No reset token found.",u(_),!1)},p=async _=>{_.preventDefault(),u({}),v()&&y.mutate({reset_token:r,new_password:n})},w=_=>{c(T=>({...T,[_]:!T[_]}))},g=()=>{u(i&&n!==i?_=>({..._,confirm_password:"Passwords do not match."}):_=>{const{confirm_password:T,...E}=_;return E})},x=r&&h.min_length&&h.has_letters&&h.has_numbers&&n===i&&n.length>0&&i.length>0,b=y.isPending,j=_=>{switch(_){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500";default:return"bg-gray-300"}},N=_=>{switch(_){case"weak":return"text-red-700";case"medium":return"text-yellow-700";case"strong":return"text-green-700";default:return"text-gray-500"}};return d.token&&!r?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-md w-full space-y-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:s.jsx(Ue,{className:"h-8 w-8 text-red-600"})}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),s.jsx("p",{className:"text-gray-600 mb-6",children:d.token}),s.jsx(Q,{to:"/reset-password",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Request New Reset Link"})]})})})}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Create New Password"}),s.jsx("p",{className:"text-gray-600",children:"Enter your new password below. Make sure it's strong and secure."})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:s.jsxs("div",{className:"p-6 lg:p-8",children:[d.token&&r&&s.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ue,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-red-800 font-medium",children:d.token}),s.jsx(Q,{to:"/reset-password",className:"text-sm text-red-600 hover:text-red-700 font-medium underline mt-2 inline-block",children:"Request a new reset link "})]})]})}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-900 mb-2",children:["New Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l.new_password?"text":"password",id:"new_password",value:n,onChange:_=>{a(_.target.value),u(T=>{const{new_password:E,...z}=T;return z})},placeholder:"Enter new password",className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100 ${d.new_password?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`,disabled:b,"aria-invalid":!!d.new_password,"aria-describedby":d.new_password?"new_password_error":"new_password_helper"}),s.jsx("button",{type:"button",onClick:()=>w("new_password"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":l.new_password?"Hide password":"Show password",children:l.new_password?s.jsx(Wa,{className:"h-5 w-5"}):s.jsx(Yr,{className:"h-5 w-5"})})]}),n&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Password Strength:"}),s.jsx("span",{className:`text-xs font-semibold ${N(m.level)}`,children:m.feedback})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-300 ${j(m.level)}`,style:{width:`${m.score/5*100}%`}})})]}),d.new_password?s.jsxs("p",{id:"new_password_error",className:"mt-2 text-sm text-red-600 flex items-start",children:[s.jsx(Nt,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),d.new_password]}):s.jsx("p",{id:"new_password_helper",className:"mt-2 text-sm text-gray-600",children:"Minimum 8 characters, include letters and numbers"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-900 mb-2",children:["Confirm New Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l.confirm_password?"text":"password",id:"confirm_password",value:i,onChange:_=>{o(_.target.value),u(T=>{const{confirm_password:E,...z}=T;return z})},onBlur:g,placeholder:"Re-enter new password",className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100 ${d.confirm_password?"border-red-300 focus:border-red-500":i&&n===i?"border-green-300 focus:border-green-500":"border-gray-200 focus:border-blue-500"}`,disabled:b,"aria-invalid":!!d.confirm_password,"aria-describedby":d.confirm_password?"confirm_password_error":"confirm_password_helper"}),s.jsx("button",{type:"button",onClick:()=>w("confirm_password"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":l.confirm_password?"Hide password":"Show password",children:l.confirm_password?s.jsx(Wa,{className:"h-5 w-5"}):s.jsx(Yr,{className:"h-5 w-5"})}),i&&n===i&&s.jsx("div",{className:"absolute right-12 top-1/2 -translate-y-1/2",children:s.jsx(Lr,{className:"h-5 w-5 text-green-600"})})]}),d.confirm_password?s.jsxs("p",{id:"confirm_password_error",className:"mt-2 text-sm text-red-600 flex items-start",children:[s.jsx(Nt,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),d.confirm_password]}):s.jsx("p",{id:"confirm_password_helper",className:"mt-2 text-sm text-gray-600",children:"Re-enter your new password"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-3",children:"Password Requirements:"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start text-sm",children:[h.min_length?s.jsx(Lr,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):s.jsx(Nt,{className:"h-5 w-5 text-gray-400 mr-2 flex-shrink-0"}),s.jsx("span",{className:h.min_length?"text-green-700 font-medium":"text-gray-600",children:"At least 8 characters"})]}),s.jsxs("li",{className:"flex items-start text-sm",children:[h.has_letters?s.jsx(Lr,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):s.jsx(Nt,{className:"h-5 w-5 text-gray-400 mr-2 flex-shrink-0"}),s.jsx("span",{className:h.has_letters?"text-green-700 font-medium":"text-gray-600",children:"Contains letters"})]}),s.jsxs("li",{className:"flex items-start text-sm",children:[h.has_numbers?s.jsx(Lr,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0"}):s.jsx(Nt,{className:"h-5 w-5 text-gray-400 mr-2 flex-shrink-0"}),s.jsx("span",{className:h.has_numbers?"text-green-700 font-medium":"text-gray-600",children:"Contains numbers"})]})]})]}),s.jsx("button",{type:"submit",disabled:!x||b,className:"w-full px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600 disabled:hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-100",children:b?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"}),s.jsx("div",{className:"text-center",children:s.jsx(Q,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:" Back to Login"})})]})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-sm text-gray-600",children:"For your security, you'll be logged out of all devices after resetting your password."})})]})})})},mE=()=>{const e=ee(d=>d.app_settings.shop_phone),t=ee(d=>d.app_settings.shop_email),[r,n]=f.useState(5),[a,i]=f.useState(!0),o=Le();f.useEffect(()=>{if(!a)return;const d=setInterval(()=>{n(u=>u<=1?(o("/login"),0):u-1)},1e3);return()=>clearInterval(d)},[a,o]);const l=()=>{o("/login")},c=()=>{i(!1)};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:s.jsxs("div",{className:"px-6 py-12 sm:px-8",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full animate-ping opacity-75"}),s.jsx("div",{className:"relative bg-green-500 rounded-full p-4 shadow-lg",children:s.jsx("svg",{className:"h-12 w-12 text-white animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4 leading-tight",children:"Password Reset Successfully"}),s.jsx("p",{className:"text-lg text-gray-700 text-center mb-2",children:"Your password has been updated"}),s.jsx("p",{className:"text-base text-gray-600 text-center mb-8",children:"You can now log in with your new password"}),a&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-center",children:[s.jsxs("p",{className:"text-blue-700 text-sm font-medium mb-2",children:["Redirecting to login in"," ",s.jsx("span",{className:"text-blue-900 font-bold text-lg",children:r})," ",r===1?"second":"seconds","..."]}),s.jsx("button",{type:"button",onClick:c,className:"text-blue-600 hover:text-blue-800 text-sm font-medium underline transition-colors",children:"Stay on this page"})]}),s.jsxs("button",{onClick:l,className:"w-full flex justify-center items-center px-6 py-3 rounded-lg font-medium text-white bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[s.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Log In Now"]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"Security Notice"}),s.jsx("p",{className:"text-sm text-yellow-700 mb-2",children:"If you didn't make this change, contact us immediately."}),s.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[e&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",s.jsx("a",{href:`tel:${e}`,className:"underline hover:text-yellow-900 transition-colors",children:e})]}),t&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Email:"})," ",s.jsx("a",{href:`mailto:${t}`,className:"underline hover:text-yellow-900 transition-colors",children:t})]}),!e&&!t&&s.jsx("p",{children:"Please contact our support team for assistance."})]})]})]})})})]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(Q,{to:"/",className:"text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors",children:" Back to Home"})})]})})})},hE=(e,t)=>{const r=new Date(`${e}T${t}`),n=new Date,a=r.getTime()-n.getTime();if(a<0)return"Past";const i=Math.floor(a/(1e3*60*60)),o=Math.floor(i/24);return i<1?"Starting soon":i<24?`In ${i} hour${i>1?"s":""}`:o===1?"Tomorrow":o<7?`In ${o} days`:e},Pg=(e,t)=>{const r=new Date(`${e}T${t}`),n=new Date;return(r.getTime()-n.getTime())/(1e3*60*60)>2},fE=(e,t)=>{const r=new Date(`${e}T${t}`),n={weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0};return r.toLocaleDateString("en-US",n)},pE=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",xE=()=>{var F,D,$,q;const e=Le(),t=zs(),[r,n]=dt(),a=ee(I=>I.authentication_state.current_user),i=ee(I=>I.authentication_state.auth_token),o=ee(I=>I.update_booking_context),l=ee(I=>I.clear_booking_context),[c,d]=f.useState(r.get("tab")||"upcoming"),[u]=f.useState(r.get("highlight_booking")),[m,h]=f.useState({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1});f.useEffect(()=>{const I=new URLSearchParams;I.set("tab",c),u&&I.set("highlight_booking",u),n(I,{replace:!0})},[c,u,n]);const y={upcoming:"confirmed",past:"completed",cancelled:"cancelled"},{data:v,isLoading:p,error:w,refetch:g}=we({queryKey:["user-bookings",c,i],queryFn:async()=>{if(!i)throw new Error("Not authenticated");return(await J.get("http://localhost:3000/api/user/bookings",{headers:{Authorization:`Bearer ${i}`},params:{status:y[c]}})).data},select:I=>{const S=(I.bookings||[]).map(C=>({...C,time_until_appointment:c==="upcoming"?hE(C.appointment_date,C.appointment_time):void 0,service_name:(C.service_id,"Haircut"),can_cancel:c==="upcoming"?Pg(C.appointment_date,C.appointment_time):!1,can_reschedule:c==="upcoming"?Pg(C.appointment_date,C.appointment_time):!1}));return c==="upcoming"?S.sort((C,B)=>{const P=new Date(`${C.appointment_date}T${C.appointment_time}`),A=new Date(`${B.appointment_date}T${B.appointment_time}`);return P.getTime()-A.getTime()}):S.sort((C,B)=>{const P=new Date(`${C.appointment_date}T${C.appointment_time}`);return new Date(`${B.appointment_date}T${B.appointment_time}`).getTime()-P.getTime()}),{bookings:S,total:I.total||0}},enabled:!!i,staleTime:6e4,refetchOnWindowFocus:!1}),{data:x}=we({queryKey:["user-bookings-all",i],queryFn:async()=>{if(!i)throw new Error("Not authenticated");const[I,S,C]=await Promise.all([J.get("http://localhost:3000/api/user/bookings",{headers:{Authorization:`Bearer ${i}`},params:{status:"confirmed"}}),J.get("http://localhost:3000/api/user/bookings",{headers:{Authorization:`Bearer ${i}`},params:{status:"completed"}}),J.get("http://localhost:3000/api/user/bookings",{headers:{Authorization:`Bearer ${i}`},params:{status:"cancelled"}})]),B=[...I.data.bookings||[],...S.data.bookings||[],...C.data.bookings||[]];return{bookings:B,total:B.length}},enabled:!!i,staleTime:6e4,refetchOnWindowFocus:!1}),b=ve({mutationFn:async({ticketNumber:I,reason:S})=>(await J.patch(`http://localhost:3000/api/bookings/${I}/cancel`,{cancellation_reason:S||"No reason provided",cancelled_by:"customer"},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["user-bookings"]}),t.invalidateQueries({queryKey:["user-bookings-all"]}),h({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1}),d("cancelled")},onError:I=>{var S,C,B;h(P=>({...P,isSubmitting:!1})),alert(((B=(C=(S=I.response)==null?void 0:S.data)==null?void 0:C.error)==null?void 0:B.message)||"Failed to cancel booking. Please try again.")}}),j=I=>{d(I)},N=I=>{if(!I.can_cancel){alert("Cannot cancel within 2 hours of appointment. Please call us.");return}h({isOpen:!0,bookingId:I.booking_id,ticketNumber:I.ticket_number,reason:"",isSubmitting:!1})},_=()=>{m.isSubmitting||h({isOpen:!1,bookingId:null,ticketNumber:null,reason:"",isSubmitting:!1})},T=()=>{m.ticketNumber&&(h(I=>({...I,isSubmitting:!0})),b.mutate({ticketNumber:m.ticketNumber,reason:m.reason}))},E=I=>{if(!I.can_reschedule){alert("Cannot reschedule within 2 hours of appointment. Please call us.");return}o({service_id:I.service_id,service_name:I.service_name||null,selected_date:null,selected_time:null,customer_name:I.customer_name,customer_email:I.customer_email,customer_phone:I.customer_phone,booking_for_name:I.booking_for_name,special_request:I.special_request,step_completed:0}),e("/book/date")},z=I=>{l(),o({service_id:I.service_id,service_name:I.service_name||null,customer_name:(a==null?void 0:a.name)||I.customer_name,customer_email:(a==null?void 0:a.email)||I.customer_email,customer_phone:(a==null?void 0:a.phone)||I.customer_phone,booking_for_name:I.booking_for_name,special_request:I.special_request,inspiration_photos:null,step_completed:0}),e("/book/date")},k=ft.useMemo(()=>{const S=[...(x==null?void 0:x.bookings)||[]].sort((C,B)=>{const P=new Date(`${C.appointment_date}T${C.appointment_time}`);return new Date(`${B.appointment_date}T${B.appointment_time}`).getTime()-P.getTime()});return{total_bookings:(x==null?void 0:x.total)||0,last_booking_date:S.length>0?S[0].appointment_date:null,most_booked_service:"Haircut",member_since:a!=null&&a.created_at?new Date(a.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}):"Unknown"}},[x,a]),G=(v==null?void 0:v.bookings)||[],M=((F=a==null?void 0:a.name)==null?void 0:F.split(" ")[0])||"User";return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",M,"!"]}),s.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Member since ",k.member_since]})]}),s.jsxs(Q,{to:"/book/service",className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[s.jsx(Je,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})]}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mt,{className:"w-8 h-8 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Total Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:k.total_bookings})]})]})}),s.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(lt,{className:"w-8 h-8 text-green-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-900",children:"Last Visit"}),s.jsx("p",{className:"text-sm font-semibold text-green-600",children:k.last_booking_date?new Date(k.last_booking_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"No visits yet"})]})]})}),s.jsx("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(j5,{className:"w-8 h-8 text-purple-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Favorite Service"}),s.jsx("p",{className:"text-sm font-semibold text-purple-600",children:k.most_booked_service})]})]})})]})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>j("upcoming"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${c==="upcoming"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Upcoming Bookings"}),s.jsx("button",{onClick:()=>j("past"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${c==="past"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Past Bookings"}),s.jsx("button",{onClick:()=>j("cancelled"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${c==="cancelled"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Cancelled"})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&s.jsx("div",{className:"space-y-4",children:[1,2,3].map(I=>s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},I))}),w&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx(Ue,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),s.jsx("p",{className:"text-red-900 font-medium mb-2",children:"Failed to load bookings"}),s.jsx("p",{className:"text-red-700 text-sm mb-4",children:((q=($=(D=w.response)==null?void 0:D.data)==null?void 0:$.error)==null?void 0:q.message)||w.message}),s.jsx("button",{onClick:()=>g(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]}),!p&&!w&&s.jsxs(s.Fragment,{children:[G.length===0&&s.jsxs("div",{className:"text-center py-12",children:[c==="upcoming"&&s.jsxs(s.Fragment,{children:[s.jsx(Je,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No upcoming appointments"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any bookings scheduled yet."}),s.jsx(Q,{to:"/book/service",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Book Now"})]}),c==="past"&&s.jsxs(s.Fragment,{children:[s.jsx(Mt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No past bookings yet"}),s.jsx("p",{className:"text-gray-600",children:"Your completed appointments will appear here."})]}),c==="cancelled"&&s.jsxs(s.Fragment,{children:[s.jsx(Pt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No cancelled bookings"}),s.jsx("p",{className:"text-gray-600",children:"You haven't cancelled any appointments."})]})]}),G.length>0&&s.jsx("div",{className:"space-y-4",children:G.map(I=>s.jsx("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all duration-200 ${u===I.ticket_number?"border-blue-500 ring-4 ring-blue-100":"border-gray-200"}`,children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Q,{to:`/booking/${I.ticket_number}`,className:"text-sm font-mono font-semibold text-blue-600 hover:text-blue-700 hover:underline",children:I.ticket_number}),c==="upcoming"&&s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded-full",children:"Upcoming"}),c==="past"&&s.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded-full",children:"Completed"}),c==="cancelled"&&s.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded-full",children:"Cancelled"})]}),s.jsx("h3",{className:`text-2xl font-bold mb-1 ${c==="cancelled"?"text-gray-400 line-through":"text-gray-900"}`,children:fE(I.appointment_date,I.appointment_time)}),I.service_name&&s.jsx("p",{className:"text-gray-600",children:I.service_name}),c==="upcoming"&&I.time_until_appointment&&s.jsxs("div",{className:"flex items-center mt-2 text-sm text-blue-600 font-medium",children:[s.jsx(lt,{className:"w-4 h-4 mr-1"}),I.time_until_appointment]}),c==="cancelled"&&I.cancelled_at&&s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Cancelled on ",new Date(I.cancelled_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]})}),I.special_request&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Special Request: "}),pE(I.special_request,100),I.special_request.length>100&&s.jsx(Q,{to:`/booking/${I.ticket_number}`,className:"text-blue-600 hover:text-blue-700 ml-1",children:"Read more"})]})}),c==="cancelled"&&I.cancellation_reason&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("p",{className:"text-sm text-red-700",children:[s.jsx("span",{className:"font-medium",children:"Reason: "}),I.cancellation_reason]})}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs(Q,{to:`/booking/${I.ticket_number}`,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:["View Details",s.jsx(ds,{className:"w-4 h-4 ml-1"})]}),c==="upcoming"&&I.can_reschedule&&s.jsx("button",{onClick:()=>E(I),className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 font-medium rounded-lg hover:bg-blue-200 transition-colors",children:"Reschedule"}),c==="upcoming"&&I.can_cancel&&s.jsx("button",{onClick:()=>N(I),className:"inline-flex items-center px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"Cancel"}),(c==="past"||c==="cancelled")&&s.jsx("button",{onClick:()=>z(I),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg",children:"Book Again"})]})]})},I.booking_id))})]})]}),m.isOpen&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:_}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:s.jsxs("div",{className:"sm:flex sm:items-start",children:[s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:s.jsx(Ue,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-1",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:"Cancel This Booking?"}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Are you sure you want to cancel this booking? This action cannot be undone."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"cancellation-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for cancellation (optional)"}),s.jsx("textarea",{id:"cancellation-reason",rows:3,maxLength:200,value:m.reason,onChange:I=>h(S=>({...S,reason:I.target.value})),placeholder:"e.g., schedule changed, found another barber, emergency",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:m.isSubmitting}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500 text-right",children:[m.reason.length,"/200"]})]})]})]})]})}),s.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3",children:[s.jsx("button",{type:"button",onClick:T,disabled:m.isSubmitting,className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:m.isSubmitting?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cancelling..."]}):"Yes, Cancel Booking"}),s.jsx("button",{type:"button",onClick:_,disabled:m.isSubmitting,className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"No, Keep Booking"})]})]})]})})]})})};function Ag(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gE(...e){return t=>{let r=!1;const n=e.map(a=>{const i=Ag(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Ag(e[a],null)}}}}var yE=Symbol.for("react.lazy"),Cc=dy[" use ".trim().toString()];function bE(e){return typeof e=="object"&&e!==null&&"then"in e}function Gw(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===yE&&"_payload"in e&&bE(e._payload)}function Qw(e){const t=wE(e),r=f.forwardRef((n,a)=>{let{children:i,...o}=n;Gw(i)&&typeof Cc=="function"&&(i=Cc(i._payload));const l=f.Children.toArray(i),c=l.find(NE);if(c){const d=c.props.children,u=l.map(m=>m===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...o,ref:a,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var vE=Qw("Slot");function wE(e){const t=f.forwardRef((r,n)=>{let{children:a,...i}=r;if(Gw(a)&&typeof Cc=="function"&&(a=Cc(a._payload)),f.isValidElement(a)){const o=kE(a),l=_E(i,a.props);return a.type!==f.Fragment&&(l.ref=n?gE(n,o):o),f.cloneElement(a,l)}return f.Children.count(a)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jE=Symbol("radix.slottable");function NE(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jE}function _E(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function kE(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Yw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Yw(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zw(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Yw(e))&&(n&&(n+=" "),n+=t);return n}const Mg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Rg=Zw,V0=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Rg(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const h=Mg(u)||Mg(m);return a[d][h]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...y}=u;return Object.entries(y).every(v=>{let[p,w]=v;return Array.isArray(w)?w.includes({...i,...l}[p]):{...i,...l}[p]===w})?[...d,m,h]:d},[]);return Rg(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},U0="-",CE=e=>{const t=TE(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(U0);return l[0]===""&&l.length!==1&&l.shift(),Xw(l,t)||SE(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Xw=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Xw(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(U0);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Dg=/^\[(.+)\]$/,SE=e=>{if(Dg.test(e)){const t=Dg.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},TE=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return PE(Object.entries(e.classGroups),r).forEach(([i,o])=>{Wm(o,n,i,t)}),n},Wm=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Lg(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(EE(a)){Wm(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Wm(o,Lg(t,i),r,n)})})},Lg=(e,t)=>{let r=e;return t.split(U0).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},EE=e=>e.isThemeGetter,PE=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,AE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Jw="!",ME=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,m;for(let w=0;w<l.length;w++){let g=l[w];if(d===0){if(g===a&&(n||l.slice(w,w+i)===t)){c.push(l.slice(u,w)),u=w+i;continue}if(g==="/"){m=w;continue}}g==="["?d++:g==="]"&&d--}const h=c.length===0?l:l.substring(u),y=h.startsWith(Jw),v=y?h.substring(1):h,p=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},RE=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},DE=e=>({cache:AE(e.cacheSize),parseClassName:ME(e),...CE(e)}),LE=/\s+/,FE=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(LE);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}=r(d);let v=!!y,p=n(v?h.substring(0,y):h);if(!p){if(!v){l=d+(l.length>0?" "+l:l);continue}if(p=n(h),!p){l=d+(l.length>0?" "+l:l);continue}v=!1}const w=RE(u).join(":"),g=m?w+Jw:w,x=g+p;if(i.includes(x))continue;i.push(x);const b=a(p,v);for(let j=0;j<b.length;++j){const N=b[j];i.push(g+N)}l=d+(l.length>0?" "+l:l)}return l};function OE(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=e2(t))&&(n&&(n+=" "),n+=r);return n}const e2=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=e2(e[n]))&&(r&&(r+=" "),r+=t);return r};function BE(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,m)=>m(u),e());return r=DE(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=FE(c,r);return a(c,u),u}return function(){return i(OE.apply(null,arguments))}}const Oe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},t2=/^\[(?:([a-z-]+):)?(.+)\]$/i,$E=/^\d+\/\d+$/,IE=new Set(["px","full","screen"]),zE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,WE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Us=e=>Na(e)||IE.has(e)||$E.test(e),fr=e=>li(e,"length",JE),Na=e=>!!e&&!Number.isNaN(Number(e)),eu=e=>li(e,"number",Na),ji=e=>!!e&&Number.isInteger(Number(e)),HE=e=>e.endsWith("%")&&Na(e.slice(0,-1)),ye=e=>t2.test(e),pr=e=>zE.test(e),KE=new Set(["length","size","percentage"]),GE=e=>li(e,KE,s2),QE=e=>li(e,"position",s2),YE=new Set(["image","url"]),ZE=e=>li(e,YE,t7),XE=e=>li(e,"",e7),Ni=()=>!0,li=(e,t,r)=>{const n=t2.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},JE=e=>VE.test(e)&&!UE.test(e),s2=()=>!1,e7=e=>WE.test(e),t7=e=>qE.test(e),s7=()=>{const e=Oe("colors"),t=Oe("spacing"),r=Oe("blur"),n=Oe("brightness"),a=Oe("borderColor"),i=Oe("borderRadius"),o=Oe("borderSpacing"),l=Oe("borderWidth"),c=Oe("contrast"),d=Oe("grayscale"),u=Oe("hueRotate"),m=Oe("invert"),h=Oe("gap"),y=Oe("gradientColorStops"),v=Oe("gradientColorStopPositions"),p=Oe("inset"),w=Oe("margin"),g=Oe("opacity"),x=Oe("padding"),b=Oe("saturate"),j=Oe("scale"),N=Oe("sepia"),_=Oe("skew"),T=Oe("space"),E=Oe("translate"),z=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",ye,t],M=()=>[ye,t],F=()=>["",Us,fr],D=()=>["auto",Na,ye],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],S=()=>["start","end","center","between","around","evenly","stretch"],C=()=>["","0",ye],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>[Na,ye];return{cacheSize:500,separator:":",theme:{colors:[Ni],spacing:[Us,fr],blur:["none","",pr,ye],brightness:P(),borderColor:[e],borderRadius:["none","","full",pr,ye],borderSpacing:M(),borderWidth:F(),contrast:P(),grayscale:C(),hueRotate:P(),invert:C(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[HE,fr],inset:G(),margin:G(),opacity:P(),padding:M(),saturate:P(),scale:P(),sepia:C(),skew:P(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[pr]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),ye]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ji,ye]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:C()}],shrink:[{shrink:C()}],order:[{order:["first","last","none",ji,ye]}],"grid-cols":[{"grid-cols":[Ni]}],"col-start-end":[{col:["auto",{span:["full",ji,ye]},ye]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Ni]}],"row-start-end":[{row:["auto",{span:[ji,ye]},ye]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...S()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...S(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...S(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,t]}],"min-w":[{"min-w":[ye,t,"min","max","fit"]}],"max-w":[{"max-w":[ye,t,"none","full","min","max","fit","prose",{screen:[pr]},pr]}],h:[{h:[ye,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,t,"auto","min","max","fit"]}],"font-size":[{text:["base",pr,fr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",eu]}],"font-family":[{font:[Ni]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Na,eu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Us,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Us,fr]}],"underline-offset":[{"underline-offset":["auto",Us,ye]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),QE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:q()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Us,ye]}],"outline-w":[{outline:[Us,fr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Us,fr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",pr,XE]}],"shadow-color":[{shadow:[Ni]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pr,ye]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[ji,ye]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Us,fr,eu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},r7=BE(s7);function Vs(...e){return r7(Zw(e))}const n7=V0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-neutral-950 dark:focus-visible:ring-neutral-300",{variants:{variant:{default:"bg-neutral-900 text-neutral-50 hover:bg-neutral-900/90 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/90",destructive:"bg-red-500 text-neutral-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/90",outline:"border border-neutral-200 bg-white hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:bg-neutral-950 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",secondary:"bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",ghost:"hover:bg-neutral-100 hover:text-neutral-900 dark:hover:bg-neutral-800 dark:hover:text-neutral-50",link:"text-neutral-900 underline-offset-4 hover:underline dark:text-neutral-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Di=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?vE:"button";return s.jsx(o,{className:Vs(n7({variant:t,size:r,className:e})),ref:i,...a})});Di.displayName="Button";const qm=f.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Vs("flex h-10 w-full rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:ring-offset-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",e),ref:n,...r}));qm.displayName="Input";var a7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],i7=a7.reduce((e,t)=>{const r=Qw(`Primitive.${t}`),n=f.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),o7="Label",r2=f.forwardRef((e,t)=>s.jsx(i7.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));r2.displayName=o7;var n2=r2;const l7=V0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Dl=f.forwardRef(({className:e,...t},r)=>s.jsx(n2,{ref:r,className:Vs(l7(),e),...t}));Dl.displayName=n2.displayName;const Hm=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Vs("rounded-lg border border-neutral-200 bg-white text-neutral-950 shadow-sm dark:border-neutral-800 dark:bg-neutral-950 dark:text-neutral-50",e),...t}));Hm.displayName="Card";const Km=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Vs("flex flex-col space-y-1.5 p-6",e),...t}));Km.displayName="CardHeader";const Gm=f.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Vs("text-2xl font-semibold leading-none tracking-tight",e),...t}));Gm.displayName="CardTitle";const Qm=f.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Vs("text-sm text-neutral-500 dark:text-neutral-400",e),...t}));Qm.displayName="CardDescription";const Ym=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Vs("p-6 pt-0",e),...t}));Ym.displayName="CardContent";const c7=f.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Vs("flex items-center p-6 pt-0",e),...t}));c7.displayName="CardFooter";const d7=V0("inline-flex items-center rounded-full border border-neutral-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 dark:border-neutral-800 dark:focus:ring-neutral-300",{variants:{variant:{default:"border-transparent bg-neutral-900 text-neutral-50 hover:bg-neutral-900/80 dark:bg-neutral-50 dark:text-neutral-900 dark:hover:bg-neutral-50/80",secondary:"border-transparent bg-neutral-100 text-neutral-900 hover:bg-neutral-100/80 dark:bg-neutral-800 dark:text-neutral-50 dark:hover:bg-neutral-800/80",destructive:"border-transparent bg-red-500 text-neutral-50 hover:bg-red-500/80 dark:bg-red-900 dark:text-neutral-50 dark:hover:bg-red-900/80",outline:"text-neutral-950 dark:text-neutral-50"}},defaultVariants:{variant:"default"}});function u7({className:e,variant:t,...r}){return s.jsx("div",{className:Vs(d7({variant:t}),e),...r})}const m7=()=>"http://localhost:3000",h7=()=>{const e=ee(p=>p.authentication_state.current_user),t=ee(p=>p.authentication_state.auth_token),r=ee(p=>p.update_current_user),[n,a]=f.useState(!1),[i,o]=f.useState({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||""}),[l,c]=f.useState(!1),[d,u]=f.useState(null),m=ve({mutationFn:async p=>{if(!t)throw new Error("Not authenticated");return(await J.patch(`${m7()}/api/auth/me`,p,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}})).data},onSuccess:p=>{p.user&&(r({name:p.user.name,phone:p.user.phone}),u({type:"success",text:"Profile updated successfully!"}),setTimeout(()=>u(null),3e3)),a(!1),c(!1)},onError:p=>{var g,x;const w=((x=(g=p.response)==null?void 0:g.data)==null?void 0:x.message)||"Failed to update profile";u({type:"error",text:w}),setTimeout(()=>u(null),5e3),c(!1)}}),h=()=>{n&&(o({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||""}),u(null)),a(!n)},y=async()=>{if(!i.name.trim()){u({type:"error",text:"Name is required"});return}c(!0),u(null),await m.mutateAsync({name:i.name.trim(),phone:i.phone.trim()})},v=(p,w)=>{o(g=>({...g,[p]:w}))};return e?s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),s.jsxs(Hm,{children:[s.jsx(Km,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Gm,{className:"text-2xl",children:"Account Information"}),s.jsx(Qm,{children:"Your personal details and account status"})]}),s.jsx("div",{className:"flex gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsxs(Di,{onClick:y,size:"sm",disabled:l,children:[s.jsx(h1,{className:"h-4 w-4 mr-2"}),l?"Saving...":"Save"]}),s.jsxs(Di,{onClick:h,variant:"outline",size:"sm",disabled:l,children:[s.jsx(Nt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):s.jsxs(Di,{onClick:h,variant:"outline",size:"sm",children:[s.jsx(u1,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})}),s.jsxs(Ym,{className:"space-y-6",children:[d&&s.jsx("div",{className:`p-4 rounded-lg ${d.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:s.jsx("p",{className:"text-sm font-medium",children:d.text})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[e.is_verified?s.jsx(Mt,{className:"h-5 w-5 text-green-600"}):s.jsx(Pt,{className:"h-5 w-5 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Account Status"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.is_verified?"Your account is verified":"Account not verified"})]})]}),s.jsx(u7,{variant:e.is_verified?"default":"secondary",children:e.is_verified?"Verified":"Unverified"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Dl,{htmlFor:"name",className:"flex items-center gap-2",children:[s.jsx(qn,{className:"h-4 w-4"}),"Full Name"]}),n?s.jsx(qm,{id:"name",type:"text",value:i.name,onChange:p=>v("name",p.target.value),placeholder:"Enter your full name"}):s.jsx("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200",children:s.jsx("p",{className:"text-gray-900",children:e.name})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Dl,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(Wt,{className:"h-4 w-4"}),"Email Address"]}),s.jsxs("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200",children:[s.jsx("p",{className:"text-gray-900",children:e.email}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Dl,{htmlFor:"phone",className:"flex items-center gap-2",children:[s.jsx(fs,{className:"h-4 w-4"}),"Phone Number"]}),n?s.jsx(qm,{id:"phone",type:"tel",value:i.phone,onChange:p=>v("phone",p.target.value),placeholder:"Enter your phone number"}):s.jsx("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200",children:s.jsx("p",{className:"text-gray-900",children:e.phone})})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Member since:"})," ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})})]})]})]}),s.jsxs(Hm,{className:"mt-6",children:[s.jsxs(Km,{children:[s.jsx(Gm,{children:"Password & Security"}),s.jsx(Qm,{children:"Manage your password and security settings"})]}),s.jsx(Ym,{children:s.jsx(Di,{variant:"outline",children:"Change Password"})})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-600",children:"Loading user profile..."})})},f7=()=>{const[e,t]=f.useState(""),[r,n]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(!1),[h,y]=f.useState(!1),[v,p]=f.useState(0),[w,g]=f.useState(null),[x,b]=f.useState({}),j=ee(B=>B.authentication_state.authentication_status.is_loading),N=ee(B=>B.authentication_state.error_message),_=ee(B=>B.login_admin),T=ee(B=>B.clear_auth_error),E=Le(),[z,k]=f.useState(null);f.useEffect(()=>{if(!w){k(null);return}const B=setInterval(()=>{const P=new Date().getTime(),Y=new Date(w).getTime()-P;if(Y<=0)k(null),g(null),p(0),clearInterval(B);else{const V=Math.floor(Y/6e4),O=Math.floor(Y%6e4/1e3);k(`${V}:${O.toString().padStart(2,"0")}`)}},1e3);return()=>clearInterval(B)},[w]);const G=B=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B),M=()=>{const B={};return e?G(e)||(B.email="Please enter a valid email address"):B.email="Email is required",r||(B.password="Password is required"),u&&!a?B.two_factor_code="Two-factor code is required":u&&a.length!==6&&(B.two_factor_code="Code must be 6 digits"),b(B),Object.keys(B).length===0},F=B=>{t(B.target.value),x.email&&b(P=>({...P,email:void 0})),T()},D=B=>{n(B.target.value),x.password&&b(P=>({...P,password:void 0})),T()},$=B=>{const P=B.target.value.replace(/\D/g,"").slice(0,6);i(P),x.two_factor_code&&b(A=>({...A,two_factor_code:void 0})),T()},q=()=>{d(!c)},I=B=>{l(B.target.checked)},S=async B=>{if(B.preventDefault(),w){const P=new Date().getTime(),A=new Date(w).getTime();if(P<A){b({general:"Too many failed attempts. Please try again later."});return}else g(null),p(0)}if(M()){T(),b({}),y(!0);try{(await _(e,r,u?a:void 0)).requires_2fa?(m(!0),b({general:"Please enter your two-factor authentication code"}),y(!1)):E("/admin")}catch(P){y(!1);const A=P.message||"Login failed";if(A.includes("Invalid email or password")){if(b({general:"Invalid email or password"}),p(Y=>Y+1),v+1>=5){const Y=new Date(Date.now()+9e5).toISOString();g(Y),b({general:"Too many failed attempts. Try again in 15 minutes."})}}else if(A.includes("Account locked")||A.includes("Too many")){b({general:"Too many failed attempts. Try again in 15 minutes."});const Y=new Date(Date.now()+15*60*1e3).toISOString();g(Y)}else A.includes("Invalid two-factor code")?b({two_factor_code:"Invalid two-factor code"}):A.includes("Account disabled")?b({general:"Account disabled. Contact administrator."}):A.includes("Two-factor authentication required")?(m(!0),b({general:"Please enter your two-factor authentication code"})):b({general:A})}}},C=h||j||!!w;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-blue-600 rounded-full p-4",children:s.jsx(zp,{className:"h-12 w-12 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"BarberSlot Admin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Administrative Portal"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Admin Login"}),x.general&&s.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ue,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-red-700",children:x.general}),z&&s.jsxs("p",{className:"text-xs text-red-600 mt-1 font-mono",children:["Time remaining: ",z]})]})]})}),N&&!x.general&&s.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-md",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Ue,{className:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-700",children:N})]})}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Admin Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Wt,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,disabled:C,value:e,onChange:F,placeholder:"admin@example.com",className:`block w-full pl-10 pr-3 py-3 border ${x.email?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`})]}),x.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Qc,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"current-password",required:!0,disabled:C,value:r,onChange:D,placeholder:"",className:`block w-full pl-10 pr-10 py-3 border ${x.password?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`}),s.jsx("button",{type:"button",onClick:q,disabled:C,className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-gray-600 disabled:opacity-50",children:c?s.jsx(Wa,{className:"h-5 w-5 text-gray-400"}):s.jsx(Yr,{className:"h-5 w-5 text-gray-400"})})]}),x.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password})]}),u&&s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"two_factor_code",className:"block text-sm font-medium text-gray-700 mb-2",children:["Two-Factor Code ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zp,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"two_factor_code",name:"two_factor_code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,required:u,disabled:C,value:a,onChange:$,placeholder:"000000",className:`block w-full pl-10 pr-3 py-3 border ${x.two_factor_code?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-mono text-center text-lg tracking-widest`})]}),x.two_factor_code&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.two_factor_code}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the 6-digit code from your authenticator app"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",disabled:C,checked:o,onChange:I,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:opacity-50"}),s.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-700",children:"Remember me for 30 days"})]}),s.jsx("button",{type:"submit",disabled:C,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:h||j?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):"Log In"}),s.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",disabled:C,className:"text-sm text-blue-600 hover:text-blue-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Forgot Password?"})}),s.jsx("div",{className:"text-center",children:s.jsx(Q,{to:"/login",className:"text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Customer Login "})})]})]})]}),s.jsxs("div",{className:"mt-8 text-center",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Powered by BarberSlot"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"v1.0.0"})]})]})})})},p7=e=>{const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),a=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return a<1?"just now":a<60?`${a} min ago`:i<24?`${i} hour${i>1?"s":""} ago`:`${o} day${o>1?"s":""} ago`},tu=e=>{const[t,r]=e.split(":"),n=parseInt(t,10),a=n>=12?"PM":"AM";return`${n%12||12}:${r} ${a}`},x7=()=>{var v;const e=ee(p=>p.authentication_state.auth_token),t=ee(p=>p.authentication_state.current_user),[r,n]=f.useState("today"),[a,i]=f.useState(!1),{data:o,isLoading:l,error:c}=we({queryKey:["admin-dashboard-stats",r],queryFn:async()=>(await J.get("http://localhost:3000/api/admin/dashboard/stats",{params:{date_range:r},headers:{Authorization:`Bearer ${e}`}})).data,staleTime:6e4,retry:1,enabled:!!e,select:p=>({today_bookings:Number(p.today_bookings||0),today_completed:Number(p.today_completed||0),today_upcoming:Number(p.today_upcoming||0),week_bookings:Number(p.week_bookings||0),week_revenue:p.week_revenue!==null?Number(p.week_revenue):null,week_cancelled:Number(p.week_cancelled||0),cancellation_rate:Number(p.cancellation_rate||0),month_no_shows:Number(p.month_no_shows||0)})}),{data:d,isLoading:u}=we({queryKey:["admin-upcoming-appointments"],queryFn:async()=>(await J.get("http://localhost:3000/api/admin/bookings",{params:{status:"upcoming",sort_by:"appointment_date",sort_order:"asc",limit:10},headers:{Authorization:`Bearer ${e}`}})).data.bookings.map(w=>({booking_id:w.booking_id,ticket_number:w.ticket_number,appointment_time:w.appointment_time,customer_name:w.customer_name,customer_phone:w.customer_phone,service_id:w.service_id,service_name:w.service_name||"Haircut"})),staleTime:6e4,refetchInterval:6e4,enabled:!!e}),{data:m}=we({queryKey:["admin-recent-bookings-activity"],queryFn:async()=>(await J.get("http://localhost:3000/api/admin/bookings",{params:{limit:20,sort_by:"created_at",sort_order:"desc"},headers:{Authorization:`Bearer ${e}`}})).data.bookings,staleTime:6e4,enabled:!!e}),h=f.useMemo(()=>{if(!m)return[];const p=[];return m.forEach(w=>{p.push({id:`new-${w.booking_id}`,type:"new_booking",description:`New booking: ${w.customer_name} at ${tu(w.appointment_time)}`,timestamp:w.created_at,icon:s.jsx(Je,{className:"w-4 h-4 text-blue-600"})}),w.status==="cancelled"&&w.cancelled_at&&p.push({id:`cancel-${w.booking_id}`,type:"cancelled",description:`Cancelled: ${w.customer_name} at ${tu(w.appointment_time)}`,timestamp:w.cancelled_at,icon:s.jsx(Pt,{className:"w-4 h-4 text-red-600"})}),w.status==="completed"&&w.completed_at&&p.push({id:`complete-${w.booking_id}`,type:"completed",description:`Completed: ${w.customer_name}`,timestamp:w.completed_at,icon:s.jsx(Je,{className:"w-4 h-4 text-green-600"})})}),p.sort((w,g)=>new Date(g.timestamp).getTime()-new Date(w.timestamp).getTime()).slice(0,15)},[m]),y=async()=>{if(e){i(!0);try{const p=new Date().toISOString().split("T")[0],w=await J.get("http://localhost:3000/api/admin/bookings/export",{params:{start_date:p,end_date:p},headers:{Authorization:`Bearer ${e}`},responseType:"blob"}),g=new Blob([w.data],{type:"text/csv"}),x=window.URL.createObjectURL(g),b=document.createElement("a");b.href=x,b.download=`bookings_${p}.csv`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(x)}catch(p){console.error("Export failed:",p),alert("Failed to export bookings. Please try again.")}finally{i(!1)}}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",(t==null?void 0:t.name)||"Admin"]})]}),s.jsx("div",{className:"mt-4 sm:mt-0",children:s.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"block w-full sm:w-auto px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all","aria-label":"Select date range",children:[s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"this_week",children:"This Week"}),s.jsx("option",{value:"this_month",children:"This Month"})]})})]})})}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(Q,{to:"/admin/bookings?status=upcoming",className:"group",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-200",children:l?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Je,{className:"w-6 h-6 text-blue-600"})}),o&&o.today_bookings>0&&s.jsxs("div",{className:"flex items-center text-green-600 text-sm font-medium",children:[s.jsx(w5,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Active"})]})]}),s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:(o==null?void 0:o.today_bookings)||0}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Today's Bookings"}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.jsxs("span",{children:[(o==null?void 0:o.today_completed)||0," completed"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[(o==null?void 0:o.today_upcoming)||0," upcoming"]})]})]})})}),(o==null?void 0:o.week_revenue)!==null&&s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:l?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(c5,{className:"w-6 h-6 text-green-600"})})}),s.jsxs("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:["$",((v=o==null?void 0:o.week_revenue)==null?void 0:v.toFixed(2))||"0.00"]}),s.jsx("p",{className:"text-sm text-gray-600",children:r==="this_week"?"This Week":"This Month"})]})}),s.jsx(Q,{to:"/admin/bookings?status=cancelled",className:"group",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-200",children:l?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-lg mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(Pt,{className:"w-6 h-6 text-red-600"})}),o&&o.cancellation_rate>0&&s.jsxs("div",{className:"flex items-center text-red-600 text-sm font-medium",children:[s.jsx(v5,{className:"w-4 h-4 mr-1"}),s.jsxs("span",{children:[o.cancellation_rate.toFixed(1),"%"]})]})]}),s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:(o==null?void 0:o.week_cancelled)||0}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Cancellations"}),s.jsx("p",{className:"text-xs text-gray-500",children:"This week"})]})})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:l?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx(mc,{className:"w-6 h-6 text-yellow-600"})})}),s.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:(o==null?void 0:o.month_no_shows)||0}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No-Shows"}),s.jsx("p",{className:"text-xs text-gray-500",children:"This month"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(Q,{to:"/admin/bookings/new",className:"flex flex-col items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border-2 border-blue-200 hover:border-blue-400 transition-all duration-200 group",children:[s.jsx(m1,{className:"w-8 h-8 text-blue-600 mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-medium text-blue-900 text-center",children:"Add Manual Booking"})]}),s.jsxs(Q,{to:"/admin/blocking",className:"flex flex-col items-center justify-center p-4 bg-red-50 hover:bg-red-100 rounded-lg border-2 border-red-200 hover:border-red-400 transition-all duration-200 group",children:[s.jsx(Qc,{className:"w-8 h-8 text-red-600 mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-medium text-red-900 text-center",children:"Block Time Slot"})]}),s.jsxs(Q,{to:"/admin/gallery/upload",className:"flex flex-col items-center justify-center p-4 bg-purple-50 hover:bg-purple-100 rounded-lg border-2 border-purple-200 hover:border-purple-400 transition-all duration-200 group",children:[s.jsx(f1,{className:"w-8 h-8 text-purple-600 mb-2 group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-sm font-medium text-purple-900 text-center",children:"Upload to Gallery"})]}),s.jsxs("button",{onClick:y,disabled:a,className:"flex flex-col items-center justify-center p-4 bg-green-50 hover:bg-green-100 rounded-lg border-2 border-green-200 hover:border-green-400 transition-all duration-200 group disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(xo,{className:`w-8 h-8 text-green-600 mb-2 group-hover:scale-110 transition-transform ${a?"animate-bounce":""}`}),s.jsx("span",{className:"text-sm font-medium text-green-900 text-center",children:a?"Exporting...":"Export Today's Bookings"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Next Appointments"}),s.jsx(Q,{to:"/admin/bookings/calendar",className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"View All "})]}),u?s.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>s.jsxs("div",{className:"animate-pulse flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},p))}):d&&d.length>0?s.jsx("div",{className:"space-y-3",children:d.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(lt,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-gray-900",children:tu(p.appointment_time)}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:p.customer_name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:p.service_name}),s.jsx("span",{className:"text-xs text-gray-400",children:""}),s.jsx("span",{className:"text-xs text-gray-500 font-mono",children:p.ticket_number})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("a",{href:`tel:${p.customer_phone}`,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"Call customer",children:s.jsx(fs,{className:"w-4 h-4"})}),s.jsx(Q,{to:`/admin/bookings/${p.ticket_number}`,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors","aria-label":"View booking details",children:s.jsx(Yr,{className:"w-4 h-4"})})]})]},p.booking_id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"No upcoming appointments"}),s.jsx(Q,{to:"/admin/bookings/new",className:"inline-block mt-3 text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Add a booking "})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),h.length>0?s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h.map(p=>s.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:p.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-gray-800",children:p.description}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:p7(p.timestamp)})]})]},p.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(lt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"No recent activity"})]})]})]}),c&&s.jsx("div",{className:"mt-8 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(mc,{className:"w-5 h-5 text-red-600 mr-2"}),s.jsx("p",{className:"text-red-800 text-sm",children:"Failed to load dashboard data. Please try refreshing the page."})]})})]})]})})},su=["10:00","10:40","11:20","12:00","12:40","13:20","14:00","14:20"],Fg=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Og={pending:"bg-yellow-100 border-yellow-500 text-yellow-900",confirmed:"bg-blue-100 border-blue-500 text-blue-900",completed:"bg-gray-100 border-gray-500 text-gray-900",cancelled:"bg-red-100 border-red-500 text-red-900"},sd=()=>"http://localhost:3000",Ws=e=>e.toISOString().split("T")[0],a2=e=>new Date(e+"T00:00:00"),g7=e=>a2(e).getDay(),y7=e=>e>=1&&e<=3?2:3,Bg=(e,t)=>{const r=new Date(e,t,1),n=new Date(e,t+1,0),a=[],i=r.getDay();for(let l=i-1;l>=0;l--){const c=new Date(e,t,-l);a.push(c)}for(let l=1;l<=n.getDate();l++)a.push(new Date(e,t,l));const o=7-a.length%7;if(o<7)for(let l=1;l<=o;l++)a.push(new Date(e,t+1,l));return a},ru=e=>{const t=e.getDay(),r=[],n=new Date(e);n.setDate(e.getDate()-t);for(let a=0;a<7;a++){const i=new Date(n);i.setDate(n.getDate()+a),r.push(i)}return r},b7=e=>{const t={};return e.forEach(r=>{const n=r.appointment_date,a=r.appointment_time;t[n]||(t[n]={}),t[n][a]||(t[n][a]=[]),t[n][a].push(r)}),t},v7=async(e,t)=>{try{const r=new URLSearchParams;t.status&&t.status!=="all"&&r.append("status",t.status),t.service_id&&r.append("service_id",t.service_id),r.append("appointment_date_from",t.start_date),r.append("appointment_date_to",t.end_date),t.search&&r.append("query",t.search);const n=await J.get(`${sd()}/api/admin/bookings?${r.toString()}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.bookings||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(r){return console.error("Failed to fetch bookings:",r),[]}},w7=async e=>(await J.get(`${sd()}/api/services?is_active=true`,{headers:{Authorization:`Bearer ${e}`}})).data.services||[],j7=async(e,t,r)=>{try{const n=await J.get(`${sd()}/api/admin/capacity-overrides?override_date_from=${t}&override_date_to=${r}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.overrides||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(n){return console.error("Failed to fetch capacity overrides:",n),[]}},N7=async(e,t,r)=>{try{const n=await J.get(`${sd()}/api/admin/blocked-slots?block_date_from=${t}&block_date_to=${r}`,{headers:{Authorization:`Bearer ${e}`}}),a=n.data.blocked_slots||n.data.data||n.data;return Array.isArray(a)?a:[]}catch(n){return console.error("Failed to fetch blocked slots:",n),[]}},_7=()=>{const[e,t]=dt(),r=ee(S=>S.authentication_state.auth_token),[n,a]=f.useState(e.get("view_type")||"month"),[i,o]=f.useState(()=>{const S=e.get("date");return S?a2(S):new Date}),[l,c]=f.useState(e.get("status_filter")||"all"),[d,u]=f.useState(null),[m,h]=f.useState(""),[y,v]=f.useState("");ft.useEffect(()=>{const S=setTimeout(()=>{v(m)},300);return()=>clearTimeout(S)},[m]);const p=f.useMemo(()=>{let S,C;if(n==="month"){const B=i.getFullYear(),P=i.getMonth(),A=Bg(B,P);S=A[0],C=A[A.length-1]}else if(n==="week"){const B=ru(i);S=B[0],C=B[6]}else S=new Date(i),C=new Date(i);return{start:Ws(S),end:Ws(C)}},[i,n]),{data:w=[],isLoading:g,refetch:x}=we({queryKey:["admin-bookings",p.start,p.end,l,d,y],queryFn:()=>v7(r,{status:l,service_id:d||void 0,start_date:p.start,end_date:p.end,search:y||void 0}),enabled:!!r,staleTime:3e4}),{data:b=[]}=we({queryKey:["services"],queryFn:()=>w7(r),enabled:!!r,staleTime:3e5}),{data:j=[]}=we({queryKey:["capacity-overrides",p.start,p.end],queryFn:()=>j7(r,p.start,p.end),enabled:!!r,staleTime:6e4}),{data:N=[]}=we({queryKey:["blocked-slots",p.start,p.end],queryFn:()=>N7(r,p.start,p.end),enabled:!!r,staleTime:6e4}),_=f.useMemo(()=>b7(w),[w]),T=f.useCallback(()=>{const S=new Date(i);n==="month"?S.setMonth(S.getMonth()-1):n==="week"?S.setDate(S.getDate()-7):S.setDate(S.getDate()-1),o(S)},[i,n]),E=f.useCallback(()=>{const S=new Date(i);n==="month"?S.setMonth(S.getMonth()+1):n==="week"?S.setDate(S.getDate()+7):S.setDate(S.getDate()+1),o(S)},[i,n]),z=f.useCallback(()=>{o(new Date)},[]),k=f.useCallback(S=>{a(S),t(C=>{const B=new URLSearchParams(C);return B.set("view_type",S),B})},[t]),G=f.useCallback((S,C)=>{var V,O;if(N.find(R=>R.block_date===S&&(R.time_slot===null||R.time_slot===C)))return{capacity:0,booked:0,isBlocked:!0};const P=j.find(R=>R.override_date===S&&R.time_slot===C&&R.is_active),A=P?P.capacity:y7(g7(S)),Y=((O=(V=_[S])==null?void 0:V[C])==null?void 0:O.length)||0;return{capacity:A,booked:Y,isBlocked:!1}},[N,j,_]),M=f.useCallback(()=>{const S=["Ticket Number","Date","Time","Customer Name","Phone","Status","Service"],C=w.map(V=>[V.ticket_number,V.appointment_date,V.appointment_time,V.customer_name,V.customer_phone,V.status,V.service_id||"N/A"]),B=[S,...C].map(V=>V.join(",")).join(`
`),P=new Blob([B],{type:"text/csv"}),A=URL.createObjectURL(P),Y=document.createElement("a");Y.href=A,Y.download=`bookings_${p.start}_${p.end}.csv`,Y.click(),URL.revokeObjectURL(A)},[w,p]),F=f.useCallback(()=>{window.print()},[]),D=()=>{let S="";if(n==="month")S=i.toLocaleDateString("en-US",{month:"long",year:"numeric"});else if(n==="week"){const C=ru(i),B=C[0].toLocaleDateString("en-US",{month:"short",day:"numeric"}),P=C[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});S=`${B} - ${P}`}else S=i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});return s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:T,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Previous",children:s.jsx(cc,{className:"w-5 h-5 text-gray-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:S}),s.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Next",children:s.jsx(ds,{className:"w-5 h-5 text-gray-600"})}),s.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Today"})]})})},$=()=>{const S=i.getFullYear(),C=i.getMonth(),B=Bg(S,C);return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:Fg.map(P=>s.jsx("div",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700 bg-gray-50",children:P},P))}),s.jsx("div",{className:"grid grid-cols-7",children:B.map((P,A)=>{const Y=Ws(P),V=P.getMonth()===C,O=Ws(new Date)===Y,R=_[Y],Z=R?Object.values(R).flat().length:0,K=new Set(su);R&&Object.keys(R).forEach(ne=>K.add(ne));let X=0,U=0;return Array.from(K).forEach(ne=>{const{capacity:_e,booked:he}=G(Y,ne);X+=_e,U+=he}),s.jsxs("div",{className:`min-h-[120px] border-b border-r border-gray-200 p-2 hover:bg-gray-50 transition-colors cursor-pointer ${V?"":"bg-gray-50 text-gray-400"} ${O?"bg-blue-50":""}`,onClick:()=>{o(P),a("day")},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-sm font-semibold ${O?"text-blue-600":"text-gray-900"}`,children:P.getDate()}),Z>0&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium",children:Z})]}),V&&s.jsx("div",{className:"text-xs text-gray-600 mb-2",children:s.jsxs("span",{className:U>=X?"text-red-600 font-semibold":"",children:[U,"/",X," booked"]})}),R&&V&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.values(R).flat().slice(0,3).map((ne,_e)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${ne.status==="confirmed"||ne.status==="pending"?"bg-blue-500":ne.status==="completed"?"bg-gray-500":"bg-red-500"}`},_e)),Z>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",Z-3]})]})]},A)})})]})},q=()=>{const S=ru(i),C=new Set(su);S.forEach(P=>{const A=Ws(P);_[A]&&Object.keys(_[A]).forEach(Y=>{C.add(Y)})});const B=Array.from(C).sort();return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[s.jsx("div",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700 bg-gray-50",children:"Time"}),S.map((P,A)=>{const Y=Ws(new Date)===Ws(P);return s.jsxs("div",{className:`px-2 py-3 text-center text-sm font-semibold border-l border-gray-200 ${Y?"bg-blue-50 text-blue-700":"bg-gray-50 text-gray-700"}`,children:[s.jsx("div",{children:Fg[P.getDay()]}),s.jsx("div",{className:"text-lg font-bold",children:P.getDate()})]},A)})]}),s.jsx("div",{className:"grid grid-cols-8",children:B.map(P=>s.jsxs(ft.Fragment,{children:[s.jsx("div",{className:"px-4 py-4 text-sm font-medium text-gray-600 bg-gray-50 border-b border-gray-200",children:P}),S.map((A,Y)=>{var X;const V=Ws(A),O=((X=_[V])==null?void 0:X[P])||[],{capacity:R,booked:Z,isBlocked:K}=G(V,P);return s.jsx("div",{className:"p-2 min-h-[100px] border-b border-l border-gray-200 hover:bg-gray-50 transition-colors",children:K?s.jsx("div",{className:"text-xs text-gray-500 italic bg-gray-100 p-2 rounded",children:"Blocked"}):O.length>0?s.jsx("div",{className:"space-y-2",children:O.map(U=>s.jsxs(Q,{to:`/admin/bookings/${U.ticket_number}`,className:`block p-2 rounded-lg border-l-4 text-xs ${Og[U.status]} hover:shadow-md transition-shadow`,children:[s.jsx("div",{className:"font-semibold truncate",children:U.customer_name}),s.jsx("div",{className:"text-xs truncate",children:U.ticket_number})]},U.booking_id))}):s.jsxs("div",{className:"text-xs text-gray-400 italic",children:[Z,"/",R," booked"]})},Y)})]},P))})]})},I=()=>{const S=Ws(i),C=new Set(su);_[S]&&Object.keys(_[S]).forEach(P=>{C.add(P)});const B=Array.from(C).sort();return s.jsx("div",{className:"space-y-4",children:B.map(P=>{var R;const A=((R=_[S])==null?void 0:R[P])||[],{capacity:Y,booked:V,isBlocked:O}=G(S,P);return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-600"}),s.jsx("span",{className:"text-xl font-bold text-gray-900",children:P})]}),s.jsx("div",{className:"flex items-center space-x-4",children:O?s.jsx("span",{className:"text-sm text-red-600 font-semibold",children:"Blocked"}):s.jsxs("span",{className:`text-sm font-semibold ${V>=Y?"text-red-600":"text-gray-600"}`,children:[V,"/",Y," booked"]})})]}),s.jsx("div",{className:"p-6",children:O?s.jsx("p",{className:"text-gray-500 italic",children:"This time slot is blocked"}):A.length>0?s.jsx("div",{className:"space-y-4",children:A.map(Z=>s.jsx("div",{className:`border-l-4 rounded-lg p-4 ${Og[Z.status]}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(qn,{className:"w-5 h-5"}),s.jsx("span",{className:"font-bold text-lg",children:Z.customer_name})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fs,{className:"w-4 h-4"}),s.jsx("a",{href:`tel:${Z.customer_phone}`,className:"hover:underline",children:Z.customer_phone})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Yc,{className:"w-4 h-4"}),s.jsx("span",{children:Z.ticket_number})]}),Z.special_request&&s.jsxs("div",{className:"mt-2 text-xs text-gray-700 bg-white bg-opacity-50 p-2 rounded",children:[s.jsx("strong",{children:"Note:"})," ",Z.special_request.substring(0,100),Z.special_request.length>100&&"..."]})]})]}),s.jsx("div",{className:"flex flex-col space-y-2",children:s.jsx(Q,{to:`/admin/bookings/${Z.ticket_number}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium text-center",children:"View"})})]})},Z.booking_id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-3",children:s.jsx(Je,{className:"w-8 h-8 text-green-600"})}),s.jsx("p",{className:"text-green-600 font-semibold",children:"Available"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[Y-V," spots remaining"]})]})})]},P)})})};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Bookings Calendar"}),s.jsx("p",{className:"text-gray-600",children:"Manage and view all appointments"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>k("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(l1,{className:"w-4 h-4"}),s.jsx("span",{children:"Month"})]}),s.jsxs("button",{onClick:()=>k("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(Je,{className:"w-4 h-4"}),s.jsx("span",{children:"Week"})]}),s.jsxs("button",{onClick:()=>k("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${n==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(lt,{className:"w-4 h-4"}),s.jsx("span",{children:"Day"})]}),s.jsxs(Q,{to:"/admin/bookings",className:"px-4 py-2 rounded-lg font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[s.jsx(d1,{className:"w-4 h-4"}),s.jsx("span",{children:"List"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Q,{to:"/admin/bookings/new",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 font-medium",children:[s.jsx(m1,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Booking"})]}),s.jsx("button",{onClick:()=>x(),className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors","aria-label":"Refresh",children:s.jsx(dc,{className:"w-5 h-5"})}),s.jsx("button",{onClick:F,className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors","aria-label":"Print",children:s.jsx(Wi,{className:"w-5 h-5"})}),s.jsx("button",{onClick:M,className:"p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors","aria-label":"Export",children:s.jsx(xo,{className:"w-5 h-5"})})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(uc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:m,onChange:S=>h(S.target.value),placeholder:"Search by name, phone, or ticket...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(h5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"upcoming",children:"Upcoming"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsx("div",{children:s.jsxs("select",{value:d||"",onChange:S=>u(S.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white",children:[s.jsx("option",{value:"",children:"All Services"}),b.map(S=>s.jsx("option",{value:S.service_id,children:S.name},S.service_id))]})})]})}),D(),g?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading bookings..."})]}):s.jsxs(s.Fragment,{children:[n==="month"&&$(),n==="week"&&q(),n==="day"&&I()]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Legend"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Upcoming"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-gray-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Completed"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-red-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Cancelled"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-yellow-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Pending"})]})]})]})]})})})},hl=()=>"http://localhost:3000",k7=(e,t)=>{try{return new Date(`${e}T${t}`).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return`${e} ${t}`}},C7=e=>{switch(e){case"pending":case"confirmed":return"bg-blue-100 text-blue-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-orange-100 text-orange-800"}},S7=()=>{const e=new Date,t=e.getDay(),r=new Date(e);r.setDate(e.getDate()-t);const n=new Date(e);return n.setDate(e.getDate()+(6-t)),{start:r.toISOString().split("T")[0],end:n.toISOString().split("T")[0]}},$g=(e,t)=>{const r=["Ticket Number","Date","Time","Customer Name","Email","Phone","Service","Status","Special Request","Admin Notes","Created At"],n=new Map(t.map(u=>[u.service_id,u.name])),a=e.map(u=>[u.ticket_number,u.appointment_date,u.appointment_time,u.customer_name,u.customer_email,u.customer_phone,u.service_id&&n.get(u.service_id)||"N/A",u.status,u.special_request||"",u.admin_notes||"",u.created_at]),i=[r.join(","),...a.map(u=>u.map(m=>`"${String(m).replace(/"/g,'""')}"`).join(","))].join(`
`),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),c=URL.createObjectURL(o),d=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);l.setAttribute("href",c),l.setAttribute("download",`bookings_${d}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},T7=()=>{const e=Le(),[t,r]=dt(),n=zs(),a=ee(R=>R.authentication_state.auth_token),i=S7(),o={status:t.get("status")||"all",service_id:t.get("service_id")||"all",start_date:t.get("start_date")||i.start,end_date:t.get("end_date")||i.end,search:t.get("search")||"",page:Number(t.get("page"))||1,limit:Number(t.get("limit"))||20,sort_by:t.get("sort")||"appointment_date",sort_order:t.get("sort_order")||"desc"},[l,c]=f.useState(o),[d,u]=f.useState(l.search),[m,h]=f.useState(new Set),[y,v]=f.useState(!1),[p,w]=f.useState(null);f.useEffect(()=>{const R=setTimeout(()=>{c(Z=>({...Z,search:d,page:1}))},300);return()=>clearTimeout(R)},[d]),f.useEffect(()=>{const R=new URLSearchParams;l.status!=="all"&&R.set("status",l.status),l.service_id!=="all"&&R.set("service_id",l.service_id),l.start_date&&R.set("start_date",l.start_date),l.end_date&&R.set("end_date",l.end_date),l.search&&R.set("search",l.search),l.page>1&&R.set("page",l.page.toString()),l.limit!==20&&R.set("limit",l.limit.toString()),l.sort_by!=="appointment_date"&&R.set("sort",l.sort_by),l.sort_order!=="desc"&&R.set("sort_order",l.sort_order),r(R)},[l,r]);const{data:g,isLoading:x,error:b,refetch:j}=we({queryKey:["admin-bookings",l],queryFn:async()=>{const R=new URLSearchParams;l.status!=="all"&&R.set("status",l.status),l.service_id!=="all"&&R.set("service_id",l.service_id),l.start_date&&R.set("appointment_date_from",l.start_date),l.end_date&&R.set("appointment_date_to",l.end_date),l.search&&R.set("query",l.search),R.set("limit",l.limit.toString()),R.set("offset",((l.page-1)*l.limit).toString()),R.set("sort_by",l.sort_by),R.set("sort_order",l.sort_order);const Z=await J.get(`${hl()}/api/admin/bookings?${R.toString()}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),K=Z.data.bookings||[],X=Z.data.total||K.length;return{bookings:K,total:X,page:l.page,limit:l.limit,has_more:X>l.page*l.limit}},staleTime:30*1e3,enabled:!!a}),{data:N=[]}=we({queryKey:["services"],queryFn:async()=>(await J.get(`${hl()}/api/services?is_active=true&sort_by=display_order&sort_order=asc`)).data.services||[],staleTime:5*60*1e3}),_=ve({mutationFn:async R=>{await J.post(`${hl()}/api/bookings/${R}/cancel`,{cancellation_reason:"Cancelled by admin",cancelled_by:"admin"},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),T=ve({mutationFn:async({bookingId:R,status:Z})=>{await J.patch(`${hl()}/api/bookings/${R}`,{status:Z},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),E=f.useCallback(R=>{c(Z=>({...Z,sort_by:R,sort_order:Z.sort_by===R&&Z.sort_order==="asc"?"desc":"asc",page:1}))},[]),z=f.useCallback(R=>{c(Z=>({...Z,page:R})),window.scrollTo({top:0,behavior:"smooth"})},[]),k=f.useCallback(R=>{c(Z=>({...Z,limit:R,page:1}))},[]),G=f.useCallback(R=>{h(Z=>{const K=new Set(Z);return K.has(R)?K.delete(R):K.add(R),v(K.size>0),K})},[]),M=f.useCallback(()=>{if(!(g!=null&&g.bookings))return;const R=g.bookings.map(Z=>Z.booking_id);m.size===R.length?(h(new Set),v(!1)):(h(new Set(R)),v(!0))},[g,m.size]),F=f.useCallback(()=>{h(new Set),v(!1)},[]),D=f.useCallback(()=>{if(!(g!=null&&g.bookings))return;const R=g.bookings.filter(Z=>m.has(Z.booking_id));$g(R,N)},[g,m,N]),$=f.useCallback(()=>{g!=null&&g.bookings&&$g(g.bookings,N)},[g,N]),q=f.useCallback(async()=>{if(!confirm(`Cancel ${m.size} selected booking(s)?`))return;const R=Array.from(m).map(Z=>_.mutateAsync(Z).catch(()=>null));await Promise.all(R),F()},[m,_,F]),I=f.useCallback(async(R,Z)=>{confirm(`Cancel booking ${Z}?`)&&await _.mutateAsync(R)},[_]),S=f.useCallback(async(R,Z)=>{await T.mutateAsync({bookingId:R,status:Z}),w(null)},[T]),C=f.useMemo(()=>g?Math.ceil(g.total/l.limit):0,[g,l.limit]),B=f.useMemo(()=>{const R=[];if(C<=5)for(let K=1;K<=C;K++)R.push(K);else{R.push(1),l.page>3&&R.push("...");const K=Math.max(2,l.page-1),X=Math.min(C-1,l.page+1);for(let U=K;U<=X;U++)R.push(U);l.page<C-2&&R.push("..."),R.push(C)}return R},[l.page,C]),P=R=>l.sort_by!==R?null:s.jsx("span",{className:"ml-1",children:l.sort_order==="asc"?"":""}),A=()=>s.jsxs("div",{className:"text-center py-16 px-4",children:[s.jsx("div",{className:"mb-4",children:s.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or date range"}),s.jsx(Q,{to:"/admin/bookings/new",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New Booking"})]}),Y=()=>s.jsx("div",{className:"animate-pulse",children:[...Array(5)].map((R,Z)=>s.jsx("div",{className:"border-b border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})]})},Z))}),V=(g==null?void 0:g.bookings)||[],O=(g==null?void 0:g.total)||0;return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"All Bookings"}),s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>e("/admin/bookings/calendar"),className:"px-4 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-white hover:shadow-sm transition-all",children:"Calendar View"}),s.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md shadow-sm",children:"List View"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>e("/admin/bookings/new"),className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all duration-200",children:"Add Booking"}),s.jsx("button",{onClick:$,className:"px-4 py-3 bg-gray-100 text-gray-900 font-medium rounded-lg border border-gray-300 hover:bg-gray-200 transition-all duration-200",children:"Export to CSV"}),s.jsx("button",{onClick:()=>j(),className:"p-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Refresh",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),s.jsx("input",{type:"date",value:l.start_date,onChange:R=>c(Z=>({...Z,start_date:R.target.value,page:1})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),s.jsx("input",{type:"date",value:l.end_date,onChange:R=>c(Z=>({...Z,end_date:R.target.value,page:1})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:l.status,onChange:R=>c(Z=>({...Z,status:R.target.value,page:1})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"confirmed",children:"Upcoming"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"pending",children:"Pending"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),s.jsxs("select",{value:l.service_id,onChange:R=>c(Z=>({...Z,service_id:R.target.value,page:1})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All"}),N.map(R=>s.jsx("option",{value:R.service_id,children:R.name},R.service_id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),s.jsx("input",{type:"text",placeholder:"Name, phone, or ticket",value:d,onChange:R=>u(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})}),y&&s.jsx("div",{className:"bg-blue-50 border-b border-blue-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[m.size," selected"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:D,className:"px-4 py-2 text-sm font-medium text-blue-700 bg-white rounded-md border border-blue-300 hover:bg-blue-50 transition-colors",children:"Export Selected"}),s.jsx("button",{onClick:q,className:"px-4 py-2 text-sm font-medium text-red-700 bg-white rounded-md border border-red-300 hover:bg-red-50 transition-colors",children:"Cancel Selected"}),s.jsx("button",{onClick:F,className:"text-sm text-blue-700 hover:text-blue-900 font-medium",children:"Deselect All"})]})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[b&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[s.jsx("p",{className:"text-red-700",children:"Failed to load bookings. Please try again."}),s.jsx("button",{onClick:()=>j(),className:"mt-2 text-sm text-red-800 underline hover:no-underline",children:"Retry"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:x?Y():V.length===0?A():s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:s.jsx("input",{type:"checkbox",checked:V.length>0&&m.size===V.length,onChange:M,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>E("ticket_number"),children:["Ticket Number ",P("ticket_number")]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>E("appointment_date"),children:["Date & Time ",P("appointment_date")]}),s.jsxs("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>E("customer_name"),children:["Customer ",P("customer_name")]}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(R=>{const Z=N.find(K=>K.service_id===R.service_id);return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:m.has(R.booking_id),onChange:()=>G(R.booking_id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Q,{to:`/admin/bookings/${R.ticket_number}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:R.ticket_number})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k7(R.appointment_date,R.appointment_time)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:R.customer_name}),s.jsx("div",{className:"text-sm text-gray-500",children:R.customer_email})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("a",{href:`tel:${R.customer_phone}`,className:"text-blue-600 hover:text-blue-800",children:R.customer_phone})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(Z==null?void 0:Z.name)||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${C7(R.status)}`,children:R.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(Q,{to:`/admin/bookings/${R.ticket_number}`,className:"text-gray-600 hover:text-gray-900",title:"View",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),R.status==="confirmed"&&s.jsx("button",{onClick:()=>I(R.booking_id,R.ticket_number),className:"text-red-600 hover:text-red-900",title:"Cancel",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>w(p===R.booking_id?null:R.booking_id),className:"text-gray-600 hover:text-gray-900",title:"More",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),p===R.booking_id&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[s.jsx("button",{onClick:()=>S(R.booking_id,"completed"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mark Completed"}),s.jsx("button",{onClick:()=>S(R.booking_id,"cancelled"),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Mark No-show"}),s.jsx(Q,{to:`/admin/bookings/${R.ticket_number}`,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Add Note"})]})]})]})})]},R.booking_id)})})]})}),s.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:(l.page-1)*l.limit+1})," to"," ",s.jsx("span",{className:"font-medium",children:Math.min(l.page*l.limit,O)})," of"," ",s.jsx("span",{className:"font-medium",children:O})," bookings"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("select",{value:l.limit,onChange:R=>k(Number(R.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"20",children:"20"}),s.jsx("option",{value:"50",children:"50"}),s.jsx("option",{value:"100",children:"100"})]}),s.jsxs("nav",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>z(l.page-1),disabled:l.page===1,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),B.map((R,Z)=>typeof R=="number"?s.jsx("button",{onClick:()=>z(R),className:`px-3 py-1 text-sm font-medium rounded-md ${l.page===R?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:R},Z):s.jsx("span",{className:"px-2 text-gray-500",children:R},Z)),s.jsx("button",{onClick:()=>z(l.page+1),disabled:!(g!=null&&g.has_more),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})})]})})]})]})})},E7=()=>{const{ticket_number:e}=Yh(),t=zs(),[r,n]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(!1),[u,m]=f.useState(""),[h,y]=f.useState(null),v=$=>{try{return new Date($).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return $}},p=$=>{try{const[q,I]=$.split(":"),S=parseInt(q,10),C=S>=12?"PM":"AM";return`${S%12||12}:${I} ${C}`}catch{return $}},w=$=>{try{return new Date($).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return $}},g=($,q)=>{try{const[I,S]=$.split(":"),B=parseInt(I,10)*60+parseInt(S,10)+q,P=Math.floor(B/60),A=B%60;return p(`${P.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`)}catch{return""}},x=async()=>{if(e)try{await navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)}catch($){console.error("Failed to copy:",$)}},b=$=>{switch($){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=$=>$.charAt(0).toUpperCase()+$.slice(1),{data:N,isLoading:_,error:T}=we({queryKey:["admin-booking",e],queryFn:async()=>{if(!e||!/^TKT-\d{4,8}-\d{3}$/.test(e))throw new Error("Invalid ticket number format");const $=localStorage.getItem("admin_token");return(await J.get(`http://localhost:3000/api/bookings/${e}`,{headers:{Authorization:`Bearer ${$}`}})).data},enabled:!!e,staleTime:3e4,retry:1,select:$=>{const q=$.booking||$;return{booking:q,service_details:q.service_id?{service_id:q.service_id,name:$.service_name||"Haircut",price:$.service_price?Number($.service_price):null,duration:$.service_duration||q.slot_duration||40}:null}}}),E=N==null?void 0:N.booking,z=N==null?void 0:N.service_details;f.useMemo(()=>{E!=null&&E.admin_notes&&l(E.admin_notes)},[E]);const k=ve({mutationFn:async()=>{const $=localStorage.getItem("admin_token");return(await J.patch(`http://localhost:3000/api/bookings/${e}/complete`,{},{headers:{Authorization:`Bearer ${$}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]})}}),G=ve({mutationFn:async $=>{const q=localStorage.getItem("admin_token");return(await J.patch(`http://localhost:3000/api/bookings/${e}/cancel`,{cancellation_reason:$,cancelled_by:"admin"},{headers:{Authorization:`Bearer ${q}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]}),d(!1),m("")}}),M=ve({mutationFn:async $=>{const q=localStorage.getItem("admin_token");return(await J.patch(`http://localhost:3000/api/bookings/${e}`,{admin_notes:$},{headers:{Authorization:`Bearer ${q}`}})).data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-booking",e]}),i(!1)}}),F=()=>{M.mutate(o)},D=()=>{u.trim()&&G.mutate(u)};return _?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading booking details..."})]})}):T||!E?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx(Ue,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Not Found"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["We couldn't find a booking with ticket number: ",s.jsx("strong",{children:e})]}),s.jsx("div",{className:"space-y-3",children:s.jsx(Q,{to:"/admin/bookings",className:"block w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Back to Bookings"})})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(Q,{to:"/admin/bookings",className:"inline-flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[s.jsx(vm,{className:"w-4 h-4 mr-2"}),"Back to Bookings"]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Details"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl font-mono text-blue-600",children:e}),s.jsx("button",{onClick:x,className:"p-2 text-gray-500 hover:text-blue-600 transition-colors rounded-lg hover:bg-blue-50",title:"Copy ticket number",children:r?s.jsx(Mt,{className:"w-5 h-5 text-green-600"}):s.jsx(i0,{className:"w-5 h-5"})})]})]}),s.jsx("div",{children:s.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${b(E.status)}`,children:j(E.status)})})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Appointment Details"}),s.jsxs("div",{className:"space-y-3",children:[z&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Je,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Service"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:z.name}),z.price&&s.jsxs("p",{className:"text-sm text-gray-600",children:["$",z.price]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Je,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:v(E.appointment_date)})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Time"}),s.jsxs("p",{className:"text-base font-medium text-gray-900",children:[p(E.appointment_time)," - ",g(E.appointment_time,E.slot_duration)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[E.slot_duration," minutes"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(qn,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:E.customer_name}),E.booking_for_name&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Booking for: ",E.booking_for_name]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Wt,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("a",{href:`mailto:${E.customer_email}`,className:"text-base font-medium text-blue-600 hover:text-blue-700",children:E.customer_email})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(fs,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("a",{href:`tel:${E.customer_phone}`,className:"text-base font-medium text-blue-600 hover:text-blue-700",children:E.customer_phone})]})]})]})]}),(E.special_request||E.inspiration_photos&&E.inspiration_photos.length>0)&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Special Requests"}),s.jsxs("div",{className:"space-y-4",children:[E.special_request&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Customer Notes"}),s.jsx("p",{className:"text-base text-gray-900 bg-gray-50 p-3 rounded-lg",children:E.special_request})]}),E.inspiration_photos&&E.inspiration_photos.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Inspiration Photos"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:E.inspiration_photos.map(($,q)=>s.jsx("button",{onClick:()=>y(q),className:"relative aspect-square rounded-lg overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all",children:s.jsx("img",{src:$,alt:`Inspiration ${q+1}`,className:"w-full h-full object-cover"})},q))})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Admin Notes"}),a?s.jsx("button",{onClick:F,disabled:M.isPending,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:s.jsx(h1,{className:"w-5 h-5"})}):s.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700",children:s.jsx(b5,{className:"w-5 h-5"})})]}),a?s.jsx("textarea",{value:o,onChange:$=>l($.target.value),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Add internal notes about this booking..."}):s.jsx("div",{className:"text-base text-gray-700 whitespace-pre-wrap bg-gray-50 p-3 rounded-lg min-h-[100px]",children:E.admin_notes||"No notes added yet"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Admin Actions"}),s.jsxs("div",{className:"space-y-3",children:[E.status==="confirmed"&&s.jsx("button",{onClick:()=>k.mutate(),disabled:k.isPending,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50",children:k.isPending?"Marking...":"Mark as Completed"}),(E.status==="confirmed"||E.status==="pending")&&s.jsx("button",{onClick:()=>d(!0),className:"w-full bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Cancel Booking"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Timeline"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[E.created_at&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Created"}),s.jsx("p",{className:"text-gray-900",children:w(E.created_at)})]}),E.confirmed_at&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Confirmed"}),s.jsx("p",{className:"text-gray-900",children:w(E.confirmed_at)})]}),E.completed_at&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Completed"}),s.jsx("p",{className:"text-gray-900",children:w(E.completed_at)})]}),E.cancelled_at&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Cancelled"}),s.jsx("p",{className:"text-gray-900",children:w(E.cancelled_at)}),E.cancellation_reason&&s.jsxs("p",{className:"text-gray-600 mt-1",children:["Reason: ",E.cancellation_reason]})]})]})]})]})]})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Cancel Booking"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),s.jsx("textarea",{value:u,onChange:$=>m($.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter reason for cancellation..."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:D,disabled:G.isPending||!u.trim(),className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:G.isPending?"Cancelling...":"Confirm"})]})]})}),h!==null&&E.inspiration_photos&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:()=>y(null),children:s.jsx("div",{className:"max-w-4xl max-h-full",children:s.jsx("img",{src:E.inspiration_photos[h],alt:`Inspiration ${h+1}`,className:"max-w-full max-h-[90vh] object-contain rounded-lg",onClick:$=>$.stopPropagation()})})})]})},nu="admin_booking_form_draft",P7=1,A7=()=>{var K,X;const e=Le(),[t]=dt(),r=ee(U=>U.authentication_state.auth_token),[n,a]=f.useState({service_id:"",appointment_date:"",appointment_time:"",customer_name:"",customer_email:"",customer_phone:"",booking_for_name:"",special_request:"",admin_notes:"",is_booking_for_other:!1,skip_confirmation:!1,mark_as_prepaid:!1,override_capacity:!1}),[i,o]=f.useState({}),[l,c]=f.useState(!1),[d,u]=f.useState(null),[m,h]=f.useState(!1),[y,v]=f.useState(!1),p="http://localhost:3000",w=t.get("customer_id"),g=t.get("date"),x=t.get("time"),{data:b,isLoading:j}=we({queryKey:["services","active"],queryFn:async()=>(await J.get(`${p}/api/services?is_active=true&sort_by=display_order&sort_order=asc`)).data.services||[],staleTime:5*60*1e3,retry:1}),N=b||[],{data:_,isLoading:T}=we({queryKey:["customer",w],queryFn:async()=>!w||!r?null:(await J.get(`${p}/api/admin/customers/${w}`,{headers:{Authorization:`Bearer ${r}`}})).data,enabled:!!w&&!!r,staleTime:5*60*1e3,retry:1}),{data:E,isLoading:z}=we({queryKey:["availability",n.appointment_date,n.service_id],queryFn:async()=>{if(!n.appointment_date)return null;const U=n.service_id?`?service_id=${n.service_id}`:"";return(await J.get(`${p}/api/availability/${n.appointment_date}${U}`)).data},enabled:!!n.appointment_date,staleTime:30*1e3,retry:1}),k=f.useMemo(()=>(E==null?void 0:E.slots)||[],[E==null?void 0:E.slots]),G=ve({mutationFn:async U=>(await J.post(`${p}/api/bookings`,U,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}})).data,onSuccess:U=>{u(U),c(!0),D(),a({service_id:"",appointment_date:"",appointment_time:"",customer_name:"",customer_email:"",customer_phone:"",booking_for_name:"",special_request:"",admin_notes:"",is_booking_for_other:!1,skip_confirmation:!1,mark_as_prepaid:!1,override_capacity:!1}),o({})},onError:U=>{var _e,he,mr;const ne=((mr=(he=(_e=U.response)==null?void 0:_e.data)==null?void 0:he.error)==null?void 0:mr.message)||U.message||"Failed to create booking";alert(`Error: ${ne}`)}}),M=f.useCallback(()=>{const U={formData:n,timestamp:Date.now()};sessionStorage.setItem(nu,JSON.stringify(U))},[n]),F=f.useCallback(()=>{const U=sessionStorage.getItem(nu);if(U)try{const ne=JSON.parse(U),_e=Date.now()-ne.timestamp,he=P7*60*60*1e3;_e<he?a(ne.formData):D()}catch{D()}},[]),D=()=>{sessionStorage.removeItem(nu)};f.useEffect(()=>{F()},[F]),f.useEffect(()=>{_&&a(U=>({...U,customer_name:_.name,customer_email:_.email,customer_phone:_.phone}))},[_]),f.useEffect(()=>{g&&!n.appointment_date&&a(U=>({...U,appointment_date:g}))},[g,n.appointment_date]),f.useEffect(()=>{if(x&&n.appointment_date&&k.length>0){const U=k.find(ne=>ne.time===x);U&&U.is_available&&a(ne=>({...ne,appointment_time:x}))}},[x,n.appointment_date,k]),f.useEffect(()=>{if(Object.values(n).some(ne=>ne!==""&&ne!==!1)){const ne=setTimeout(M,1e3);return()=>clearTimeout(ne)}},[n,M]),f.useEffect(()=>{if(n.appointment_time&&k.length>0){const U=k.find(ne=>ne.time===n.appointment_time);U&&U.available_slots===0?h(!0):h(!1)}else h(!1)},[n.appointment_time,k]);const $=(U,ne)=>{a(_e=>({..._e,[U]:ne})),i[U]&&o(_e=>{const he={..._e};return delete he[U],he})},q=U=>{const ne=U.target.value;a(_e=>({..._e,appointment_date:ne,appointment_time:""}))},I=U=>{const ne=U.target.value;a(_e=>({..._e,appointment_time:ne}))},S=()=>{const U={};n.customer_name.trim()?(n.customer_name.length<2||n.customer_name.length>255)&&(U.customer_name="Customer name must be between 2 and 255 characters"):U.customer_name="Customer name is required";const ne=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;n.customer_email.trim()?ne.test(n.customer_email)||(U.customer_email="Please enter a valid email address"):U.customer_email="Email is required";const _e=/^\+?[1-9]\d{1,14}$/;return n.customer_phone.trim()?_e.test(n.customer_phone.replace(/[\s()-]/g,""))||(U.customer_phone="Please enter a valid phone number"):U.customer_phone="Phone number is required",n.appointment_date||(U.appointment_date="Please select an appointment date"),n.appointment_time||(U.appointment_time="Please select a time slot"),n.special_request.length>1e3&&(U.special_request="Special request must be 1000 characters or less"),n.admin_notes.length>2e3&&(U.admin_notes="Admin notes must be 2000 characters or less"),o(U),Object.keys(U).length===0},C=async U=>{if(U.preventDefault(),!S()){alert("Please fix the validation errors before submitting");return}if(m&&!n.override_capacity){alert('This slot is at full capacity. Please check "Override capacity" to proceed.');return}if(n.override_capacity&&m){v(!0);return}await B()},B=async()=>{const U={user_id:null,appointment_date:n.appointment_date,appointment_time:n.appointment_time,slot_duration:40,customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,booking_for_name:n.is_booking_for_other&&n.booking_for_name?n.booking_for_name:null,service_id:n.service_id||null,special_request:n.special_request||null,inspiration_photos:null};await G.mutateAsync(U)},P=async()=>{v(!1),await B()},A=()=>{Object.values(n).some(ne=>ne!==""&&ne!==!1)&&!window.confirm("You have unsaved changes. Are you sure you want to cancel?")||(D(),e("/admin/bookings/calendar"))},Y=()=>{c(!1),u(null),window.scrollTo({top:0,behavior:"smooth"})},V=()=>{d&&e(`/admin/bookings/${d.ticket_number}`)},O=()=>{d&&e(`/admin/bookings/calendar?highlight=${d.ticket_number}`)},R=()=>!n.appointment_date||!n.appointment_time?!1:new Date(`${n.appointment_date}T${n.appointment_time}`)<new Date,Z=U=>{const ne=k.find(_e=>_e.time===U);return ne?{count:ne.total_capacity-ne.available_slots,capacity:ne.total_capacity,available:ne.available_slots}:null};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("nav",{className:"flex items-center text-sm text-gray-600 mb-4",children:[s.jsx(Q,{to:"/admin",className:"hover:text-blue-600 transition-colors",children:"Admin"}),s.jsx("span",{className:"mx-2",children:"/"}),s.jsx(Q,{to:"/admin/bookings",className:"hover:text-blue-600 transition-colors",children:"Bookings"}),s.jsx("span",{className:"mx-2",children:"/"}),s.jsx("span",{className:"text-gray-900 font-medium",children:"Add Booking"})]}),s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 leading-tight",children:"Add Manual Booking"}),s.jsx("p",{className:"mt-2 text-gray-600 text-base leading-relaxed",children:"Create a booking for walk-ins, phone bookings, or record-keeping"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg shadow-gray-200/50 border border-gray-100 overflow-hidden",children:s.jsxs("form",{onSubmit:C,className:"p-6 lg:p-8 space-y-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[s.jsx("span",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"1"}),"Service Selection"]}),j?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Loading services..."})]}):s.jsxs("div",{children:[s.jsx("label",{htmlFor:"service_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),s.jsxs("select",{id:"service_id",value:n.service_id,onChange:U=>$("service_id",U.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none",children:[s.jsx("option",{value:"",children:"None / General Haircut"}),N.map(U=>s.jsxs("option",{value:U.service_id,children:[U.name," ",U.price?`- $${typeof U.price=="number"?U.price.toFixed(2):parseFloat(String(U.price)).toFixed(2)}`:""]},U.service_id))]}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:'Optional: Select a specific service or leave as "General Haircut"'})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[s.jsx("span",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"2"}),"Date & Time"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"appointment_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Date *"}),s.jsx("input",{type:"date",id:"appointment_date",value:n.appointment_date,onChange:q,className:`w-full px-4 py-3 rounded-lg border-2 ${i.appointment_date?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.appointment_date&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.appointment_date}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Past dates allowed for record-keeping"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"appointment_time",className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Slot *"}),s.jsxs("select",{id:"appointment_time",value:n.appointment_time,onChange:I,disabled:!n.appointment_date||z,className:`w-full px-4 py-3 rounded-lg border-2 ${i.appointment_time?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none disabled:bg-gray-100 disabled:cursor-not-allowed`,children:[s.jsx("option",{value:"",children:"Select time slot"}),k.map(U=>{const ne=Z(U.time);return s.jsxs("option",{value:U.time,disabled:!U.is_available&&!n.override_capacity,children:[U.time," - ",ne?`${ne.count}/${ne.capacity} booked`:"Loading...",U.available_slots===0?" (FULL)":U.available_slots===1?" (1 left)":""]},U.time)})]}),i.appointment_time&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.appointment_time}),z&&s.jsxs("p",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading availability..."]})]})]}),m&&s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("svg",{className:"h-5 w-5 text-amber-600 mr-2 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-amber-800",children:"Slot at Capacity"}),s.jsx("p",{className:"mt-1 text-sm text-amber-700",children:'This time slot is at full capacity. Check "Override capacity" below to proceed.'}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.override_capacity,onChange:U=>$("override_capacity",U.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-amber-900",children:"Override capacity limit"})]}),n.override_capacity&&s.jsx("p",{className:"mt-2 text-sm text-amber-600 bg-amber-100 px-3 py-2 rounded-md",children:" This will exceed the slot capacity. Confirm before submitting."})]})]})]})}),R()&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"Past Booking"}),s.jsx("p",{className:"mt-1 text-sm text-blue-700",children:'This booking is in the past. Status will be set to "Completed" upon creation.'})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[s.jsx("span",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"3"}),"Customer Information"]}),T&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600 bg-gray-50 rounded-lg p-3",children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customer information..."]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),s.jsx("input",{type:"text",id:"customer_name",value:n.customer_name,onChange:U=>$("customer_name",U.target.value),placeholder:"John Smith",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_name?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.customer_name})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s.jsx("input",{type:"email",id:"customer_email",value:n.customer_email,onChange:U=>$("customer_email",U.target.value),placeholder:"john@example.com",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.customer_email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),s.jsx("input",{type:"tel",id:"customer_phone",value:n.customer_phone,onChange:U=>$("customer_phone",U.target.value),placeholder:"+1 (555) 123-4567",className:`w-full px-4 py-3 rounded-lg border-2 ${i.customer_phone?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none`}),i.customer_phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.customer_phone})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.is_booking_for_other,onChange:U=>$("is_booking_for_other",U.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Booking for someone else"})]}),n.is_booking_for_other&&s.jsxs("div",{className:"ml-6 animate-fadeIn",children:[s.jsx("label",{htmlFor:"booking_for_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Person's Name"}),s.jsx("input",{type:"text",id:"booking_for_name",value:n.booking_for_name,onChange:U=>$("booking_for_name",U.target.value),placeholder:"e.g., Child's name, family member",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 outline-none"}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"We'll still use the contact info above for confirmations"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[s.jsx("span",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-bold mr-3",children:"4"}),"Special Options"]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"special_request",className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Request"}),s.jsx("textarea",{id:"special_request",value:n.special_request,onChange:U=>$("special_request",U.target.value),placeholder:"Any special requests or preferences...",rows:3,maxLength:1e3,className:`w-full px-4 py-3 rounded-lg border-2 ${i.special_request?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none resize-none`}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Optional customer preferences"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[n.special_request.length,"/1000"]})]}),i.special_request&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.special_request})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin_notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Private)"}),s.jsx("textarea",{id:"admin_notes",value:n.admin_notes,onChange:U=>$("admin_notes",U.target.value),placeholder:"Internal notes (not visible to customer)...",rows:3,maxLength:2e3,className:`w-full px-4 py-3 rounded-lg border-2 ${i.admin_notes?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} focus:ring-4 transition-all duration-200 outline-none resize-none`}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Private admin notes"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[n.admin_notes.length,"/2000"]})]}),i.admin_notes&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.admin_notes})]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.skip_confirmation,onChange:U=>$("skip_confirmation",U.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Skip confirmation email"})]}),s.jsx("p",{className:"ml-6 text-sm text-gray-500",children:"Don't send confirmation email (useful for walk-ins already present)"}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n.mark_as_prepaid,onChange:U=>$("mark_as_prepaid",U.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Mark as pre-paid"})]}),s.jsx("p",{className:"ml-6 text-sm text-gray-500",children:"Customer has already paid for this booking"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"submit",disabled:G.isPending,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:G.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Booking..."]}):"Create Booking"}),s.jsx("button",{type:"button",onClick:A,disabled:G.isPending,className:"flex-1 sm:flex-initial px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium border border-gray-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-fadeIn",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mr-4",children:s.jsx("svg",{className:"w-6 h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Override Capacity?"})]}),s.jsxs("p",{className:"text-gray-700 mb-6",children:["This slot currently has ",((K=Z(n.appointment_time))==null?void 0:K.count)||0," bookings out of"," ",((X=Z(n.appointment_time))==null?void 0:X.capacity)||0," capacity. Creating this booking will exceed the capacity limit."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium transition-colors",children:"Cancel"}),s.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors",children:"Proceed with Override"})]})]})}),l&&d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-8 animate-fadeIn",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Booking Created Successfully!"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"The booking has been created and the customer will receive a confirmation."}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Ticket Number:"}),s.jsx("span",{className:"text-lg font-bold text-blue-600",children:d.ticket_number})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Customer:"}),s.jsx("span",{className:"text-sm text-gray-900",children:d.customer_name})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date & Time:"}),s.jsxs("span",{className:"text-sm text-gray-900",children:[new Date(d.appointment_date).toLocaleDateString()," at"," ",d.appointment_time]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:V,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-lg hover:shadow-xl transition-all duration-200",children:"View Booking Detail"}),s.jsx("button",{onClick:Y,className:"w-full px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg font-medium border border-gray-300 transition-all duration-200",children:"Create Another Booking"}),s.jsx("button",{onClick:O,className:"w-full text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Go to Calendar"})]})]})})]})},M7=()=>{const[e]=dt(),t=e.get("date"),r=ee(re=>re.authentication_state.auth_token),n=ee(re=>re.app_settings.capacity_mon_wed),a=ee(re=>re.app_settings.capacity_thu_sun),i=ee(re=>re.update_app_settings),[o,l]=f.useState("overrides"),[c,d]=f.useState(t||null),[u,m]=f.useState(null),[h,y]=f.useState(null),[v,p]=f.useState(!1),[w,g]=f.useState(null),[x,b]=f.useState(null),[j,N]=f.useState(null),[_,T]=f.useState(null),[E,z]=f.useState({date:null,capacity:null}),[k,G]=f.useState(null),M="http://localhost:3000",{data:F,isLoading:D}=we({queryKey:["admin-settings"],queryFn:async()=>(await J.get(`${M}/api/admin/settings`,{headers:{Authorization:`Bearer ${r}`}})).data,enabled:!!r,staleTime:6e4}),{data:$,isLoading:q,refetch:I}=we({queryKey:["capacity-overrides"],queryFn:async()=>(await J.get(`${M}/api/admin/capacity-overrides`,{headers:{Authorization:`Bearer ${r}`},params:{is_active:!0,sort_by:"override_date",sort_order:"asc",limit:100}})).data,enabled:!!r,staleTime:3e4}),S=($==null?void 0:$.overrides)||[],C=ve({mutationFn:async re=>(await J.post(`${M}/api/admin/capacity-overrides`,re,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{I(),d(null),m(null),y(null),z({date:null,capacity:null}),G(null)}}),B=ve({mutationFn:async({override_id:re,payload:Me})=>(await J.patch(`${M}/api/admin/capacity-overrides/${re}`,Me,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{I(),N(null)}}),P=ve({mutationFn:async re=>(await J.delete(`${M}/api/admin/capacity-overrides/${re}`,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{I(),T(null)}}),A=ve({mutationFn:async re=>(await J.patch(`${M}/api/admin/settings`,re,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:re=>{i({capacity_mon_wed:re.capacity_mon_wed,capacity_thu_sun:re.capacity_thu_sun}),p(!1),g(null),b(null)}}),[Y,V]=f.useState(!1),O=async(re,Me)=>{V(!0);try{const cn=((await J.get(`${M}/api/admin/bookings`,{headers:{Authorization:`Bearer ${r}`},params:{appointment_date:re,status:"upcoming"}})).data.data||[]).length;return cn>Me?(G({show:!0,count:cn,date:re,capacity:Me}),!1):!0}catch(ut){return console.error("Error checking bookings:",ut),!0}finally{V(!1)}},R=()=>{const re={date:null,capacity:null};if(!c)re.date="Please select a date";else if(!/^\d{4}-\d{2}-\d{2}$/.test(c))re.date="Date must be in YYYY-MM-DD format";else{const ut=new Date(c+"T00:00:00"),ln=new Date;ln.setHours(0,0,0,0),isNaN(ut.getTime())?re.date="Invalid date":ut<ln?re.date="Cannot create override for past dates":S.find(ci=>ci.override_date===c)&&(re.date="Override already exists for this date. Edit the existing one instead.")}return u==null?re.capacity="Please enter capacity":(u<0||u>10)&&(re.capacity="Capacity must be between 0 and 10"),z(re),!re.date&&!re.capacity},Z=async()=>{if(!R()||!c||u===null)return;const re=on(c);if(!/^\d{4}-\d{2}-\d{2}$/.test(re)){z({...E,date:"Invalid date format. Must be YYYY-MM-DD."});return}await O(re,u)&&C.mutate({override_date:re,time_slot:"00:00",capacity:u,is_active:!0})},K=()=>{if(!c||u===null)return;const re=on(c);if(!/^\d{4}-\d{2}-\d{2}$/.test(re)){z({...E,date:"Invalid date format. Must be YYYY-MM-DD."}),G(null);return}C.mutate({override_date:re,time_slot:"00:00",capacity:u,is_active:!0}),G(null)},X=re=>{N({override_id:re.override_id,override_date:re.override_date,capacity:re.capacity,time_slot:re.time_slot})},U=()=>{if(!j)return;const re=on(j.override_date);if(!/^\d{4}-\d{2}-\d{2}$/.test(re)){alert("Invalid date format. Must be YYYY-MM-DD.");return}B.mutate({override_id:j.override_id,payload:{override_date:re,capacity:j.capacity,time_slot:j.time_slot}})},ne=re=>{T({override_id:re.override_id,override_date:re.override_date})},_e=()=>{_&&P.mutate(_.override_id)},he=()=>{g((F==null?void 0:F.capacity_mon_wed)??n),b((F==null?void 0:F.capacity_thu_sun)??a),p(!0)},mr=()=>{if(!(w===null||x===null)){if(w<0||w>10||x<0||x>10){alert("Capacity must be between 0 and 10");return}A.mutate({capacity_mon_wed:w,capacity_thu_sun:x})}},on=re=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(re)){const ut=new Date(re);if(!isNaN(ut.getTime())){const ln=ut.getFullYear(),cn=String(ut.getMonth()+1).padStart(2,"0"),ci=String(ut.getDate()).padStart(2,"0");return`${ln}-${cn}-${ci}`}}return re},Yn=re=>new Date(re+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),rd=re=>{const ut=new Date(re).getDay();return ut>=1&&ut<=3?(F==null?void 0:F.capacity_mon_wed)??n:(F==null?void 0:F.capacity_thu_sun)??a};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Capacity Management"}),s.jsx("p",{className:"mt-2 text-gray-600 leading-relaxed",children:"Manage default slot capacity rules and date-specific overrides"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>l("overrides"),className:`py-4 px-8 text-center border-b-2 font-medium text-sm transition-all duration-200 ${o==="overrides"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Daily Overrides"}),s.jsx(Q,{to:"/admin/blocking",className:"py-4 px-8 text-center border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm transition-all duration-200",children:"Blocked Slots"}),s.jsx("button",{onClick:()=>l("defaults"),className:`py-4 px-8 text-center border-b-2 font-medium text-sm transition-all duration-200 ${o==="defaults"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Default Settings"})]})}),s.jsxs("div",{className:"p-6",children:[o==="overrides"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Override Capacity for Specific Date"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"override-date",className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{id:"override-date",type:"date",min:new Date().toISOString().split("T")[0],value:c||"",onChange:re=>{const Me=re.target.value;Me&&/^\d{4}-\d{2}-\d{2}$/.test(Me)?d(Me):Me||d(null),z({...E,date:null})},className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${E.date?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),E.date&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.date})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"override-capacity",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Capacity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{id:"override-capacity",type:"number",min:"0",max:"10",value:u===null?"":u,onChange:re=>{const Me=re.target.value===""?null:parseInt(re.target.value,10);m(Me),z({...E,capacity:null})},placeholder:"0-10",className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 ${E.capacity?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`}),E.capacity&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.capacity})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"override-reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),s.jsx("input",{id:"override-reason",type:"text",value:h||"",onChange:re=>y(re.target.value),placeholder:"e.g., Staff shortage",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:Z,disabled:C.isPending||Y,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:C.isPending?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Override..."]}):Y?"Checking Bookings...":"Add Override"})})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Existing Capacity Overrides"}),q?s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading overrides..."})]}):S.length===0?s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No capacity overrides set"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Default capacity applies to all dates."})]}):s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(re=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Yn(re.override_date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[re.capacity," ",re.capacity===1?"slot":"slots"]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:s.jsx("span",{className:"text-gray-400 italic",children:"N/A"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3",children:[s.jsx("button",{onClick:()=>X(re),className:"text-blue-600 hover:text-blue-900 transition-colors",children:"Edit"}),s.jsx("button",{onClick:()=>ne(re),className:"text-red-600 hover:text-red-900 transition-colors",children:"Remove"})]})]},re.override_id))})]})})]})]}),o==="defaults"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Default Capacity Rules"}),D?s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-lg",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Monday - Wednesday:"}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(F==null?void 0:F.capacity_mon_wed)??n," people per slot"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Thursday - Sunday:"}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(F==null?void 0:F.capacity_thu_sun)??a," people per slot"]})]})]})}),s.jsx("button",{onClick:he,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Edit Defaults"})]})]})]})]})]})}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Edit Default Capacity"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"modal-mon-wed",className:"block text-sm font-medium text-gray-700 mb-2",children:"Monday - Wednesday Capacity"}),s.jsx("input",{id:"modal-mon-wed",type:"number",min:"0",max:"10",value:w===null?"":w,onChange:re=>g(re.target.value===""?null:parseInt(re.target.value,10)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"modal-thu-sun",className:"block text-sm font-medium text-gray-700 mb-2",children:"Thursday - Sunday Capacity"}),s.jsx("input",{id:"modal-thu-sun",type:"number",min:"0",max:"10",value:x===null?"":x,onChange:re=>b(re.target.value===""?null:parseInt(re.target.value,10)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),s.jsx("button",{onClick:mr,disabled:A.isPending||w===null||x===null,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:A.isPending?"Saving...":"Save Changes"})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Edit Capacity Override"}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),s.jsx("input",{id:"edit-date",type:"date",value:j.override_date,onChange:re=>{const Me=re.target.value;Me&&/^\d{4}-\d{2}-\d{2}$/.test(Me)&&N({...j,override_date:Me})},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"edit-capacity",className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),s.jsx("input",{id:"edit-capacity",type:"number",min:"0",max:"10",value:j.capacity,onChange:re=>N({...j,capacity:parseInt(re.target.value,10)}),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>N(null),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),s.jsx("button",{onClick:U,disabled:B.isPending,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:B.isPending?"Saving...":"Save Changes"})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Remove Capacity Override?"})})]}),s.jsxs("p",{className:"text-gray-700 mb-2",children:["Are you sure you want to remove the capacity override for"," ",s.jsx("span",{className:"font-semibold",children:Yn(_.override_date)}),"?"]}),s.jsxs("p",{className:"text-gray-600 text-sm mb-6",children:["Capacity will return to default:"," ",s.jsxs("span",{className:"font-semibold",children:[rd(_.override_date)," people per slot"]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>T(null),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),s.jsx("button",{onClick:_e,disabled:P.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:P.isPending?"Removing...":"Remove Override"})]})]})}),k&&k.show&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-12 w-12 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Capacity Warning"})})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[s.jsxs("p",{className:"text-yellow-800 font-semibold",children:["Warning: ",k.count," bookings already scheduled for this date exceed new capacity ",k.capacity,"."]}),s.jsx("p",{className:"text-yellow-700 text-sm mt-2",children:"Existing bookings will be kept but no new bookings will be accepted."})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>G(null),className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"}),s.jsx("button",{onClick:K,className:"flex-1 px-6 py-3 bg-yellow-600 text-white rounded-lg font-medium hover:bg-yellow-700 focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all duration-200",children:"Proceed Anyway"})]})]})})]})},R7=["10:00","10:40","11:20","12:00","12:40","13:20","14:00","14:20"],_i=()=>"http://localhost:3000",Ig=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D7=e=>{const t=new Date;t.setHours(0,0,0,0);const r=new Date(e);return r.setHours(0,0,0,0),r<t},L7=()=>{const[e]=dt(),t=e.get("date"),r=ee(P=>P.authentication_state.auth_token),[n,a]=f.useState("entire_day"),[i,o]=f.useState(t||null),[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState({date:null,time_slot:null}),[y,v]=f.useState(null),[p,w]=f.useState(null),[g,x]=f.useState(!1),[b,j]=f.useState(null),N=zs(),{data:_,isLoading:T,error:E}=we({queryKey:["blocked-slots"],queryFn:async()=>(await J.get(`${_i()}/api/admin/blocked-slots`,{params:{sort_by:"block_date",sort_order:"asc",limit:100},headers:{Authorization:`Bearer ${r}`}})).data.data,staleTime:3e4,enabled:!!r}),z=_||[],k=ve({mutationFn:async P=>(await J.post(`${_i()}/api/admin/blocked-slots`,P,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{N.invalidateQueries({queryKey:["blocked-slots"]}),o(null),c(null),u(null),a("entire_day"),w(null)}}),G=ve({mutationFn:async P=>(await J.delete(`${_i()}/api/admin/blocked-slots/${P}`,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{N.invalidateQueries({queryKey:["blocked-slots"]}),v(null)}}),M=ve({mutationFn:async P=>(await J.patch(`${_i()}/api/admin/bookings/${P.booking_id}/cancel`,{cancellation_reason:P.cancellation_reason,cancelled_by:"admin"},{headers:{Authorization:`Bearer ${r}`}})).data}),F=()=>{const P={date:null,time_slot:null};let A=!0;return i?D7(i)&&(P.date="Cannot block dates in the past",A=!1):(P.date="Please select a date",A=!1),n==="specific_slot"&&!l&&(P.time_slot="Please select a time slot",A=!1),h(P),A},D=async()=>{if(!i)return null;try{const P={appointment_date:i,status:"upcoming"};n==="specific_slot"&&l&&(P.appointment_time=l);const Y=(await J.get(`${_i()}/api/admin/bookings`,{params:P,headers:{Authorization:`Bearer ${r}`}})).data.data||[];return Y.length>0?{bookings_count:Y.length,bookings:Y.map(V=>({booking_id:V.booking_id,ticket_number:V.ticket_number,customer_name:V.customer_name}))}:null}catch(P){return console.error("Error checking existing bookings:",P),null}},$=async P=>{if(P.preventDefault(),!F())return;const A=await D();A?(w(A),j(d||"Slot blocked by admin")):await q()},q=async()=>{if(!i)return;const P={block_date:i,time_slot:n==="specific_slot"?l:null,reason:d};await k.mutateAsync(P)},I=async()=>{await q(),w(null)},S=async()=>{if(!p||!b)return;const P=p.bookings.map(A=>M.mutateAsync({booking_id:A.booking_id,cancellation_reason:b}));try{await Promise.all(P),await q(),w(null),x(!1)}catch(A){console.error("Error canceling bookings:",A)}},C=P=>{v({block_id:P.block_id,block_date:P.block_date,time_slot:P.time_slot})},B=async()=>{y&&await G.mutateAsync(y.block_id)};return f.useEffect(()=>{n==="entire_day"&&c(null)},[n]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Blocked Slots and Days"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Block specific time slots or entire days to prevent customer bookings during closures"})]})}),s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{className:"border-b-2 border-blue-600 py-4 px-1 text-sm font-medium text-blue-600","aria-current":"page",children:"Blocked Slots"}),s.jsx(Q,{to:"/admin/capacity",className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-colors",children:"Daily Overrides"})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Add New Block"}),s.jsxs("form",{onSubmit:$,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Block Type ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"block_type",value:"entire_day",checked:n==="entire_day",onChange:P=>a(P.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Entire Day"})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"block_type",value:"specific_slot",checked:n==="specific_slot",onChange:P=>a(P.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),s.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Specific Time Slot"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"block_date",className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsx("input",{type:"date",id:"block_date",value:i||"",onChange:P=>{o(P.target.value),h(A=>({...A,date:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),m.date&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.date})]}),n==="specific_slot"&&s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"time_slot",className:"block text-sm font-medium text-gray-700 mb-2",children:["Time Slot ",s.jsx("span",{className:"text-red-600",children:"*"})]}),s.jsxs("select",{id:"time_slot",value:l||"",onChange:P=>{c(P.target.value),h(A=>({...A,time_slot:null}))},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[s.jsx("option",{value:"",children:"Select a time slot"}),R7.map(P=>s.jsx("option",{value:P,children:P},P))]}),m.time_slot&&s.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.time_slot})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"block_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),s.jsx("input",{type:"text",id:"block_reason",placeholder:"e.g., Vacation, Holiday, Emergency",value:d||"",onChange:P=>u(P.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",maxLength:200})]}),s.jsx("button",{type:"submit",disabled:k.isPending,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Blocking..."]}):"Block"})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blocked Slots"})}),T&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading blocked slots..."})]}),E&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-gray-900 font-medium",children:"Failed to load blocked slots"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Please try refreshing the page"})]}),!T&&!E&&z.length===0&&s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-gray-900 font-medium text-lg",children:"No blocked slots"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Add a new block using the form on the left"})]}),!T&&!E&&z.length>0&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:Ig(P.block_date)}),s.jsx("div",{className:"text-xs text-gray-500",children:P.block_date})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${P.time_slot?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:P.time_slot||"All Day"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:P.reason||s.jsx("span",{className:"text-gray-400 italic",children:"No reason provided"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsx("button",{onClick:()=>C(P),className:"text-red-600 hover:text-red-900 font-medium transition-colors",children:"Unblock"})})]},P.block_id))})]})})]})})]})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-8 w-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Existing Bookings Found"}),s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Warning: ",p.bookings_count," booking",p.bookings_count>1?"s":""," exist for this ",n==="entire_day"?"day":"time slot",". Blocking will not cancel them automatically."]})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Affected Bookings:"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto",children:s.jsx("ul",{className:"space-y-2",children:p.bookings.map(P=>s.jsxs("li",{className:"text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:P.ticket_number})," - ",P.customer_name]},P.booking_id))})})]}),g?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm font-medium text-red-900 mb-2",children:["Cancel ",p.bookings_count," booking",p.bookings_count>1?"s":""," and notify customers?"]}),s.jsx("label",{htmlFor:"cancellation_reason",className:"block text-sm font-medium text-red-900 mb-2",children:"Reason for cancellation:"}),s.jsx("textarea",{id:"cancellation_reason",rows:3,value:b||"",onChange:P=>j(P.target.value),className:"w-full px-4 py-3 border-2 border-red-300 rounded-lg focus:border-red-500 focus:ring-4 focus:ring-red-100 transition-all",placeholder:"Explain why bookings are being cancelled..."})]}),s.jsx("button",{onClick:S,disabled:M.isPending,className:"w-full bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?"Cancelling...":"Yes, Cancel Bookings"}),s.jsx("button",{onClick:()=>x(!1),className:"w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Back"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:I,className:"w-full bg-amber-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-amber-700 transition-all",children:"Block anyway (keep bookings)"}),s.jsx("button",{onClick:()=>x(!0),className:"w-full bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-all",children:"Block and cancel bookings"}),s.jsx("button",{onClick:()=>{w(null),x(!1)},className:"w-full bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Cancel"})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Unblock Slot?"}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Unblock ",s.jsx("span",{className:"font-medium text-gray-900",children:Ig(y.block_date)}),y.time_slot&&s.jsxs("span",{children:[" at ",s.jsx("span",{className:"font-medium text-gray-900",children:y.time_slot})]}),!y.time_slot&&s.jsx("span",{children:" (All Day)"}),"?"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"This will become available for booking again."})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex gap-3",children:[s.jsx("button",{onClick:B,disabled:G.isPending,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:G.isPending?"Unblocking...":"Unblock"}),s.jsx("button",{onClick:()=>v(null),className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Cancel"})]})]})})]})})},F7=()=>{const[e,t]=dt(),r=ee(K=>K.authentication_state.auth_token),[n,a]=f.useState("grid"),[i,o]=f.useState(e.get("sort")||"manual"),[l,c]=f.useState(e.get("service_filter")||null),[d,u]=f.useState(new Set),[m,h]=f.useState(null),[y,v]=f.useState(""),[p,w]=f.useState(null),[g,x]=f.useState(null),[b,j]=f.useState(null),[N,_]=f.useState(null),T=f.useRef(null),E=zs(),z="http://localhost:3000",{data:k=[],isLoading:G}=we({queryKey:["admin-gallery",l,i],queryFn:async()=>{const K={limit:100};return l&&(K.service_id=l),i==="manual"?(K.sort_by="display_order",K.sort_order="asc"):i==="newest"?(K.sort_by="uploaded_at",K.sort_order="desc"):(K.sort_by="uploaded_at",K.sort_order="asc"),(await J.get(`${z}/api/admin/gallery`,{params:K,headers:{Authorization:`Bearer ${r}`}})).data.map(U=>({image_id:U.image_id,image_url:U.image_url,thumbnail_url:U.thumbnail_url,caption:U.caption,service_id:U.service_id,display_order:U.display_order,uploaded_at:U.uploaded_at}))},staleTime:3e4}),{data:M=[]}=we({queryKey:["services-active"],queryFn:async()=>((await J.get(`${z}/api/services`,{params:{is_active:!0}})).data.services||[]).map(X=>({service_id:X.service_id,name:X.name})),staleTime:6e4}),F=ve({mutationFn:async({image_id:K,payload:X})=>(await J.patch(`${z}/api/admin/gallery/${K}`,X,{headers:{Authorization:`Bearer ${r}`}})).data,onSuccess:()=>{E.invalidateQueries({queryKey:["admin-gallery"]})}}),D=ve({mutationFn:async K=>{await J.delete(`${z}/api/admin/gallery/${K}`,{headers:{Authorization:`Bearer ${r}`}})},onSuccess:()=>{E.invalidateQueries({queryKey:["admin-gallery"]}),x(null),u(new Set)}}),$=ve({mutationFn:async K=>{await Promise.all(K.map(X=>J.delete(`${z}/api/admin/gallery/${X}`,{headers:{Authorization:`Bearer ${r}`}})))},onSuccess:()=>{E.invalidateQueries({queryKey:["admin-gallery"]}),x(null),u(new Set)}}),q=ve({mutationFn:async K=>{await J.post(`${z}/api/admin/gallery/reorder`,{image_ids:K},{headers:{Authorization:`Bearer ${r}`}})},onSuccess:()=>{E.invalidateQueries({queryKey:["admin-gallery"]})}}),I=K=>{T.current&&clearTimeout(T.current),F.mutate({image_id:K,payload:{caption:y||null}}),h(null),v("")},S=K=>{v(K),T.current&&clearTimeout(T.current)},C=()=>{p&&(F.mutate({image_id:p.image_id,payload:{caption:p.caption,service_id:p.service_id}}),w(null))},B=()=>{g&&(Array.isArray(g)?$.mutate(g):D.mutate(g.image_id))},P=K=>{const X=new Set(d);X.has(K)?X.delete(K):X.add(K),u(X)},A=()=>{u(new Set(k.map(K=>K.image_id)))},Y=()=>{u(new Set)},V=(K,X)=>{j(X),K.dataTransfer.effectAllowed="move"},O=(K,X)=>{K.preventDefault(),_(X)},R=(K,X)=>{if(K.preventDefault(),!b)return;const U=k.findIndex(he=>he.image_id===b);if(U===-1||U===X){j(null),_(null);return}const ne=[...k],[_e]=ne.splice(U,1);ne.splice(X,0,_e),q.mutate(ne.map(he=>he.image_id)),j(null),_(null)},Z=()=>{j(null),_(null)};return f.useEffect(()=>{const K={};l&&(K.service_filter=l),i!=="manual"&&(K.sort=i),t(K)},[l,i,t]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gallery Management"})}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{className:"border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600",children:"All Images"}),s.jsx(Q,{to:"/admin/gallery/upload",className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"Upload New"}),s.jsx("button",{className:"border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700",children:"Settings"})]})}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex rounded-lg border border-gray-300 bg-white",children:[s.jsx("button",{onClick:()=>a("grid"),className:`px-4 py-2 text-sm font-medium rounded-l-lg transition-colors ${n==="grid"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,children:s.jsx(l1,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a("list"),className:`px-4 py-2 text-sm font-medium rounded-r-lg transition-colors ${n==="list"?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-50"}`,children:s.jsx(d1,{className:"w-4 h-4"})})]}),s.jsxs("select",{value:i,onChange:K=>o(K.target.value),className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"manual",children:"Manual Order"}),s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"oldest",children:"Oldest First"})]}),s.jsxs("select",{value:l||"",onChange:K=>c(K.target.value||null),className:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Services"}),M.map(K=>s.jsx("option",{value:K.service_id,children:K.name},K.service_id))]})]}),d.size>0&&s.jsxs("div",{className:"flex items-center gap-4 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.size," selected"]}),s.jsx("button",{onClick:()=>x(Array.from(d)),className:"text-sm font-medium text-red-600 hover:text-red-700",children:"Delete Selected"}),s.jsx("button",{onClick:Y,className:"text-sm font-medium text-gray-600 hover:text-gray-700",children:"Deselect All"})]})]}),G&&s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!G&&k.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(l5,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No gallery images yet"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by uploading your first photo."}),s.jsx("div",{className:"mt-6",children:s.jsxs(Q,{to:"/admin/gallery/upload",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(f1,{className:"mr-2 h-4 w-4"}),"Upload Your First Photo"]})})]}),!G&&k.length>0&&n==="grid"&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:k.map((K,X)=>{var U;return s.jsxs("div",{draggable:i==="manual",onDragStart:ne=>i==="manual"&&V(ne,K.image_id),onDragOver:ne=>i==="manual"&&O(ne,X),onDrop:ne=>i==="manual"&&R(ne,X),onDragEnd:Z,className:`bg-white rounded-lg shadow-md overflow-hidden border-2 transition-all ${b===K.image_id?"opacity-50 scale-105":N===X?"border-blue-500":"border-transparent"} ${d.has(K.image_id)?"ring-2 ring-blue-500":""}`,children:[s.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-2 z-10",children:[s.jsx("input",{type:"checkbox",checked:d.has(K.image_id),onChange:()=>P(K.image_id),className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),i==="manual"&&s.jsx("div",{className:"cursor-move bg-white rounded p-1 shadow",children:s.jsx(f5,{className:"w-4 h-4 text-gray-400"})})]}),s.jsx("div",{className:"relative aspect-square",children:s.jsx("img",{src:K.thumbnail_url,alt:K.caption||"Gallery image",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"p-3",children:[m===K.image_id?s.jsx("input",{type:"text",value:y,onChange:ne=>S(ne.target.value),onBlur:()=>I(K.image_id),autoFocus:!0,className:"w-full px-2 py-1 text-sm border border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):s.jsx("p",{onClick:()=>{h(K.image_id),v(K.caption||"")},className:"text-sm text-gray-900 cursor-pointer hover:bg-gray-50 px-2 py-1 rounded min-h-[28px]",children:K.caption||"Click to add caption..."}),K.service_id&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((U=M.find(ne=>ne.service_id===K.service_id))==null?void 0:U.name)||"Service"})}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>w(K),className:"flex-1 inline-flex justify-center items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(u1,{className:"mr-1 h-3 w-3"}),"Edit"]}),s.jsxs("button",{onClick:()=>x(K),className:"flex-1 inline-flex justify-center items-center px-3 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(Vp,{className:"mr-1 h-3 w-3"}),"Delete"]})]})]})]},K.image_id)})}),!G&&k.length>0&&n==="list"&&s.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:d.size===k.length,onChange:()=>{d.size===k.length?Y():A()},className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Image"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Caption"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(K=>{var X;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:d.has(K.image_id),onChange:()=>P(K.image_id),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("img",{src:K.thumbnail_url,alt:K.caption||"Gallery image",className:"h-16 w-16 object-cover rounded"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("p",{className:"text-sm text-gray-900",children:K.caption||"No caption"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:K.service_id?s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:((X=M.find(U=>U.service_id===K.service_id))==null?void 0:X.name)||"Service"}):s.jsx("span",{className:"text-sm text-gray-500",children:"None"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(K.uploaded_at).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>w(K),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Edit"}),s.jsx("button",{onClick:()=>x(K),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},K.image_id)})})]})})]})}),p&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>w(null)}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full sm:p-6",children:[s.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:s.jsx("button",{onClick:()=>w(null),className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:s.jsx(Nt,{className:"h-6 w-6"})})}),s.jsx("div",{className:"sm:flex sm:items-start",children:s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Edit Image"}),s.jsx("div",{className:"mb-4",children:s.jsx("img",{src:p.image_url,alt:p.caption||"Gallery image",className:"w-full max-h-96 object-contain rounded-lg"})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"edit-caption",className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption"}),s.jsx("input",{id:"edit-caption",type:"text",value:p.caption||"",onChange:K=>w({...p,caption:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter image caption..."})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"edit-service",className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Association"}),s.jsxs("select",{id:"edit-service",value:p.service_id||"",onChange:K=>w({...p,service_id:K.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"None"}),M.map(K=>s.jsx("option",{value:K.service_id,children:K.name},K.service_id))]})]}),s.jsxs("div",{className:"mb-4 bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Metadata"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Uploaded on:"})," ",new Date(p.uploaded_at).toLocaleString()]})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[s.jsx("button",{onClick:C,disabled:F.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm disabled:opacity-50",children:F.isPending?"Saving...":"Save Changes"}),s.jsx("button",{onClick:()=>w(null),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"}),s.jsx("button",{onClick:()=>{x(p),w(null)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-red-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Delete Image"})]})]})})]})]})}),g&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>x(null)}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[s.jsxs("div",{className:"sm:flex sm:items-start",children:[s.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:s.jsx(Vp,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[s.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Delete Image",Array.isArray(g)&&g.length>1?"s":"","?"]}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["This action cannot be undone. ",Array.isArray(g)?`${g.length} image${g.length>1?"s":""} will be permanently deleted.`:"This image will be permanently deleted from storage."]}),!Array.isArray(g)&&g.caption&&s.jsxs("p",{className:"mt-2 text-sm font-medium text-gray-700",children:['"',g.caption,'"']})]})]})]}),s.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[s.jsx("button",{onClick:B,disabled:D.isPending||$.isPending,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm disabled:opacity-50",children:D.isPending||$.isPending?"Deleting...":"Delete"}),s.jsx("button",{onClick:()=>x(null),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},O7=()=>{const e=Le(),t=f.useRef(null),[r,n]=f.useState([]),[a,i]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState([]),u=ee(M=>M.authentication_state.auth_token),{data:m}=we({queryKey:["services","active"],queryFn:async()=>(await J.get("http://localhost:3000/api/services",{params:{is_active:!0},headers:u?{Authorization:`Bearer ${u}`}:{}})).data.services||[],select:M=>M.map(F=>({service_id:F.service_id,name:F.name})),staleTime:6e4,refetchOnWindowFocus:!1}),h=m||[],y=M=>["image/jpeg","image/jpg","image/png","image/webp"].includes(M.type)?M.size>10485760?`File exceeds 10MB limit (${(M.size/1024/1024).toFixed(2)}MB).`:null:"Invalid file format. Please upload JPG, PNG, or WebP images only.",v=M=>{const F=Array.from(M),D=[],$=[];F.forEach(q=>{const I=y(q);if(I)D.push({filename:q.name,error:I});else{const S=URL.createObjectURL(q),C=`temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;$.push({temp_id:C,file:q,filename:q.name,preview_url:S,upload_progress:0,upload_status:"pending",uploaded_image_id:null,caption:null,service_id:null,error_message:null})}}),d(q=>[...q,...D]),n(q=>[...q,...$])},p=M=>{M.target.files&&M.target.files.length>0&&v(M.target.files)},w=M=>{M.preventDefault(),i(!0)},g=M=>{M.preventDefault(),i(!1)},x=M=>{M.preventDefault(),i(!1),M.dataTransfer.files&&M.dataTransfer.files.length>0&&v(M.dataTransfer.files)},b=(M,F)=>{n(D=>D.map($=>$.temp_id===M?{...$,caption:F}:$))},j=(M,F)=>{n(D=>D.map($=>$.temp_id===M?{...$,service_id:F}:$))},N=M=>{const F=r.find(D=>D.temp_id===M);F&&URL.revokeObjectURL(F.preview_url),n(D=>D.filter($=>$.temp_id!==M))},_=ve({mutationFn:async M=>{const F=new FormData;return F.append("image",M.file),M.caption&&F.append("caption",M.caption),M.service_id&&F.append("service_id",M.service_id),(await J.post("http://localhost:3000/api/admin/gallery",F,{headers:{Authorization:`Bearer ${u}`,"Content-Type":"multipart/form-data"},onUploadProgress:$=>{if($.total){const q=Math.round($.loaded*100/$.total);n(I=>I.map(S=>S.temp_id===M.temp_id?{...S,upload_progress:q,upload_status:"uploading"}:S))}}})).data},onSuccess:(M,F)=>{n(D=>D.map($=>{var q;return $.temp_id===F.temp_id?{...$,upload_status:"success",upload_progress:100,uploaded_image_id:M.image_id||((q=M.data)==null?void 0:q.image_id)}:$}))},onError:(M,F)=>{var $,q,I;const D=((I=(q=($=M.response)==null?void 0:$.data)==null?void 0:q.error)==null?void 0:I.message)||M.message||"Upload failed";n(S=>S.map(C=>C.temp_id===F.temp_id?{...C,upload_status:"error",error_message:D}:C))}}),T=async()=>{l(!0);for(const F of r)(F.upload_status==="pending"||F.upload_status==="error")&&await _.mutateAsync(F);l(!1),r.every(F=>F.upload_status==="success")&&e("/admin/gallery",{state:{successMessage:`${r.length} images uploaded successfully!`}})},E=()=>{r.forEach(M=>{URL.revokeObjectURL(M.preview_url)}),n([]),e("/admin/gallery")};f.useEffect(()=>()=>{r.forEach(M=>{URL.revokeObjectURL(M.preview_url)})},[r]);const z=r.length>0,k=r.every(M=>M.upload_status==="success"),G=z&&!o&&!k;return s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Gallery Images"}),s.jsx(Q,{to:"/admin/gallery",className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:" Back to Gallery"})]})}),c.length>0&&s.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"h-5 w-5 text-red-500 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-2",children:"Invalid Files:"}),s.jsx("ul",{className:"space-y-1",children:c.map((M,F)=>s.jsxs("li",{className:"text-sm text-red-700",children:[s.jsxs("strong",{children:[M.filename,":"]})," ",M.error]},F))}),s.jsx("button",{onClick:()=>d([]),className:"mt-3 text-sm text-red-600 hover:text-red-800 font-medium underline",children:"Clear Errors"})]})]})}),s.jsxs("div",{className:`
              relative border-2 border-dashed rounded-xl p-12 text-center cursor-pointer transition-all
              ${a?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 bg-white hover:border-gray-400 hover:bg-gray-50"}
            `,onDragOver:w,onDragLeave:g,onDrop:x,onClick:()=>{var M;return(M=t.current)==null?void 0:M.click()},children:[s.jsx("input",{ref:t,type:"file",multiple:!0,accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:p,className:"hidden"}),s.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Drag and drop images here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"JPG, PNG, WebP  Max 10MB per file"}),s.jsxs("button",{type:"button",className:"inline-flex items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",onClick:M=>{var F;M.stopPropagation(),(F=t.current)==null||F.click()},children:[s.jsx("svg",{className:"h-5 w-5 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Browse Files"]})]}),z&&s.jsxs("div",{className:"mt-8",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Files to Upload (",r.length,")"]}),s.jsx("div",{className:"space-y-4",children:r.map(M=>{var F;return s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:M.preview_url,alt:M.filename,className:"h-24 w-24 object-cover rounded-lg border border-gray-200"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate mb-2",children:M.filename}),s.jsxs("div",{className:"mb-3",children:[M.upload_status==="pending"&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Pending Upload"}),M.upload_status==="uploading"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("svg",{className:"animate-spin h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Uploading..."})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${M.upload_progress}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500",children:[M.upload_progress,"%"]})]}),M.upload_status==="success"&&s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx("svg",{className:"h-3.5 w-3.5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Uploaded Successfully"]}),M.upload_status==="error"&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.jsx("svg",{className:"h-3.5 w-3.5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Upload Failed"]}),M.error_message&&s.jsx("p",{className:"text-xs text-red-600",children:M.error_message})]})]}),(M.upload_status==="pending"||M.upload_status==="error")&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:`caption-${M.temp_id}`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Caption (optional)"}),s.jsx("input",{id:`caption-${M.temp_id}`,type:"text",value:M.caption||"",onChange:D=>b(M.temp_id,D.target.value),placeholder:"e.g., Skin Fade, Curly Cut",maxLength:100,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[((F=M.caption)==null?void 0:F.length)||0,"/100 characters"]})]}),(M.upload_status==="pending"||M.upload_status==="error")&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:`service-${M.temp_id}`,className:"block text-xs font-medium text-gray-700 mb-1",children:"Service Association"}),s.jsxs("select",{id:`service-${M.temp_id}`,value:M.service_id||"",onChange:D=>j(M.temp_id,D.target.value||null),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"None"}),h.map(D=>s.jsx("option",{value:D.service_id,children:D.name},D.service_id))]})]})]}),(M.upload_status==="pending"||M.upload_status==="error")&&s.jsx("button",{onClick:()=>N(M.temp_id),className:"flex-shrink-0 p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all",title:"Remove file",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},M.temp_id)})}),s.jsxs("div",{className:"mt-8 flex items-center justify-end space-x-4",children:[s.jsx("button",{onClick:E,disabled:o,className:"px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Cancel"}),s.jsx("button",{onClick:T,disabled:!G,className:"px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:o?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading Images..."]}):k?s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"All Uploaded!"]}):`Upload ${r.length} Image${r.length>1?"s":""}`})]})]}),!z&&s.jsxs("div",{className:"mt-12 text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No files selected yet. Drag and drop images above or click to browse."})]})]})})})},B7=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never",$7=e=>e.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),I7=()=>{const e=ee(V=>V.authentication_state.auth_token),[t,r]=dt(),n=Le(),[a,i]=f.useState(t.get("search")||""),[o,l]=f.useState(t.get("search")||""),[c,d]=f.useState(t.get("type")||"all"),[u,m]=f.useState(t.get("sort")||"total_bookings_desc"),[h,y]=f.useState(Number(t.get("page"))||1),[v,p]=f.useState(50),[w,g]=f.useState(!1),[x,b]=f.useState(null);f.useEffect(()=>{const V=setTimeout(()=>{l(a),y(1)},300);return()=>clearTimeout(V)},[a]),f.useEffect(()=>{const V={};o&&(V.search=o),c!=="all"&&(V.type=c),u!=="total_bookings_desc"&&(V.sort=u),h!==1&&(V.page=h.toString()),r(V,{replace:!0})},[o,c,u,h,r]);const j=V=>{switch(V){case"total_bookings_desc":return{sort_by:"total_bookings",sort_order:"desc"};case"last_booking_newest":return{sort_by:"last_booking_date",sort_order:"desc"};case"name_asc":return{sort_by:"name",sort_order:"asc"};default:return{sort_by:"total_bookings",sort_order:"desc"}}},N=(h-1)*v,{sort_by:_,sort_order:T}=j(u),{data:E,isLoading:z,error:k,refetch:G}=we({queryKey:["admin-customers",o,c,_,T,v,N],queryFn:async()=>{const V={limit:v,offset:N,sort_by:_,sort_order:T};return o&&(V.search=o),c!=="all"&&(V.type=c),(await J.get("http://localhost:3000/api/admin/customers",{headers:{Authorization:`Bearer ${e}`},params:V})).data},enabled:!!e,staleTime:6e4,retry:1,refetchOnWindowFocus:!1}),M=(E==null?void 0:E.customers)||[],F=(E==null?void 0:E.total)||0,D=Math.ceil(F/v),$=async()=>{g(!0);try{const V={sort_by:_,sort_order:T};o&&(V.search=o),c!=="all"&&(V.type=c);const O=await J.get("http://localhost:3000/api/admin/customers/export",{headers:{Authorization:`Bearer ${e}`},params:V,responseType:"blob"}),R=new Blob([O.data],{type:"text/csv"}),Z=window.URL.createObjectURL(R),K=document.createElement("a");K.href=Z,K.download=`customers_${new Date().toISOString().split("T")[0]}.csv`,K.click(),window.URL.revokeObjectURL(Z)}catch(V){console.error("Export error:",V),alert("Failed to export customers. Please try again.")}finally{g(!1)}},q=V=>{d(V),y(1)},I=V=>{m(V),y(1)},S=V=>{y(V)},C=V=>{p(V),y(1)},B=V=>{n(`/admin/customers/${V}`)},P=(V,O)=>{O.stopPropagation(),n(`/admin/customers/${V}`)},A=(V,O)=>{O.stopPropagation(),n(`/admin/bookings?customer_id=${V}`)},Y=(V,O)=>{O.stopPropagation(),b(x===V?null:V)};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage and view all customer records"})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(uc,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search by name, email, or phone",value:a,onChange:V=>i(V.target.value),className:"block w-full pl-10 pr-3 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900 placeholder-gray-400"})]})}),s.jsx("div",{className:"w-full lg:w-48",children:s.jsxs("select",{value:c,onChange:V=>q(V.target.value),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900",children:[s.jsx("option",{value:"all",children:"All Customers"}),s.jsx("option",{value:"registered",children:"Registered"}),s.jsx("option",{value:"guest",children:"Guest"})]})}),s.jsx("div",{className:"w-full lg:w-56",children:s.jsxs("select",{value:u,onChange:V=>I(V.target.value),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-gray-900",children:[s.jsx("option",{value:"total_bookings_desc",children:"Total Bookings (High to Low)"}),s.jsx("option",{value:"last_booking_newest",children:"Last Booking (Newest)"}),s.jsx("option",{value:"name_asc",children:"Name (A-Z)"})]})}),s.jsx("button",{onClick:$,disabled:w||z,className:"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xo,{className:"h-5 w-5"}),"Export CSV"]})})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[z&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading customers..."})]}),k&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error loading customers"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to fetch customer data. Please try again."}),s.jsx("button",{onClick:()=>G(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]}),!z&&!k&&M.length===0&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx("svg",{className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No customers yet"}),s.jsx("p",{className:"text-gray-600",children:"Customers will appear after the first booking"})]}),!z&&!k&&M.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Phone"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Type"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total Bookings"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Last Booking"}),s.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(V=>s.jsxs("tr",{onClick:()=>B(V.customer_id),className:"hover:bg-blue-50 cursor-pointer transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:$7(V.name)}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:V.email||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:V.phone||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V.customer_type==="registered"?s.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Registered"}):s.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Guest"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:V.total_bookings})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-600",children:B7(V.last_booking_date)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:O=>P(V.customer_id,O),className:"text-blue-600 hover:text-blue-800 transition-colors p-2 rounded-lg hover:bg-blue-50",title:"View Details",children:s.jsx(Yr,{className:"h-5 w-5"})}),s.jsx("button",{onClick:O=>A(V.customer_id,O),className:"text-green-600 hover:text-green-800 transition-colors p-2 rounded-lg hover:bg-green-50",title:"View Bookings",children:s.jsx(Je,{className:"h-5 w-5"})}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:O=>Y(V.customer_id,O),className:"text-gray-600 hover:text-gray-800 transition-colors p-2 rounded-lg hover:bg-gray-50",title:"Contact",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),x===V.customer_id&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-lg shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsxs("div",{className:"py-1",children:[V.email&&s.jsxs("a",{href:`mailto:${V.email}`,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:O=>O.stopPropagation(),children:[s.jsx(Wt,{className:"h-4 w-4"}),"Email"]}),V.phone&&s.jsxs("a",{href:`tel:${V.phone}`,className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:O=>O.stopPropagation(),children:[s.jsx(fs,{className:"h-4 w-4"}),"Call"]})]})})]})]})})]},V.customer_id))})]})}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",N+1,"-",Math.min(N+v,F)," of ",F," customers"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-gray-600",children:"Rows:"}),s.jsxs("select",{value:v,onChange:V=>C(Number(V.target.value)),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:[s.jsx("option",{value:20,children:"20"}),s.jsx("option",{value:50,children:"50"}),s.jsx("option",{value:100,children:"100"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>S(h-1),disabled:h===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(cc,{className:"h-5 w-5 text-gray-600"})}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,D)},(V,O)=>{let R;return D<=5||h<=3?R=O+1:h>=D-2?R=D-4+O:R=h-2+O,s.jsx("button",{onClick:()=>S(R),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${h===R?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:R},R)})}),s.jsx("button",{onClick:()=>S(h+1),disabled:h===D,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(ds,{className:"h-5 w-5 text-gray-600"})})]})]})]})]})]})]})]})})},z7=e=>{const t=e.map(i=>i.service_name).filter(i=>i!==null&&i!=="");if(t.length===0)return null;const r={};t.forEach(i=>{r[i]=(r[i]||0)+1});let n=0,a=null;for(const[i,o]of Object.entries(r))o>n&&(n=o,a=i);return a},V7=e=>{const t=e.filter(a=>a.status==="completed"&&a.appointment_date).sort((a,i)=>new Date(a.appointment_date).getTime()-new Date(i.appointment_date).getTime());if(t.length<2)return null;const r=[];for(let a=1;a<t.length;a++){const i=new Date(t[a-1].appointment_date),o=new Date(t[a].appointment_date),l=Math.floor((o.getTime()-i.getTime())/(1e3*60*60*24));l>0&&r.push(l)}return r.length===0?null:Math.round(r.reduce((a,i)=>a+i,0)/r.length)},fl=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",U7=e=>{switch(e){case"confirmed":case"upcoming":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},W7=()=>{const{customer_id:e}=Yh(),[t,r]=dt(),n=Le(),a=zs(),i=ee(X=>X.authentication_state.auth_token),o=ee(X=>X.authentication_state.authentication_status.user_type),[l,c]=f.useState("overview"),[d,u]=f.useState(""),[m,h]=f.useState(null),[y,v]=f.useState(""),[p,w]=f.useState({status:null,start_date:null,end_date:null}),[g,x]=f.useState(!1),[b,j]=f.useState(null),N="http://localhost:3000";f.useEffect(()=>{o!=="admin"&&n("/admin/login")},[o,n]),f.useEffect(()=>{const X=t.get("tab");X==="bookings"||X==="notes"?c(X):(X==="overview"||!X)&&c("overview")},[t]);const _=X=>{c(X),r({tab:X})},{data:T,isLoading:E,error:z}=we({queryKey:["admin","customer",e],queryFn:async()=>(await J.get(`${N}/api/admin/customers/${e}`,{headers:{Authorization:`Bearer ${i}`}})).data,enabled:!!e&&!!i,staleTime:5*60*1e3}),{data:k,isLoading:G,error:M}=we({queryKey:["admin","customer",e,"bookings",p],queryFn:async()=>{var _e;const X={customer_id:e,sort_by:"appointment_date",sort_order:"desc",limit:"100"};return p.status&&(X.status=p.status),p.start_date&&(X.appointment_date_from=p.start_date),p.end_date&&(X.appointment_date_to=p.end_date),(((_e=(await J.get(`${N}/api/admin/bookings`,{headers:{Authorization:`Bearer ${i}`},params:X})).data)==null?void 0:_e.bookings)||[]).map(he=>({booking_id:he.booking_id,ticket_number:he.ticket_number,status:he.status,appointment_date:he.appointment_date,appointment_time:he.appointment_time,service_id:he.service_id,service_name:he.service_name||"N/A",customer_name:he.customer_name,special_request:he.special_request,created_at:he.created_at,cancelled_at:he.cancelled_at}))},enabled:!!e&&!!i&&l==="bookings",staleTime:2*60*1e3}),{data:F,isLoading:D,error:$}=we({queryKey:["admin","customer",e,"notes"],queryFn:async()=>{const U=(await J.get(`${N}/api/admin/customers/${e}/notes`,{headers:{Authorization:`Bearer ${i}`}})).data;return Array.isArray(U)?U:U&&Array.isArray(U.notes)?U.notes:[]},enabled:!!e&&!!i&&l==="notes",staleTime:2*60*1e3}),q=ve({mutationFn:async X=>{const U=await J.post(`${N}/api/admin/customers/${e}/notes`,{note_text:X},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});return U.data.note||U.data},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),u("")}}),I=()=>{if(d.trim().length!==0){if(d.length>2e3){alert("Note text cannot exceed 2000 characters");return}q.mutate(d.trim())}},S=ve({mutationFn:async({noteId:X,noteText:U})=>{const ne=await J.patch(`${N}/api/admin/customers/${e}/notes/${X}`,{note_text:U},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});return ne.data.note||ne.data},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),h(null),v("")}}),C=X=>{if(y.trim().length!==0){if(y.length>2e3){alert("Note text cannot exceed 2000 characters");return}S.mutate({noteId:X,noteText:y.trim()})}},B=X=>{h(X.note_id),v(X.note_text)},P=()=>{h(null),v("")},A=ve({mutationFn:async X=>{await J.delete(`${N}/api/admin/customers/${e}/notes/${X}`,{headers:{Authorization:`Bearer ${i}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["admin","customer",e,"notes"]}),x(!1),j(null)}}),Y=()=>{b&&A.mutate(b)},V=X=>{j(X),x(!0)},O=()=>{x(!1),j(null)},R=f.useMemo(()=>{if(!k)return null;const X=z7(k),U=V7(k);return{favoriteService:X||"N/A",averageFrequency:U!==null?`Every ${U} days`:"N/A"}},[k]),Z=()=>{if(!T)return;const X=new URLSearchParams({customer_id:T.customer_id,customer_name:T.name,customer_email:T.email,customer_phone:T.phone});n(`/admin/bookings/new?${X.toString()}`)},K=(X,U)=>{w(ne=>({...ne,[X]:U}))};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("nav",{className:"mb-6","aria-label":"Breadcrumb",children:s.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("li",{children:s.jsx(Q,{to:"/admin/customers",className:"hover:text-blue-600 transition-colors",children:"Customers"})}),s.jsx("li",{children:s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),s.jsx("li",{className:"text-gray-900 font-medium",children:E?"Loading...":(T==null?void 0:T.name)||"Customer Detail"})]})}),s.jsx("div",{className:"mb-8",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:E?"Loading...":(T==null?void 0:T.name)||"Customer Detail"})}),z&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Failed to load customer profile"}),s.jsx("p",{className:"text-sm mt-1",children:(z==null?void 0:z.message)||"Please try again"})]}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>_("overview"),className:`${l==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Overview"}),s.jsx("button",{onClick:()=>_("bookings"),className:`${l==="bookings"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Booking History"}),s.jsx("button",{onClick:()=>_("notes"),className:`${l==="notes"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`,children:"Notes"})]})}),l==="overview"&&s.jsx("div",{className:"space-y-6",children:E?s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-lg h-64"}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg h-64"})]}):T?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Customer Information"})}),s.jsx("div",{className:"px-6 py-5 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Name"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:T.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),s.jsx("a",{href:`mailto:${T.email}`,className:"text-base font-medium text-blue-600 hover:text-blue-700 transition-colors",children:T.email})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),s.jsx("a",{href:`tel:${T.phone}`,className:"text-base font-medium text-blue-600 hover:text-blue-700 transition-colors",children:T.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Type"}),s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${T.is_registered?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:T.is_registered?"Registered":"Guest"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:T.is_registered?"Member Since":"First Booking"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:fl(T.created_at)})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Statistics"})}),s.jsxs("div",{className:"px-6 py-5",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-gray-900",children:T.total_bookings}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Total Bookings"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:T.completed_bookings}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Completed"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-red-600",children:T.cancelled_bookings}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cancelled"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:T.no_shows}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"No-shows"})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Favorite Service"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:(R==null?void 0:R.favoriteService)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Average Frequency"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:(R==null?void 0:R.averageFrequency)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Last Visit"}),s.jsx("p",{className:"text-base font-medium text-gray-900",children:fl(T.last_booking_date)})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})}),s.jsx("div",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("button",{onClick:Z,className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Booking for Customer"]}),s.jsxs("a",{href:`mailto:${T.email}`,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]}),s.jsxs("a",{href:`tel:${T.phone}`,className:"flex items-center justify-center px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call"]})]})})]})]}):null}),l==="bookings"&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking History"})}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{id:"status-filter",value:p.status||"",onChange:X=>K("status",X.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"pending",children:"Pending"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",id:"start-date",value:p.start_date||"",onChange:X=>K("start_date",X.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",id:"end-date",value:p.end_date||"",onChange:X=>K("end_date",X.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:G?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading bookings..."})]}):M?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load bookings"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(M==null?void 0:M.message)||"Please try again"})]}):k&&k.length>0?s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ticket"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(X=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Q,{to:`/admin/bookings/${X.ticket_number}`,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:X.ticket_number})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[fl(X.appointment_date)," at ",X.appointment_time]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.service_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-medium rounded-full ${U7(X.status)}`,children:X.status.charAt(0).toUpperCase()+X.status.slice(1)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:s.jsx(Q,{to:`/admin/bookings/${X.ticket_number}`,className:"text-blue-600 hover:text-blue-700 font-medium",children:"View Details"})})]},X.booking_id))})]}):s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No bookings found"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This customer hasn't made any bookings yet"})]})})]}),l==="notes"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-5 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Private Notes About This Customer"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Notes are shared with all admins for institutional knowledge"})]}),s.jsxs("div",{className:"px-6 py-5",children:[s.jsx("textarea",{value:d,onChange:X=>u(X.target.value),placeholder:"Add a note about preferences, issues, or other information...",rows:4,maxLength:2e3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 resize-none"}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[d.length," / 2000 characters"]}),s.jsx("button",{onClick:I,disabled:d.trim().length===0||q.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:q.isPending?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Note"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Previous Notes"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:D?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading notes..."})]}):$?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load notes"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:($==null?void 0:$.message)||"Please try again"})]}):F&&F.length>0?F.map(X=>s.jsx("div",{className:"px-6 py-5",children:m===X.note_id?s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:y,onChange:U=>v(U.target.value),rows:4,maxLength:2e3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 resize-none"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:[y.length," / 2000 characters"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:P,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>C(X.note_id),disabled:y.trim().length===0||S.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.isPending?"Saving...":"Save"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap mb-3",children:X.note_text}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Created by:"})," ",X.created_by,s.jsx("span",{className:"mx-2",children:""}),s.jsx("span",{children:fl(X.created_at)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>B(X),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>V(X.note_id),className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]})]})},X.note_id)):s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No notes yet"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add the first note about this customer"})]})})]})]})]})}),g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[s.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Delete Note?"})}),s.jsx("div",{className:"px-6 py-5",children:s.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this note? This action cannot be undone."})}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-3 rounded-b-xl",children:[s.jsx("button",{onClick:O,disabled:A.isPending,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:Y,disabled:A.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:A.isPending?"Deleting...":"Delete Note"})]})]})})]})},q7=()=>{const e=ee(W=>W.authentication_state.auth_token),t=ee(W=>W.update_app_settings),[r,n]=dt(),a=r.get("section"),[i,o]=f.useState(a&&["shop","booking","notifications","services"].includes(a)?a:"shop"),[l,c]=f.useState(null),[d,u]=f.useState({shop_name:"",shop_address:"",shop_phone:"",shop_email:"",operating_hours:"",capacity_mon_wed:2,capacity_thu_sun:3,booking_window_days:90,same_day_cutoff_hours:2,reminder_hours_before:2,email_confirmation_enabled:!0,email_reminder_enabled:!0,sms_enabled:!1,email_sender_name:"",email_sender_address:"",sms_sender_name:"",cancellation_policy_text:""}),[m,h]=f.useState([]),[y,v]=f.useState({service_id:null,name:"",description:"",image_url:null,duration:40,price:null,is_active:!0,display_order:0}),[p,w]=f.useState(!1),[g,x]=f.useState("add"),[b,j]=f.useState(null),[N,_]=f.useState(!1),[T,E]=f.useState({}),[z,k]=f.useState(null),[G,M]=f.useState(null),[F,D]=f.useState(null),[$,q]=f.useState(""),[I,S]=f.useState(""),C=zs(),B="http://localhost:3000",{data:P,isLoading:A,error:Y}=we({queryKey:["admin-settings"],queryFn:async()=>(await J.get(`${B}/api/admin/settings`,{headers:{Authorization:`Bearer ${e}`}})).data,enabled:!!e,staleTime:6e4});f.useEffect(()=>{P&&(c(P),u({...P}),_(!1))},[P]);const{data:V,isLoading:O}=we({queryKey:["admin-services"],queryFn:async()=>(await J.get(`${B}/api/services`,{params:{sort_by:"display_order",sort_order:"asc"},headers:{Authorization:`Bearer ${e}`}})).data.services||[],enabled:!!e&&i==="services",staleTime:6e4});f.useEffect(()=>{V&&h(V)},[V]);const R=ve({mutationFn:async W=>(await J.patch(`${B}/api/admin/settings`,W,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,onSuccess:W=>{c(W),u({...W}),_(!1),k("Settings saved successfully!"),M(null),t({shop_name:W.shop_name,shop_address:W.shop_address,shop_phone:W.shop_phone,shop_email:W.shop_email,operating_hours:W.operating_hours,capacity_mon_wed:W.capacity_mon_wed,capacity_thu_sun:W.capacity_thu_sun,booking_window_days:W.booking_window_days,same_day_cutoff_hours:W.same_day_cutoff_hours,reminder_hours_before:W.reminder_hours_before}),C.invalidateQueries({queryKey:["admin-settings"]}),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to save settings";M(ge),setTimeout(()=>M(null),5e3)}}),Z=ve({mutationFn:async W=>(await J.post(`${B}/api/admin/services`,W,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,onSuccess:W=>{h([...m,W]),w(!1),k("Service created successfully!"),C.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to create service";M(ge),setTimeout(()=>M(null),5e3)}}),K=ve({mutationFn:async W=>{const{service_id:ge,...Re}=W;return(await J.patch(`${B}/api/admin/services/${ge}`,Re,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data},onSuccess:W=>{h(m.map(ge=>ge.service_id===W.service_id?W:ge)),w(!1),k("Service updated successfully!"),C.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to update service";M(ge),setTimeout(()=>M(null),5e3)}}),X=ve({mutationFn:async W=>(await J.delete(`${B}/api/admin/services/${W}`,{headers:{Authorization:`Bearer ${e}`}}),W),onSuccess:W=>{h(m.filter(ge=>ge.service_id!==W)),D(null),k("Service deleted successfully!"),C.invalidateQueries({queryKey:["admin-services"]}),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to delete service";M(ge),setTimeout(()=>M(null),5e3)}}),U=ve({mutationFn:async W=>{await J.post(`${B}/api/admin/notifications/test`,{type:"email",recipient:W},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})},onSuccess:()=>{k("Test email sent successfully!"),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to send test email";M(ge),setTimeout(()=>M(null),5e3)}}),ne=ve({mutationFn:async W=>{await J.post(`${B}/api/admin/notifications/test`,{type:"sms",recipient:W},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})},onSuccess:()=>{k("Test SMS sent successfully!"),setTimeout(()=>k(null),3e3)},onError:W=>{var Re,De,Ye;const ge=((Ye=(De=(Re=W.response)==null?void 0:Re.data)==null?void 0:De.error)==null?void 0:Ye.message)||"Failed to send test SMS";M(ge),setTimeout(()=>M(null),5e3)}}),_e=f.useCallback(W=>{o(W),n({section:W})},[n]),he=f.useCallback((W,ge)=>{u(Re=>({...Re,[W]:ge})),_(!0),E(Re=>{const De={...Re};return delete De[W],De})},[]),mr=f.useCallback(()=>{const W={};if((!d.shop_name||d.shop_name.trim().length===0)&&(W.shop_name="Shop name is required"),(!d.shop_email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.shop_email))&&(W.shop_email="Valid email is required"),d.capacity_mon_wed<0&&(W.capacity_mon_wed="Capacity cannot be negative"),d.capacity_thu_sun<0&&(W.capacity_thu_sun="Capacity cannot be negative"),d.booking_window_days<1&&(W.booking_window_days="Booking window must be at least 1 day"),d.same_day_cutoff_hours<0&&(W.same_day_cutoff_hours="Cutoff hours cannot be negative"),(d.reminder_hours_before<1||d.reminder_hours_before>24)&&(W.reminder_hours_before="Reminder hours must be between 1 and 24"),Object.keys(W).length>0){E(W),M("Please fix validation errors before saving"),setTimeout(()=>M(null),5e3);return}E({}),R.mutate(d)},[d,R]),on=f.useCallback(()=>{l&&(u({...l}),_(!1),E({}))},[l]),Yn=f.useCallback((W,ge)=>{x(W),W==="add"?v({service_id:null,name:"",description:"",image_url:null,duration:40,price:null,is_active:!0,display_order:m.length}):ge&&v({service_id:ge.service_id,name:ge.name,description:ge.description,image_url:ge.image_url,duration:ge.duration,price:ge.price,is_active:ge.is_active,display_order:ge.display_order}),w(!0)},[m.length]),rd=f.useCallback(()=>{const W={};if((!y.name||y.name.trim().length===0)&&(W.name="Service name is required"),(!y.description||y.description.trim().length<10)&&(W.description="Description must be at least 10 characters"),y.description&&y.description.length>500&&(W.description="Description must not exceed 500 characters"),y.duration<1&&(W.duration="Duration must be positive"),y.price!==null&&y.price<0&&(W.price="Price cannot be negative"),Object.keys(W).length>0){E(W);return}if(E({}),g==="add"){const{service_id:ge,display_order:Re,...De}=y;Z.mutate(De)}else K.mutate(y)},[y,g,Z,K]),re=f.useCallback(W=>{D(W)},[]),Me=f.useCallback(()=>{F&&X.mutate(F.service_id)},[F,X]),ut=f.useCallback(W=>{j(W)},[]),ln=f.useCallback((W,ge)=>{if(W.preventDefault(),!b||b===ge)return;const Re=m.findIndex(di=>di.service_id===b),De=m.findIndex(di=>di.service_id===ge);if(Re===-1||De===-1)return;const Ye=[...m],[o2]=Ye.splice(Re,1);Ye.splice(De,0,o2);const l2=Ye.map((di,c2)=>({...di,display_order:c2}));h(l2)},[b,m]),cn=f.useCallback(()=>{j(null)},[]),ci=f.useCallback(()=>{const W=$||d.email_sender_address;if(!W){M("Please enter a recipient email address"),setTimeout(()=>M(null),3e3);return}U.mutate(W)},[$,d.email_sender_address,U]),i2=f.useCallback(()=>{if(!I){M("Please enter a recipient phone number"),setTimeout(()=>M(null),3e3);return}ne.mutate(I)},[I,ne]);return f.useEffect(()=>{const W=ge=>{N&&(ge.preventDefault(),ge.returnValue="")};return window.addEventListener("beforeunload",W),()=>window.removeEventListener("beforeunload",W)},[N]),A?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading settings..."})]})})}):Y?s.jsx(s.Fragment,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Failed to Load Settings"}),s.jsx("p",{className:"mt-2 text-gray-600",children:(Y==null?void 0:Y.message)||"An error occurred while loading settings"}),s.jsx("button",{onClick:()=>C.invalidateQueries({queryKey:["admin-settings"]}),className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Retry"})]})})})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your shop information, booking rules, and preferences"})]}),s.jsxs(Q,{to:"/admin",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]})})}),z&&s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsx("p",{className:"text-green-800 font-medium",children:z})]})})}),G&&s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),s.jsx("p",{className:"text-red-800 font-medium",children:G})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[s.jsxs("div",{className:"lg:col-span-3",children:[s.jsxs("nav",{className:"space-y-1 bg-white rounded-lg shadow-sm border border-gray-200 p-2 sticky top-4",children:[s.jsxs("button",{onClick:()=>_e("shop"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="shop"?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Shop Information"]}),s.jsxs("button",{onClick:()=>_e("booking"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="booking"?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Booking Settings"]}),s.jsxs("button",{onClick:()=>_e("notifications"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="notifications"?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Notification Settings"]}),s.jsxs("button",{onClick:()=>_e("services"),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${i==="services"?"bg-blue-50 text-blue-700 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Services"]})]}),N&&i!=="services"&&s.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 text-amber-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"You have unsaved changes"})]})})]}),s.jsx("div",{className:"mt-8 lg:mt-0 lg:col-span-9",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 lg:p-8",children:[i==="shop"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Shop Information"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"shop_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Shop Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"shop_name",value:d.shop_name,onChange:W=>he("shop_name",W.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.shop_name?"border-red-500":"border-gray-300"}`,placeholder:"BarberSlot Premium Cuts"}),T.shop_name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.shop_name})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"shop_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{id:"shop_address",rows:3,value:d.shop_address,onChange:W=>he("shop_address",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"123 Main St, City, State 12345"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"shop_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",id:"shop_phone",value:d.shop_phone,onChange:W=>he("shop_phone",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"+1 (555) 123-4567"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"shop_email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",id:"shop_email",value:d.shop_email,onChange:W=>he("shop_email",W.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.shop_email?"border-red-500":"border-gray-300"}`,placeholder:"info@barberslot.com"}),T.shop_email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.shop_email})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"operating_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),s.jsx("textarea",{id:"operating_hours",rows:3,value:d.operating_hours,onChange:W=>he("operating_hours",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:`Monday - Friday: 9:00 AM - 7:00 PM
Saturday: 10:00 AM - 6:00 PM
Sunday: Closed`}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Display information only, not enforced by booking system"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{onClick:on,disabled:!N,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),s.jsx("button",{onClick:mr,disabled:!N||R.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:R.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="booking"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Booking Settings"}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Capacity Rules"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"capacity_mon_wed",className:"block text-sm font-medium text-gray-700 mb-2",children:"Monday - Wednesday Capacity"}),s.jsx("input",{type:"number",id:"capacity_mon_wed",min:"0",value:d.capacity_mon_wed,onChange:W=>he("capacity_mon_wed",parseInt(W.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.capacity_mon_wed?"border-red-500":"border-gray-300"}`}),T.capacity_mon_wed&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.capacity_mon_wed})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"capacity_thu_sun",className:"block text-sm font-medium text-gray-700 mb-2",children:"Thursday - Sunday Capacity"}),s.jsx("input",{type:"number",id:"capacity_thu_sun",min:"0",value:d.capacity_thu_sun,onChange:W=>he("capacity_thu_sun",parseInt(W.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.capacity_thu_sun?"border-red-500":"border-gray-300"}`}),T.capacity_thu_sun&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.capacity_thu_sun})]})]}),s.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Maximum number of customers per time slot"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"booking_window_days",className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking Window (days in advance)"}),s.jsx("input",{type:"number",id:"booking_window_days",min:"1",value:d.booking_window_days,onChange:W=>he("booking_window_days",parseInt(W.target.value)||1),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.booking_window_days?"border-red-500":"border-gray-300"}`}),T.booking_window_days&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.booking_window_days}),s.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Customers can book up to this many days in advance"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"same_day_cutoff_hours",className:"block text-sm font-medium text-gray-700 mb-2",children:"Same-Day Booking Cutoff (hours)"}),s.jsx("input",{type:"number",id:"same_day_cutoff_hours",min:"0",value:d.same_day_cutoff_hours,onChange:W=>he("same_day_cutoff_hours",parseInt(W.target.value)||0),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.same_day_cutoff_hours?"border-red-500":"border-gray-300"}`}),T.same_day_cutoff_hours&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.same_day_cutoff_hours}),s.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Bookings must be made at least this many hours before the appointment"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cancellation_policy_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Policy"}),s.jsx("textarea",{id:"cancellation_policy_text",rows:4,value:d.cancellation_policy_text,onChange:W=>he("cancellation_policy_text",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"You can cancel up to 2 hours before your appointment without penalty."}),s.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Displayed to customers during booking and in confirmation"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{onClick:on,disabled:!N,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),s.jsx("button",{onClick:mr,disabled:!N||R.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:R.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="notifications"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Notification Settings"}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable booking confirmation email"}),s.jsx("button",{onClick:()=>he("email_confirmation_enabled",!d.email_confirmation_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.email_confirmation_enabled?"bg-blue-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.email_confirmation_enabled?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable booking reminder email"}),s.jsx("button",{onClick:()=>he("email_reminder_enabled",!d.email_reminder_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.email_reminder_enabled?"bg-blue-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.email_reminder_enabled?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email_sender_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender Name"}),s.jsx("input",{type:"text",id:"email_sender_name",value:d.email_sender_name,onChange:W=>he("email_sender_name",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"BarberSlot"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email_sender_address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender Email"}),s.jsx("input",{type:"email",id:"email_sender_address",value:d.email_sender_address,onChange:W=>he("email_sender_address",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"noreply@barberslot.com"})]})]}),s.jsxs("div",{className:"flex items-end space-x-3 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"test_email_recipient",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Recipient"}),s.jsx("input",{type:"email",id:"test_email_recipient",value:$,onChange:W=>q(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:d.email_sender_address||"recipient@example.com"})]}),s.jsx("button",{onClick:ci,disabled:U.isPending,className:"px-6 py-3 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:U.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Test Email"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SMS Notifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable SMS notifications"}),s.jsx("button",{onClick:()=>he("sms_enabled",!d.sms_enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.sms_enabled?"bg-blue-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.sms_enabled?"translate-x-6":"translate-x-1"}`})})]}),d.sms_enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sms_sender_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"SMS Sender Name"}),s.jsx("input",{type:"text",id:"sms_sender_name",value:d.sms_sender_name,onChange:W=>he("sms_sender_name",W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"BarberSlot"})]}),s.jsxs("div",{className:"flex items-end space-x-3 mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"test_sms_recipient",className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Recipient Phone"}),s.jsx("input",{type:"tel",id:"test_sms_recipient",value:I,onChange:W=>S(W.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"+1 (555) 123-4567"})]}),s.jsx("button",{onClick:i2,disabled:ne.isPending,className:"px-6 py-3 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:ne.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Test SMS"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reminder_hours_before",className:"block text-sm font-medium text-gray-700 mb-2",children:"Send reminder (hours before appointment)"}),s.jsx("input",{type:"number",id:"reminder_hours_before",min:"1",max:"24",value:d.reminder_hours_before,onChange:W=>he("reminder_hours_before",parseInt(W.target.value)||2),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.reminder_hours_before?"border-red-500":"border-gray-300"}`}),T.reminder_hours_before&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.reminder_hours_before}),s.jsx("p",{className:"mt-1 text-xs text-gray-600",children:"Reminder will be sent this many hours before the appointment (1-24)"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{onClick:on,disabled:!N,className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),s.jsx("button",{onClick:mr,disabled:!N||R.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:R.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]}),i==="services"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Services"}),s.jsxs("button",{onClick:()=>Yn("add"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors inline-flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Service"]})]}),O?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading services..."})]}):m.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No services yet"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Get started by creating your first service"}),s.jsx("button",{onClick:()=>Yn("add"),className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Create First Service"})]}):s.jsx("div",{className:"space-y-3",children:m.map(W=>s.jsx("div",{draggable:!0,onDragStart:()=>ut(W.service_id),onDragOver:ge=>ln(ge,W.service_id),onDragEnd:cn,className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-move",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 mr-4 text-gray-400 cursor-grab active:cursor-grabbing",children:s.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})}),W.image_url?s.jsx("img",{src:W.image_url,alt:W.name,className:"w-16 h-16 rounded-lg object-cover mr-4"}):s.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-200 flex items-center justify-center mr-4",children:s.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:W.name}),s.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:W.description}),s.jsxs("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-500",children:[s.jsxs("span",{children:[W.duration," min"]}),W.price!==null&&s.jsxs("span",{children:["$",typeof W.price=="number"?W.price.toFixed(2):parseFloat(String(W.price)).toFixed(2)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 mr-4",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Active"}),s.jsx("div",{className:`w-10 h-6 rounded-full transition-colors ${W.is_active?"bg-green-500":"bg-gray-300"}`,children:s.jsx("div",{className:`w-4 h-4 mt-1 rounded-full bg-white transition-transform ${W.is_active?"ml-5":"ml-1"}`})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Yn("edit",W),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:()=>re(W),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},W.service_id))})]})]})})]})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g==="add"?"Add New Service":"Edit Service"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"service_name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Service Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"service_name",value:y.name,onChange:W=>v({...y,name:W.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.name?"border-red-500":"border-gray-300"}`,placeholder:"Haircut"}),T.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.name})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"service_description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{id:"service_description",rows:4,value:y.description,onChange:W=>v({...y,description:W.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${T.description?"border-red-500":"border-gray-300"}`,placeholder:"Professional haircut service..."}),s.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[y.description.length,"/500 characters"]}),T.description&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:T.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"service_duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),s.jsx("input",{type:"number",id:"service_duration",min:"1",value:y.duration,onChange:W=>v({...y,duration:parseInt(W.target.value)||40}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"service_price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (optional)"}),s.jsx("input",{type:"number",id:"service_price",min:"0",step:"0.01",value:y.price||"",onChange:W=>v({...y,price:W.target.value?parseFloat(W.target.value):null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"25.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"service_image_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL (optional)"}),s.jsx("input",{type:"url",id:"service_image_url",value:y.image_url||"",onChange:W=>v({...y,image_url:W.target.value||null}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-gray-200",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Service is active"}),s.jsx("button",{onClick:()=>v({...y,is_active:!y.is_active}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${y.is_active?"bg-blue-600":"bg-gray-300"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${y.is_active?"translate-x-6":"translate-x-1"}`})})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-4",children:[s.jsx("button",{onClick:()=>{w(!1),E({})},className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:rd,disabled:Z.isPending||K.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:Z.isPending||K.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Service"})]})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"ml-4 text-xl font-bold text-gray-900",children:"Delete Service?"})]}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Are you sure you want to delete ",s.jsx("strong",{children:F.name}),"?"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Existing bookings will retain this service for records."})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 rounded-b-lg",children:[s.jsx("button",{onClick:()=>D(null),className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Me,disabled:X.isPending,className:"px-6 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center",children:X.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete"})]})]})})]})})},As=e=>e.toISOString().split("T")[0],zg=e=>{const t=new Date;switch(e){case"today":return{start_date:As(t),end_date:As(t)};case"this_week":{const r=new Date(t);return r.setDate(t.getDate()-t.getDay()),{start_date:As(r),end_date:As(t)}}case"this_month":{const r=new Date(t.getFullYear(),t.getMonth(),1);return{start_date:As(r),end_date:As(t)}}default:return{start_date:As(t),end_date:As(t)}}},H7=(e,t)=>{const r=new Date(e),n=new Date(t),a=Math.abs(n.getTime()-r.getTime());return Math.ceil(a/(1e3*60*60*24))+1},K7=()=>{const[e]=dt(),t=ee(A=>A.authentication_state.auth_token),r=ee(A=>A.app_settings.shop_name),n="http://localhost:3000",a=e.get("preset"),i=e.get("start_date"),o=e.get("end_date"),l=e.get("group_by")||"service",c=f.useMemo(()=>{if(i&&o)return{start_date:i,end_date:o,preset:"custom"};const A=a||"today";return{...zg(A),preset:A}},[i,o,a]),[d,u]=f.useState(c),[m,h]=f.useState(c.start_date),[y,v]=f.useState(c.end_date),[p]=f.useState(l),[w]=f.useState(""),[g]=f.useState(""),[x,b]=f.useState(!1),[j,N]=f.useState({include_fields:["ticket_number","customer_name","appointment_date","appointment_time","service_name","status","special_request"],date_range:{start_date:d.start_date,end_date:d.end_date}});f.useEffect(()=>{N(A=>({...A,date_range:{start_date:d.start_date,end_date:d.end_date}}))},[d]);const{data:_,isLoading:T,error:E,refetch:z}=we({queryKey:["admin-reports",d.start_date,d.end_date,p,w,g],queryFn:async()=>{const A=new URLSearchParams({start_date:d.start_date,end_date:d.end_date,group_by:p});return w&&A.append("service_id",w),g&&A.append("status",g),(await J.get(`${n}/api/admin/reports/bookings?${A}`,{headers:{Authorization:`Bearer ${t}`}})).data},enabled:!!t&&!!d.start_date&&!!d.end_date,staleTime:5*60*1e3,retry:1}),k=f.useMemo(()=>{if(!_)return{total_bookings:0,completed:0,cancelled:0,no_shows:0,show_up_rate:0,cancellation_rate:0,total_revenue:null};const A=_.total_bookings||0,Y=_.completed||0,V=_.cancelled||0,O=_.no_shows||0,R=Y+O>0?Y/(Y+O)*100:0,Z=A>0?V/A*100:0;return{total_bookings:A,completed:Y,cancelled:V,no_shows:O,show_up_rate:R,cancellation_rate:Z,total_revenue:_.total_revenue||null}},[_]),G=f.useMemo(()=>!(_!=null&&_.by_service)||k.total_bookings===0?[]:_.by_service.map(A=>({service_name:A.service_name,count:A.count,percentage:A.count/k.total_bookings*100})),[_,k.total_bookings]),M=f.useMemo(()=>{if(!(_!=null&&_.by_day_of_week))return[];const A=H7(d.start_date,d.end_date);return _.by_day_of_week.map(Y=>({day:Y.day,count:Y.count,average:A>0?Y.count/Math.ceil(A/7):0}))},[_,d]),F=f.useMemo(()=>_!=null&&_.by_time_slot?_.by_time_slot.map(A=>({time:A.time,count:A.count,utilization:A.total_capacity&&A.total_capacity>0?A.count/A.total_capacity*100:0})):[],[_]),D=f.useMemo(()=>!_||k.total_bookings===0?[]:[{status:"Completed",count:k.completed,percentage:k.completed/k.total_bookings*100},{status:"Cancelled",count:k.cancelled,percentage:k.cancelled/k.total_bookings*100},{status:"No-show",count:k.no_shows,percentage:k.no_shows/k.total_bookings*100}].filter(A=>A.count>0),[_,k]),$=ve({mutationFn:async A=>{const Y=new URLSearchParams({start_date:A.date_range.start_date,end_date:A.date_range.end_date,fields:A.include_fields.join(","),format:"csv"}),V=await J.get(`${n}/api/admin/reports/export?${Y}`,{headers:{Authorization:`Bearer ${t}`},responseType:"blob"}),O=new Blob([V.data],{type:"text/csv"}),R=window.URL.createObjectURL(O),Z=document.createElement("a");Z.href=R,Z.download=`bookings_report_${A.date_range.start_date}_${A.date_range.end_date}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),window.URL.revokeObjectURL(R)}}),q=A=>{if(A==="custom")u({start_date:m,end_date:y,preset:"custom"});else{const Y=zg(A);u({...Y,preset:A}),h(Y.start_date),v(Y.end_date)}},I=()=>{m&&y&&u({start_date:m,end_date:y,preset:"custom"})},S=()=>{z()},C=()=>{$.mutate(j),b(!1)},B=A=>{N(Y=>({...Y,include_fields:Y.include_fields.includes(A)?Y.include_fields.filter(V=>V!==A):[...Y.include_fields,A]}))},P=[{value:"ticket_number",label:"Ticket Number"},{value:"customer_name",label:"Customer Name"},{value:"customer_email",label:"Customer Email"},{value:"customer_phone",label:"Customer Phone"},{value:"appointment_date",label:"Date"},{value:"appointment_time",label:"Time"},{value:"service_name",label:"Service"},{value:"status",label:"Status"},{value:"special_request",label:"Special Request"},{value:"admin_notes",label:"Admin Notes"}];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Reports and Analytics"}),s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Business intelligence and booking insights for ",r]})]}),s.jsx(Q,{to:"/admin",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:" Back to Dashboard"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-[200px]",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>q("today"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="today"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Today"}),s.jsx("button",{onClick:()=>q("this_week"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="this_week"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"This Week"}),s.jsx("button",{onClick:()=>q("this_month"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="this_month"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"This Month"}),s.jsx("button",{onClick:()=>q("custom"),className:`px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${d.preset==="custom"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Custom Range"})]})]}),d.preset==="custom"&&s.jsxs("div",{className:"flex items-end gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),s.jsx("input",{type:"date",value:m,onChange:A=>h(A.target.value),max:As(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),s.jsx("input",{type:"date",value:y,onChange:A=>v(A.target.value),max:As(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsx("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium",children:"Apply"})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("button",{onClick:S,disabled:T,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:T?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Generate Report"})})]})})}),E&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-6 w-6 text-red-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load report"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:E instanceof Error?E.message:"An error occurred while fetching the report data."})]})]})}),T&&s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 mb-6",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600 mb-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading report data..."})]})}),!T&&!E&&k.total_bookings===0&&s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bookings in selected date range"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Try expanding your date range or adjusting your filters to see data."}),s.jsx("button",{onClick:()=>q("this_month"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"View This Month"})]})}),!T&&!E&&k.total_bookings>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Total Bookings"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),s.jsx("p",{className:"text-4xl font-bold",children:k.total_bookings})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Completed"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),s.jsx("p",{className:"text-4xl font-bold",children:k.completed}),s.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[k.total_bookings>0?(k.completed/k.total_bookings*100).toFixed(1):0,"% of total"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Cancelled"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),s.jsx("p",{className:"text-4xl font-bold",children:k.cancelled}),s.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[k.cancellation_rate.toFixed(1),"% cancellation rate"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"No-shows"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),s.jsx("p",{className:"text-4xl font-bold",children:k.no_shows}),s.jsxs("p",{className:"text-sm opacity-90 mt-1",children:[k.total_bookings>0?(k.no_shows/k.total_bookings*100).toFixed(1):0,"% of total"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Show-up Rate"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),s.jsxs("p",{className:"text-4xl font-bold",children:[k.show_up_rate.toFixed(1),"%"]}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:"of scheduled appointments"})]}),k.total_revenue!==null&&s.jsxs("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl shadow-lg p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Total Revenue"}),s.jsx("svg",{className:"h-8 w-8 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),s.jsxs("p",{className:"text-4xl font-bold",children:["$",k.total_revenue.toFixed(2)]}),s.jsx("p",{className:"text-sm opacity-90 mt-1",children:"from completed bookings"})]})]}),G.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Breakdown by Service"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Name"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visual"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map((A,Y)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.service_name||"No Service"}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:A.count}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:[A.percentage.toFixed(1),"%"]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center",children:s.jsx("div",{className:"w-full max-w-xs bg-gray-200 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500",style:{width:`${Math.min(A.percentage,100)}%`}})})})})]},Y))})]})})]}),M.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Breakdown by Day of Week"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average per Week"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map((A,Y)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.day}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:A.count}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:A.average.toFixed(1)})]},Y))})]})})]}),F.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Breakdown by Time Slot"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilization"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visual"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map((A,Y)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.time}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:A.count}),s.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-700",children:[A.utilization.toFixed(1),"%"]}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center",children:s.jsx("div",{className:"w-full max-w-xs bg-gray-200 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${A.utilization>=80?"bg-red-500":A.utilization>=50?"bg-orange-500":"bg-green-500"}`,style:{width:`${Math.min(A.utilization,100)}%`}})})})})]},Y))})]})})]}),D.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Breakdown by Status"}),s.jsx("div",{className:"space-y-4",children:D.map((A,Y)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-32 text-sm font-medium text-gray-900",children:A.status}),s.jsx("div",{className:"flex-1 ml-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-8 overflow-hidden",children:s.jsx("div",{className:`h-8 rounded-full flex items-center justify-end pr-3 text-white text-sm font-medium transition-all duration-500 ${A.status==="Completed"?"bg-green-600":A.status==="Cancelled"?"bg-red-600":"bg-orange-600"}`,style:{width:`${Math.min(A.percentage,100)}%`},children:A.percentage>10&&`${A.percentage.toFixed(1)}%`})}),s.jsxs("div",{className:"ml-3 text-sm font-medium text-gray-900 whitespace-nowrap",children:[A.count," (",A.percentage.toFixed(1),"%)"]})]})})]},Y))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Booking Trend"}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-200 p-12 text-center",children:[s.jsx("svg",{className:"mx-auto h-16 w-16 text-blue-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),s.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"Trend Chart Coming Soon"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["The time series trend endpoint is currently being implemented.",s.jsx("br",{}),"This will show booking trends over the selected date range."]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Export Data"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Download your report data as a CSV file"})]}),s.jsx("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Export to CSV"})]})})]})]})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Export to CSV"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:s.jsxs("p",{className:"text-sm text-gray-900",children:[j.date_range.start_date," to ",j.date_range.end_date]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Include Fields"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(A=>s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:j.include_fields.includes(A.value),onChange:()=>B(A.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:A.label})]},A.value))})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),s.jsx("button",{onClick:C,disabled:$.isPending||j.include_fields.length===0,className:"px-6 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:$.isPending?s.jsxs("span",{className:"flex items-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):"Export CSV"})]})]})})]})},G7=new lk({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),W0=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Loading..."})]})}),Vg=({children:e})=>{const t=ee(a=>a.authentication_state.authentication_status.is_authenticated),r=ee(a=>a.authentication_state.authentication_status.is_loading),n=ee(a=>a.authentication_state.authentication_status.user_type);return r?s.jsx(W0,{}):!t||n!=="user"?s.jsx(Zh,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})},Ht=({children:e})=>{const t=ee(a=>a.authentication_state.authentication_status.is_authenticated),r=ee(a=>a.authentication_state.authentication_status.is_loading),n=ee(a=>a.authentication_state.authentication_status.user_type);return r?s.jsx(W0,{}):!t||n!=="admin"?s.jsx(Zh,{to:"/admin/login",replace:!0}):s.jsx(s.Fragment,{children:e})},Q7=()=>{const e=ee(n=>n.authentication_state.authentication_status.is_loading),t=ee(n=>n.initialize_auth),r=ee(n=>n.fetch_app_settings);return f.useEffect(()=>{(async()=>{await t(),await r()})()},[t,r]),e?s.jsx(W0,{}):s.jsx(F_,{children:s.jsx(ck,{client:G7,children:s.jsxs("div",{className:"App min-h-screen flex flex-col bg-gray-50",children:[s.jsx(_5,{}),s.jsx(C5,{}),s.jsx("main",{className:"flex-1",children:s.jsxs(T_,{children:[s.jsx(ke,{path:"/",element:s.jsx(aT,{})}),s.jsx(ke,{path:"/book/service",element:s.jsx(iT,{})}),s.jsx(ke,{path:"/book/date",element:s.jsx(uT,{})}),s.jsx(ke,{path:"/book/time",element:s.jsx(mT,{})}),s.jsx(ke,{path:"/book/details",element:s.jsx($T,{})}),s.jsx(ke,{path:"/book/review",element:s.jsx(WT,{})}),s.jsx(ke,{path:"/booking/confirmation",element:s.jsx(YT,{})}),s.jsx(ke,{path:"/booking/:ticket_number",element:s.jsx(eE,{})}),s.jsx(ke,{path:"/search",element:s.jsx(JT,{})}),s.jsx(ke,{path:"/gallery",element:s.jsx(tE,{})}),s.jsx(ke,{path:"/register",element:s.jsx(sE,{})}),s.jsx(ke,{path:"/login",element:s.jsx(rE,{})}),s.jsx(ke,{path:"/verify-email",element:s.jsx(nE,{})}),s.jsx(ke,{path:"/verify-email/success",element:s.jsx(aE,{})}),s.jsx(ke,{path:"/reset-password",element:s.jsx(lE,{})}),s.jsx(ke,{path:"/reset-password/confirm",element:s.jsx(uE,{})}),s.jsx(ke,{path:"/reset-password/success",element:s.jsx(mE,{})}),s.jsx(ke,{path:"/admin/login",element:s.jsx(f7,{})}),s.jsx(ke,{path:"/dashboard",element:s.jsx(Vg,{children:s.jsx(xE,{})})}),s.jsx(ke,{path:"/profile",element:s.jsx(Vg,{children:s.jsx(h7,{})})}),s.jsx(ke,{path:"/admin",element:s.jsx(Ht,{children:s.jsx(x7,{})})}),s.jsx(ke,{path:"/admin/bookings/calendar",element:s.jsx(Ht,{children:s.jsx(_7,{})})}),s.jsx(ke,{path:"/admin/bookings",element:s.jsx(Ht,{children:s.jsx(T7,{})})}),s.jsx(ke,{path:"/admin/bookings/new",element:s.jsx(Ht,{children:s.jsx(A7,{})})}),s.jsx(ke,{path:"/admin/bookings/:ticket_number",element:s.jsx(Ht,{children:s.jsx(E7,{})})}),s.jsx(ke,{path:"/admin/capacity",element:s.jsx(Ht,{children:s.jsx(M7,{})})}),s.jsx(ke,{path:"/admin/blocking",element:s.jsx(Ht,{children:s.jsx(L7,{})})}),s.jsx(ke,{path:"/admin/gallery",element:s.jsx(Ht,{children:s.jsx(F7,{})})}),s.jsx(ke,{path:"/admin/gallery/upload",element:s.jsx(Ht,{children:s.jsx(O7,{})})}),s.jsx(ke,{path:"/admin/customers",element:s.jsx(Ht,{children:s.jsx(I7,{})})}),s.jsx(ke,{path:"/admin/customers/:customer_id",element:s.jsx(Ht,{children:s.jsx(W7,{})})}),s.jsx(ke,{path:"/admin/settings",element:s.jsx(Ht,{children:s.jsx(q7,{})})}),s.jsx(ke,{path:"/admin/reports",element:s.jsx(Ht,{children:s.jsx(K7,{})})}),s.jsx(ke,{path:"*",element:s.jsx(Zh,{to:"/",replace:!0})})]})}),s.jsx(k5,{}),s.jsx(S5,{}),s.jsx(E5,{}),s.jsx(P5,{})]})})})},Y7=()=>s.jsx(s.Fragment,{children:s.jsx(Q7,{})});hv(document.getElementById("root")).render(s.jsx(Y7,{}));
