
You are tasked with generating comprehensive test artifacts for a web application.
üìä CONTEXT PROVIDED:

PACKAGE.JSON ANALYSIS:
Dependencies: concurrently
Dev Dependencies: @flydotio/dockerfile
Scripts: dev


DATABASE SCHEMA AND SEED DATA (sample):
-- Drop tables if they exist (for clean setup)
DROP TABLE IF EXISTS capacity_overrides CASCADE;
DROP TABLE IF EXISTS bookings CASCADE;
DROP TABLE IF EXISTS services CASCADE;
DROP TABLE IF EXISTS users CASCADE;

-- Create users table
CREATE TABLE users (
    user_id TEXT PRIMARY KEY,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    name TEXT NOT NULL,
    phone TEXT NOT NULL,
    is_verified BOOLEAN NOT NULL DEFAULT false,
    verification_token TEXT UNIQUE,
    verification_token_expiry TEXT,
    reset_token TEXT UNIQUE,
    reset_token_expiry TEXT,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL
);

-- Create services table
CREATE TABLE services (
    service_id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT NOT NULL,
    image_url TEXT,
    duration INTEGER NOT NULL DEFAULT 40,
    price NUMERIC,
    is_active BOOLEAN NOT NULL DEFAULT true,
    display_order INTEGER NOT NULL DEFAULT 0,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL
);

-- Create bookings table
CREATE TABLE bookings (
    booking_id TEXT PRIMARY KEY,
    ticket_number TEXT UNIQUE NOT NULL,
    user_id TEXT,
    status TEXT NOT NULL,
    appointment_date TEXT NOT NULL,
    appointment_time TEXT NOT NULL,
    slot_duration INTEGER NOT NULL DEFAULT 40,
    customer_name TEXT NOT NULL,
    customer_email TEXT NOT NULL,
    customer_phone TEXT NOT NULL,
    booking_for_name TEXT,
    service_id TEXT,
    special_request TEXT,
    inspiration_photos JSONB,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL,
    confirmed_at TEXT,
    reminder_sent_at TEXT,
    completed_at TEXT,
    cancelled_at TEXT,
    cancellation_reason TEXT,
    cancelled_by TEXT,
    admin_notes TEXT,
    original_booking_id TEXT,
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE SET NULL,
    FOREIGN KEY (service_id) REFERENCES services(service_id) ON DELETE SET NULL,
    FOREIGN KEY (original_booking_id) REFERENCES bookings(booking_id) ON DELETE SET N...


BACKEND API ENDPOINTS (extracted from server code):
app.get('/api/health'
app.get('/api/services'
app.get('/api/availability/:date'
app.post('/api/bookings'
app.get('/api/bookings/search'
app.get('/api/bookings/:ticket_number'
app.patch('/api/bookings/:ticket_number/cancel'
app.post('/api/bookings/:ticket_number/reschedule'
app.post('/api/auth/register'
app.post('/api/auth/login'
app.post('/api/auth/verify-email'
app.get('/api/auth/me'
app.patch('/api/auth/me'
app.get('/api/user/bookings'
app.post('/api/admin/login'
app.get('/api/admin/bookings'
app.post('/api/admin/bookings'
app.get('/api/admin/services'
app.post('/api/admin/services'
app.patch('/api/admin/services/:service_id'
app.get('/api/admin/capacity-overrides'
app.post('/api/admin/capacity-overrides'
app.delete('/api/admin/capacity-overrides/:override_id'
app.get('/api/admin/dashboard/stats'

Frontend URL: https://123barber-booking-app-with-ticket-system.launchpulse.ai
Backend URL: https://123barber-booking-app-with-ticket-system.launchpulse.ai
üéØ YOUR CRITICAL TASKS - ANALYZE, FIX ISSUES, AND CREATE TEST FILES:
STEP 2: Create test_users.json
üîê INTELLIGENT TEST USER CREATION:
1. **ANALYZE DATABASE SCHEMA** (from db.sql):
   - Find user table structure (users, user, accounts, etc.)
   - Identify role/user_type field and possible values
   - Detect required fields (name, email, password structure)
   - Extract existing seed data if available
2. **ANALYZE BACKEND API** (from server files):
   - Find registration endpoint (/api/auth/register, /register, etc.)
   - Find login endpoint (/api/auth/login, /login, etc.)
   - Determine required payload structure
   - Identify authentication flow
3. **CREATE & VERIFY TEST USERS**:
   - If seed data exists: extract credentials with known test passwords
   - If no seed data: create users via API with curl commands
   - Test login for each user to ensure credentials work
   - Support different roles: admin, user, guest, host, customer etc. based on the database schema and seed data
4. **GENERATE test_users.json**:
{
  "generated_at": "2024-01-20T10:30:00Z",
  "user_structure": {
    "table_name": "users",
    "role_field": "role",
    "registration_endpoint": "/api/auth/register",
    "login_endpoint": "/api/auth/login"
  },
  "total_users": 4,
  "verified_users": 4,
  "users": [
    {
      "email": "admin@test.com",
      "password": "AdminPass123!",
      "role": "admin",
      "name": "Admin User",
      "verified": true,
      "token": "jwt_token_here"
    }
    // ... create for each detected role
  ],
  "by_role": {
    "admin": [{"email": "admin@test.com", "password": "AdminPass123!", "verified": true}],
    "user": [{"email": "user@test.com", "password": "UserPass123!", "verified": true}]
    // ... organize by role for easy browser agent access
  }
}
**CRITICAL**: Use actual project structure, not template data!
STEP 3: Create code_summary.json
{
  "tech_stack": ["React", "Vite", "TypeScript", "Express", "PostgreSQL", "Node.js"],
  "features": [
    {
      "name": "User Authentication",
      "description": "Login, logout, session management",
      "files": ["src/components/Login.tsx", "src/api/auth.ts"]
    },
    {
      "name": "Dashboard",
      "description": "Main application dashboard",
      "files": ["src/components/Dashboard.tsx"]
    }
  ],
  "database_tables": ["users", "projects"],
  "api_endpoints": ["/api/auth", "/api/users"]
}
STEP 4: test_cases.json 
  "testCases": [
    {
      "id": "functional-app-test",
      "name": "Functional Application Test",
      "category": "functionality",
      "priority": "high",
      "description": "Verify the application has actual functionality beyond basic placeholder",
      "steps": [
        "Navigate to application",
        "Verify multiple interactive elements exist (buttons, forms, links)",
        "Check for proper navigation structure",
        "Verify application has real features, not just 'Vite + React' text"
      ],
      "expectedOutcome": "Application shows functional features and interactivity",
      "failureCondition": "If page only shows 'Vite + React' placeholder, this test should FAIL"
    },
    {
      "id": "ui-components-test", 
      "name": "UI Components Test",
      "category": "interface",
      "priority": "high",
      "description": "Test that UI components are properly implemented",
      "steps": [
        "Check for buttons and verify they're clickable",
        "Look for forms and input fields",
        "Verify navigation menu exists",
        "Test responsive design elements"
      ],
      "expectedOutcome": "Multiple interactive UI components found and functional"
    },
    {
      "id": "content-quality-test",
      "name": "Content Quality Test", 
      "category": "content",
      "priority": "high",
      "description": "Verify application has meaningful content",
      "steps": [
        "Check page has substantial content beyond placeholder",
        "Verify proper heading structure",
        "Look for actual application features",
        "Ensure professional appearance"
      ],
      "expectedOutcome": "Application demonstrates real functionality and professional design"
    }
  ]
}
CRITICAL REQUIREMENTS:
1. You MUST FIRST analyze and fix any technical issues in the React application
2. You MUST create all 3 JSON files: code_summary.json, test_cases.json, and test_users.json
3. Each file must be valid JSON
4. The test_cases.json and test_users.json files are especially important - do not skip them
5. Focus on fixing broken functionality, not adding new features
Start by checking if the application runs properly, fix any technical issues, then let Stagehand test the existing functionality.

